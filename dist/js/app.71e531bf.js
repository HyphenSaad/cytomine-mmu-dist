(function(e){function t(t){for(var r,s,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0080":function(e,t,n){"use strict";n("0c69")},"00b9":function(e,t,n){"use strict";n("b4d7")},"00e4":function(e,t,n){},"02bd":function(e,t,n){"use strict";n("4292")},"0302":function(e,t,n){"use strict";n("abeb")},"0359":function(e,t,n){"use strict";n("b4e7")},"042d":function(e,t,n){},"04b0":function(e,t,n){"use strict";n("6c99")},"059d":function(e,t,n){},"06f5":function(e,t,n){},"0a09":function(e,t,n){"use strict";n("1cee")},"0a9d4":function(e,t,n){},"0aa9":function(e,t,n){},"0b1e":function(e,t,n){"use strict";n("3c8d")},"0b21":function(e,t,n){},"0b4e":function(e,t,n){"use strict";n("81a7")},"0bc9":function(e,t,n){},"0c69":function(e,t,n){},"0ca2":function(e,t,n){"use strict";n("6a99a")},"0df9":function(e,t,n){},"0e8b":function(e,t,n){"use strict";n("96a6")},"0fc4":function(e,t,n){"use strict";n("5fac")},1004:function(e,t,n){},1157:function(e,t,n){"use strict";n("7d06")},1448:function(e,t,n){},1466:function(e,t,n){},"14c4":function(e,t,n){"use strict";n("5779")},1617:function(e,t,n){"use strict";n("c00e")},1646:function(e,t,n){},1720:function(e,t,n){"use strict";n("731a")},"179f":function(e,t,n){"use strict";n("d3be")},"17c1":function(e,t,n){},"184e":function(e,t,n){"use strict";n("4fe3")},"1aee":function(e,t,n){},"1c71":function(e){e.exports=JSON.parse('{"project":"Projet","projects":"Projets","storage":"Stockage","help":"Aide","shortcuts":"Raccourcis","about-cytomine":"À propos de Cytomine","account":"Compte","logout":"Se déconnecter","dashboard":"Tableau de bord","image":"Image","images":"Images","annotation":"Annotation","annotations":"Annotations","activity":"Activité","analysis":"Analyse","analyses":"Analyses","configuration":"Configuration","no-project":"Aucun projet à afficher","no-image":"Aucune image à afficher","no-image-recently-opened":"Aucune image consultée récemment","statistics":"Statistiques","user-annotations":"Annotations manuelles","analysis-annotations":"Annotations d\'analyse","reviewed-annotations":"Annotations validées","profile":"Profil","username":"Nom d\'utilisateur","firstname":"Prénom","lastname":"Nom","email":"Adresse e-mail","button-save":"Sauvegarder","notif-success-user-details-saved":"Profil mis à jour avec succès","notif-error-user-details-not-saved":"Une erreur a empêché la mise à jour du profil","password":"Mot de passe","password-current":"Mot de passe actuel","password-new":"Nouveau mot de passe","password-confirm":"Nouveau mot de passe (confirmation)","notif-success-password-saved":"Mot de passe mis à jour avec succès","notif-error-password-not-saved":"Une erreur a empêché de sauvegarder le mot de passe","api-keys":"Clés API","public-key":"Clé publique","private-key":"Clé privée","regenerate-api-keys":"Regénérer","notif-success-keys-regenerated":"Clés API mises à jour avec succès","notif-error-keys-not-regenerated":"Une erreur a empêché de regénérer les clés API","login":"Authentification","remember-me":"Se rappeler de moi","notif-success-login":"Bienvenue sur Cytomine","notif-unexpected-error":"Une erreur inattendue s\'est produite","annotation-layers":"Calques d\'annotations","select-layer":"Sélectionner un calque","button-add":"Ajouter","button-added":"Ajouté","layers-opacity":"Opacité des calques","terms":"Termes","no-term":"Aucun terme","brightness":"Luminosité","contrast":"Contraste","hue":"Teinte","saturation":"Saturation","select":"Sélectionner","point":"Point","line":"Ligne","freehand-line":"Ligne à main levée","rectangle":"Rectangle","circle":"Cercle","polygon":"Polygone","freehand-polygon":"Polygone à main levée","freehand-correct-add":"Corriger l\'annotation en lui ajoutant un polygone à main levée","freehand-correct-remove":"Corriger l\'annotation en lui soustrayant un polygone à main levée","display-annot-details":"Afficher les détails de l\'annotation sélectionnée","fill":"Remplir","modify":"Modifier","move":"Déplacer","rotate":"Pivoter","delete":"Supprimer","rename":"Renommer","undo":"Annuler","redo":"Refaire","confirm-deletion":"Confirmer la suppression","confirm-deletion-annotation":"Êtes-vous sûr de vouloir supprimer cette annotation?","button-confirm":"Confirmer","button-cancel":"Annuler","notif-error-annotation-update":"Une erreur a empêché de modifier l\'annotation","notif-error-undo":"Une erreur a empêché d\'annuler la dernière action","notif-error-redo":"Une erreur a empêché de rétablir la dernière action","notif-error-annotation-deletion":"Une erreur a empêché la suppression de l\'annotation","notif-error-annotation-creation":"Une erreur a empêché la création de l\'annotation","notif-error-annotation-correction":"Une erreur a empêché la correction de l\'annotation","notif-error-annotation-fill":"Une erreur a empêché le remplissage de l\'annotation","filename":"Nom de fichier","height":"Hauteur","width":"Largeur","magnification":"Grossissement","resolution":"Résolution","unknown":"Inconnu","information":"Information","name":"Nom","button-open":"Ouvrir","description":"Description","ontology":"Ontologie","number-user-annotations":"Nombre d\'annotations manuelles","number-analysis-annotations":"Nombre d\'annotations d\'analyse","number-reviewed-annotations":"Nombre d\'annotations validées","no-description":"Pas de description","search-placeholder":"Recherche","creator":"Créateur","managers":"Responsables","contributors":"Contributeurs","online":"En ligne","representatives":"Personnes de contact","representative":"Personne de contact","manager":"Responsable","role":"Rôle","contributor":"Contributeur","button-less":"Moins","button-more":"Plus","count-per-page":"{count} par page","overview":"Aperçu","originalFilename":"Nom du fichier d\'origine","format":"Format","pixels":"pixels","nm-per-pixel":"nm/pixel","um-per-pixel":"µm/pixel","mm-per-pixel":"mm/pixel","vendor":"Marque du scanner","image-size":"Taille de l\'image","status":"Statut","button-add-image":"Ajouter une image","actions":"Actions","button-rename":"Renommer","button-properties":"Propriétés","button-download":"Télécharger","button-delete":"Supprimer","recently-opened":"Consultés récemment","last-opened-image":"Dernière image consultée","view-all-projects":"Voir tous les projets","no-recent-project":"Aucun projet consulté récemment","no-recent-image":"Aucune image consultée récemment","advanced-search":"Recherche avancée","button-view-all":"Tout voir","members":"Membres","new-project":"Nouveau projet","last-activity":"Dernière activité","created-on":"Créé le","button-show-filters":"Montrer les filtres","button-hide-filters":"Cacher les filtres","all":"Tous","all-images":"Toutes","all-analyses":"Toutes","all-ontologies":"Toutes","all-resolutions":"Toutes","all-dates":"Toutes","my-role":"Mon rôle","legend":"Légende","contributor-icon-label":"Vous êtes un contributeur du projet","manager-icon-label":"Vous êtes un responsable du projet","representative-icon-label":"Vous êtes une personne de contact du projet","and-count-others":"- | et un autre | et {count} autres","select-options":"Sélectionner les options","select-all":"Tout sélectionner","delete-project":"Supprimer le projet","delete-project-confirmation-message":"Êtes-vous sûr de vouloir supprimer le projet {projectName} ? <br> Toutes les données de ce projet seront irrémédiablement perdues","notif-success-project-deletion":"Le projet {projectName} a été supprimé","notif-error-project-deletion":"Une erreur a empêché la suppression du projet {projectName}","delete-image":"Supprimer l\'image","delete-image-confirmation-message":"Êtes-vous sûr de vouloir supprimer l\'image {imageName} ? <br> Cette action ne pourra être annulée","notif-success-image-deletion":"L\'image {imageName} a été supprimée","notif-error-image-deletion":"Une erreur a empêché la suppression de l\'image {imageName}","notif-success-add-image":"L\'image {imageName} a été ajoutée au projet {projectName}","notif-error-add-image":"Une erreur a empêché d\'ajouter l\'image {imageName} au projet {projectName}","in-project":"dans {projectName}","annotation-type":"Type d\'annotation","multiple-terms":"Plusieurs termes","created-by":"Créé par","properties":"Propriétés","no-properties":"Aucune propriété","tags":"Tags","no-tag":"Aucun tag","button-new-tag":"Nouveau tag","notif-success-tag-creation":"Le tag a bien été créé","notif-error-tag-creation":"Une erreur a empếché la création du tag","notif-error-add-tags":"Une erreur a empêché de créer les tags sélectionnés","associate-tags":"Associer des tags","notif-success-add-tag-domain-association":"Les tags sélectionnés ont été associés","notif-error-add-tag-domain-associations":"Une erreur a empêché d\'associer les tags sélectionnés","search-or-create-tag":"Rechercher un tag (ou créer un nouveau en entrant son nom suivi de la touche Enter)...","delete-tag":"Supprimer le tag","delete-tag-confirmation-message":"Êtes-vous sûr de vouloir supprimer le tag {projectName} ? <br> Toutes les associations seront irrémédiablement perdues","notif-success-tag-update":"Le tag a bien été modifié","notif-error-tag-update":"Une erreur a empêché de modifier le tag","notif-success-tag-delete":"Le tag {tagName} a bien été supprimé","notif-error-tag-delete":"Une erreur a empêché de supprimer le tag {tagName}","create-tag":"Créer un tag","update-tag":"Modifier un tag","area":"Aire","perimeter":"Périmètre","button-view-in-image":"Voir dans l\'image","button-center-view-on-annot":"Cadrer sur cette annotation","button-view-crop":"Voir le crop","button-copy-url":"Copier l\'URL","button-comments":"Commentaires","filters":"Filtres","failed-fetch-annots":"Une erreur a empêché le chargement des annotations","no-annotation":"Aucune annotation","button-edit":"Modifier","associated-by":"associé par {username}","add-term":"Nouveau terme","key":"Clé","value":"Valeur","notif-error-add-term":"Une erreur a empêché d\'associer le terme","notif-error-remove-term":"Une erreur a empêché de retirer le terme","notif-error-save-prop":"Une erreur a empêché de créer la propriété","notif-error-remove-prop":"Une erreur a empêché de supprimer la propriété","no-term-to-add":"Aucun terme à ajouter","error-load-annotations-filters":"Une erreur a eu lieu lors du chargement des filtres d\'annotations","button-full-text":"Voir l\'entièreté","button-close":"Fermer","enter-description":"Saisissez une description","ql-paragraph":"Paragraphe","ql-header-1":"Titre 1","ql-header-2":"Titre 1","ql-header-3":"Titre 3","ql-header-4":"Titre 4","ql-font":"Police","ql-bold":"Gras","ql-italic":"Italique","ql-underline":"Souliqué","ql-subscript":"Indice","ql-superscript":"Exposant","ql-font-color":"Couleur du texte","ql-background-color":"Couleur du fond","ql-align":"Alignement du texte","ql-ordered-list":"Liste ordonnée","ql-bullet-list":"Liste à puces","ql-blockquote":"Citation","ql-code-block":"Code","ql-clean-format":"Supprimer la mise en forme","ql-link":"Ajouter un lien","ql-image":"Ajouter une image","ql-video":"Ajouter une vidéo","ql-indent-left":"Indentater vers la gauche","ql-indent-right":"Indenter vers la droit","ql-special-character":"Caractères spéciaux","info-keyword-stop-preview-description":"Insérez le mot-clé {keyword} à l\'endroit où vous désirez que le texte de prévisualisation s\'arrête.","notif-error-update-description":"Une erreur a empêché de sauvegarder la description","current-selection":"Sélection","digital-zoom":"Zoom digital","digital-zoom-checkbox-label":"Activer le zoom digital (par interpolation)","notif-success-annot-URL-copied":"L\'URL de l\'annotation a été copiée dans le presse-papier","black":"Noir","white":"Blanc","red":"Rouge","orange":"Orange","yellow":"Jaune","green":"Vert","blue":"Bleu","purple":"Violet","color":"Couleur","no-key-selected":"Aucune clé choisie","button-reset":"Réinitialiser","select-image-to-add":"Sélectionner une image à ajouter","link-images":"Synchronisation d\'images","link-view-with":"Synchroniser cette image avec...","link-other-images-to-this-group":"Synchroniser ce groupe avec d\'autres images...","view-linked-with":"Cette image est synchronisée avec :","viewer-view":"Image {number}","link-group":"Groupe {number}","button-unlink":"Séparer","terms-new-annotation":"Terme(s) à associer aux nouvelles annotations","core-cannot-be-reached":"Erreur de communication avec le backend de Cytomine","communication-error":"Erreur de communication","follow-user":"Suivi d\'utilisateur","online-managers":"Responsables en ligne","online-contributors":"Contributeurs en ligne","no-tracking":"Pas de suivi","end-tracking-user-no-longer-broadcasting":"Le suivi de {username} dans l\'image {imageName} a été interrompu car il/elle a cessé de diffuser sa position.","um":"µm","mm":"mm","error":"Erreur","error-loading-image":"Une erreur a eu lieu lors du chargement de l\'image","error-loading-image-bad-project":" Au moins une image n\'est pas dans le project associé au lien","live":"Live","broadcast":"Diffusion et suivi","broadcast-my-position":"Diffuser ma position dans l\'image et autoriser d\'autres utilisateurs à me suivre","possible-conflict":"Conflit potentiel","confirm-unlink-view-to-track":"Cette image est synchronisée avec une autre image dans laquelle vous suivez un utilisateur. Cela pourrait mener à des conflits et à un comportement erratique. Si vous confirmez, la synchronisation sera interrompue de façon à éviter un tel conflit","confirm-untrack-to-link-view":"Cette image est actuellement synchronisée avec les mouvements d\'un autre utilisateur. Cela pourrait mener à des conflits et à un comportement erratique. Si vous confirmez, la synchronisation sera interrompue de façon à éviter un tel conflit","add-images":"Ajout d\'images","already-in-project":"Déjà dans le projet","rename-image":"Renommer l\'image","enter-new-name-of-image":"Nouveau nom de l\'image","notif-success-image-rename":"L\'image {imageName} a été renommée avec succès","notif-error-image-rename":"Une erreur a empêché de renommer l\'image {imageName}","colors":"Couleurs","button-lock":"Verrouiller","button-set-calibration":"Calibrer","calibrate-image":"Calibrer l\'image","warning-change-applies-in-project-only":"Si vous changez cette valeur, la modification ne sera appliquée que dans ce projet (elle ne sera pas propagée à d\'autres projets contenant cette image)","notif-success-image-calibration":"La résolution de l\'image {imageName} a été mise à jour","notif-error-image-calibration":"Une erreur a empêché de calibrer l\'image {imageName}","general":"Général","custom-ui":"Personnalisation de l\'interface","algorithms":"Algorithmes","image-filters":"Filtres d\'images","project-side-bar":"Barre latérale du projet","viewer-panels":"Visualisateur d\'images","all-panels":"Tous les outils","image-details":"Détails de l\'image","annotation-details":"Détails de l\'annotation","annotation-details-box":"Boîte de détails","geometry-info":"Mesures (aire, périmètre, longueur)","creation-info":"Informations sur la création","comments":"Commentaires","draw-tools":"Outils de tracé","all-draw-tools":"Tous les outils de tracé","undo-redo":"Annuler/Refaire","notif-error-custom-ui-change":"Une erreur a empêché de mettre à jour les choix de personnalisation de l\'interface","editing-mode":"Mode d\'édition","editing-mode-explanation":"Le mode d\'édition détermine les permissions des contributeurs. Les responsables du projet auront toujours la possibilité de voir, ajouter, éditer et supprimer les données de ce projet","classic":"Classique (collaboratif)","classic-mode-explanation":"Les contributeurs auront le droit d\'ajouter, d\'éditer et de supprimer des données dans ce projet sans restriction, y compris des annotations, des propriétés et des descriptions sur les calques d\'autres utilisateurs.","restricted":"Restreint","restricted-mode-explanation":"Les contributeurs ne pourront ajouter, éditer et supprimer que les annotations de leurs propres calques.","read-only":"Lecture seule","read-only-mode-explanation":"Les contributeurs ne pourront ni ajouter, ni éditer, ni supprimer d\'annotation (pas même sur leurs propres calques).","blind-mode":"Mode aveugle","blind-mode-explanation":"Si le mode aveugle est activé, les contributeurs ne verront pas les noms des images du projet. Cela peut être utile lorsque les noms des images contiennent des informations (par exemple sur le type d\'expérience) qui pourraient potentiellement influencer le travail des contributeurs.","hide-managers-layers":"Cacher les calques des responsables","hide-managers-layers-explanation":"Si cette case est cochée, un \\"simple\\" contributeur ne pourra pas voir les calques des responsables du projet. Les responsables du projet seront quant à eux toujours en mesure de visualiser tous les calques.","hide-contributors-layers":"Cacher les calques des contributeurs","hide-contributors-layers-explanation":"Si cette case est cochée, un \\"simple\\" contributeur ne pourra pas voir les calques des autres contributeurs du projet. Les responsables du projet seront quant à eux toujours en mesure de visualiser tous les calques.","default-annotation-layers":"Calques chargés par défaut","select-layer-placeholder":"Sélectionner un calque","default-property":"Propriété par défaut","no-default-property":"Pas de propriété par défaut","images_downloadable_by_contributor":"Images téléchargeables par les contributeurs","images_downloadable_by_contributor-explanation":"Avec cette option, les contributeurs pourront télécharger les images de ce projet","download-permission":"Permission de téléchargement","notif-error-general-config-update":"Une erreur a empêché de mettre à jour la configuration","layer":"Calque","hide-by-default":"Caché par défaut","button-remove":"Supprimer","notif-error-default-layer-add":"Une erreur a empêché d\'ajouter le calque aux calques par défaut","notif-error-default-layer-update":"Une erreur a empêché de mettre à jour le calque par défaut","notif-error-default-layer-delete":"Une erreur a empêché de supprimer le calque par défaut","no-selected-layers":"Pas de couche sélectionnée","button-add-members":"Ajouter des membres","button-details":"Détails","button-view-activity":"Voir l\'activité","source":"Source","ldap":"LDAP","manual":"Manuelle","last-image":"Dernière image","last-connection":"Dernière connexion","number-connections":"# connexions","no-member-fitting-criteria":"Aucun membre ne remplissant les critères de recherche","button-remove-selected-members":"Retirer les membres sélectionnés","remove-members":"Retirer les membres","remove-members-confirmation-message":"- | Êtes-vous sûr de vouloir retirer {username} du projet ? | Êtes-vous sûr de vouloir supprimer les {count} membres sélectionnés du projet ?","notif-success-remove-project-members":"Les membres sélectionnés ont bien été retirés du projet","notif-error-remove-project-members":"Une erreur a empêché de retirer les membres sélectionnés du projet","button-export-as-csv":"Exporter CSV","add-members-to-project":"Ajouter des membres au projet","search-user":"Rechercher un utilisateur...","notif-success-add-project-members":"Les utilisateurs sélectionnés ont été ajoutés au projet","notif-error-add-project-members":"Une erreur a empêché d\'ajouter les utilisateurs sélectionnés au projet","project-contributor":"Contributeur du projet","project-manager":"Responsable du projet","project-representative":"Personne de contact du projet","remove-yourself-from-manager":"Retrait des droits de gestion","remove-yourself-from-manager-confirmation-message":"Êtes-vous sûr de souhaiter vous retirer des responsables du projet ? Cette action est irréversible","offline":"Utilisateurs hors ligne","notif-error-change-role":"Une erreur a empêché de changer le rôle de l\'utilisateur {username}","enabled":"Activé","disabled":"Désactivé","no-algorithm":"Aucun algorithme à afficher","notif-error-change-status-algorithm-project":"Une erreur a empêché de changer le statut de l\'algorithme {softwareName}","no-image-filter":"Aucun filtre à afficher","notif-error-change-status-image-filter-project":"Une erreur a empêché de changer le statut du filtre {filterName}","rename-project":"Renommer le projet","new-name":"Nouveau nom","notif-success-project-rename":"Le projet {projectName} a bien été renommé","notif-error-project-rename":"Une erreur a empêché de renommer le projet {projectName}","button-set-magnification":"Changer le grossissement","set-magnification":"Changer le grossissement","notif-success-magnification-update":"Le grossissement de l\'image {imageName} a bien été mis à jour","notif-error-magnification-update":"Une erreur a empêché de mettre à jour le grossissement de l\'image {imageName}","length":"Longueur","create-project":"Créer un projet","notif-success-project-creation":"Le projet a bien été créé","notif-error-project-creation":"Une erreur a empếché la création du projet","notif-error-project-already-exists":"Une erreur a empếché la création du projet: ce nom de projet est déjà utilisé","create-ontology-for-project":"Créer une ontologie ayant le même nom que le projet","use-existing-ontology":"Utiliser une ontologie existante","select-ontology":"Choisir l\'ontologie","type":"Type","attached-files":"Fichiers joints","no-attached-file":"Aucun fichier joint","add-attached-file":"Ajouter un fichier joint","choose-file-or-drop":"Cliquez ici ou glissez-déposez le fichier de votre choix","click-or-drop-new-file":"Cliquez ici our glissez-déposez un nouveau fichier pour remplacer le fichier actuel","notif-success-attached-file-creation":"Le fichier joint a bien été uploadé","notif-error-attached-file-creation":"Une erreur a empêché l\'upload du fichier joint","notif-success-attached-file-deletion":"Le fichier joint {filename} a bien été supprimé","notif-error-attached-file-deletion":"Une erreur a empêché la suppression du fichier joint {filename}","confirm-deletion-attached-file":"Êtes-vous sûr de vouloir supprimer le fichier joint {filename} ?","opacity":"Opacité","button-reset-opacities":"Réinitialiser les opacités","preview-size":"Taille de l\'aperçu","small":"Petit","medium":"Moyen","large":"Grand","huge":"Très grand","number-per-page":"Nombre par page","display":"Affichage","add-image":"Ajouter une image","detailed-image-information":"Informations détaillées de l\'image {imageName}","button-more-info":"Plus d\'informations","access-denied":"Accès non autorisé","insufficient-permission":"Vous n\'avez pas la permission de consulter cette page","open-admin-session":"Ouvrir une session admin","close-admin-session":"Fermer la session admin","admin":"Admin","admin-menu":"Administration","page-not-found":"Page non trouvée","not-found":"Introuvable","not-found-error":"La ressource demandée n\'a pas pu être chargée","notif-error-logout":"Erreur lors de la déconnexion","download-results":"Télécharger les résultats","download-PDF":"Télécharger le PDF","download-CSV":"Télécharger le CSV","download-excel":"Télécharger l\'Excel","no-result":"Aucun résultat","upload":"Upload","important-notes":"Remarques importantes","allowed-formats-upload-info":"Seules des images peuvent être uploadées (formats acceptés : JP(E)G, PNG, BMP, TIF, TIFF, SVS, SCN, NDPI, VMS, MRXS, VSI, BIF).","vms-mrxs-upload-info":"Les fichiers VMS et MRXS doivent être compressées dans un ZIP (le ZIP doit contenir le fichier VMS/MRXS/VSI ainsi que les fichiers associés).","zip-upload-info":"Il est possible d\'uploader un ZIP contenant plusieurs images (à l\'exception des images VMS et MRXS).","drag-drop-upload-info":"Si vous utilisez Google Chrome, Mozilla Firefox ou Apple Safari, vous pouvez glisser-déposer des fichiers depuis votre ordinateur sur le bouton \\"{labelButton}\\".","link-to-project-upload-info":"Vous aurez la possibilité d\'associer manuellement les images à des projets lorsque l\'upload sera terminé.","link-with-project":"Associer à un projet","files":"Fichiers","no-file":"Aucun fichier","button-start":"Uploader","button-hide":"Masquer","upload-error":"Erreur d\'upload","add-files":"Ajouter des fichiers...","start-upload":"Lancer l\'upload","cancel-upload":"Annuler l\'upload","preview":"Aperçu","created":"Créé","size":"Taille","content-type":"Type de contenu","global-size":"Taille globale","from":"Depuis","from-file":"Fichier parent","no-preview-available":"Pas d\'aperçu disponible","uploaded":"Téléchargé","converted":"Converti","deployed":"Déployé","error-format":"Erreur de format","error-convert":"Erreur de conversion","uncompressed":"Décompressé","to-deploy":"À déployer","to-convert":"À convertir","error-deployment":"Erreur de déploiement","no-uploaded-file":"Aucun fichier","count-files":"0 fichier | 1 fichier | {count} fichiers","sample-preview":"Aperçu de l\'image","slide-preview":"Aperçu de la lame","sample-preview-of":"Aperçu de l\'image {filename}","slide-preview-of":"Aperçu de la lame {filename}","file-tree":"Arborescence de fichiers","confirm-deletion-file":"Êtes-vous sûr de vouloir supprimer ce fichier ?","view":"Visualisation d\'images","shortcut-viewer-nav-move-up":"Déplacer vers le haut","shortcut-viewer-nav-move-down":"Déplacer vers le bas","shortcut-viewer-nav-move-left":"Déplacer vers la gauche","shortcut-viewer-nav-move-right":"Déplacer vers la droite","shortcut-viewer-nav-zoom-in":"Zoomer","shortcut-viewer-nav-zoom-out":"Dézoomer","shortcut-viewer-nav-next-image":"Aller à l\'image suivante","shortcut-viewer-nav-previous-image":"Aller à l\'image précédente","draw":"Outils d\'annotations","shortcut-viewer-tool-select":"Sélectionner une annotation","shortcut-viewer-tool-point":"Dessiner un point","shortcut-viewer-tool-freehand-polygon":"Dessiner un polygone à main levée","shortcut-viewer-tool-delete":"Supprimer l\'annotation sélectionnée","shortcut-viewer-tool-undo":"Annuler une action sur les annotations","shortcut-viewer-tool-redo":"Refaire une action sur les annotations","review":"Validation","shortcut-viewer-tool-review-accept":"Valider l\'annotation sélectionnée en mode validation","shortcut-viewer-tool-review-reject":"Rejeter l\'annotation sélectionnée en mode validation","shortcut-viewer-tool-review-toggle":"Afficher/masquer le calque de validation en mode validation","version":"Version","sponsors":"Sponsors","website":"Site web","source-code":"Code source","documentation":"Documentation","contact":"Contact","cytomine-sponsors-info":"Cytomine est développé par la {cytomineCompanyLink} en collaboration avec l\'Université de Liège et a été subventionné par des conventions de recherche de la Région Wallone.","cytomine-company":"société Cytomine","cytomine-website-info":"Vous trouverez davantage d\'information sur le site web du projet Cytomine : {websiteLink}.","source-code-info":"Cytomine est un logiciel open-source. Il est distribué sous les licences Apache2 et LGPL 2.1. Le code source est disponible sur notre {githubLink}.","github-repository":"répertoire GitHub","documentation-info":"Une documentation complète est disponible {docLink}. Des informations plus détaillées sur l\'API de Cytomine sont aussi disponibles {apiDocLink}.","here":"ici","contact-info":"Vous pouvez contacter l\'équipe de Cytomine à l\'adresse {contactMail}.","button-previous-image":"Image précédente","button-next-image":"Image suivante","notif-error-first-image":"Il s\'agit de la première image du projet","notif-error-last-image":"Il s\'agit de la dernière image du projet","notif-error-fetch-previous-image":"Une erreur a empêché de charger l\'image précédente","notif-error-fetch-next-image":"Une erreur a empêché de charger l\'image suivante","viewer-group":"Groupe d\'images ({nbImages} images)","activity-charts":"Graphiques d\'activité","activity-logs":"Logs d\'activité","project-connections":"Connexions au projet","image-consultations":"Consultations d\'images","number-annotations":"Nombre d\'annotations","manual-annotations-vs-term":"Annotations manuelles VS. terme","annotated-images-vs-term":"Images annotées VS. terme","manual-annotations-vs-contributor":"Annotations manuelles VS. contributeur","annotated-images-vs-contributor":"Images annotées VS. contributeur","nothing-more-to-load":"Tout a été chargé","all-users-analyses":"Tous les utilisateurs/analyses","time-period":"Période de temps","button-clear":"Réinitialiser","to":"Jusqu\'à","no-log-to-display":"Aucun log disponible","term":"Terme","ontologies":"Ontologies","confirm-deletion-term":"Êtes-vous sûr de vouloir supprimer le terme {name} ?","notif-error-term-deletion":"Le terme n\'a pas pu être supprimé. Assurez-vous qu\'aucune annotation n\'est associée à ce terme.","not-used-in-any-project":"N\'est utilisée dans aucun projet","used-in-project-no-access":"Utilisée dans des projets auxquels vous n\'avez pas accès","confirm-deletion-ontology":"Êtes-vous sûr de vouloir supprimer l\'ontologie {name} ?","notif-error-ontology-deletion":"Une erreur a empêché la suppression de l\'ontologie","notif-success-ontology-deletion":"L\'ontologie {name} a bien été supprimée","cannot-delete-ontology-with-projects":"Cette ontologie ne peut être supprimée : elle est utilisée dans des projets.","rename-ontology":"Renommer l\'ontologie","notif-success-ontology-rename":"L\'ontologie {name} a bien été renommée","notif-error-ontology-rename":"Une erreur a empêché de renommer l\'ontologie {name}","new-ontology":"Nouvelle ontologie","create-ontology":"Créer une ontologie","notif-success-ontology-creation":"L\'ontologie a bien été créée","notif-error-ontology-creation":"Une erreur a empêché la création de l\'ontologie","create-term":"Créer un terme","update-term":"Modifier un terme","notif-success-term-creation":"Le terme a bien été créé","notif-error-term-creation":"Une erreur a empêché la création du terme","notif-success-term-update":"Le terme a bien été mis à jour","notif-error-term-update":"Une erreur a empêche la modification du terme","notif-error-ontology-tree-update":"Une erreur a empêché de modifir l\'arborescence de l\'ontologie","notif-warn-ontology-tree-order-not-persisted":"L\'ordre des enfants dans l\'arborescence n\'est pas sauvegardée dans la base de données","workspace":"Espace de travail","outline-color":"Couleur du contour","no-outline":"Pas de contour","button-launch-new-analysis":"Lancer une nouvelle analyse","launch-new-analysis":"Lancement d\'une nouvelle analyse","algorithm":"Algorithme","run-number":"#","execution-date":"Date d\'exécution","launched-by":"Lancé par","not-launch":"Pas commencé","in-queue":"Dans la file","running":"En cours","success":"Réussi","failed":"Échoué","indeterminate":"Inconnu","wait":"En attente","previewed":"Prévisualisé","killed":"Arrêté","no-analysis-run":"Aucune analyse lancée","launcher":"Créateur","status-comment":"Commentaire","execution-duration":"Durée de l\'exécution","parameters":"Paramètres","button-show":"Montrer","results":"Résultats","comment":"Commentaire","no-result-file":"Aucun fichier de résultat","button-view":"Voir","data":"Données","relaunch":"Relancer","delete-data":"Supprimer les données","count-annotations":"0 annotation | 1 annotation | {count} annotations","deleted-analysis-data":"Données de l\'analyse supprimées","delete-analysis-data":"Suppression des données de l\'analyse","confirm-deletion-analysis-data":"Êtes-vous sûr de vouloir supprimer les données d\'analyse suivantes :","count-reviewed-annotations":"0 annotation validée | 1 annotation validée | {count} annotations validées","count-annotation-terms":"0 association de terme | 1 association de terme | {count} associations de terme","remark-long-operation":"Remarque : cette opération pourrait prendre un certain temps","progress":"Progrès","notif-success-analysis-data-deletion":"Les données de l\'analyse ont bien été supprimées","notif-error-analysis-data-deletion":"Une erreur a empêché la suppression des données de l\'analyse","optional-parameters":"Paramètres optionnels","prefilled-parameters":"Paramètres pré-remplis","notif-success-analysis-launch":"L\'analyse a bien été lancée","notif-error-analysis-launch":"Une erreur a empêché de lancer l\'analyse","notif-error-analysis-parameters-options":"Une erreur a empêché de récupérer les options disponibles pour le paramètre {paramName}","activity-of-user":"Activité de l\'utilisateur {username}","annotation-selections":"Sélections d\'annotations","detailed-project-connections":"Détails des connexions au projet","detailed-image-consultations":"Détails des consultations d\'image","date":"Date","duration":"Durée","number-viewed-images":"Nombre d\'images consultées","number-annotation-creations":"Nombre d\'annotations créées","annotation-creations":"Créations d\'annotations","no-project-connection":"Aucune connexion au projet","no-image-consultation":"Aucune consultation d\'image","operating-system":"Système d\'exploitation","system":"Système","browser":"Navigateur","first-consultation":"Première consultation","last-consultation":"Dernière consultation","number-consultations":"Nombre de consultations","error-failed-to-fetch-image-consultations":"Une erreur a eu lieu lors de la récupération des consultations d\'images","users":"Utilisateurs","currently":"Actuellement","online-users":"Utilisateurs en ligne","active-projects":"Projets actifs","most-active-project":"Projet le plus actif","used-storage-space":"Espace de stockage utilisé","total":"Total","count-active-users":"aucun utilisateur actif | un utilisateur actif | {count} utilisateurs actifs","welcome-message":"Message de bienvenue","enter-text":"Saisissez du texte","notif-success-welcome-message-update":"Le message de bienvenue a bien été mis à jour","notif-error-welcome-message-update":"Une erreur a empêché de mettre à jour le message de bienvenue","super-admin":"Super admin","user":"Utilisateur","guest":"Invité","updated":"Mis à jour","button-new-user":"Nouvel utilisateur","button-unlock":"Déverrouiller","notif-error-user-lock":"Une erreur a empêché de déverrouiler l\'utilisateur","no-user-fitting-criteria":"Aucun utilisateur ne correspond aux critères de recherche","members-activity":"Activité des membres","select-date":"Choisir une date","no-record":"Aucune entrée","button-manage-members":"Gestion des membres","barchart-hover-mouse-for-details":"Passez la souris sur une barre pour afficher les détails relatifs à cette barre","barchart-click-label-to-toggle-visibility":"Cliquez sur un label au-dessus du graphique pour afficher/masquer les données associées à ce label dans le graphique","activity-chart-info-message":"Ce graphique présente un résumé de l\'activité ayant eu lieu durant la période sélectionnée","project-connections-info-message":"Une connexion au projet est enregistrée à chaque ouverture de projet dans Cytomine","image-consultations-info-message":"Une consultation d\'image est enregistrée à chaque ouverture d\'image dans Cytomine","annotation-selections-info-message":"À chaque fois qu\'un utilisateur clique sur une annotation dans une image, une sélection d\'annotation est enregistrée","manual-annotations-info-message":"Annotations créées par un utilisateur","analysis-annotations-info-message":"Annotations créées par une analyse automatique (exécution d\'un algorithme)","reviewed-annotations-info-message":"Annotations validées durant le processus de validaion","number-annotations-chart-info-message":"Ce graphique présente le nombre d\'annotations créées durant la période sélectionnée","annotations-vs-terms-chart-info-message":"Ce graphique présente le nombre d\'annotations manuelles associées à chaque terme. Seules les annotations créées durant la période sélectionnée sont prises en compte.","annotated-images-vs-terms-chart-info-message":"Ce graphique présente, pour chaque terme, le nombre d\'images ayant au moins une annotation associée à ce terme. Seules les annotations créées durant la période sélectionnée sont prises en compte.","annotations-vs-contributors-chart-info-message":"Ce graphique présente le nombre d\'annotations créées par chaque membre durant la période sélectionnée","annotated-images-vs-contributors-chart-info-message":"ce graphique présente le nombre d\'images annotées par chaque membre. Seules les annotations créées durant la période sélectionnée sont prises en compte.","data-last-updated-on":"Données mises à jours à {time}","ongoing":"En cours","last-connections":"Dernières connexions","last-day":"Dernier jour","last-week":"Dernière semaine","last-month":"Dernier mois","last-year":"Dernière année","period":"Période","by":"Par","day":"Jour","hour":"Heure","week":"Semaine","connections-chart":"Graphique des connexions","create-user":"Créer un utilisateur","update-user":"Modifier un utilisateur","notif-success-user-creation":"L\'utilisateur a bien été créé","notif-error-user-creation":"Une erreur a empêché la création de l\'utilisateur","notif-success-user-update":"L\'utilisateur a bien été modifié","notif-error-user-update":"Une erreur a empêché la modification de l\'utilisateur","button-login":"Se connecter","button-get-username":"Récupérer le nom d\'utilisateur","forgot-username":"Nom d\'utilisateur oublié","forgot-password":"Mot de passe oublié","button-reset-password":"Réinitaliser le mot de passe","notif-success-forgot-username":"Un e-mail contenant votre nom d\'utilisateur a été envoyé à votre adresse e-mail","notif-error-forgot-username":"Une erreur a empêché de vous envoyer un e-mail","notif-success-forgot-password":"Un e-mail permettant de réinitialiser votre mot de passe a été envoyé à votre adresse e-mail","notif-error-forgot-password":"Une erreur a empêché de vous envoyer un e-mail","forgot-credentials":"Vous avez oublié votre {username} ou votre {password} ?","password-expired-info-message":"Votre mot de passe a expiré. Veuillez en choisir un nouveau","failed-fetch-current-stats":"Une erreur a eu lieu lors du chargement des statistiques sur l\'activité en cours","failed-fetch-total-counts":"Une erreur a eu lieu lors du chargement des statistiques","unexpected-error-info-message":"Une erreur inattendue s\'est produite","error-attached-files":"Erreur lors du chargement des fichiers joints","error-fetch-properties":"Erreur lors du chargement des propriétés","failed-fetch-recent-projects":"Erreur lors du chargement des projets récents","error-cannot-upload":"Une erreur inattendue empêche les uploads","notif-error-fetch-annotations-viewer":"Erreur lors du chargement des annotations","notif-error-save-user-position":"Une erreur empêche de sauvegarder votre position dans l\'image","notif-error-save-image-consultation":"Une erreur empêche de sauvegarder la consultation de l\'image","notif-error-target-annotation":"Impossible d\'afficher l\'annotation demandée","notif-error-add-viewer-image":"Une erreur a empêché l\'ajout de l\'image","notif-error-loading-annotation-layers":"Erreur lors du chargement de la liste des calques d\'annotations","notif-error-tracked-user-position":"Erreur lors de la récupération de la position de l\'utilisateur suivi","annotation-comments":"Commentaires","notif-error-fetch-annotation-comments":"Erreur lors de la récupération des commentaires","no-annotation-comments":"Aucun commentaire pour cette annotation","button-share":"Partager","enter-comment":"Saisissez votre commentaire","send-to-all-project-members":"Envoyer à tous les membres du projet","send-to-some-members":"Envoyer à certains membres seulement","add-new-comment":"Ajouter un commentaire","button-add-comment":"Ajouter un commentaire","comment-will-be-sent-by-email":"Le commentaire sera envoyé par e-mail aux utilisateurs sélectionnés","notif-error-new-comment":"Une erreur a empêché la création du commentaire","notif-success-new-comment":"Votre commentaire a bien été envoyé par e-mail","reviewers":"Validateurs","review-layer":"Calque de validation","reviewed-by":"Validé par","reviewed-on":"Validé le","button-metadata":"Métadonnées","image-metadata":"Métadonnées de l\'image","registration-date":"Date d\'inscription","first-project-connection":"Première connexion au projet","last-project-connection":"Dernière connexion au projet","notif-error-already-broadcasting-this-image":"Vous diffusez déjà cette image","delete-analysis":"Supprimer l\'analyse","delete-analysis-confirmation-message":"Êtes-vous sûr de vouloir supprimer cette analyse ? Toutes les données de ce projet seront irrémédiablement perdues","notif-success-analysis-deletion":"L\'analyse a bien été supprimée","notif-error-analysis-deletion":"Une erreur a empêché la suppression de l\'analyse","number-projects-info-message":"Le nombre de projets dont vous êtes membre","number-images-info-message":"Le nombre d\'images disponibles dans les projets dont vous êtes membre","number-annotations-info-message":"Le nombre d\'annotations que vous avez créées","number-reviewed-annotations-info-message":"Le nombre d\'annotations que vous avez validées","blinded-name-indication":"Masqué","language":"Langue","no-property-matching-search-string":"Aucune propriété ne correspond au texte recherché","confirm-default-property":"Confirmer la propriété par défaut","confirm-default-property-not-used-in-project":"Actuellement, aucune annotation de ce projet n\'est associée à une propriété ayant pour clé \'{key}\'.<br> Êtes-vous sûr de vouloir l\'utiliser comme propriété par défaut","notif-success-default-property-update":"La propriété par défaut a bien été mise à jour","notif-error-default-property-update":"Une erreur a empêché la modification de la propriété par défaut","notif-error-delete-uploaded-file":"Une erreur a empêché de supprimer le fichier","notif-error-delete-used-uploaded-file":"Cette image est utilisée dans des projets ({projects}) sous les noms suivants : {names}","no-ontology":"Pas d\'ontologie","button-change-ontology":"Changer l\'ontologie","change-ontology":"Changer l\'ontologie","change-ontology-warning-message":"Changer l\'ontologie aura pour effet de supprimer toutes les associations annotation-terme existantes. Cette action est irréversible.","notif-success-project-ontology-change":"L\'ontologie du projet {projectName} a bien été modifiée","notif-error-project-ontology-change":"Une erreur a empêché de modifier l\'ontologie du projet {projectName}","notif-error-project-ontology-change-job-terms":"Impossible de changer l\'ontologie de ce projet : des analyses ont associé des termes à des annotations.","notif-error-project-ontology-change-reviewed-terms":"Impossible de changer l\'ontologie de ce projet : des termes sont associés à des annotations validées.","confirm-ontology-change":"Confirmer le changement d\'ontologie","confirm-ontology-change-delete-user-terms":"Des membres du projet ont associé des termes à des annotations ({count} associations). Êtes-vous sûr de vouloir supprimer ces associations ?","invalid-token":"Token invalide","slide-preview-not-available":"Aperçu de la lame non disponible","button-load-more":"Plus","dont-have-access-to-any-ontology":"Vous n\'avez accès à aucune ontologie","managed-projects":"Projets supervisés","connect-as-user":"Se connecter en tant que {username}","notif-error-failed-to-connect-as-user":"Une erreur a empêché la connexion","switch-back-to-user":"Retour à {username}","notif-error-failed-to-switch-back-as-real-user":"Une erreur a empêché de vous reconnecter sous votre vrai compte","notif-error-invalid-key-prefix":"La clé ne peut commencer par {prefix} : ce préfixe est réservé par Cytomine pour une utilisation interne.","button-copy":"Copier","notif-success-key-copied":"Clé copiée dans le presse-papier","confirm-close-project":"Fermer le projet","confirm-close-project-message":"Êtes-vous sûr de vouloir fermer ce projet ? Les {viewers} qu\'il contient seront également fermés.","count-viewers":"aucun visualisateur | visualisateurs | {count} visualisateurs","validations":{"messages":{"_default":"Champ incorrect","required":"Champ obligatoire","email":"Doit être une adresse e-mail valide","is":"Confirmation incorrecte","min":"Doit contenir au moins {1} caractères","decimal":"Doit être un nombre","positive":"Doit être positif"}},"invalid-password":"Mot de passe incorrect","activity-history":"Historique de l\'activité","image-not-reviewed":"Cette image n\'a pas été validée","button-start-review":"Commencer la validation","notif-error-start-review":"Une erreur a empêché de commencer la validation de l\'image","you-are-reviewing-image-since":"Cette image est en cours de validation depuis le {date}","button-continue-review":"Continuer la validation","you-have-validated-image-on":"Vous avez validé cette image le {date}","image-validated-by-on":"Cette image a été validée par {user} le {date}","button-unvalidate-review":"Annuler la validation","button-unvalidate-and-continue-review":"Annuler la validation","notif-error-review-accept-all":"Une erreur a empêché de valider toutes les annotations","notif-error-review-reject-all":"Une erreur a empêché de rejeter toutes les annotations","image-in-review-by-since":"Cette image est en cours de validation par depuis le {date}","button-continue-review-later":"Continuer la validation plus tard","button-cancel-review":"Annuler la validation","button-validate-review":"Valider l\'image","notif-error-cancel-review":"Une erreur a empêché d\'annuler la validation de l\'image","notif-error-validate-review":"Une erreur a empêché la validation de l\'image","notif-error-unvalidate-review":"Une erreur a empêché d\'annuler la validation de l\'image","review-list-visible-layers":"Les calques suivant sont affichés : {visibleLayers}.","button-accept-all":"Tout valider","button-reject-all":"Tout rejeter","review-explanation":"Vous pouvez valider les annotations en les sélectionnant une par une ou les traiter toutes à la fois avec les boutons ci-dessous","validate-annotation":"Valider l\'annotation","reject-annotation":"Rejeter l\'annotation","notif-error-annotation-validation":"Une erreur a empêché de valider l\'annotation","notif-error-annotation-rejection":"Une erreur a empêché de rejeter l\'annotation","in-review":"En cours de validation","reviewed":"Validée","none":"Aucun","button-register":"S\'inscrire","register":"Inscription","notif-error-register":"Une erreur s\'est produite lors de l\'inscription","notif-error-register-username-exists":"Ce nom d\'utilisateur est déjà utilisé","no-account-yet":"Pas encore de compte ? {registerLink}","successful-registration":"Votre compte a été créé avec succès. Consultez votre boîte mail pour l\'activer.","back-to-login":"Retour au formulaire d\'authentification","filter":"Filtre","original-no-filter":"Pas de filtre","by-term":"Par terme","annotations-list":" Liste des annotations","shortcut-viewer-nav-next-t":"Aller à la frame suivante","shortcut-viewer-nav-previous-t":"Aller à la frame précédente","shortcut-viewer-nav-first-t":"Aller à la première frame","shortcut-viewer-nav-last-t":"Aller à la dernière frame","shortcut-viewer-nav-next-c":"Aller au canal suivant","shortcut-viewer-nav-previous-c":"Aller au canal précédent","shortcut-viewer-nav-first-c":"Aller au premier canal","shortcut-viewer-nav-last-c":"Aller au dernier canal","shortcut-viewer-nav-next-z":"Aller à la tranche suivante","shortcut-viewer-nav-previous-z":"Aller à la tranche précédente","shortcut-viewer-nav-first-z":"Aller à la première tranche","shortcut-viewer-nav-last-z":"Aller à la dernière tranche","shortcut-viewer-nav-next-slice":"Aller au plan suivant","shortcut-viewer-nav-previous-slice":"Aller au plan précédent","shortcut-viewer-nav-first-slice":"Aller au premier plan","shortcut-viewer-nav-last-slice":"Aller au dernier plan","shortcut-viewer-nav-drag-rotate":"Faire tourner l\'image","shortcut-viewer-nav-drag-zoom":"Zoomer dans une région","shortcut-viewer-tool-line":"Dessiner une ligne","shortcut-viewer-tool-freehand-line":"Dessiner une ligne à main levée","shortcut-viewer-tool-rectangle":"Dessiner un rectangle","shortcut-viewer-tool-circle":"Dessiner un cercle","shortcut-viewer-tool-polygon":"Dessiner un polygone","shortcut-viewer-tool-fill":"Remplir l\'annotation","shortcut-viewer-tool-correct-add":"Corriger l\'annotation en lui ajoutant un polygone à main levée","shortcut-viewer-tool-correct-remove":"Corriger l\'annotation en lui soustrayant un polygone à main levée","shortcut-viewer-tool-modify":"Modifier l\'annotation","shortcut-viewer-tool-modify-delete-vertex":"Supprimer un sommêt avec l\'outil de modification","shortcut-viewer-tool-move":"Déplacer l\'annotation","shortcut-viewer-tool-rotate":"Pivoter l\'annotation","shortcut-viewer-toggle-information":"Afficher/Masquer le panneau d\'information","shortcut-viewer-toggle-zoom":"Afficher/Masquer le panneau de zoom","shortcut-viewer-toggle-link":"Afficher/Masquer le panneau de synchronisation des images","shortcut-viewer-toggle-filters":"Afficher/Masquer le panneau de colorisation de l\'image","shortcut-viewer-toggle-layers":"Afficher/Masquer le panneau des calques","shortcut-viewer-toggle-ontology":"Afficher/Masquer le panneau des termes","shortcut-viewer-toggle-properties":"Afficher/Masquer le panneau des propriétés","shortcut-viewer-toggle-broadcast":"Afficher/Masquer le panneau de diffusion et suivi","shortcut-viewer-toggle-review":"Afficher/Masquer le panneau de validation","shortcut-viewer-toggle-overview":"Afficher/Masquer l\'aperçu","shortcut-viewer-toggle-annotations":"Afficher/Masquer le panneau des annotations","shortcut-viewer-toggle-current":"Afficher/Masquer les détails de l\'annotation sélectionnée","shortcut-viewer-toggle-add-image":"Afficher/Masquer le sélecteur d\'images","shortcut-general-close-modal":"Fermer une fenêtre","shortcut-text-editor-bold":"Mettre le texte en gras","shortcut-text-editor-italic":"Mettre le texte en italique","shortcut-text-editor-underline":"Souligner le texte","shortcut-text-editor":"Editeur de texte","shortcut-viewer-toggle":"Visualisateur : Affichage","shortcut-viewer-tool":" Visualisateur : Outils","shortcut-viewer-nav":"Visualisateur : Naviguation","shortcut-general":"Général","shortcut":"Raccourci clavier","new-algorithm":"Nouvel algorithme","nb-jobs":"Nombre d\'exécutions","nb-success-jobs":"Nombre d\'exécutions réussies","only-last-release":"Seulement les dernières versions","only-UI-runnable":"Seulement les algorithmes exécutables","yes":"Oui","no":"Non","creation-date":"Date de création","no-software":"Pas d\'algorithme","notif-success-algorithm-deletion":"L\'algorithme a été supprimé","notif-error-algortihm-deletion":"Erreur durant la suppression de l\'algoritme","github":"Github","dockerhub":"DockerHub","no-info":"Pas d\'information","deprecated":"Déprécié","last-release":"Dernière version","ui-runnable":"Exécutable","number-jobs":"Exécutions","number-success":"Exécutions réussies","software-parameters":"Paramètres de l\'algorithme","default-value":"Valeur par défaut","mandatory":"Obligatoire","domain":"Domaine Cytomine","listdomain":"Liste de domaines Cytomine","list":"Liste","number":"Nombre","string":"Chaîne de caractères","boolean":"Booléen","value-key":"Valeur de la clé","command-line-flag":"Argument de la ligne de commande","other-information":"Autres informations","execute-command":"Commande d\'exécution","pulling-command":"Commande de récupération","trusted-source":"Source de confiance","see-source-code-on":"Voir le code source sur","see-environment-on":"Voir l\'environnement sur","button-kill":"Arrêter","notif-success-analysis-kill":"L\'analyse a bien été arrêtée","notif-error-analysis-kill":"Une erreur a empêché l\'arrêt de l\'analyse","execution-log":"Log d\'exécution","log-being-collected":"Le log d\'exécution est en train d\'être collecté","trusted-sources":"Sources de confiance","button-refresh":"Rafraîchir","button-new-trusted-source":"Nouvelle source de confiance","source-provider":"Fournisseur du code source","source-provider-name":"Nom d\'utilisateur du fournisseur de code source","environment-provider":"Fournisseur de l\'environnement d\'exécution","environment-provider-name":"Nom d\'utilisateur du fournisseur de l\'environnement d\'exécution","prefix":"Préfixe","create-source":"Créer une source de confiance","update-source":"Modifier une source de confiance","notif-success-source-creation":"La source de confiance a bien été créée","notif-error-source-creation":"Une erreur a empêché la création de la source de confiance","notif-success-source-update":"La source de confiance a bien été modifiée","notif-error-source-update":"Une erreur a empêché la modification de la source de confiance","notif-success-source-refresh":"La mise à jour de la source de confiance a été demandée","notif-error-source-refresh":"Erreur durant la mise à jour de la source de confiance","fav":"Fav.","favorite":"Favori","hide-successful-upload":"Cacher les uploads réussis","no-trusted-source-fitting-criteria":"Aucune source de confiance ne remplissant les critères de recherche","no-tag-fitting-criteria":"Aucun tag ne remplissant les critètes de recherche","no-trusted-source":"Pas de source de confiance","hierarchical-drag-drop-term":"Les termes peuvent être organisés de manière hiérarchique en utilisant le drag and drop","delete-source":"Supprimer la source de confiance","delete-source-confirmation-message":"Êtes-vous sûr de vouloir supprimer la source de confiance {username}/{dockerUsername} ?","notif-success-source-delete":"La source de confiance {username}/{dockerUsername} a bien été supprimée","notif-error-source-delete":"Une erreur a empêché de supprimer la source de confiance {username}/{dockerUsername}"}')},"1cee":function(e,t,n){},"1eaf":function(e,t,n){},"1f05":function(e,t,n){},"1f1d":function(e,t,n){"use strict";n("53d3")},"1f4a":function(e,t,n){"use strict";n("63a3")},"1f8f":function(e,t,n){},"1f96":function(e,t,n){"use strict";n("f00b")},2147:function(e,t,n){},"21dc":function(e,t,n){e.exports=n.p+"img/logo-cytomine-coop.4a5cd544.png"},"21f4":function(e,t,n){},"239b":function(e,t,n){},"240c":function(e,t,n){"use strict";n("deed")},"24e5":function(e,t,n){"use strict";n("17c1")},"25af":function(e,t,n){"use strict";n("52ca")},"26c9":function(e,t,n){},"26da":function(e,t,n){"use strict";n("de84")},2734:function(e,t,n){"use strict";n("1448")},2807:function(e,t,n){},2842:function(e,t,n){},"2a1a":function(e,t,n){"use strict";n("ea91")},"2e93":function(e,t,n){"use strict";n("1004")},"2ebc":function(e,t,n){},"2fdc":function(e,t,n){},3047:function(e,t,n){},"33bb":function(e,t,n){"use strict";n("d733")},"344c":function(e,t,n){"use strict";n("2147")},"35ec":function(e,t,n){e.exports=n.p+"img/philips.5ab07c91.svg"},"398e":function(e,t,n){},"398f":function(e,t,n){e.exports=n.p+"img/hamamatsu.d2b568a4.jpg"},"39cd":function(e,t,n){},"3afc":function(e,t,n){"use strict";n("ed72")},"3c6c":function(e,t,n){"use strict";n("c73e")},"3c8d":function(e,t,n){},"3d7e":function(e,t,n){},"3de7":function(e,t,n){},"3e70":function(e,t,n){"use strict";n("7394")},"3e71":function(e,t,n){},"3f52":function(e,t,n){},4292:function(e,t,n){},"42b7":function(e,t,n){},"439e":function(e,t,n){},4560:function(e,t,n){"use strict";n("1466")},"45d8":function(e,t,n){"use strict";n("239b")},4678:function(e,t,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d833","./ar-tn.js":"6d833","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a391","./ne.js":"3a391","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id="4678"},"4a0c":function(e,t,n){},"4a67":function(e,t,n){"use strict";n("7f1b")},"4b0c":function(e,t,n){"use strict";n("8db8")},"4b5b":function(e,t,n){},"4e60":function(e,t,n){"use strict";n("5afe")},"4eff":function(e,t,n){"use strict";n("542c")},"4fe3":function(e,t,n){},5093:function(e,t,n){},5164:function(e,t,n){},"51b6":function(e,t,n){"use strict";n("0bc9")},"52ca":function(e,t,n){},5323:function(e,t,n){"use strict";n("8c1c")},"53d3":function(e,t,n){},"542c":function(e,t,n){},"54d3":function(e,t,n){"use strict";n("76e0")},5513:function(e,t,n){"use strict";n("1aee")},"566d":function(e,t,n){"use strict";n("c4e3")},"56d7":function(e,t,n){"use strict";n.r(t);n("c5f6"),n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=n("8c4f"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading},on:{"update:active":function(t){e.loading=t}}}),e.loading?e._e():[e.welcomeMessage?n("div",{staticClass:"box",domProps:{innerHTML:e._s(e.welcomeMessage)}}):e._e(),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-two-thirds"},[n("div",{staticClass:"box"},[n("h2",[e._v(" "+e._s(e.$t("recently-opened"))+" ")]),e.recentProjects?n("b-table",{attrs:{data:e.recentProjects},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{label:e.$t("project"),width:"100",centered:""}},[n("router-link",{staticClass:"project-name",attrs:{to:"/project/"+r.id}},[e._v(" "+e._s(r.name)+" ")])],1),n("b-table-column",{attrs:{label:e.$t("images"),width:"400"}},[n("list-images-preview",{attrs:{project:r}})],1)]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-recent-project")))])])]},proxy:!0}],null,!1,4264962988)}):n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("failed-fetch-recent-projects"))+" ")]),n("p",{staticClass:"has-text-centered all-projects"},[n("router-link",{staticClass:"button is-link",attrs:{to:"/projects"}},[e._v(e._s(e.$t("view-all-projects")))])],1)],1)]),n("div",{staticClass:"column right-column"},[n("div",{staticClass:"box stats"},[n("h2",[e._v(" "+e._s(e.$t("statistics"))+" ")]),n("table",{staticClass:"table is-fullwidth"},[n("tbody",[n("tr",[n("td",[e._v(e._s(e.projects?e.projects.length:"?"))]),n("td",[e._v(e._s(e.$t("projects")))]),n("td",[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("number-projects-info-message")))])]},proxy:!0}],null,!1,2258136266)},[n("i",{staticClass:"fas fa-info-circle"})])],1)]),n("tr",[n("td",[e._v(e._s(null!=e.nbImages?e.nbImages:"?"))]),n("td",[e._v(e._s(e.$t("images")))]),n("td",[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("number-images-info-message")))])]},proxy:!0}],null,!1,2856895864)},[n("i",{staticClass:"fas fa-info-circle"})])],1)]),n("tr",[n("td",[e._v(e._s(null!=e.nbUserAnnots?e.nbUserAnnots:"?"))]),n("td",[e._v(e._s(e.$t("user-annotations")))]),n("td",[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("number-annotations-info-message")))])]},proxy:!0}],null,!1,3793819640)},[n("i",{staticClass:"fas fa-info-circle"})])],1)]),n("tr",[n("td",[e._v(e._s(null!=e.nbReviewed?e.nbReviewed:"?"))]),n("td",[e._v(e._s(e.$t("reviewed-annotations")))]),n("td",[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("number-reviewed-annotations-info-message")))])]},proxy:!0}],null,!1,4053539854)},[n("i",{staticClass:"fas fa-info-circle"})])],1)])])])]),n("div",{staticClass:"box"},[n("h2",[e._v(" "+e._s(e.$t("last-opened-image"))+" ")]),e.lastOpenedImage?n("image-preview",{attrs:{image:e.lastOpenedImage,fullHeightCard:!1,showProject:!0,blindMode:e.lastOpenedImage.blindMode}}):n("div",{staticClass:"has-text-grey has-text-centered"},[e._v(" "+e._s(e.$t("no-recent-image"))+" ")])],1)])])]],2)},s=[],o=(n("5df3"),n("96cf"),n("1da1")),c=(n("7f7f"),n("7514"),n("ac6a"),n("8e6e"),n("456d"),n("28a5"),n("ade3")),l=n("2ef0"),u=n.n(l);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=y(e),{get:function(){return _(this.$store,w(e,this,t))}}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=y(e),p(p({},m(e,t)),{},{set:b((function(n){this.$store.commit(x(w(e,this,t)),n)}),t)})}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=y(e),{get:function(){return _(this.$store,w(e,this,n)).filters[t]},set:function(r){var a=w(e,this,n);this.$store.commit(a.join("/")+"/setFilter",{filterName:t,propValue:r})}}}function v(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e=y(e),{get:function(){var a=_(this.$store,w(e,this,r)).filters[t];return a||[0,this[n]]},set:b((function(a){var i=w(e,this,r),s=0!==a[0]||a[1]!==this[n]?a:null;this.$store.commit(i.join("/")+"/setFilter",{filterName:t,propValue:s})}),r)}}function g(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e=y(e),{get:function(){var a=_(this.$store,w(e,this,r)).filters[t];return a||this[n].slice()},set:b((function(a){var i=w(e,this,r),s=a.length===this[n].length?null:a;this.$store.commit(i.join("/")+"/setFilter",{filterName:t,propValue:s})}),r)}}function b(e,t){return t.debounce?u.a.debounce(e,t.debounce):e}function y(e){if(!e)return[];if(Array.isArray(e))return e;if("string"===typeof e)return e.split("/");throw new Error("Path must be a string or an array")}function w(e,t,n){return n.rootModuleProp&&(e=y(t[n.rootModuleProp]).concat(e)),e}function _(e,t){for(var n=e.state,r=0;r<t.length;r++)n=n[t[r]];return n}function x(e){var t=e[e.length-1],n=e.slice(0,e.length-1);return n.join("/")+"/set"+t.charAt(0).toUpperCase()+t.slice(1)}var j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.images&&e.images.length?n("div",{staticClass:"columns"},[e._l(e.images,(function(t){return n("div",{key:t.image,staticClass:"column"},[n("image-preview",{attrs:{image:t,blindMode:e.project.blindMode}})],1)})),n("div",{staticClass:"column is-narrow vertical-center"},[n("router-link",{staticClass:"button",attrs:{to:"/project/"+this.project.id+"/images"}},[e._v(e._s(e.$t("button-view-all")))])],1)],2):n("div",[e._v(" "+e._s(e.$t("no-image-recently-opened"))+" ")])},C=[],$=n("1246"),k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card",class:{"full-height-card":e.fullHeightCard}},[n("router-link",{staticClass:"card-image recent-image",attrs:{to:"/project/"+e.image.project+"/image/"+e.idImage}},[n("figure",{staticClass:"image is-5by3",style:e.figureStyle})]),n("div",{staticClass:"card-content"},[n("div",{staticClass:"content"},[n("p",[n("router-link",{attrs:{to:"/project/"+e.image.project+"/image/"+e.idImage}},[e.blindMode?n("span",{staticClass:"blind-indication"},[e._v("["+e._s(this.$t("blinded-name-indication"))+"]")]):e._e(),e._v(" "+e._s(e.image.blindedName||e.image.instanceFilename||e.image.imageName)+" "),e.showProject?n("span",{staticClass:"in-project"},[e._v("("+e._s(e.$t("in-project",{projectName:e.image.projectName}))+")")]):e._e()])],1),e._t("default")],2)])],1)},P=[],O={name:"image-preview",props:{image:{type:Object},fullHeightCard:{type:Boolean,default:!0},showProject:{type:Boolean,default:!1},blindMode:{type:Boolean,default:!1}},computed:{idImage:function(){return this.image.image||this.image.id},figureStyle:function(){return{backgroundImage:'url("'.concat(this.image.thumb||this.image.imageThumb,'")')}}}},R=O,S=(n("a411"),n("2877")),T=Object(S["a"])(R,k,P,!1,null,"56aa8af0",null),A=T.exports,D={name:"list-images-preview",components:{ImagePreview:A},props:{project:Object,nbRecent:{type:Number,default:3}},data:function(){return{images:[]}},computed:{currentUser:m("currentUser/user")},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ImageInstanceCollection"].fetchLastOpened({max:this.nbRecent,project:this.project.id,user:this.currentUser.id});case 2:this.images=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},M=D,E=(n("ed2b"),Object(S["a"])(M,j,C,!1,null,"54a5cece",null)),I=E.exports,N={CYTOMINE_CORE_HOST:"http://localhost-core",CYTOMINE_UPLOAD_HOST:"http://localhost-upload",STOP_PREVIEW_KEYWORD:"STOP_PREVIEW",DIGITAL_ZOOM_INCREMENT:4,VIEWER_ANNOTATIONS_REFRESH_INTERVAL:1e4,MEMBERS_ACTIVITY_REFRESH_INTERVAL:3e4,PING_INTERVAL:2e4,JOB_DETAILS_REFRESH_INTERVAL:2e3,JOB_LOGS_REFRESH_INTERVAL:5e3,TASK_REFRESH_INTERVAL:1e3,STORAGE_REFRESH_INTERVAL:1e4,ONGOING_UPLOAD_REFRESH_INTERVAL:500,SAVE_POSITION_IN_IMAGE_INTERVAL:5e3,BROADCASTING_USERS_REFRESH_INTERVAL:1e4,TRACKING_REFRESH_INTERVAL:500,IDLE_DURATION:120,CONFIG_KEY_WELCOME:"WELCOME",PREFIX_HIDDEN_PROPERTY_KEY:"@",DEFAULT_PROPERTY_KEY:"@DEFAULT_PROPERTY"},U={name:"global-dashboard",components:{ListImagesPreview:I,ImagePreview:A},props:{nbRecent:{type:Number,default:3}},data:function(){return{projects:null,recentProjectsId:null,recentImages:[],nbUserAnnots:null,nbReviewed:null,welcomeMessage:null,loading:!0}},computed:{currentUser:m("currentUser/user"),nbImages:function(){if(this.projects)return this.projects.array.reduce((function(e,t){return e+t.numberOfImages}),0)},recentProjects:function(){var e=this;if(this.recentProjectsId&&this.projects){var t=[];return this.recentProjectsId.forEach((function(n){var r=e.projects.array.find((function(e){return e.id===n}));r&&t.push(r)})),t}},lastOpenedImage:function(){if(this.recentImages&&this.recentImages.length>0&&this.projects){var e=this.recentImages[0],t=this.projects.array.find((function(t){return t.id===e.project}));return t&&(e.projectName=t.name,e.blindMode=t.blindMode),e}}},methods:{fetchProjects:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ProjectCollection"].fetchAll();case 2:this.projects=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchNbAnnots:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.currentUser.fetchNbAnnotations();case 2:this.nbUserAnnots=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchNbReviewedAnnots:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.currentUser.fetchNbAnnotations(!0);case 2:this.nbReviewed=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchRecentProjectsId:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ProjectCollection"].fetchLastOpened(this.nbRecent);case 2:t=e.sent,this.recentProjectsId=t.map((function(e){return e.id}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchRecentImages:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ImageInstanceCollection"].fetchLastOpened({max:1});case 2:this.recentImages=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchWelcomeMessage:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["Configuration"].fetch(N.CONFIG_KEY_WELCOME);case 3:this.welcomeMessage=e.sent.value,e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.fetchProjects(),this.fetchNbAnnots(),this.fetchNbReviewedAnnots(),this.fetchRecentProjectsId(),this.fetchRecentImages(),this.fetchWelcomeMessage()].map((function(e){return e.catch((function(e){}))})));case 2:this.loading=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},F=U,L=(n("8372"),Object(S["a"])(F,i,s,!1,null,"3c1c3e9c",null)),q=L.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-projects-wrapper content-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.error?n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(e._s(e.$t("unexpected-error-info-message")))])]):e.loading?e._e():n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("projects"))+" "),e.currentUser.guestByNow?e._e():n("button",{staticClass:"button is-link",on:{click:function(t){e.creationModal=!0}}},[e._v(" "+e._s(e.$t("new-project"))+" ")])]),n("div",{staticClass:"panel-block"},[n("div",{staticClass:"search-block"},[n("b-input",{staticClass:"search-projects",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),n("button",{staticClass:"button",on:{click:function(t){return e.toggleFilterDisplay()}}},[e._m(0),n("span",[e._v(" "+e._s(e.filtersOpened?e.$t("button-hide-filters"):e.$t("button-show-filters"))+" ")]),e.nbActiveFilters?n("span",{staticClass:"nb-active-filters"},[e._v(" "+e._s(e.nbActiveFilters)+" ")]):e._e()])],1),n("b-collapse",{attrs:{open:e.filtersOpened}},[n("div",{staticClass:"filters"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("ontology"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableOntologies,label:"name","track-by":"id",multiple:!0,allPlaceholder:e.$t("all-ontologies")},model:{value:e.selectedOntologies,callback:function(t){e.selectedOntologies=t},expression:"selectedOntologies"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("my-role"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableRoles,multiple:"",searchable:!1},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("tags"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableTags,label:"name","track-by":"id",multiple:!0,allPlaceholder:e.$t("all")},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)])]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("members"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-slider",{attrs:{max:e.maxNbMembers},model:{value:e.boundsMembers,callback:function(t){e.boundsMembers=t},expression:"boundsMembers"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("images"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-slider",{attrs:{max:e.maxNbImages},model:{value:e.boundsImages,callback:function(t){e.boundsImages=t},expression:"boundsImages"}})],1)]),n("div",{staticClass:"column"})]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("user-annotations"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-slider",{attrs:{max:e.maxNbUserAnnotations},model:{value:e.boundsUserAnnotations,callback:function(t){e.boundsUserAnnotations=t},expression:"boundsUserAnnotations"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("analysis-annotations"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-slider",{attrs:{max:e.maxNbJobAnnotations},model:{value:e.boundsJobAnnotations,callback:function(t){e.boundsJobAnnotations=t},expression:"boundsJobAnnotations"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("reviewed-annotations"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-slider",{attrs:{max:e.maxNbReviewedAnnotations},model:{value:e.boundsReviewedAnnotations,callback:function(t){e.boundsReviewedAnnotations=t},expression:"boundsReviewedAnnotations"}})],1)])])])]),n("cytomine-table",{staticClass:"table-projects",attrs:{collection:e.projectCollection,currentPage:e.currentPage,perPage:e.perPage,openedDetailed:e.openedDetails,sort:e.sortField,order:e.sortOrder,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t}},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{field:"currentUserRole",label:"",centered:"",width:"1",sortable:""}},[n("icon-project-member-role",{attrs:{"is-manager":r.currentUserRoles.admin,"is-representative":r.currentUserRoles.representative}})],1),n("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:"",width:"250"}},[n("router-link",{attrs:{to:"/project/"+r.id}},[e._v(" "+e._s(r.name)+" ")])],1),n("b-table-column",{attrs:{field:"membersCount",label:e.$t("members"),centered:"",sortable:"",width:"150"}},[e._v(" "+e._s(r.membersCount)+" ")]),n("b-table-column",{attrs:{field:"numberOfImages",label:e.$t("images"),centered:"",sortable:"",width:"150"}},[n("router-link",{attrs:{to:"/project/"+r.id+"/images"}},[e._v(e._s(r.numberOfImages))])],1),n("b-table-column",{attrs:{field:"numberOfAnnotations",label:e.$t("user-annotations"),centered:"",sortable:"",width:"150"}},[n("router-link",{attrs:{to:"/project/"+r.id+"/annotations?type=user"}},[e._v(" "+e._s(r.numberOfAnnotations)+" ")])],1),n("b-table-column",{attrs:{field:"numberOfJobAnnotations",label:e.$t("analysis-annotations"),centered:"",sortable:"",width:"150"}},[n("router-link",{attrs:{to:"/project/"+r.id+"/annotations?type=algo"}},[e._v(" "+e._s(r.numberOfJobAnnotations)+" ")])],1),n("b-table-column",{attrs:{field:"numberOfReviewedAnnotations",label:e.$t("reviewed-annotations"),centered:"",sortable:"",width:"150"}},[n("router-link",{attrs:{to:"/project/"+r.id+"/annotations?type=reviewed"}},[e._v(" "+e._s(r.numberOfReviewedAnnotations)+" ")])],1),n("b-table-column",{attrs:{field:"lastActivity",label:e.$t("last-activity"),centered:"",sortable:"",width:"180"}},[e._v(" "+e._s(e._f("moment")(Number(r.lastActivity),"ll"))+" ")]),n("b-table-column",{attrs:{label:" ",centered:"",width:"150"}},[n("router-link",{staticClass:"button is-small is-link",attrs:{to:"/project/"+r.id}},[e._v(" "+e._s(e.$t("button-open"))+" ")])],1)]}},{key:"detail",fn:function(t){var r=t.row;return[n("project-details",{attrs:{project:r,"excluded-properties":e.excludedProperties,editable:""},on:{update:function(t){return e.updateProject()},delete:function(t){return e.deleteProject(r)}}})]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-project")))])])]},proxy:!0}])}),n("div",{staticClass:"legend"},[n("h2",[e._v(e._s(e.$t("legend")))]),n("p",[n("icon-project-member-role"),e._v(" : "+e._s(e.$t("contributor-icon-label")))],1),n("p",[n("icon-project-member-role",{attrs:{"is-manager":!0}}),e._v(" : "+e._s(e.$t("manager-icon-label")))],1),n("p",[n("icon-project-member-role",{attrs:{"is-manager":!0,"is-representative":!0}}),e._v(" : "+e._s(e.$t("representative-icon-label")))],1)])],1)]),n("add-project-modal",{attrs:{active:e.creationModal,ontologies:e.ontologies},on:{"update:active":function(t){e.creationModal=t}}})],1)},V=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-filter"})])}],B=(n("ac4d"),n("8a81"),n("1c4c"),n("6b54"),n("55dd"),n("6762"),n("2fdb"),n("2909")),W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._t("error",[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])])],2):n("div",{staticClass:"cytomine-table-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:!e.data}}),e.data?n("b-table",{attrs:{data:e.data,loading:e.loading,paginated:"","backend-pagination":"",total:e.total,"per-page":e.internalPerPage,"current-page":e.internalCurrentPage,"pagination-size":"is-small",detailed:e.detailed,"detail-key":e.detailKey,"opened-detailed":e.openedDetailed.slice(),"backend-sorting":"","default-sort":e.sort,"default-sort-direction":e.order,checkable:e.checkable,"checked-rows":e.internalCheckedRows,"is-row-checkable":e.isRowCheckable},on:{"update:currentPage":function(t){e.internalCurrentPage=t},"update:current-page":function(t){e.internalCurrentPage=t},"update:openedDetailed":function(t){return e.$emit("update:openedDetailed",t)},"update:checkedRows":function(t){e.internalCheckedRows=t},"update:checked-rows":function(t){e.internalCheckedRows=t},sort:e.updateSort},scopedSlots:e._u([{key:"header",fn:function(t){var n=t.column;return[e._t("header",[e._v(" "+e._s(n.label)+" ")],{column:n,index:e.index})]}},{key:"default",fn:function(t){var n=t.row,r=t.index;return[e._t("default",null,{row:n,index:r})]}},{key:"detail",fn:function(t){var n=t.row,r=t.index;return[e._t("detail",null,{row:n,index:r})]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[e._t("empty",[e._v(" "+e._s(e.$t("no-result"))+" ")],{row:e.row,index:e.index})],2)]},proxy:!0},{key:"footer",fn:function(){return[e._t("footer")]},proxy:!0},{key:"bottom-left",fn:function(){return[n("b-select",{attrs:{size:"is-small"},model:{value:e.internalPerPage,callback:function(t){e.internalPerPage=t},expression:"internalPerPage"}},e._l(e.perPageOptions,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(" "+e._s(e.$t("count-per-page",{count:t}))+" ")])})),0)]},proxy:!0}],null,!0)}):e._e()],1)},J=[],H={name:"cytomine-table",props:{collection:Object,perPageOptions:{type:Array,default:function(){return[10,25,50,100]}},perPage:{type:Number,default:25},currentPage:{type:Number,default:1},detailed:{type:Boolean,default:!0},detailKey:{type:String,default:"id"},openedDetailed:{type:Array,default:function(){return[]}},sort:{type:String},order:{type:String,default:"asc"},revision:Number,refreshInterval:{type:Number,default:0},checkable:{type:Boolean,default:!1},checkedRows:{type:Array,default:function(){return[]}},isRowCheckable:{type:Function}},data:function(){return{index:0,row:null,data:null,error:!1,loading:!0,total:0,internalCheckedRows:[],internalCurrentPage:null,internalPerPage:null,internalSort:null,internalOrder:null,timeout:null}},computed:{internalCollection:function(){var e=this.collection.clone();return e.max=this.internalPerPage,e.sort=this.internalSort,e.order=this.internalOrder,e}},watch:{internalCollection:function(){this.fetchPage(!0)},internalCurrentPage:function(e,t){t&&(this.$emit("update:currentPage",e),this.fetchPage(!0))},internalCheckedRows:function(e){this.$emit("update:checkedRows",e)},internalPerPage:function(e){this.$emit("update:perPage",e)},revision:function(){this.fetchPage()},refreshInterval:function(e){0===e?(clearTimeout(this.timeout),this.timeout=null):this.timeout||this.fetchPage()}},methods:{updateSort:function(e,t){this.internalSort=e,this.internalOrder=t,this.$emit("update:sort",e),this.$emit("update:order",t)},fetchPage:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],t&&(this.loading=!0),e.prev=2,e.next=5,this.internalCollection.fetchPage(this.internalCurrentPage-1);case 5:n=e.sent,this.data=n.array,this.total=n.totalNbItems,this.internalCheckedRows=this.data.filter((function(e){return r.internalCheckedRows.map((function(e){return e.id})).includes(e.id)})),this.$emit("update:checkedRows",this.internalCheckedRows),this.$emit("update:data",n),e.next=20;break;case 13:if(e.prev=13,e.t0=e["catch"](2),!(this.internalCurrentPage>1)){e.next=18;break}return this.internalCurrentPage=1,e.abrupt("return");case 18:return this.error=!0,e.abrupt("return");case 20:this.loading=!1,clearTimeout(this.timeout),this.refreshInterval&&(this.timeout=setTimeout(this.fetchPage,this.refreshInterval));case 23:case"end":return e.stop()}}),e,this,[[2,13]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.internalCurrentPage=this.currentPage,this.internalPerPage=this.perPage,this.internalSort=this.sort,this.internalOrder=this.order,this.internalCheckedRows=this.checkedRows}},G=H,K=(n("2734"),Object(S["a"])(G,W,J,!1,null,"2c405f02",null)),Y=K.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("multiselect",{attrs:{value:e.value,label:e.label,"track-by":e.trackBy,"group-label":e.groupLabel,"group-values":e.groupValues,"group-select":!0,options:e.options,optionHeight:30,showLabels:!1,multiple:e.multiple,"close-on-select":!e.multiple,searchable:e.searchable,"clear-on-select":!e.multiple,showPointer:!1,placeholder:e.$t("select-options"),"allow-empty":e.allowEmpty,disabled:e.disabled},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([e.multiple&&e.options.length>0&&e.selectAllAvailable?{key:"beforeList",fn:function(){return[n("li",{staticClass:"multiselect__element multiselect__select-all",on:{click:function(t){return e.selectAll()}}},[n("span",{class:["multiselect__option",e.allSelected?"multiselect__option--selected":""]},[e._v(" "+e._s(e.$t("select-all"))+" ")])])]},proxy:!0}:null,e.multiple&&e.options.length>0?{key:"selection",fn:function(t){var r=t.isOpen;return[r?n("div"):n("div",{staticClass:"multiselect__tags-wrap"},[e.allSelected?n("strong",[e._v(" "+e._s(e.allPlaceholder||e.$t("all"))+" ")]):[e._l(e.displayedOptions,(function(t,r){return n("span",{key:t[e.trackBy]},[e._v(" "+e._s(e.label?t[e.label]:t)),r<e.displayedOptions.length-1?[e._v(",")]:e._e()],2)})),e.countNotDisplayed>0?n("strong",[e._v(" "+e._s(e.$tc("and-count-others",e.countNotDisplayed,{count:e.countNotDisplayed}))+" ")]):e._e()]],2)]}}:null,{key:"option",fn:function(t){var n=t.option;return[e._t("option",null,{option:n})]}}],null,!0)})},X=[],Q=n("8e5f"),ee=n.n(Q),te={name:"cytomine-multiselect",components:{Multiselect:ee.a},props:{value:{type:null},options:{type:null},label:{type:String},trackBy:{type:String},groupLabel:{type:String},groupValues:{type:String},multiple:{type:Boolean,default:!1},selectAllAvailable:{type:Boolean,default:!0},searchable:{type:Boolean,default:!0},allowEmpty:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},allPlaceholder:{type:String}},data:function(){return{maxNbDisplayed:3}},computed:{allSelected:function(){var e=this;return!!this.multiple&&this.options.every((function(t){return e.value.includes(t)}))},displayedOptions:function(){return this.value.slice(0,this.maxNbDisplayed)},countNotDisplayed:function(){return this.value.length-this.maxNbDisplayed}},methods:{selectAll:function(){var e=this.allSelected?[]:this.options;this.$emit("input",e)}}},ne=te,re=(n("5323"),Object(S["a"])(ne,Z,X,!1,null,null,null)),ae=re.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-slider",{attrs:{value:e.value,min:e.min,max:e.max,tooltip:"always","tooltip-placement":e.tooltipPlacement,lazy:e.lazy},on:{change:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"tooltip",fn:function(t){var r=t.value,a=t.index;return[n("div",{class:["vue-slider-dot-tooltip-inner","vue-slider-dot-tooltip-inner-"+e.tooltipPlacement[a]],on:{mousedown:function(e){e.stopPropagation()},click:function(t){return t.stopPropagation(),e.startEdition(a)}}},[e.indexEdited!==a?[e._v(" "+e._s(Math.round(1e3*r)/1e3)+" ")]:n("b-input",{ref:"inputSlider",attrs:{type:"text"},on:{"hook:mounted":function(t){return e.focus()},blur:function(t){return e.stopEdition(a)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.stopEdition(a)}},model:{value:e.editedValue,callback:function(t){e.editedValue=t},expression:"editedValue"}})],2)]}}])})},se=[],oe=n("4971"),ce=n.n(oe),le={name:"cytomine-slider",components:{VueSlider:ce.a},props:{value:{type:null},min:{type:Number,default:0},max:{type:Number,default:100},integerOnly:{type:Boolean,default:!0},lazy:{type:Boolean,default:!0}},data:function(){return{indexEdited:null,editedValue:0}},computed:{isArray:function(){return Array.isArray(this.value)},tooltipPlacement:function(){return this.isArray?["left","right"]:["right"]}},methods:{startEdition:function(e){this.indexEdited!==e&&(this.editedValue=this.isArray?this.value[e]:this.value,this.indexEdited=e)},stopEdition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.indexEdited===e){if(this.indexEdited=null,!this.editedValue||isNaN(this.editedValue))return;var t=this.integerOnly?parseInt(this.editedValue):Number(this.editedValue);if(t=Math.min(t,this.max),t=Math.max(t,this.min),this.isArray){var n=this.value.slice();n[e]=t,n[0]>n[1]&&n.reverse(),this.$emit("input",n)}else this.$emit("input",t)}},focus:function(){this.$refs.inputSlider.focus()}}},ue=le,de=(n("fae4"),Object(S["a"])(ue,ie,se,!1,null,null,null)),pe=de.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small",size:"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):n("table",{staticClass:"table"},[n("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():n("tbody",[e.isPropDisplayed("name")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("name")))]),n("td",{staticClass:"prop-content"},[e._v(" "+e._s(e.project.name)+" ")])]):e._e(),e.isPropDisplayed("numberOfImages")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("images")))]),n("td",{staticClass:"prop-content"},[n("router-link",{attrs:{to:"/project/"+e.project.id+"/images"}},[e._v(e._s(e.project.numberOfImages))])],1)]):e._e(),e.isPropDisplayed("membersCount")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("members")))]),n("td",{staticClass:"prop-content"},[e._v(" "+e._s(this.members.length)+" ")])]):e._e(),e.isPropDisplayed("numberOfAnnotations")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("user-annotations")))]),n("td",{staticClass:"prop-content"},[n("router-link",{attrs:{to:"/project/"+e.project.id+"/annotations?type=user"}},[e._v(" "+e._s(e.project.numberOfAnnotations)+" ")])],1)]):e._e(),e.isPropDisplayed("numberOfJobAnnotations")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("analysis-annotations")))]),n("td",{staticClass:"prop-content"},[n("router-link",{attrs:{to:"/project/"+e.project.id+"/annotations?type=algo"}},[e._v(" "+e._s(e.project.numberOfJobAnnotations)+" ")])],1)]):e._e(),e.isPropDisplayed("numberOfReviewedAnnotations")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("reviewed-annotations")))]),n("td",{staticClass:"prop-content"},[n("router-link",{attrs:{to:"/project/"+e.project.id+"/annotations?type=reviewed"}},[e._v(" "+e._s(e.project.numberOfReviewedAnnotations)+" ")])],1)]):e._e(),e.isPropDisplayed("description")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("description")))]),n("td",{staticClass:"prop-content"},[n("cytomine-description",{attrs:{object:e.project,canEdit:e.canManageProject}})],1)]):e._e(),e.isPropDisplayed("tags")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("tags")))]),n("td",{staticClass:"prop-content"},[n("cytomine-tags",{attrs:{object:e.project,canEdit:e.canManageProject}})],1)]):e._e(),e.isPropDisplayed("properties")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("properties")))]),n("td",{staticClass:"prop-content"},[n("cytomine-properties",{attrs:{object:e.project,canEdit:e.canManageProject}})],1)]):e._e(),e.isPropDisplayed("attachedFiles")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("attached-files")))]),n("td",{staticClass:"prop-content"},[n("attached-files",{attrs:{object:e.project,canEdit:e.canManageProject}})],1)]):e._e(),e.isPropDisplayed("ontology")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("ontology")))]),n("td",{staticClass:"prop-content"},[e.project.ontology?n("router-link",{attrs:{to:"/ontology/"+e.project.ontology}},[e._v(" "+e._s(e.project.ontologyName)+" ")]):n("em",[e._v(e._s(e.$t("no-ontology")))])],1)]):e._e(),e.isPropDisplayed("created")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("created-on")))]),n("td",{staticClass:"prop-content"},[e._v(" "+e._s(e._f("moment")(Number(e.project.created),"ll"))+" ")])]):e._e(),e.isPropDisplayed("creator")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("creator")))]),n("td",{staticClass:"prop-content"},[n("list-usernames",{attrs:{users:[e.creator],onlines:e.onlines}})],1)]):e._e(),e.isPropDisplayed("representatives")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("representatives"))+" ("+e._s(e.representatives.length)+")")]),n("td",{staticClass:"prop-content"},[n("list-usernames",{attrs:{users:e.representatives,onlines:e.onlines}})],1)]):e._e(),e.isPropDisplayed("managers")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("managers"))+" ("+e._s(e.managers.length)+")")]),n("td",{staticClass:"prop-content"},[n("list-usernames",{attrs:{users:e.managers,onlines:e.onlines}})],1)]):e._e(),e.isPropDisplayed("contributors")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("contributors"))+" ("+e._s(e.contributors.length)+")")]),n("td",{staticClass:"prop-content"},[n("list-usernames",{attrs:{users:e.contributors,onlines:e.onlines}})],1)]):e._e(),e.isPropDisplayed("imagesPreview")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("images")))]),n("td",{staticClass:"prop-content"},[n("list-images-preview",{attrs:{project:e.project}})],1)]):e._e(),e.canManageProject?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("actions")))]),n("td",{staticClass:"prop-content"},[n("project-actions",{attrs:{project:e.project},on:{update:function(t){return e.$emit("update",t)},delete:function(t){return e.$emit("delete")}}})],1)]):e._e()])],1)},fe=[],he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.filteredUsers.length?n("span",[e._l(e.usersToDisplay,(function(t,r){return n("span",{key:t.id},[n("username",{attrs:{user:t,online:e.isOnline(t.id)}}),r<e.usersToDisplay.length-1?[e._v(", ")]:e._e()],2)})),e.tooManyUsers?n("button",{staticClass:"button is-small",on:{click:function(t){e.expanded=!e.expanded}}},[e._v(" "+e._s(e.expanded?e.$t("button-less"):e.$t("button-more"))+" ")]):e._e()],2):n("span",[e._v(" - ")])},ve=[],ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.resolvedUser?n("span",[null!==e.online?n("span",{class:[e.online?"online-dot":"offline-dot"]}):e._e(),e._v(" "+e._s(e.displayFullName?e.fullName:e.resolvedUser.username))]):e._e()},be=[],ye=n("c1df"),we=n.n(ye);function _e(e){if(!e)return"";if(e.algo){var t=we()(Number(e.created)).format("L LTS");return"".concat(e.softwareName," - ").concat(t)}return"".concat(e.firstname," ").concat(e.lastname," (").concat(e.username,")")}var xe={name:"username",props:{user:Object,id:Number,online:{type:Boolean,default:null},displayFullName:{type:Boolean,default:!0}},data:function(){return{fetchedUser:{}}},computed:{resolvedUser:function(){return this.user||this.fetchedUser},fullName:function(){return _e(this.resolvedUser)}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.user||!this.id){e.next=4;break}return e.next=3,$["User"].fetch(this.id);case 3:this.fetchedUser=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},je=xe,Ce=(n("6941"),Object(S["a"])(je,ge,be,!1,null,"569bb75c",null)),$e=Ce.exports,ke={name:"list-usernames",components:{Username:$e},props:{users:Array,onlines:Array,nbDisplayed:{type:Number,default:5}},data:function(){return{expanded:!1}},computed:{filteredUsers:function(){return this.users.filter((function(e){return e}))},tooManyUsers:function(){return this.filteredUsers&&this.filteredUsers.length>this.nbDisplayed},usersToDisplay:function(){return!this.tooManyUsers||this.expanded||0===this.nbDisplayed?this.filteredUsers:this.filteredUsers.slice(0,this.nbDisplayed)}},methods:{isOnline:function(e){return this.onlines?this.onlines.some((function(t){return t.id===e})):null}}},Pe=ke,Oe=(n("26da"),Object(S["a"])(Pe,he,ve,!1,null,"3b1c61de",null)),Re=Oe.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"project-actions-wrapper"},[n("rename-modal",{attrs:{title:e.$t("rename-project"),currentName:e.project.name,active:e.isRenameModalActive},on:{"update:active":function(t){e.isRenameModalActive=t},rename:e.rename}}),n("form",{on:{submit:function(t){return t.preventDefault(),e.saveOntology()}}},[n("cytomine-modal",{attrs:{active:e.isOntologyModalActive,title:e.$t("change-ontology")},on:{close:function(t){e.isOntologyModalActive=!1}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button",disabled:e.savingOntology},on:{click:function(t){e.isOntologyModalActive=!1}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),e.errorOntologies?e._e():n("button",{staticClass:"button is-link",class:{"is-loading":e.savingOntology},attrs:{disabled:e.loadingOntologies||e.savingOntology}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[e.errorOntologies?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[e.project.ontology?n("b-message",{attrs:{type:"is-warning","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("change-ontology-warning-message"))+" ")]):e._e(),n("b-field",{attrs:{label:e.$t("ontology")}},[n("b-select",{attrs:{placeholder:e.$t("no-ontology"),disabled:e.loadingOntologies,loading:e.loadingOntologies},model:{value:e.selectedOntology,callback:function(t){e.selectedOntology=t},expression:"selectedOntology"}},[n("option",{domProps:{value:null}},[e._v(" "+e._s(e.$t("no-ontology"))+" ")]),e._l(e.ontologies,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)],1)]],2)],1),n("div",{staticClass:"buttons"},[n("button",{staticClass:"button",class:e.size,on:{click:function(t){e.isRenameModalActive=!0}}},[e._v(" "+e._s(e.$t("button-rename"))+" ")]),n("button",{staticClass:"button",class:e.size,attrs:{disabled:e.cannotDeleteOntology},on:{click:function(t){e.isOntologyModalActive=!0}}},[e._v(" "+e._s(e.$t("button-change-ontology"))+" ")]),n("button",{staticClass:"button is-danger",class:e.size,on:{click:function(t){return e.deleteProject()}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")])])],1)},Te=[],Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{active:e.active,"has-modal-card":""},on:{close:function(t){return e.close()}}},[n("cytomine-modal-card",{attrs:{title:e.title},on:{close:function(t){return e.close()}},scopedSlots:e._u([{key:"footer",fn:function(){return[e._t("footer")]},proxy:!0}],null,!0)},[e._t("default")],2)],1)},De=[],Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-card"},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[e._v(e._s(e.title))]),e._t("controls")],2),n("section",{staticClass:"modal-card-body"},[e._t("default")],2),n("footer",{staticClass:"modal-card-foot"},[e._t("footer",[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}},[e._v(" "+e._s(e.$t("button-close"))+" ")])])],2)])},Ee=[],Ie={name:"cytomine-modal-card",props:{title:String}},Ne=Ie,Ue=Object(S["a"])(Ne,Me,Ee,!1,null,null,null),Fe=Ue.exports,Le={name:"cytomine-modal",props:{active:Boolean,title:String},components:{CytomineModalCard:Fe},methods:{close:function(){this.$emit("close"),this.$emit("update:active",!1)}}},qe=Le,ze=Object(S["a"])(qe,Ae,De,!1,null,null,null),Ve=ze.exports,Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){return t.preventDefault(),e.rename()}}},[n("cytomine-modal",{attrs:{title:e.title,active:e.active},on:{close:function(t){return e.close()}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.close()}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[n("b-field",{attrs:{label:e.$t("new-name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name"},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1)],1)],1)},We=[],Je={name:"rename-modal",extends:Ve,props:{currentName:String,title:String},components:{CytomineModal:Ve},$_veeValidate:{validator:"new"},data:function(){return{newName:""}},watch:{active:function(e){e&&(this.newName=this.currentName)}},methods:{rename:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:this.$emit("rename",this.newName),this.$parent.close();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.newName=this.currentName;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},He=Je,Ge=Object(S["a"])(He,Be,We,!1,null,null,null),Ke=Ge.exports,Ye={name:"project-actions",props:{project:{type:Object},size:{type:String,default:"is-small"}},components:{CytomineModal:Ve,RenameModal:Ke},data:function(){return{isRenameModalActive:!1,isOntologyModalActive:!1,loadingOntologies:!0,errorOntologies:!1,ontologies:null,selectedOntology:null,cannotDeleteOntology:!1,savingOntology:!1}},watch:{isOntologyModalActive:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=15;break}if(!this.loadingOntologies){e.next=13;break}return e.prev=2,e.next=5,$["OntologyCollection"].fetchAll({light:!0});case 5:this.ontologies=e.sent.array,this.ontologies.sort((function(e,t){return e.name.localeCompare(t.name)})),this.loadingOntologies=!1,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),this.errorOntologies=!0;case 13:this.selectedOntology=this.project.ontology,this.savingOntology=!1;case 15:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(t){return e.apply(this,arguments)}return t}()},methods:{rename:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.project.clone(),e.prev=1,n.name=t,e.next=5,n.save();case 5:this.$emit("update",n),this.$notify({type:"success",text:this.$t("notif-success-project-rename",{projectName:n.name})}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),this.$notify({type:"error",text:this.$t("notif-error-project-rename",{projectName:this.project.name})});case 12:this.isRenameModalActive=!1;case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}(),saveOntology:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=this,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],this.savingOntology=!0,n=this.project.clone(),e.prev=3,n.ontology=this.selectedOntology,n.forceOntologyUpdate=t,e.next=8,n.save();case 8:this.$emit("update",n),this.$notify({type:"success",text:this.$t("notif-success-project-ontology-change",{projectName:this.project.name})}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](3),e.t0.response&&e.t0.response.data.errorValues?(r=e.t0.response.data.errorValues,0===r.algoAssociatedTermsCount&&0===r.reviewedAssociatedTermsCount?this.$buefy.dialog.confirm({title:this.$t("confirm-ontology-change"),message:this.$t("confirm-ontology-change-delete-user-terms",{count:r.userAssociatedTermsCount}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return a.saveOntology(!0)}}):(this.cannotDeleteOntology=!0,this.$notify({type:"error",text:this.$t("notif-error-project-ontology-change-"+(r.algoAssociatedTermsCount?"job-terms":"reviewed-terms"))}))):this.$notify({type:"error",text:this.$t("notif-error-project-ontology-change",{projectName:this.project.name})});case 15:this.savingOntology=!1,this.isOntologyModalActive=!1;case 17:case"end":return e.stop()}}),e,this,[[3,12]])})));function t(){return e.apply(this,arguments)}return t}(),deleteProject:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("delete-project"),message:this.$t("delete-project-confirmation-message",{projectName:this.project.name}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.$emit("delete")}})}}},Ze=Ye,Xe=Object(S["a"])(Ze,Se,Te,!1,null,null,null),Qe=Xe.exports,et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["description-wrapper",e.loading?"loading":""]},[n("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[e.description?[n("div",{staticClass:"ql-snow"},[n("div",{staticClass:"ql-editor",domProps:{innerHTML:e._s(e.previewDescription)}})]),n("div",{staticClass:"buttons are-small"},[e.croppedDescription?n("button",{staticClass:"button",on:{click:function(t){return e.openModal(!1)}}},[e._v(" "+e._s(e.$t("button-full-text"))+" ")]):e._e(),e.canEdit?n("button",{staticClass:"button",on:{click:function(t){return e.openModal(!0)}}},[e._v(" "+e._s(e.$t("button-edit"))+" ")]):e._e()])]:[n("em",[e._v(e._s(e.$t("no-description")))]),e.canEdit?n("button",{staticClass:"button is-small margin",on:{click:function(t){return e.openModal(!0)}}},[e._v(" "+e._s(e.$t("button-add"))+" ")]):e._e()]]],2)},tt=[],nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("cytomine-modal-card",{staticClass:"description-modal",class:{expanded:e.expanded},attrs:{title:e.$t("description")},on:{close:function(t){return e.$parent.close()}},scopedSlots:e._u([{key:"controls",fn:function(){return[n("button",{staticClass:"button is-small",on:{click:function(t){e.expanded=!e.expanded}}},[n("i",{class:["fas",e.expanded?"fa-compress":"fa-expand"]})])]},proxy:!0},e.edit?{key:"footer",fn:function(){return[n("button",{staticClass:"button",on:{click:function(t){return e.$parent.close()}}},[e._v(e._s(e.$t("button-cancel")))]),e.edit?n("button",{staticClass:"button is-link",on:{click:function(t){return e.save()}}},[e._v(" "+e._s(e.$t("button-save"))+" ")]):e._e()]},proxy:!0}:null],null,!0)},[e.edit?[n("div",{staticClass:"keyword-info"},[n("i",{staticClass:"fas fa-info-circle"}),n("i18n",{attrs:{path:"info-keyword-stop-preview-description"}},[n("span",{staticClass:"keyword",attrs:{place:"keyword"}},[e._v(" "+e._s(e.stopPreviewKeyword)+" ")])])],1),n("cytomine-quill-editor",{attrs:{placeholder:e.$t("enter-description")},model:{value:e.descriptionContent,callback:function(t){e.descriptionContent=t},expression:"descriptionContent"}})]:n("div",{staticClass:"ql-snow"},[n("div",{staticClass:"ql-editor preview",domProps:{innerHTML:e._s(e.descriptionWithoutKeywords)}})])],2)},rt=[],at=(n("3b2b"),n("a481"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cytomine-quill-editor"},[n("div",{attrs:{id:"tooltip-container"}}),e._v(" "),n("quill-editor",{ref:"quillEditor",attrs:{value:e.value,options:e.editorOptions},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"toolbar",fn:function(){return[n("div",{attrs:{id:"toolbar"}},[n("span",{staticClass:"ql-formats"},[n("select",{staticClass:"ql-header"},[n("option",{attrs:{selected:""}},[e._v(" "+e._s(e.$t("ql-paragraph"))+" ")]),n("option",{attrs:{value:"1"}},[e._v(" "+e._s(e.$t("ql-header-1"))+" ")]),n("option",{attrs:{value:"2"}},[e._v(" "+e._s(e.$t("ql-header-2"))+" ")]),n("option",{attrs:{value:"3"}},[e._v(" "+e._s(e.$t("ql-header-3"))+" ")]),n("option",{attrs:{value:"4"}},[e._v(" "+e._s(e.$t("ql-header-4"))+" ")])])]),n("span",{staticClass:"ql-formats",attrs:{title:e.$t("ql-font")}},[n("select",{staticClass:"ql-font"},[n("option",{attrs:{selected:""}}),n("option",{attrs:{value:"serif"}}),n("option",{attrs:{value:"monospace"}})])]),n("span",{staticClass:"ql-formats"},[n("button",{staticClass:"ql-bold",attrs:{title:e.$t("ql-bold")}}),n("button",{staticClass:"ql-italic",attrs:{title:e.$t("ql-italic")}}),n("button",{staticClass:"ql-underline",attrs:{title:e.$t("ql-underline")}})]),n("span",{staticClass:"ql-formats"},[n("button",{staticClass:"ql-script",attrs:{value:"sub",title:e.$t("ql-subscript")}}),n("button",{staticClass:"ql-script",attrs:{value:"super",title:e.$t("ql-superscript")}})]),n("span",{staticClass:"ql-formats"},[n("span",{attrs:{title:e.$t("ql-font-color")}},[n("select",{staticClass:"ql-color"})]),n("span",{attrs:{title:e.$t("ql-background-color")}},[n("select",{staticClass:"ql-background"})])]),n("span",{staticClass:"ql-formats",attrs:{title:e.$t("ql-align")}},[n("select",{staticClass:"ql-align"},[n("option",{attrs:{selected:""}}),n("option",{attrs:{value:"center"}}),n("option",{attrs:{value:"right"}})])]),n("span",{staticClass:"ql-formats"},[n("button",{staticClass:"ql-indent",attrs:{value:"-1",title:e.$t("ql-indent-left")}}),n("button",{staticClass:"ql-indent",attrs:{value:"+1",title:e.$t("ql-indent-right")}})]),n("span",{staticClass:"ql-formats"},[n("button",{staticClass:"ql-list",attrs:{value:"ordered",title:e.$t("ql-ordered-list")}}),n("button",{staticClass:"ql-list",attrs:{value:"bullet",title:e.$t("ql-bullet-list")}})]),n("span",{staticClass:"ql-formats"},[n("button",{staticClass:"ql-blockquote",attrs:{title:e.$t("ql-blockquote")}}),n("button",{staticClass:"ql-code-block",attrs:{title:e.$t("ql-code-block")}})]),n("span",{staticClass:"ql-formats"},[n("button",{staticClass:"ql-clean",attrs:{title:e.$t("ql-clean-format")}})]),n("span",{staticClass:"ql-formats"},[n("button",{staticClass:"ql-link",attrs:{title:e.$t("ql-link")}}),n("button",{staticClass:"ql-image",attrs:{title:e.$t("ql-image")}}),n("button",{staticClass:"ql-video",attrs:{title:e.$t("ql-video")}})]),n("span",{staticClass:"ql-formats"},[n("span",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.expandedSpecialChars=!1},expression:"() => expandedSpecialChars = false"}],class:["ql-picker",e.expandedSpecialChars?"ql-expanded":"","ql-special-characters"],attrs:{title:e.$t("ql-special-character")},on:{click:function(t){e.expandedSpecialChars=!e.expandedSpecialChars}}},[n("span",{staticClass:"ql-picker-label",attrs:{tabindex:"0",role:"button"}},[n("svg",{attrs:{viewBox:"0 0 18 18"}},[n("polygon",{staticClass:"ql-stroke",attrs:{points:"7 11 9 13 11 11 7 11"}}),n("polygon",{staticClass:"ql-stroke",attrs:{points:"7 7 9 5 11 7 7 7"}})])]),n("span",{staticClass:"ql-picker-options"},e._l(e.specialCharacters,(function(t){return n("button",{key:t,staticClass:"special-char",on:{click:function(n){return e.insertSpecialCharacter(t)}}},[e._v(" "+e._s(t)+" ")])})),0)])])])]},proxy:!0}])})],1)}),it=[],st=n("953d"),ot={name:"cytomine-quill-editor",components:{quillEditor:st["quillEditor"]},props:{value:String,placeholder:String},data:function(){return{editorOptions:{bounds:"#tooltip-container",placeholder:this.placeholder||this.$t("enter-text"),modules:{toolbar:"#toolbar"}},expandedSpecialChars:!1,specialCharacters:["$","€","£","¢","¥","¤","‰","©","®","™","§","¶","Æ","æ","Œ","œ","±","×","÷","⇒","⇔","∏","∑","≃","≤","≥"]}},computed:{quill:function(){return this.$refs.quillEditor.quill}},methods:{insertSpecialCharacter:function(e){var t=this.quill.getSelection(!0);t.length>0&&this.quill.deleteText(t.index,t.length,"user"),this.quill.insertText(t.index,e,"user"),this.quill.setSelection(t.index+1)}}},ct=ot,lt=(n("8972"),Object(S["a"])(ct,at,it,!1,null,null,null)),ut=lt.exports,dt={name:"cytomine-description-modal",props:{description:Object,edit:Boolean},components:{CytomineModalCard:Fe,CytomineQuillEditor:ut},data:function(){return{descriptionContent:"",expanded:!1}},computed:{descriptionWithoutKeywords:function(){return this.description.data.replace(new RegExp(N.STOP_PREVIEW_KEYWORD,"g"),"")},stopPreviewKeyword:function(){return N.STOP_PREVIEW_KEYWORD}},methods:{save:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.description.clone(),e.prev=1,!this.descriptionContent){e.next=9;break}return t.data=this.descriptionContent,e.next=6,t.save();case 6:this.$emit("change",t),e.next=13;break;case 9:if(!this.description.data){e.next=13;break}return e.next=12,t.delete();case 12:this.$emit("change",null);case 13:this.$parent.close(),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](1),this.descriptionContent=this.description.data,this.$notify({type:"error",text:this.$t("notif-error-update-description")});case 20:case"end":return e.stop()}}),e,this,[[1,16]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.descriptionContent=this.description.data}},pt=dt,mt=(n("82b5"),Object(S["a"])(pt,nt,rt,!1,null,null,null)),ft=mt.exports,ht={name:"cytomine-description",props:{object:{type:Object},canEdit:{type:Boolean,default:!0},maxPreviewLength:{type:Number,default:0}},data:function(){return{loading:!0,description:null,modalOpened:!1}},computed:{previewDescription:function(){var e=this.description.data.indexOf(N.STOP_PREVIEW_KEYWORD);return-1!==e?this.description.data.substring(0,e):this.maxPreviewLength&&this.description.data.length>this.maxPreviewLength?this.description.data.substring(0,this.maxPreviewLength)+"...":this.description.data},croppedDescription:function(){return this.description.data.length!==this.previewDescription.length}},methods:{openModal:function(e){var t=this;this.$buefy.modal.open({parent:this,component:ft,props:{description:this.description||new $["Description"]({data:"",object:this.object}),edit:e},hasModalCard:!0,events:{change:function(e){return t.description=e}}})}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["Description"].fetch(this.object);case 3:this.description=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},vt=ht,gt=(n("f615"),Object(S["a"])(vt,et,tt,!1,null,"17d906a7",null)),bt=gt.exports,yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"properties-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[n("b-field",{attrs:{grouped:"","group-multiline":""}},[e.error?n("em",[e._v(e._s(e.$t("error-fetch-properties")))]):e.properties.length>0?e._l(e.notEditedProperties,(function(t,r){return n("div",{key:t.id,staticClass:"control"},[n("b-taglist",{attrs:{attached:""}},[n("b-tag",{attrs:{type:"is-dark"}},[e._v(e._s(t.key))]),n("b-tag",[e._v(" "+e._s(t.value)+" "),e.canEdit?[n("button",{staticClass:"edit is-small",attrs:{title:e.$t("button-edit")},on:{click:function(n){return e.startPropEdition(t)}}},[n("i",{staticClass:"fas fa-pencil-alt"})]),n("button",{staticClass:"delete is-small",attrs:{title:e.$t("button-delete")},on:{click:function(t){return e.removeProp(r)}}})]:e._e()],2)],1)],1)})):0===e.properties.length?n("em",[e._v(e._s(e.$t("no-properties")))]):e._e(),e.canEdit?n("button",{key:"showForm",staticClass:"button is-small add-prop",on:{click:function(t){return e.addNewProp()}}},[e._v(" "+e._s(e.$t("button-add"))+" ")]):0===e.properties.length?n("em",[e._v(e._s(e.$t("no-properties")))]):e._e()],2),e._l(e.editedProperties,(function(t,r){return n("form",{key:t.id,staticClass:"new-prop-form",on:{submit:function(t){return t.preventDefault(),e.saveProp(r)}}},[n("b-input",{attrs:{size:"is-small",placeholder:e.$t("key")},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"prop.key"}}),n("b-input",{attrs:{size:"is-small",placeholder:e.$t("value")},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"prop.value"}}),n("button",{staticClass:"button is-small"},[e._v(" "+e._s(t.id?e.$t("button-save"):e.$t("button-add"))+" ")]),n("button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:function(t){return e.cancelPropEdition(r)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")])],1)}))]],2)},wt=[],_t=(n("f559"),{name:"cytomine-properties",props:{object:{type:Object},canEdit:{type:Boolean,default:!0}},data:function(){return{loading:!0,error:!1,properties:[],editedProperties:[],newPropKey:"",newPropValue:"",showNewPropForm:!1}},computed:{notEditedProperties:function(){var e=this.editedProperties.map((function(e){return e.id}));return this.properties.filter((function(t){return!e.includes(t.id)}))}},methods:{addNewProp:function(){var e=new $["Property"]({object:this.object});this.editedProperties.push(e)},removeProp:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.properties[t],e.prev=1,e.next=4,$["Property"].delete(n.id,this.object);case 4:this.properties.splice(t,1),this.$emit("update"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.$notify({type:"error",text:this.$t("notif-error-remove-prop")});case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}(),startPropEdition:function(e){e.oldKey=e.key,e.oldValue=e.value,this.editedProperties.splice(0,0,e)},saveProp:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.editedProperties[t],!n.key.startsWith(N.PREFIX_HIDDEN_PROPERTY_KEY)){e.next=4;break}return this.$notify({type:"error",text:this.$t("notif-error-invalid-key-prefix",{prefix:N.PREFIX_HIDDEN_PROPERTY_KEY})}),e.abrupt("return");case 4:return r=n.isNew(),e.prev=5,e.next=8,n.save();case 8:this.editedProperties.splice(t,1),r&&this.properties.push(n),this.$emit("update"),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](5),this.$notify({type:"error",text:this.$t("notif-error-save-prop")});case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));function t(t){return e.apply(this,arguments)}return t}(),cancelPropEdition:function(e){var t=this.editedProperties[e];t.key=t.oldKey,t.value=t.oldValue,this.editedProperties.splice(e,1)}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["PropertyCollection"].fetchAll({object:this.object});case 3:t=e.sent.array,this.properties=t.filter((function(e){return!e.key.startsWith(N.PREFIX_HIDDEN_PROPERTY_KEY)})),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.error=!0;case 10:this.loading=!1;case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()}),xt=_t,jt=(n("b1b3"),n("2a1a"),Object(S["a"])(xt,yt,wt,!1,null,"7755d0c0",null)),Ct=jt.exports,$t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tags-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[n("b-field",{attrs:{grouped:"","group-multiline":""}},[e.error?n("em",[e._v(e._s(e.$t("error-fetch-tags")))]):e.associatedTags.length>0?e._l(e.associatedTags,(function(t,r){return n("div",{key:t.id,staticClass:"control"},[n("b-taglist",{attrs:{attached:""}},[n("b-tag",{attrs:{type:"is-info"}},[e._v(e._s(t.tagName.toUpperCase()))]),e.canEdit?n("b-tag",[n("button",{staticClass:"delete is-small",attrs:{title:e.$t("button-delete")},on:{click:function(n){return e.removeTag(t,r)}}})]):e._e()],1)],1)})):0===e.associatedTags.length?n("em",[e._v(e._s(e.$t("no-tag")))]):e._e(),e.canEdit?n("button",{staticClass:"button is-small add-tag",on:{click:function(t){return e.displayModal()}}},[e._v(" "+e._s(e.$t("button-add"))+" ")]):e._e()],2)]],2)},kt=[],Pt=n("3835"),Ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-taginput",{attrs:{value:e.value,data:e.filteredDomains,autocomplete:"","open-on-focus":!0,"append-to-body":!0,field:e.displayedProperty,placeholder:e.$t(e.placeholder),"allow-new":e.allowNew,"allow-duplicates":!1},on:{input:function(t){return e.$emit("input",t)},typing:function(t){return e.searchString=t},add:function(t){e.searchString=""}}})},Rt=[];function St(e){var t=u.a.escapeRegExp(e);return new RegExp("("+t.split("\\*").join(".*")+")","i")}var Tt={name:"domain-tag-input",props:{value:Array,domains:Array,identifier:{type:String,default:"id"},displayedProperty:{type:String,default:"name"},searchedProperty:{type:String,default:"name"},allowNew:{type:Boolean,default:!1},placeholder:{type:String,default:"search-placeholder"}},data:function(){return{searchString:""}},computed:{filteredDomains:function(){var e=this,t=this.value.map((function(t){return t[e.identifier]})),n=this.domains.filter((function(n){return!t.includes(n[e.identifier])}));if(""===this.searchString)return n;var r=St(this.searchString);return n.filter((function(t){return r.test(t[e.searchedProperty])}))}}},At=Tt,Dt=(n("ff51"),Object(S["a"])(At,Ot,Rt,!1,null,"526466b8",null)),Mt=Dt.exports,Et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("cytomine-modal-card",{attrs:{title:e.$t("associate-tags"),active:""},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",on:{click:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",on:{click:e.addAssociations}},[e._v(" "+e._s(e.$t("button-add"))+" ")])]},proxy:!0}])},[n("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[n("b-field",[n("domain-tag-input",{attrs:{domains:e.notAssociatedTags,placeholder:"search-or-create-tag",allowNew:""},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)]],2)},It=[],Nt={name:"add-tag-modal",props:{associatedTags:Array},components:{CytomineModalCard:Fe,DomainTagInput:Mt},data:function(){return{loading:!0,tags:[],selectedTags:[]}},computed:{notAssociatedTags:function(){var e=this;return this.tags.filter((function(t){return!e.associatedTags.map((function(e){return e.tag})).includes(t.id)}))}},methods:{addAssociations:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$emit("addObjects",this.selectedTags),this.$parent.close();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchTags:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["TagCollection"].fetchAll();case 2:this.tags=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.fetchTags(),this.loading=!1;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Ut=Nt,Ft=(n("fd6e"),Object(S["a"])(Ut,Et,It,!1,null,"3d0b8921",null)),Lt=Ft.exports,qt={name:"cytomine-tags",props:{object:{type:Object},canEdit:{type:Boolean,default:!0}},components:{DomainTagInput:Mt,AddTagDomainAssociationModal:Lt},data:function(){return{loading:!0,error:!1,addTagModal:!1,associatedTags:[]}},methods:{displayModal:function(){this.$buefy.modal.open({parent:this,component:Lt,props:{associatedTags:this.associatedTags},hasModalCard:!0,events:{addObjects:this.addAssociations}})},sortAssociatedTags:function(){this.associatedTags.sort((function(e,t){return e.tagName.localeCompare(t.tagName)}))},addAssociations:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,s,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=3;break}return this.$notify({type:"error",text:this.$t("notif-error-add-tag-domain-associations")}),e.abrupt("return");case 3:for(n=t.reduce((function(e,t){return e[t instanceof $["Tag"]?0:1].push(t),e}),[[],[]]),r=Object(Pt["a"])(n,2),a=r[0],i=r[1],e.prev=4,s=[],o=0;o<i.length;o++)s.push(new $["Tag"]({name:i[o]},this.object).save());return e.next=9,Promise.all(s).then((function(e){return e}));case 9:i=e.sent,t=a.concat(i),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](4),this.$notify({type:"error",text:this.$t("notif-error-add-tags")});case 16:for(e.prev=16,c=[],l=0;l<t.length;l++)c.push(new $["TagDomainAssociation"]({tag:t[l].id},this.object).save());return e.next=21,Promise.all(c).then((function(e){return e}));case 21:u=e.sent,this.associatedTags=this.associatedTags.concat(u),this.sortAssociatedTags(),this.$notify({type:"success",text:this.$t("notif-success-add-tag-domain-association")}),e.next=30;break;case 27:e.prev=27,e.t1=e["catch"](16),this.$notify({type:"error",text:this.$t("notif-error-add-tag-domain-associations")});case 30:case"end":return e.stop()}}),e,this,[[4,13],[16,27]])})));function t(t){return e.apply(this,arguments)}return t}(),removeTag:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["TagDomainAssociation"].delete(t.id);case 3:this.associatedTags.splice(n,1),this.$emit("update"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-remove-tag")});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new $["TagDomainAssociationCollection"]({object:this.object}).fetchAll();case 3:this.associatedTags=e.sent.array,this.sortAssociatedTags(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.error=!0;case 10:this.loading=!1;case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},zt=qt,Vt=(n("7533"),n("1157"),Object(S["a"])(zt,$t,kt,!1,null,"a3bd014e",null)),Bt=Vt.exports,Wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"attached-files-wrapper"},[e.loading?e._e():[e.error?n("em",[e._v(e._s(e.$t("error-attached-files")))]):e.attachedFiles.length>0?e._l(e.attachedFiles,(function(t,r){return n("span",{key:t.id,staticClass:"file-item"},[n("a",{attrs:{href:e.host+t.url}},[e._v(e._s(t.filename))]),e.canEdit?n("button",{staticClass:"delete is-small",on:{click:function(n){return e.confirmDeletion(t,r)}}}):e._e(),r<e.attachedFiles.length-1?[e._v(",")]:e._e()],2)})):n("em",[e._v(e._s(e.$t("no-attached-file"))+" ")]),e.canEdit?n("button",{staticClass:"button is-small",on:{click:function(t){return e.displayModal()}}},[e._v(e._s(e.$t("button-add")))]):e._e()]],2)},Jt=[],Ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("cytomine-modal-card",{attrs:{title:e.$t("add-attached-file")},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",on:{click:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",attrs:{disabled:!e.selectedFile||e.errors.any()},on:{click:function(t){return e.save()}}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[n("b-field",[n("b-upload",{attrs:{type:"is-link","drag-drop":""},model:{value:e.selectedFile,callback:function(t){e.selectedFile=t},expression:"selectedFile"}},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-centered"},[e.selectedFile?[n("p",{staticClass:"filename is-size-4"},[n("i",{staticClass:"fas fa-file"}),e._v(" "+e._s(e.selectedFile.name))]),n("p",{staticClass:"has-text-grey is-size-6"},[e._v(e._s(e.$t("click-or-drop-new-file")))])]:[n("p",[n("i",{staticClass:"fas fa-upload fa-3x"})]),n("p",[e._v(e._s(e.$t("choose-file-or-drop")))])]],2)])])],1),n("b-field",{attrs:{label:e.$t("name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{disabled:!e.selectedFile,name:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1)},Gt=[],Kt={name:"attached-file-modal",props:{object:Object},components:{CytomineModalCard:Fe},$_veeValidate:{validator:"new"},data:function(){return{selectedFile:null,name:""}},watch:{selectedFile:function(e){e&&(this.name=e.name)}},methods:{save:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll("password");case 2:if(t=e.sent,this.selectedFile&&t){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,new $["AttachedFile"]({file:this.selectedFile,filename:this.name},this.object).save();case 8:n=e.sent,this.$emit("addAttachedFile",n),this.$notify({type:"success",text:this.$t("notif-success-attached-file-creation")}),this.$parent.close(),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](5),this.$notify({type:"error",text:this.$t("notif-error-attached-file-creation")});case 17:case"end":return e.stop()}}),e,this,[[5,14]])})));function t(){return e.apply(this,arguments)}return t}()}},Yt=Kt,Zt=(n("baf3"),Object(S["a"])(Yt,Ht,Gt,!1,null,"14e73ffe",null)),Xt=Zt.exports,Qt={name:"attached-files",props:{object:{type:Object},canEdit:{type:Boolean,default:!0}},data:function(){return{loading:!0,error:!1,attachedFiles:[]}},computed:{host:function(){return $["Cytomine"].instance.host}},methods:{displayModal:function(){this.$buefy.modal.open({parent:this,component:Xt,props:{object:this.object},hasModalCard:!0,events:{addAttachedFile:this.addAttachedFile}})},addAttachedFile:function(e){this.attachedFiles.push(e)},confirmDeletion:function(e,t){var n=this;this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-attached-file",{filename:e.filename}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return n.deleteAttachedFile(e,t)}})},deleteAttachedFile:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.delete();case 3:this.attachedFiles.splice(n,1),this.$notify({type:"success",text:this.$t("notif-success-attached-file-deletion",{filename:t.filename})}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-attached-file-deletion",{filename:t.filename})});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["AttachedFileCollection"].fetchAll({object:this.object});case 3:this.attachedFiles=e.sent.array,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.error=!0;case 9:this.loading=!1;case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},en=Qt,tn=(n("51b6"),Object(S["a"])(en,Wt,Jt,!1,null,"c897d6d0",null)),nn=tn.exports,rn={name:"project-details",components:{ListImagesPreview:I,ListUsernames:Re,ProjectActions:Qe,CytomineDescription:bt,CytomineProperties:Ct,CytomineTags:Bt,AttachedFiles:nn},props:{project:{type:Object},excludedProperties:{type:Array,default:function(){return[]}},editable:{type:Boolean,default:!1}},data:function(){return{loading:!0,error:!1,creator:null,managers:[],members:[],onlines:[],representatives:[]}},computed:{currentUser:m("currentUser/user"),canManageProject:function(){return this.editable&&(this.currentUser.adminByNow||this.managersIds.includes(this.currentUser.id))},managersIds:function(){return this.managers.map((function(e){return e.id}))},contributors:function(){var e=this;return this.members.filter((function(t){return!e.managersIds.includes(t.id)}))}},methods:{fetchCreator:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchCreator();case 2:this.creator=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchManagers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchAdministrators();case 2:this.managers=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchRepresentatives:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchRepresentatives();case 2:this.representatives=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchMembers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchUsers();case 2:this.members=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchOnlines:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchConnectedUsers();case 2:this.onlines=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),isPropDisplayed:function(e){return!this.excludedProperties.includes(e)},deleteProject:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("delete-project"),message:this.$t("delete-project-confirmation-message",{projectName:this.project.name}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.$emit("delete")}})}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.fetchCreator(),this.fetchManagers(),this.fetchRepresentatives(),this.fetchMembers(),this.fetchOnlines()]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),this.error=!0;case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()},an=rn,sn=(n("1720"),Object(S["a"])(an,me,fe,!1,null,"10592d48",null)),on=sn.exports,cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){return t.preventDefault(),e.createProject()}}},[n("cytomine-modal",{attrs:{active:e.active,title:e.$t("create-project")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[n("b-field",{attrs:{label:e.$t("name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("b-field",{attrs:{label:e.$t("ontology")}},[n("b-radio",{attrs:{"native-value":"NO"},model:{value:e.ontology,callback:function(t){e.ontology=t},expression:"ontology"}},[e._v(" "+e._s(e.$t("no-ontology"))+" ")])],1),n("b-field",[n("b-radio",{attrs:{"native-value":"EXISTING"},model:{value:e.ontology,callback:function(t){e.ontology=t},expression:"ontology"}},[e._v(" "+e._s(e.$t("use-existing-ontology"))+" ")])],1),n("b-field",[n("b-radio",{attrs:{"native-value":"NEW"},model:{value:e.ontology,callback:function(t){e.ontology=t},expression:"ontology"}},[e._v(" "+e._s(e.$t("create-ontology-for-project"))+" ")])],1),"EXISTING"===e.ontology?[n("b-field",{attrs:{type:{"is-danger":e.errors.has("ontology")},message:e.errors.first("ontology")}},[n("b-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{size:"is-small",placeholder:e.$t("select-ontology"),name:"ontology"},model:{value:e.selectedOntology,callback:function(t){e.selectedOntology=t},expression:"selectedOntology"}},e._l(e.ontologies,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),0)],1)]:e._e()],2)],1)},ln=[],un={name:"add-project-modal",props:{active:Boolean,ontologies:Array},components:{CytomineModal:Ve},$_veeValidate:{validator:"new"},data:function(){return{name:"",ontology:"NO",selectedOntology:null}},watch:{active:function(e){e&&(this.name="",this.ontology="NO",this.selectedOntology=null)}},methods:{createProject:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:if(e.prev=5,"NEW"!==this.ontology){e.next=13;break}return e.next=9,new $["Ontology"]({name:this.name}).save();case 9:r=e.sent,n=r.id,e.next=14;break;case 13:"EXISTING"===this.ontology&&(n=this.selectedOntology);case 14:return e.next=16,new $["Project"]({name:this.name,ontology:n}).save();case 16:a=e.sent,this.$notify({type:"success",text:this.$t("notif-success-project-creation")}),this.$router.push("/project/".concat(a.id,"/configuration")),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](5),409==e.t0.response.status?this.$notify({type:"error",text:this.$t("notif-error-project-already-exists")}):this.$notify({type:"error",text:this.$t("notif-error-project-creation")});case 24:case"end":return e.stop()}}),e,this,[[5,21]])})));function t(){return e.apply(this,arguments)}return t}()}},dn=un,pn=Object(S["a"])(dn,cn,ln,!1,null,null,null),mn=pn.exports,fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("i",{staticClass:"fas fa-user-cog",class:{disabled:!e.isManager,clickable:e.editable},attrs:{title:e.$t(e.label)},on:{click:function(t){return e.$emit("toggleManager")}}}),!e.editable&&e.isRepresentative?n("i",{staticClass:"superscript fas fa-flag"}):e.editable&&e.isManager?n("i",{staticClass:"superscript fas fa-flag editable",class:{disabled:!e.isRepresentative},on:{click:function(t){return e.$emit("toggleRepresentative")}}}):e._e()])},hn=[],vn={name:"IconProjectMemberRole",props:{isManager:{type:Boolean,default:!1},isRepresentative:{type:Boolean,default:!1},editable:{type:Boolean,default:!1}},computed:{label:function(){return this.editable?"":this.isRepresentative?"representative-icon-label":this.isManager?"manager-icon-label":"contributor-icon-label"}}},gn=vn,bn=(n("d252"),Object(S["a"])(gn,fn,hn,!1,null,"ad1d0d70",null)),yn=bn.exports;function wn(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_n(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function _n(e,t){if(e){if("string"===typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jn={name:"list-projects",components:{IconProjectMemberRole:yn,CytomineTable:Y,ProjectDetails:on,AddProjectModal:mn,CytomineMultiselect:ae,CytomineSlider:pe},data:function(){return{loading:!0,error:!1,projects:[],ontologies:[],availableTags:[],contributorLabel:this.$t("contributor"),managerLabel:this.$t("manager"),creationModal:!1,excludedProperties:["name","membersCount","numberOfImages","numberOfAnnotations","numberOfJobAnnotations","numberOfReviewedAnnotations","lastActivity"],maxNbMembers:10,maxNbImages:10,maxNbUserAnnotations:100,maxNbJobAnnotations:100,maxNbReviewedAnnotations:100,revision:0}},computed:{currentUser:m("currentUser/user"),searchString:f("listProjects/searchString",{debounce:500}),filtersOpened:f("listProjects/filtersOpened"),availableRoles:function(){return[this.contributorLabel,this.managerLabel]},availableOntologies:function(){return[{id:"null",name:this.$t("no-ontology")}].concat(Object(B["a"])(this.ontologies))},querySearchTags:function(){return this.$route.query.tags},selectedOntologies:g("listProjects","selectedOntologies","availableOntologies"),selectedRoles:g("listProjects","selectedRoles","availableRoles"),selectedTags:g("listProjects","selectedTags","availableTags"),boundsMembers:v("listProjects","boundsMembers","maxNbMembers"),boundsImages:v("listProjects","boundsImages","maxNbImages"),boundsUserAnnotations:v("listProjects","boundsUserAnnotations","maxNbUserAnnotations"),boundsJobAnnotations:v("listProjects","boundsJobAnnotations","maxNbJobAnnotations"),boundsReviewedAnnotations:v("listProjects","boundsReviewedAnnotations","maxNbReviewedAnnotations"),nbActiveFilters:function(){return this.$store.getters["listProjects/nbActiveFilters"]},selectedOntologiesIds:function(){return this.selectedOntologies.map((function(e){return e.id}))},boundsFilters:function(){return[{prop:"numberOfImages",bounds:this.boundsImages},{prop:"membersCount",bounds:this.boundsMembers},{prop:"numberOfAnnotations",bounds:this.boundsUserAnnotations},{prop:"numberOfJobAnnotations",bounds:this.boundsJobAnnotations},{prop:"numberOfReviewedAnnotations",bounds:this.boundsReviewedAnnotations}]},projectCollection:function(){var e=new $["ProjectCollection"]({withMembersCount:!0,withLastActivity:!0,withCurrentUserRoles:!0});this.selectedOntologiesIds.length>0&&this.selectedOntologiesIds.length<this.availableOntologies.length&&(e["ontology"]={in:this.selectedOntologiesIds.join()}),this.selectedRoles.length>0&&(e["currentUserRole"]={in:this.selectedRoles.join().toLowerCase()}),this.searchString&&(e["name"]={ilike:encodeURIComponent(this.searchString)}),this.selectedTags.length>0&&this.selectedTags.length<this.availableTags.length&&(e["tag"]={in:this.selectedTags.map((function(e){return e.id})).join()});var t,n=wn(this.boundsFilters);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.prop,i=r.bounds;e[a]={lte:i[1]},i[0]>0&&(e[a]["gte"]=i[0])}}catch(s){n.e(s)}finally{n.f()}return e},currentPage:f("listProjects/currentPage"),perPage:f("listProjects/perPage"),sortField:f("listProjects/sortField"),sortOrder:f("listProjects/sortOrder"),openedDetails:f("listProjects/openedDetails")},watch:{revision:function(){this.fetchOntologies(),this.fetchMaxFilters()},querySearchTags:function(e){if(e){this.selectedTags=[];var t=this.availableTags.filter((function(t){return e.split(",").includes(t.name)}));t&&(this.selectedTags=t)}}},methods:{fetchOntologies:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["OntologyCollection"].fetchAll({light:!0});case 2:t=e.sent.array,t.sort((function(e,t){return e.name.localeCompare(t.name)})),this.ontologies=t;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchMaxFilters:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new $["ProjectCollection"].fetchBounds({withMembersCount:!0});case 2:t=e.sent,this.maxNbMembers=Math.max(10,t.members.max),this.maxNbImages=Math.max(10,t.numberOfImages.max),this.maxNbUserAnnotations=Math.max(100,t.numberOfAnnotations.max),this.maxNbJobAnnotations=Math.max(100,t.numberOfJobAnnotations.max),this.maxNbReviewedAnnotations=Math.max(100,t.numberOfReviewedAnnotations.max);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchTags:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=[{id:"null",name:this.$t("no-tag")}],e.t1=B["a"],e.next=4,$["TagCollection"].fetchAll();case 4:e.t2=e.sent.array,e.t3=(0,e.t1)(e.t2),this.availableTags=e.t0.concat.call(e.t0,e.t3);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),toggleFilterDisplay:function(){this.filtersOpened=!this.filtersOpened},updateProject:function(){this.revision++},deleteProject:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.delete();case 3:this.revision++,this.$notify({type:"success",text:this.$t("notif-success-project-deletion",{projectName:t.name})}),e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-project-deletion",{projectName:t.name})}),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.fetchOntologies(),this.fetchMaxFilters(),this.fetchTags()]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),this.error=!0;case 8:this.$route.query.tags&&(t=this.availableTags.filter((function(e){return n.$route.query.tags.split(",").includes(e.name)})),t&&(this.selectedTags=t)),this.loading=!1;case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()},Cn=jn,$n=(n("0e8b"),n("14c4"),Object(S["a"])(Cn,z,V,!1,null,"e4e5a8a2",null)),kn=$n.exports,Pn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"storage-wrapper content-wrapper"},[n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("upload"))+" ")]),e.newUploadError?n("div",{staticClass:"panel-block"},[n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("error-cannot-upload"))+" ")])],1):n("div",{staticClass:"panel-block"},[n("b-message",{attrs:{type:"is-info","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(e._s(e.$t("important-notes")))]),n("ul",{staticClass:"small-text"},[n("li",[e._v(e._s(e.$t("allowed-formats-upload-info")))]),n("li",[e._v(e._s(e.$t("vms-mrxs-upload-info")))]),n("li",[e._v(e._s(e.$t("zip-upload-info")))]),n("li",[e._v(e._s(e.$t("drag-drop-upload-info",{labelButton:e.$t("add-files")})))]),n("li",[e._v(e._s(e.$t("link-to-project-upload-info")))])])]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter has-text-right"},[n("strong",[e._v(e._s(e.$t("storage")))])]),n("div",{staticClass:"column is-half"},[n("cytomine-multiselect",{attrs:{options:e.storages,label:"name","track-by":"id","allow-empty":!1},model:{value:e.selectedStorage,callback:function(t){e.selectedStorage=t},expression:"selectedStorage"}})],1)]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter has-text-right"},[n("strong",[e._v(e._s(e.$t("link-with-project")))])]),n("div",{staticClass:"column is-half"},[n("cytomine-multiselect",{attrs:{options:e.projects,label:"name","track-by":"id"},model:{value:e.selectedProject,callback:function(t){e.selectedProject=t},expression:"selectedProject"}})],1)]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter has-text-right"},[n("strong",[e._v(e._s(e.$t("files")))])]),n("div",{staticClass:"column is-half"},[e.dropFiles.length>0?n("table",{staticClass:"table is-fullwidth upload-table"},[n("tbody",e._l(e.dropFiles,(function(t,r){return n("tr",{key:r},[n("td",[e._v(e._s(t.file.name))]),n("td",[e._v(e._s(e.filesize(t.file.size)))]),null===t.uploadedFile?[n("td",[n("progress",{staticClass:"progress is-info",attrs:{max:"100"},domProps:{value:t.progress}},[e._v(" "+e._s(t.progress)+"% ")])]),n("td",[n("div",{staticClass:"field is-grouped"},[n("p",{staticClass:"control"},[n("button",{staticClass:"button is-link",on:{click:function(n){return e.startUpload(t)}}},[e._v(" "+e._s(e.$t("button-start"))+" ")])]),n("p",{staticClass:"control"},[n("button",{staticClass:"button",on:{click:function(t){return e.cancelUpload(r)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")])])])])]:[n("td",[t.uploadedFile?n("uploaded-file-status",{attrs:{file:t.uploadedFile}}):n("span",{staticClass:"tag is-danger"},[e._v(" "+e._s(e.$t("upload-error"))+" ")])],1),n("td",[n("p",{staticClass:"control"},[n("button",{staticClass:"button",on:{click:function(t){return e.cancelUpload(r)}}},[e._v(e._s(e.$t("button-hide")))])])])]],2)})),0)]):n("em",{staticClass:"first-child-like has-text-grey"},[e._v(e._s(e.$t("no-file")))])])]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-half flex-column is-offset-one-quarter"},[e.ongoingUpload?n("progress",{staticClass:"progress is-success",attrs:{max:"100"},domProps:{value:e.overallProgress}},[e._v(" "+e._s(e.overallProgress)+"% ")]):e._e(),n("div",{staticClass:"buttons"},[n("b-upload",{attrs:{value:e.plainFiles,type:"is-link",multiple:"","drag-drop":""},on:{input:e.filesChange}},[n("a",{staticClass:"button is-success"},[e._v(e._s(e.$t("add-files")))])]),n("button",{staticClass:"button is-link",attrs:{disabled:!e.filesPendingUpload},on:{click:function(t){return e.startAll()}}},[e._v(" "+e._s(e.$t("start-upload"))+" ")]),n("button",{staticClass:"button",attrs:{disabled:!e.filesPendingUpload&&!e.ongoingUpload},on:{click:function(t){return e.cancelAll()}}},[e._v(" "+e._s(e.$t("cancel-upload"))+" ")]),e.filesFinishedUpload?n("button",{staticClass:"button",on:{click:function(t){return e.hideFinished()}}},[e._v(" "+e._s(e.$t("hide-successful-upload"))+" ")]):e._e()],1)])])],1)]),n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("storage"))+" ")]),n("div",{staticClass:"panel-block storage"},[n("b-input",{staticClass:"search-uploaded-file",attrs:{value:e.searchString,placeholder:e.$t("search-placeholder"),icon:"search"},on:{input:e.debounceSearchString}}),n("cytomine-table",{attrs:{collection:e.uploadedFileCollection,sort:"created",order:"desc",revision:e.revision,openedDetailed:e.openedDetails,refreshInterval:e.tableRefreshInterval},on:{"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t}},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{label:e.$t("preview"),width:"80"}},[r.thumbURL?n("img",{staticClass:"image-overview",attrs:{src:r.thumbURL,alt:"-"}}):n("div",{staticClass:"is-size-7 has-text-grey"},[e._v(e._s(e.$t("no-preview-available")))])]),n("b-table-column",{attrs:{field:"originalFilename",label:e.$t("filename"),sortable:"",width:"200"}},[e._v(" "+e._s(r.originalFilename)+" ")]),n("b-table-column",{attrs:{field:"created",label:e.$t("created"),sortable:"",width:"150"}},[e._v(" "+e._s(e._f("moment")(Number(r.created),"lll"))+" ")]),n("b-table-column",{attrs:{field:"size",label:e.$t("size"),sortable:"",width:"80"}},[e._v(" "+e._s(e.filesize(r.size))+" ")]),n("b-table-column",{attrs:{field:"contentType",label:e.$t("content-type"),sortable:"",width:"100"}},[e._v(" "+e._s(r.contentType)+" ")]),n("b-table-column",{attrs:{field:"globalSize",label:e.$t("global-size"),sortable:"",width:"80"}},[e._v(" "+e._s(e.filesize(r.globalSize))+" ")]),n("b-table-column",{attrs:{field:"status",label:e.$t("status"),sortable:"",width:"80"}},[n("uploaded-file-status",{attrs:{file:r}})],1),n("b-table-column",{attrs:{field:"parentFilename",label:e.$t("from"),sortable:"",width:"150"}},[e._v(" "+e._s(r.parentFilename?r.parentFilename:"-")+" ")])]}},{key:"detail",fn:function(t){var r=t.row;return[n("uploaded-file-details",{key:r.id,attrs:{file:r},on:{update:function(t){return e.updatedTree()}}})]}},{key:"empty",fn:function(){return[n("p",[e._v(e._s(e.$t("no-uploaded-file")))])]},proxy:!0}])})],1)])])},On=[],Rn=n("bc3a"),Sn=n.n(Rn),Tn=n("49d5"),An=n.n(Tn),Dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.iconOnly?n("span",{class:["icon",e.textClass]},[n("i",{class:["fas",e.iconClass],attrs:{title:e.$t(e.labels[e.file.status])}})]):n("div",[e.isConverted&&e.file.nbChildren?n("div",{staticClass:"tags has-addons"},[n("span",{staticClass:"tag is-success"},[e._v(e._s(e.$t("converted")))]),n("span",{staticClass:"tag is-light"},[e._v(e._s(e.$tc("count-files",e.file.nbChildren,{count:e.file.nbChildren})))])]):n("span",{staticClass:"tag",class:e.tagClass},[e._v(" "+e._s(e.$t(e.labels[e.file.status]))+" ")])])},Mn=[],En={name:"uploaded-file-status",props:{file:Object,iconOnly:{type:Boolean,default:!1}},computed:{isConverted:function(){return this.file.status===$["UploadedFileStatus"].CONVERTED},labels:function(){var e;return e={},Object(c["a"])(e,$["UploadedFileStatus"].UPLOADED,"uploaded"),Object(c["a"])(e,$["UploadedFileStatus"].CONVERTED,"converted"),Object(c["a"])(e,$["UploadedFileStatus"].DEPLOYED,"deployed"),Object(c["a"])(e,$["UploadedFileStatus"].ERROR_FORMAT,"error-format"),Object(c["a"])(e,$["UploadedFileStatus"].ERROR_CONVERT,"error-convert"),Object(c["a"])(e,$["UploadedFileStatus"].UNCOMPRESSED,"uncompressed"),Object(c["a"])(e,$["UploadedFileStatus"].TO_DEPLOY,"to-deploy"),Object(c["a"])(e,$["UploadedFileStatus"].TO_CONVERT,"to-convert"),Object(c["a"])(e,$["UploadedFileStatus"].ERROR_DEPLOYMENT,"error-deployment"),e},result:function(){switch(this.file.status){case $["UploadedFileStatus"].UPLOADED:case $["UploadedFileStatus"].TO_DEPLOY:case $["UploadedFileStatus"].TO_CONVERT:case $["UploadedFileStatus"].UNCOMPRESSED:return"info";case $["UploadedFileStatus"].CONVERTED:case $["UploadedFileStatus"].DEPLOYED:return"success";case $["UploadedFileStatus"].ERROR_FORMAT:case $["UploadedFileStatus"].ERROR_CONVERT:case $["UploadedFileStatus"].ERROR_DEPLOYMENT:return"danger"}},tagClass:function(){return"is-"+this.result},textClass:function(){return"has-text-"+this.result},iconClass:function(){switch(this.result){case"info":return"fa-spinner";case"success":return"fa-check-square";case"danger":return"fa-times-circle"}}}},In=En,Nn=(n("2e93"),Object(S["a"])(In,Dn,Mn,!1,null,"dcb91b00",null)),Un=Nn.exports,Fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v(" "+e._s(e.$t("file-tree"))+" ")]),e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small",size:"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):n("sl-vue-tree",{attrs:{allowMultiselect:!1},scopedSlots:e._u([{key:"toggle",fn:function(t){var r=t.node;return[r.isLeaf?e._e():[n("i",{class:["tree-toggle","fas",r.isExpanded?"fa-angle-down":"fa-angle-right"]})]]}},{key:"title",fn:function(t){var r=t.node;return[n("p",{class:{"target-element":r.data.id===e.file.id}},[e._v(e._s(r.title))])]}},{key:"sidebar",fn:function(t){var r=t.node;return[n("div",{staticClass:"filesize"},[e._v(" "+e._s(e.filesize(r.data.size))+" ")]),n("div",{staticClass:"status"},[n("uploaded-file-status",{attrs:{file:r.data,iconOnly:!0}})],1),n("div",{staticClass:"buttons"},[n("a",{staticClass:"button is-small is-link",attrs:{href:r.data.downloadURL}},[e._v(" "+e._s(e.$t("button-download"))+" ")]),n("button",{staticClass:"button is-small is-danger",on:{click:function(t){return e.confirmDeletion(r.data)}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")])]),n("p",{staticClass:"preview"},[r.data.thumbURL?n("a",{on:{click:function(t){e.samplePreview=r.data}}},[e._v(" "+e._s(e.$t("sample-preview"))+" ")]):e._e(),r.data.thumbURL&&r.data.macroURL?n("span",[e._v("/")]):e._e(),r.data.macroURL?n("a",{on:{click:function(t){e.slidePreview=r.data}}},[e._v(" "+e._s(e.$t("slide-preview"))+" ")]):e._e()])]}}]),model:{value:e.nodes,callback:function(t){e.nodes=t},expression:"nodes"}}),e.samplePreview?[n("h2",[e._v(" "+e._s(e.$t("sample-preview-of",{filename:e.samplePreview.originalFilename}))+" "),n("button",{staticClass:"button is-small",on:{click:function(t){e.samplePreview=null}}},[e._v(e._s(e.$t("button-hide")))])]),n("img",{attrs:{src:e.samplePreview.thumbURL}})]:e.slidePreview?[n("h2",[e._v(" "+e._s(e.$t("slide-preview-of",{filename:e.slidePreview.originalFilename}))+" "),n("button",{staticClass:"button is-small",on:{click:function(t){e.slidePreview=null}}},[e._v(e._s(e.$t("button-hide")))])]),n("img",{attrs:{src:e.slidePreview.macroURL}})]:e._e()],2)},Ln=[],qn=n("c536"),zn=n.n(qn);function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wn={name:"uploaded-file-details",components:{SlVueTree:zn.a,UploadedFileStatus:Un},props:{file:Object},data:function(){return{rootId:null,uploadedFiles:[],nodes:[],slidePreview:null,samplePreview:null,error:!1}},watch:{file:function(){this.findRoot(),this.makeTree()},slidePreview:function(e){e&&(this.samplePreview=null)},samplePreview:function(e){e&&(this.slidePreview=null)}},methods:{findRoot:function(){this.rootId=this.file.parentId||this.file.id},makeTree:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["UploadedFileCollection"].fetchAll({root:this.rootId});case 3:this.uploadedFiles=e.sent.array,this.nodes=this.createNodes(null),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.error=!0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),createNodes:function(e){var t=this,n=this.uploadedFiles.filter((function(t){return t.parentId===e}));return n.map((function(e){var n=t.createNodes(e.id);return{title:e.originalFilename,isLeaf:0===n.length,isDraggable:!1,isExpanded:!0,data:Bn({downloadURL:e.downloadURL},e),children:n}}))},filesize:function(e){return An()(e,{base:10})},confirmDeletion:function(e){var t=this;this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-file"),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.deleteFile(e)}})},deleteFile:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["UploadedFile"].delete(t.id);case 3:this.$emit("update"),e.next=11;break;case 6:e.prev=6,e.t0=e["catch"](0),n=e.t0.response.data.errorValues,r=n&&n.projectNames&&n.imageNames?this.$t("notif-error-delete-used-uploaded-file",{projects:n.projectNames.join(", "),names:n.imageNames.join(", ")}):this.$t("notif-error-delete-uploaded-file"),this.$notify({type:"error",text:r});case 11:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){this.findRoot(),this.makeTree()}},Jn=Wn,Hn=(n("ad2d"),Object(S["a"])(Jn,Fn,Ln,!1,null,"73af0bfc",null)),Gn=Hn.exports,Kn={name:"cytomine-storage",components:{CytomineMultiselect:ae,"uploaded-file-status":Un,UploadedFileDetails:Gn,CytomineTable:Y},data:function(){return{loading:!0,newUploadError:!1,timeoutRefreshSessionUploads:null,tableRefreshInterval:N.STORAGE_REFRESH_INTERVAL,storages:[],selectedStorage:null,projects:[],selectedProject:null,searchString:"",dropFiles:[],signature:"",signatureDate:"",openedDetails:[],revision:0}},computed:{currentUser:m("currentUser/user"),finishedStatus:function(){return[$["UploadedFileStatus"].CONVERTED,$["UploadedFileStatus"].DEPLOYED]},ongoingUpload:function(){return this.dropFiles.some((function(e){return e.uploading}))},filesPendingUpload:function(){return this.dropFiles.some((function(e){return!e.uploading&&null===e.uploadedFile}))},filesFinishedUpload:function(){var e=this;return this.dropFiles.some((function(t){return!t.uploading&&null!==t.uploadedFile&&e.finishedStatus.includes(t.uploadedFile.status)}))},overallProgress:function(){var e=0,t=0;return this.dropFiles.forEach((function(n){n.uploading&&(e++,t+=n.progress)})),Math.floor(t/e)},uri:function(){return"/upload"},queryString:function(){var e="cytomine=".concat(N.CYTOMINE_CORE_HOST);return this.selectedStorage&&(e+="&idStorage=".concat(this.selectedStorage.id)),this.selectedProject&&(e+="&idProject=".concat(this.selectedProject.id)),e},plainFiles:function(){return this.dropFiles.map((function(e){return e.file}))},uploadedFileCollection:function(){return new $["UploadedFileCollection"]({detailed:!0,originalFilename:{ilike:encodeURIComponent(this.searchString)}})}},watch:{queryString:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.signatureDate=(new Date).toISOString(),e.prev=1,e.next=4,$["Cytomine"].instance.fetchSignature({uri:this.uri,queryString:this.queryString,method:"POST",date:this.signatureDate});case 4:this.signature=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),this.newUploadError=!0;case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(){return e.apply(this,arguments)}return t}()},methods:{fetchStorages:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["StorageCollection"].fetchAll();case 3:this.storages=e.sent.array,this.selectedStorage=this.storages.find((function(e){return e.user===t.currentUser.id})),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.newUploadError=!0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),fetchProjects:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["ProjectCollection"].fetchAll();case 3:this.projects=e.sent.array,e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),refreshStatusSessionUploads:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[$["UploadedFileStatus"].UPLOADED,$["UploadedFileStatus"].TO_DEPLOY,$["UploadedFileStatus"].UNCOMPRESSED,$["UploadedFileStatus"].TO_CONVERT],n=!1,r=!1,e.prev=3,e.next=6,Promise.all(this.dropFiles.map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.uploadedFile){e.next=9;break}if(i=a.uploadedFile.status,t.includes(i)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,a.uploadedFile.fetch();case 6:s=a.uploadedFile.status,s!==i&&(r=!0),t.includes(s)&&(n=!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e["catch"](3),e.abrupt("return");case 11:r&&this.revision++,n&&(clearTimeout(this.timeoutRefreshSessionUploads),this.timeoutRefreshSessionUploads=setTimeout(this.refreshStatusSessionUploads,N.ONGOING_UPLOAD_REFRESH_INTERVAL));case 13:case"end":return e.stop()}}),e,this,[[3,8]])})));function t(){return e.apply(this,arguments)}return t}(),filesChange:function(e){var t=this;e.forEach((function(e){e.processed||(e.processed=!0,t.dropFiles.push({file:e,uploading:!1,progress:0,uploadedFile:null,cancelToken:null}))}))},filesize:function(e){return An()(e,{base:10})},startUpload:function(e){var t=this;if(!e.uploading&&null===e.uploadedFile){var n=new FormData;n.append("files[]",e.file),e.cancelToken=Sn.a.CancelToken.source(),e.uploading=!0,Sn.a.post(N.CYTOMINE_UPLOAD_HOST+this.uri+"?"+this.queryString,n,{headers:{authorization:"CYTOMINE ".concat(this.currentUser.publicKey,":").concat(this.signature),dateFull:this.signatureDate,"content-type-full":"null"},onUploadProgress:function(t){e.progress=Math.floor(100*t.loaded/t.total)},cancelToken:e.cancelToken.token}).then((function(n){e.uploadedFile=new $["UploadedFile"](n.data[0].uploadFile.attr),t.refreshStatusSessionUploads(),t.revision++})).catch((function(t){Sn.a.isCancel(t)||(e.uploadedFile=!1)})).finally((function(){return e.uploading=!1}))}},startAll:function(){var e=this;this.dropFiles.forEach((function(t){return e.startUpload(t)}))},cancelUpload:function(e){var t=this.dropFiles[e];t.cancelToken&&t.cancelToken.cancel(),this.dropFiles.splice(e,1)},cancelAll:function(){for(var e=this.dropFiles.length,t=0,n=0;n<e;n++)null!==this.dropFiles[t].uploadedFile?t++:this.cancelUpload(t)},updatedTree:function(){this.revision++},debounceSearchString:u.a.debounce(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.searchString=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),500),hideFinished:function(){for(var e=this.dropFiles.length,t=0,n=0;n<e;n++){var r=this.dropFiles[t].uploadedFile;null!==r&&this.finishedStatus.includes(r.status)?this.cancelUpload(t):t++}}},activated:function(){this.fetchStorages(),this.fetchProjects(),this.refreshStatusSessionUploads(),this.tableRefreshInterval=N.STORAGE_REFRESH_INTERVAL},deactivated:function(){clearTimeout(this.timeoutRefreshSessionUploads),this.tableRefreshInterval=0}},Yn=Kn,Zn=(n("b884"),n("ff5e"),Object(S["a"])(Yn,Pn,On,!1,null,"38c64711",null)),Xn=Zn.exports,Qn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[e.ontologies?e.ontologies.length>0?n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("ontologies"))+" "),e.currentUser.guestByNow?e._e():n("button",{staticClass:"button is-link",on:{click:function(t){e.creationModal=!0}}},[e._v(" "+e._s(e.$t("new-ontology"))+" ")])]),n("div",{staticClass:"panel-block"},[n("b-input",{attrs:{size:"is-small",type:"search",icon:"search",placeholder:e.$t("search-placeholder")},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),n("div",{staticClass:"panel-main-content"},e._l(e.filteredOntologies,(function(t){return n("a",{key:t.id,staticClass:"panel-block",class:{"is-active":e.isSelected(t)},on:{click:function(n){return e.selectOntology(t)}}},[n("span",{staticClass:"panel-icon"},[e.isSelected(t)?n("i",{staticClass:"fas fa-caret-right",attrs:{"aria-hidden":"true"}}):e._e()]),e._v(" "+e._s(t.name)+" ")])})),0)])]),n("div",{staticClass:"column"},[n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.selectedOntology?e.selectedOntology.name:e.$t("not-found"))+" ")]),n("div",{staticClass:"panel-block panel-main-content"},[e.selectedOntology?n("ontology-details",{attrs:{ontology:e.selectedOntology},on:{delete:function(t){return e.deleteOntology()},rename:e.renameOntology}}):n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("not-found-error"))+" ")])],1)])])]):n("div",{staticClass:"box error"},[n("div",{staticClass:"columns"},[n("p",{staticClass:"column"},[e._v(e._s(e.$t("dont-have-access-to-any-ontology")))]),n("p",{staticClass:"column has-text-right"},[e.currentUser.guestByNow?e._e():n("button",{staticClass:"button is-link",on:{click:function(t){e.creationModal=!0}}},[e._v(" "+e._s(e.$t("new-ontology"))+" ")])])])]):n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(e._s(e.$t("unexpected-error-info-message")))])])],n("add-ontology-modal",{attrs:{active:e.creationModal},on:{"update:active":function(t){e.creationModal=t},newOntology:e.addOntology}})],2)},er=[],tr=(n("20d6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")]):e.loading?e._e():n("div",{staticClass:"ontology-details-wrapper"},[n("table",{staticClass:"table is-fullwidth"},[n("tbody",[n("tr",[n("td",{attrs:{colspan:"2"}},[n("strong",[e._v(e._s(e.$t("terms")))]),n("b-message",{attrs:{type:"is-info","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("hierarchical-drag-drop-term"))+" ")]),n("ontology-tree",{attrs:{ontology:e.fullOntology,allowSelection:!1,allowDrag:e.canEdit,allowEdition:e.canEdit},scopedSlots:e._u([{key:"no-result",fn:function(){return[n("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("no-term")))])]},proxy:!0}])})],1)]),n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("projects")))])]),n("td",[e.projects.length?e._l(e.projects,(function(t,r){return n("span",{key:t.id},[n("router-link",{attrs:{to:"/project/"+t.id}},[e._v(e._s(t.name))]),r<e.projects.length-1?n("span",[e._v(", ")]):e._e()],1)})):e.nbProjects>0?n("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("used-in-project-no-access"))+" ")]):n("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("not-used-in-any-project"))+" ")])],2)]),n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("creator")))])]),n("td",[e._v(" "+e._s(e.creatorFullname||e.$t("unknown"))+" ")])]),e.canEdit?n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("actions")))])]),n("td",[n("div",{staticClass:"buttons"},[n("button",{staticClass:"button",on:{click:function(t){e.isRenameModalActive=!0}}},[e._v(" "+e._s(e.$t("button-rename"))+" ")]),n("button",{staticClass:"button is-danger",attrs:{disabled:e.nbProjects>0,title:e.nbProjects?e.$t("cannot-delete-ontology-with-projects"):""},on:{click:function(t){return e.confirmDeletion()}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")])])])]):e._e()])]),n("rename-modal",{attrs:{title:e.$t("rename-ontology"),currentName:e.ontology.name,active:e.isRenameModalActive},on:{"update:active":function(t){e.isRenameModalActive=t},rename:e.rename}})],1)],1)}),nr=[],rr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ontology-tree",class:{selector:e.allowSelection,draggable:e.allowDrag,editable:e.allowEdition}},[n("sl-vue-tree",{ref:"tree",attrs:{allowMultiselect:!1},on:{select:e.select,drop:e.drop},scopedSlots:e._u([{key:"toggle",fn:function(t){var r=t.node;return[!r.data.hidden&&!r.isLeaf&&r.children.length>0?[n("i",{class:["tree-toggle","fas",r.isExpanded?"fa-angle-down":"fa-angle-right"]})]:e._e(),n("div",{staticClass:"sl-vue-tree-gap"})]}},{key:"title",fn:function(t){var r=t.node;return[r.data.hidden?n("div"):n("div",{staticClass:"tree-selector"},[e.allowSelection?n("i",{staticClass:"tree-checkbox",class:e.classNames(r)}):e._e(),n("cytomine-term",{attrs:{term:r.data}})],1)]}},{key:"sidebar",fn:function(t){var r=t.node;return[r.data.hidden?e._e():e._t("custom-sidebar",[e.allowEdition?n("div",{staticClass:"buttons"},[n("button",{staticClass:"button is-small",on:{click:function(t){return e.startTermUpdate(r)}}},[n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-edit"})])]),n("button",{staticClass:"button is-small",on:{click:function(t){return e.confirmTermDeletion(r)}}},[n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"far fa-trash-alt"})])])]):e._e()],{term:r.data})]}}],null,!0),model:{value:e.treeNodes,callback:function(t){e.treeNodes=t},expression:"treeNodes"}}),e.noResult?e._t("no-result",[n("em",{staticClass:"has-text-grey no-result"},[e._v(e._s(e.$t("no-result")))])]):e._e(),e.allowEdition||e.allowNew?n("div",{staticClass:"add-term-container"},[n("button",{staticClass:"button is-small",on:{click:function(t){return e.startTermCreation()}}},[e._v(e._s(e.$t("add-term")))])]):e._e()],2)},ar=[],ir=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.term?n("span",[e.term.color?n("div",{staticClass:"color-preview",style:{background:e.term.color}}):e._e(),e._v(" "+e._s(e.term.name)+" ")]):e._e()},sr=[],or={name:"cytomine-term",props:{term:Object}},cr=or,lr=(n("7743"),Object(S["a"])(cr,ir,sr,!1,null,"16981688",null)),ur=lr.exports,dr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){return t.preventDefault(),e.save()}}},[n("cytomine-modal-card",{staticClass:"term-modal",attrs:{title:e.$t(e.term?"update-term":"create-term")},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[n("b-field",{attrs:{label:e.$t("name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("sketch-picker",{attrs:{presetColors:e.presetColors},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1)],1)},pr=[],mr=n("c345"),fr={name:"term-modal",props:{term:Object,ontology:Object},components:{"sketch-picker":mr["Sketch"],CytomineModalCard:Fe},$_veeValidate:{validator:"new"},data:function(){return{name:"",color:null}},computed:{presetColors:function(){return["#F44E3B","#FB9E00","#FCDC00","#68BC00","#16A5A5","#009CE0","#7B10D8","#F06292","#000","#777","#FFF"]}},methods:{randomColor:function(){return"#"+(Math.random().toString(16)+"0000000").slice(2,8)},save:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:this.term?this.update():this.create();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),create:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new $["Term"]({name:this.name,color:this.color.hex,ontology:this.ontology.id}).save();case 3:t=e.sent,this.$notify({type:"success",text:this.$t("notif-success-term-creation")}),this.$emit("newTerm",t),this.$parent.close(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-term-creation")});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),update:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new $["Term"](this.term),t.color=this.color.hex,t.name=this.name,e.prev=3,e.next=6,t.save();case 6:this.$notify({type:"success",text:this.$t("notif-success-term-update")}),this.$emit("updateTerm",t),this.$parent.close(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),this.$notify({type:"error",text:this.$t("notif-error-term-update")});case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.name=this.term?this.term.name:"",this.color={hex:this.term?this.term.color:this.randomColor()}}},hr=fr,vr=(n("8608"),Object(S["a"])(hr,dr,pr,!1,null,null,null)),gr=vr.exports;function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wr={name:"ontology-tree",model:{prop:"selectedNodes",event:"setSelectedNodes"},props:{ontology:{type:Object},additionalNodes:{type:Array,default:function(){return[]}},startWithAdditionalNodes:{type:Boolean,default:!1},searchString:{type:String,default:""},selectedNodes:{type:Array,default:function(){return[]}},allowSelection:{type:Boolean,default:!0},multipleSelection:{type:Boolean,default:!0},allowDrag:{type:Boolean,default:!1},allowEdition:{type:Boolean,default:!1},allowNew:{type:Boolean,default:!1}},components:{SlVueTree:zn.a,CytomineTerm:ur},data:function(){return{treeNodes:[],internalSelectedNodes:[],editedNode:null}},computed:{regexp:function(){return St(this.searchString)},noResult:function(){return this.treeNodes.every((function(e){return e.data.hidden}))}},watch:{ontology:function(){this.makeTree()},additionalNodes:function(){this.makeTree()},selectedNodes:function(){this.internalSelectedNodes=this.selectedNodes.slice(),this.refreshNodeSelection()},regexp:function(){this.filter()}},methods:{makeTree:function(){if(this.ontology){var e=this.createSubTree(this.ontology.children.array.slice()),t=this.createSubTree(this.additionalNodes.slice());this.treeNodes=this.startWithAdditionalNodes?t.concat(e):e.concat(t),this.filter()}else this.treeNodes=[]},createSubTree:function(e){var t=this;return e.map((function(e){return t.createNode(e)}))},createNode:function(e){return{title:e.name,isLeaf:!1,isDraggable:this.allowDrag,isExpanded:!0,isSelected:this.internalSelectedNodes.includes(e.id),data:{id:e.id,name:e.name,color:e.color,parent:e.parent,ontology:this.ontology.id,hidden:!1},children:e.children&&e.children.length>0?this.createSubTree(e.children):[]}},filter:function(){var e=this;this.applyToAllNodes((function(t){var n=e.regexp.test(t.title);if(t.children){var r=t.children.some((function(e){return!e.data.hidden}));t.isExpanded=r,n=n||r}t.data.hidden=!n}))},classNames:function(e){return this.multipleSelection?e.isSelected?["fas","fa-check-square"]:["far","fa-square"]:e.isSelected?["fas","fa-dot-circle"]:["far","fa-circle"]},select:function(e,t){var n=this;this.allowSelection&&(this.clickOnTreeSelector(t.target)&&(e.forEach((function(e){if(n.multipleSelection){var t=n.internalSelectedNodes.indexOf(e.data.id);t>=0?(n.internalSelectedNodes.splice(t,1),n.$emit("unselect",e.data.id)):(n.internalSelectedNodes.push(e.data.id),n.$emit("select",e.data.id))}else n.internalSelectedNodes.includes(e.data.id)?n.internalSelectedNodes=[]:n.internalSelectedNodes=[e.data.id],n.$emit("select",e.data.id)})),this.$emit("setSelectedNodes",this.internalSelectedNodes)),this.refreshNodeSelection())},refreshNodeSelection:function(){var e=this;this.allowSelection&&this.applyToAllNodes((function(t){t.isSelected=e.internalSelectedNodes.some((function(e){return e===t.data.id}))}))},clickOnTreeSelector:function(e){return!!e.classList.contains("tree-selector")||!!e.parentElement&&this.clickOnTreeSelector(e.parentElement)},applyToAllNodes:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.treeNodes;n.forEach((function(n){n.children&&t.applyToAllNodes(e,n.children),e(n)}))},startTermCreation:function(){this.editedNode=null,this.openModal()},createTerm:function(e){this.treeNodes.push(this.createNode(e)),this.$emit("newTerm",e)},startTermUpdate:function(e){this.editedNode=e,this.openModal()},updateTerm:function(e){this.$refs.tree.updateNode(this.editedNode.path,{data:yr({},e)})},openModal:function(){this.$buefy.modal.open({parent:this,component:gr,props:{term:this.editedNode?this.editedNode.data:null,ontology:this.ontology},events:{newTerm:this.createTerm,updateTerm:this.updateTerm},hasModalCard:!0})},drop:function(e,t){var n=this;e.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a="inside"===t.placement?t.node.data.id:t.node.data.parent,r.data.parent===a){e.next=13;break}return e.prev=2,e.next=5,new $["Term"](r.data).changeParent(a);case 5:n.applyToAllNodes((function(e){e.data.id===r.data.id&&(e.data.parent=a)})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),n.$notify({type:"error",text:n.$t("notif-error-ontology-tree-update")});case 11:e.next=14;break;case 13:n.$notify({type:"warn",text:n.$t("notif-warn-ontology-tree-order-not-persisted")});case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}())},confirmTermDeletion:function(e){var t=this;this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-term",{name:e.data.name}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.deleteTerm(e)}})},deleteTerm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["Term"].delete(t.data.id);case 3:this.$refs.tree.remove([t.path]),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-term-deletion")});case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){this.internalSelectedNodes=this.selectedNodes.slice(),this.makeTree()}},_r=wr,xr=(n("c0b7"),n("5f10"),Object(S["a"])(_r,rr,ar,!1,null,"74b04996",null)),jr=xr.exports,Cr={name:"ontology-details",props:{ontology:Object},components:{OntologyTree:jr,RenameModal:Ke},data:function(){return{loading:!0,error:!1,fullOntology:{},projects:[],managedProjects:[],creatorFullname:null,isRenameModalActive:!1}},computed:{currentUser:m("currentUser/user"),canEdit:function(){return!this.currentUser.guestByNow&&(this.currentUser.adminByNow||this.currentUser.id===this.fullOntology.user||this.hasAccessToAllProjects&&(this.allProjectsAreCollaborative||this.manageAllProjects))},nbProjects:function(){return this.fullOntology.projects.length},hasAccessToAllProjects:function(){return this.nbProjects===this.projects.length},allProjectsAreCollaborative:function(){return!this.projects.some((function(e){return e.isRestricted||e.isReadOnly}))},manageAllProjects:function(){var e=this;return!this.projects.some((function(t){return!e.managedProjects.find((function(e){return e.id===t.id}))}))}},watch:{ontology:function(){this.fetchOntology()}},methods:{fetchOntology:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.error=!1,e.prev=2,e.next=5,$["Ontology"].fetch(this.ontology.id);case 5:return this.fullOntology=e.sent,e.next=8,$["ProjectCollection"].fetchAll({filterKey:"ontology",filterValue:this.ontology.id});case 8:this.projects=e.sent.array,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),this.error=!0;case 14:return this.fetchManagedProjects(),e.prev=15,e.next=18,$["User"].fetch(this.fullOntology.user);case 18:t=e.sent,this.creatorFullname=_e(t),e.next=24;break;case 22:e.prev=22,e.t1=e["catch"](15);case 24:this.loading=!1;case 25:case"end":return e.stop()}}),e,this,[[2,11],[15,22]])})));function t(){return e.apply(this,arguments)}return t}(),fetchManagedProjects:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ProjectCollection"].fetchAll({filterKey:"user",filterValue:this.currentUser.id,light:!0,admin:!0});case 2:this.managedProjects=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rename:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.ontology.name,e.prev=1,this.fullOntology.name=t,e.next=5,this.fullOntology.save();case 5:this.$notify({type:"success",text:this.$t("notif-success-ontology-rename",{name:this.fullOntology.name})}),this.$emit("rename",t),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),this.$notify({type:"error",text:this.$t("notif-error-ontology-rename",{name:n})});case 12:this.isRenameModalActive=!1;case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}(),confirmDeletion:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-ontology",{name:this.ontology.name}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.$emit("delete")}})}},created:function(){this.fetchOntology()}},$r=Cr,kr=(n("25af"),Object(S["a"])($r,tr,nr,!1,null,null,null)),Or=kr.exports,Rr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){return t.preventDefault(),e.createOntology()}}},[n("cytomine-modal",{attrs:{active:e.active,title:e.$t("create-ontology")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[n("b-field",{attrs:{label:e.$t("name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1)],1)},Sr=[],Tr={name:"add-ontology-modal",props:{active:Boolean},components:{CytomineModal:Ve},$_veeValidate:{validator:"new"},data:function(){return{name:""}},watch:{active:function(e){e&&(this.name="")}},methods:{createOntology:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,new $["Ontology"]({name:this.name}).save();case 8:n=e.sent,this.$notify({type:"success",text:this.$t("notif-success-ontology-creation")}),this.$emit("newOntology",n),this.$emit("update:active",!1),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](5),this.$notify({type:"error",text:this.$t("notif-error-ontology-creation")});case 17:case"end":return e.stop()}}),e,this,[[5,14]])})));function t(){return e.apply(this,arguments)}return t}()}},Ar=Tr,Dr=Object(S["a"])(Ar,Rr,Sr,!1,null,null,null),Mr=Dr.exports,Er={name:"list-ontologies",components:{OntologyDetails:Or,AddOntologyModal:Mr},data:function(){return{loading:!0,ontologies:null,selectedOntology:null,creationModal:!1}},computed:{currentUser:m("currentUser/user"),idTargetOntology:function(){return Number(this.$route.params.idOntology)||this.$store.state.ontologies.selectedOntology},filteredOntologies:function(){if(this.searchString.length>0){var e=St(this.searchString);return this.ontologies.filter((function(t){return e.test(t.name)}))}return this.ontologies},searchString:f("ontologies/searchString")},watch:{idTargetOntology:function(){this.idTargetOntology?this.selectedOntology&&this.selectedOntology.id===this.idTargetOntology||this.selectTargetOntology():this.selectedOntology=this.ontologies[0]},selectedOntology:function(e){this.$store.commit("ontologies/setSelectedOntology",e.id)}},methods:{selectOntology:function(e){this.selectedOntology=e,this.$router.push("/ontology/".concat(this.selectedOntology.id))},selectTargetOntology:function(){var e=this;this.selectedOntology=this.ontologies.find((function(t){return t.id===e.idTargetOntology}))},isSelected:function(e){return this.selectedOntology&&this.selectedOntology.id===e.id},sortOntologies:function(){this.ontologies.sort((function(e,t){return e.name.localeCompare(t.name)}))},addOntology:function(e){this.ontologies.push(e),this.sortOntologies(),this.selectedOntology=e},renameOntology:function(e){this.selectedOntology.name=e,this.sortOntologies()},deleteOntology:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.ontologies.findIndex((function(e){return e.id===n.selectedOntology.id})),e.prev=1,e.next=4,this.selectedOntology.delete();case 4:this.ontologies.splice(t,1),this.$notify({type:"success",text:this.$t("notif-success-ontology-deletion",{name:this.selectedOntology.name})}),this.selectedOntology=this.ontologies[0],e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),this.$notify({type:"error",text:this.$t("notif-error-ontology-deletion")});case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["OntologyCollection"].fetchAll({light:!0});case 3:this.ontologies=e.sent.array,e.next=10;break;case 6:return e.prev=6,e.t0=e["catch"](0),this.loading=!1,e.abrupt("return");case 10:this.sortOntologies(),this.idTargetOntology?this.selectTargetOntology():this.selectedOntology=this.ontologies[0],this.loading=!1;case 13:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},Ir=Er,Nr=(n("a460"),Object(S["a"])(Ir,Qn,er,!1,null,"10d1f166",null)),Ur=Nr.exports,Fr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-software-wrapper content-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.error?n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(e._s(e.$t("unexpected-error-info-message")))])]):e.loading?e._e():n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("algorithms"))+" ")]),n("div",{staticClass:"panel-block"},[n("div",{staticClass:"search-block"},[n("b-input",{staticClass:"search-softwares",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),n("button",{staticClass:"button",on:{click:function(t){return e.toggleFilterDisplay()}}},[e._m(0),n("span",[e._v(" "+e._s(e.filtersOpened?e.$t("button-hide-filters"):e.$t("button-show-filters"))+" ")]),e.nbActiveFilters?n("span",{staticClass:"nb-active-filters"},[e._v(" "+e._s(e.nbActiveFilters)+" ")]):e._e()])],1),n("b-collapse",{attrs:{open:e.filtersOpened}},[n("div",{staticClass:"filters"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("nb-jobs"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-slider",{attrs:{max:e.maxNbJobs},model:{value:e.boundsJobs,callback:function(t){e.boundsJobs=t},expression:"boundsJobs"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("nb-success-jobs"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-slider",{attrs:{max:e.maxNbSuccessJobs},model:{value:e.boundsSuccessJobs,callback:function(t){e.boundsSuccessJobs=t},expression:"boundsSuccessJobs"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("only-last-release"))+" ")]),n("div",{staticClass:"filter-body"},[n("b-switch",{staticClass:"switch",model:{value:e.onlyLastReleases,callback:function(t){e.onlyLastReleases=t},expression:"onlyLastReleases"}},[e.onlyLastReleases?[e._v(e._s(e.$t("yes")))]:[e._v(e._s(e.$t("no")))]],2)],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("only-UI-runnable"))+" ")]),n("div",{staticClass:"filter-body"},[n("b-switch",{staticClass:"switch",model:{value:e.onlyExecutables,callback:function(t){e.onlyExecutables=t},expression:"onlyExecutables"}},[e.onlyExecutables?[e._v(e._s(e.$t("yes")))]:[e._v(e._s(e.$t("no")))]],2)],1)])])])]),n("b-table",{staticClass:"table-softwares",attrs:{data:e.filteredSoftwares,paginated:!0,"current-page":e.currentPage,"per-page":e.perPage,"pagination-size":"is-small",detailed:"","detail-key":"id","opened-detailed":e.openedDetails,"default-sort":e.sort.field,"default-sort-direction":e.sort.order},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t},sort:e.updateSort},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:"",width:"250"}},[n("router-link",{attrs:{to:"/software/"+r.id}},[e._v(" "+e._s(r.fullName)+" ")])],1),n("b-table-column",{attrs:{field:"softwareStatus",label:e.$t("version"),centered:"",sortable:"",width:"150","custom-sort":e.sortBySoftwareStatus}},[n("software-status",{attrs:{software:r}})],1),n("b-table-column",{attrs:{field:"executable",label:e.$t("ui-runnable"),centered:"",sortable:"",width:"150"}},[n("boolean-item",{attrs:{value:r.executable}})],1),n("b-table-column",{attrs:{field:"numberOfJob",label:e.$t("number-jobs"),centered:"",sortable:"",width:"150"}},[e._v(" "+e._s(r.numberOfJob)+" ")]),n("b-table-column",{attrs:{field:"numberOfSuccess",label:e.$t("number-success"),centered:"",sortable:"",width:"150"}},[e._v(" "+e._s(r.numberOfSuccess)+" ")]),n("b-table-column",{attrs:{field:"created",label:e.$t("creation-date"),centered:"",sortable:"",width:"180"}},[e._v(" "+e._s(e._f("moment")(Number(r.created),"ll"))+" ")]),n("b-table-column",{attrs:{label:" ",centered:"",width:"150"}},[n("router-link",{staticClass:"button is-small is-link",attrs:{to:"/software/"+r.id}},[e._v(" "+e._s(e.$t("button-open"))+" ")])],1)]}},{key:"detail",fn:function(t){var r=t.row;return[n("software-details",{attrs:{software:r,"excluded-properties":e.excludedProperties},on:{update:e.updateSoftware,delete:function(t){return e.deleteSoftware(r)}}})]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-software")))])])]},proxy:!0},{key:"bottom-left",fn:function(){return[n("b-select",{attrs:{size:"is-small"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[n("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),n("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),n("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),n("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}])})],1)])],1)},Lr=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-filter"})])}],qr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"tag",class:e.tagClass},[e._v(" "+e._s(e.$t(e.label))+" ")])},zr=[],Vr={name:"software-status",props:{software:Object},computed:{tagClass:function(){return this.software.softwareVersion?this.software.deprecated?"is-dark":"is-info":"is-white"},label:function(){return this.software.softwareVersion?this.software.deprecated?"deprecated":"last-release":"no-info"}}},Br=Vr,Wr=Object(S["a"])(Br,qr,zr,!1,null,"4f232346",null),Jr=Wr.exports,Hr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.value?n("span",{staticClass:"tag is-success"},[n("i",{staticClass:"fas fa-check"}),e._v(" "+e._s(e.$t("yes"))+" ")]):n("span",{staticClass:"tag is-danger"},[n("i",{staticClass:"fas fa-times"}),e._v(" "+e._s(e.$t("no"))+" ")])},Gr=[],Kr={name:"boolean-item",props:{value:Boolean}},Yr=Kr,Zr=Object(S["a"])(Yr,Hr,Gr,!1,null,"00684474",null),Xr=Zr.exports,Qr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small",size:"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):n("table",{staticClass:"table"},[n("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():n("tbody",[e.isPropDisplayed("name")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("name")))]),n("td",{staticClass:"prop-content"},[e._v(" "+e._s(e.software.fullName)+" ")])]):e._e(),e.isPropDisplayed("projects")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("projects")))]),n("td",{staticClass:"prop-content"},[e.projects.length?e._l(e.projects,(function(t,r){return n("span",{key:t.id},[n("router-link",{attrs:{to:"/project/"+t.id}},[e._v(e._s(t.name))]),r<e.projects.length-1?n("span",[e._v(", ")]):e._e()],1)})):e.nbProjects>0?n("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("used-in-project-no-access"))+" ")]):n("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("not-used-in-any-project"))+" ")])],2)]):e._e(),e.isPropDisplayed("trustedSource")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("trusted-source")))]),n("td",{staticClass:"prop-content"},[n("software-source",{attrs:{source:e.source}})],1)]):e._e(),e.isPropDisplayed("description")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("description")))]),n("td",{staticClass:"prop-content"},[n("cytomine-description",{attrs:{object:e.software,canEdit:e.canManageSoftware}})],1)]):e._e(),e.isPropDisplayed("properties")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("properties")))]),n("td",{staticClass:"prop-content"},[n("cytomine-properties",{attrs:{object:e.software,canEdit:e.canManageSoftware}})],1)]):e._e(),e.isPropDisplayed("attachedFiles")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("attached-files")))]),n("td",{staticClass:"prop-content"},[n("attached-files",{attrs:{object:e.software,canEdit:e.canManageSoftware}})],1)]):e._e(),e.isPropDisplayed("status")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("status")))]),n("td",{staticClass:"prop-content"},[n("software-status",{attrs:{software:e.software}})],1)]):e._e(),e.isPropDisplayed("executable")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("ui-runnable")))]),n("td",{staticClass:"prop-content"},[n("boolean-item",{attrs:{value:e.software.executable}})],1)]):e._e(),e.isPropDisplayed("created")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("created-on")))]),n("td",{staticClass:"prop-content"},[e._v(" "+e._s(e._f("moment")(Number(e.software.created),"ll"))+" ")])]):e._e(),e.isPropDisplayed("executeCommand")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("execute-command")))]),n("td",{staticClass:"prop-content"},[n("code",[e._v(e._s(e.software.executeCommand))])])]):e._e(),e.isPropDisplayed("pullingCommand")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("pulling-command")))]),n("td",{staticClass:"prop-content"},[n("code",[e._v(e._s(e.software.pullingCommand))])])]):e._e(),e.source?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("actions")))]),n("td",{staticClass:"prop-content"},[n("software-source-buttons",{attrs:{source:e.source,software:e.software}})],1)]):e._e()])],1)},ea=[],ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[this.source?[e.sourceCodeProviderIcon?n("i",{class:e.sourceCodeProviderIcon}):e._e(),e._v(" "),n("span",{staticClass:"is-capitalized"},[e._v(" "+e._s(e.sourceCodeProvider))]),e._v(" ["+e._s(e.source.username)+"] "),e.source.prefix?[e._v(' (with prefix "'+e._s(e.source.prefix)+'") ')]:e._e(),n("br"),e.environmentProviderIcon?n("i",{class:e.environmentProviderIcon}):e._e(),e._v(" "),n("span",{staticClass:"is-capitalized"},[e._v(" "+e._s(e.environmentProvider))]),e._v(" ["+e._s(e.source.dockerUsername)+"] ")]:[n("em",[e._v(e._s(e.$t("no-trusted-source")))])]],2)},na=[],ra={name:"software-source",props:{source:{type:Object,default:null}},data:function(){return{supportedProviders:["github","bitbucket","gitlab","docker"]}},computed:{sourceCodeProvider:function(){var e=this.source?this.formatProvider(this.source.provider):null;return e||this.$t("unknown")},sourceCodeProviderIcon:function(){var e=this.source?this.formatProvider(this.source.provider):null;return e?"fab fa-".concat(e," fa-fw"):null},environmentProvider:function(){var e=this.source?this.formatProvider(this.source.environmentProvider||"docker"):null;return e||this.$t("unknown")},environmentProviderIcon:function(){var e=this.source?this.formatProvider(this.source.environmentProvider||"docker"):null;return e?"fab fa-".concat(e," fa-fw"):null}},methods:{formatProvider:function(e){return e=e.toLowerCase(),this.supportedProviders.includes(e)?e:null}}},aa=ra,ia=Object(S["a"])(aa,ta,na,!1,null,"45d53d76",null),sa=ia.exports,oa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"buttons are-small"},[n("a",{staticClass:"button",attrs:{href:e.sourceCodeProviderLink,target:"_blank"}},[n("i",{staticClass:"fas fa-external-link-alt fa-fw"}),e._v(" "+e._s(e.$t("see-source-code-on"))+" "),n("span",{staticClass:"is-capitalized"},[e._v(" "+e._s(e.sourceCodeProvider))])]),n("a",{staticClass:"button",attrs:{href:e.environmentProviderLink,target:"_blank"}},[n("i",{staticClass:"fas fa-external-link-alt fa-fw"}),e._v(" "+e._s(e.$t("see-environment-on"))+" "),n("span",{staticClass:"is-capitalized"},[e._v(" "+e._s(e.environmentProvider))])])])},ca=[],la={name:"software-source-buttons",props:{source:Object,software:Object},data:function(){return{supportedProviders:["github","bitbucket","gitlab","docker"]}},computed:{sourceCodeProvider:function(){var e=this.formatProvider(this.source.provider);return e||this.$t("unknown")},sourceCodeProviderIcon:function(){var e=this.formatProvider(this.source.provider);return e?"fab fa-".concat(e," fa-fw"):null},sourceCodeProviderLink:function(){var e=this.formatProvider(this.source.provider);return"https://".concat(e,".com/").concat(this.source.username,"/").concat(this.source.prefix).concat(this.software.name,"/tree/").concat(this.software.softwareVersion)},environmentProvider:function(){var e=this.formatProvider(this.source.environmentProvider||"docker");return e||this.$t("unknown")},environmentProviderIcon:function(){var e=this.formatProvider(this.source.environmentProvider||"docker");return e?"fab fa-".concat(e," fa-fw"):null},environmentProviderLink:function(){var e=this.formatProvider(this.source.environmentProvider||"docker");return"docker"===e?"https://hub.docker.com/r/".concat(this.source.dockerUsername,"/").concat(this.source.prefix.toLowerCase()).concat(this.software.name.toLowerCase()):""}},methods:{formatProvider:function(e){return e=e.toLowerCase(),this.supportedProviders.includes(e)?e:null}}},ua=la,da=(n("184e"),Object(S["a"])(ua,oa,ca,!1,null,"426f24c6",null)),pa=da.exports,ma={name:"software-details",props:{software:Object,excludedProperties:{type:Array,default:function(){return[]}}},components:{SoftwareSourceButtons:pa,SoftwareSource:sa,BooleanItem:Xr,SoftwareStatus:Jr,CytomineDescription:bt,CytomineProperties:Ct,AttachedFiles:nn,RenameModal:Ke},data:function(){return{loading:!0,error:!1,projects:[],source:null}},computed:{currentUser:m("currentUser/user"),canManageSoftware:function(){return this.currentUser.adminByNow},nbProjects:function(){return this.projects.length}},watch:{excludedProperties:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},methods:{isPropDisplayed:function(e){return!this.excludedProperties.includes(e)},fetchData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.isPropDisplayed("projects")&&t.push(this.fetchProjects()),this.isPropDisplayed("trustedSource")&&t.push(this.fetchSource()),this.loading=!0,this.error=!1,e.prev=5,e.next=8,Promise.all(t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](5),this.error=!0;case 13:this.loading=!1;case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));function t(){return e.apply(this,arguments)}return t}(),fetchProjects:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ProjectCollection"].fetchAll({filterKey:"software",filterValue:this.software.id});case 2:this.projects=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchSource:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.software.softwareUserRepository){e.next=6;break}return e.next=3,$["TrustedSource"].fetch(this.software.softwareUserRepository);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=null;case 7:this.source=e.t0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.fetchData()}},fa=ma,ha=(n("3afc"),Object(S["a"])(fa,Qr,ea,!1,null,"98ad7208",null)),va=ha.exports;function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ya={name:"list-software",components:{BooleanItem:Xr,SoftwareStatus:Jr,CytomineSlider:pe,SoftwareDetails:va},data:function(){return{loading:!0,error:!1,creationModal:!1,softwares:[],excludedProperties:["name","created","executable","status","pullingCommand","executeCommand"]}},computed:{currentUser:m("currentUser/user"),searchString:f("listSoftware/searchString"),filtersOpened:f("listSoftware/filtersOpened"),maxNbJobs:function(){return Math.max.apply(Math,[10].concat(Object(B["a"])(this.softwares.map((function(e){return e.numberOfJob})))))},maxNbSuccessJobs:function(){return Math.max.apply(Math,[10].concat(Object(B["a"])(this.softwares.map((function(e){return e.numberOfSuccess})))))},boundsJobs:v("listSoftware","boundsJobs","maxNbJobs"),boundsSuccessJobs:v("listSoftware","boundsSuccessJobs","maxNbSuccessJobs"),onlyLastReleases:h("listSoftware","onlyLastReleases"),onlyExecutables:h("listSoftware","onlyExecutables"),nbActiveFilters:function(){return this.$store.getters["listSoftware/nbActiveFilters"]},regexp:function(){return St(this.searchString)},filteredSoftwares:function(){var e=this,t=this.softwares;return this.searchString&&(t=t.filter((function(t){return e.regexp.test(t.name)}))),t=t.filter((function(t){return t.numberOfJob>=e.boundsJobs[0]&&t.numberOfJob<=e.boundsJobs[1]&&t.numberOfSuccess>=e.boundsSuccessJobs[0]&&t.numberOfSuccess<=e.boundsSuccessJobs[1]&&(e.onlyLastReleases&&t.softwareVersion&&!t.deprecated||!e.onlyLastReleases)&&(e.onlyExecutables&&t.executable||!e.onlyExecutables)})),t},currentPage:f("listSoftware/currentPage"),perPage:f("listSoftware/perPage"),sort:f("listSoftware/sort"),openedDetails:{get:function(){return this.$store.state.listSoftware.openedDetails.slice()},set:function(e){this.$store.commit("listSoftware/setOpenedDetails",e)}}},methods:{toggleFilterDisplay:function(){this.filtersOpened=!this.filtersOpened},updateSort:function(e,t){this.sort={field:e,order:t}},sortBySoftwareStatus:function(e,t,n){return(n?1:-1)*(this.getSoftwareStatusValue(e)-this.getSoftwareStatusValue(t))},getSoftwareStatusValue:function(e){return e.softwareVersion?e.deprecated?1:2:0},updateSoftware:function(e){var t=this.softwares.find((function(t){return t.id===e.id}));t&&t.populate(ba({},e))},deleteSoftware:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.delete();case 3:this.softwares=this.softwares.filter((function(e){return e.id!==t.id})),this.$notify({type:"success",text:this.$t("notif-success-algorithm-deletion",{softwareName:t.name})}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-algorithm-deletion",{softwareName:t.name})});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["SoftwareCollection"].fetchAll();case 3:t=e.sent,this.softwares=t.array,(this.currentPage-1)*this.perPage>=this.filteredSoftwares.length&&(this.currentPage=1),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.error=!0;case 11:this.loading=!1;case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},wa=ya,_a=(n("7fea"),n("b070"),Object(S["a"])(wa,Fr,Lr,!1,null,"fcddc1be",null)),xa=_a.exports,ja=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.configUI["project-images-tab"]?e.error?n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(e._s(e.$t("unexpected-error-info-message")))])]):n("div",{staticClass:"content-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("images"))+" "),e.canAddImage?n("button",{staticClass:"button is-link",on:{click:function(t){e.addImageModal=!0}}},[e._v(" "+e._s(e.$t("button-add-image"))+" ")]):e._e()]),n("div",{staticClass:"panel-block"},[n("div",{staticClass:"search-block"},[n("b-input",{staticClass:"search-images",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),n("button",{staticClass:"button",on:{click:function(t){return e.toggleFilterDisplay()}}},[e._m(0),n("span",[e._v(" "+e._s(e.filtersOpened?e.$t("button-hide-filters"):e.$t("button-show-filters"))+" ")]),e.nbActiveFilters?n("span",{staticClass:"nb-active-filters"},[e._v(" "+e._s(e.nbActiveFilters)+" ")]):e._e()])],1),n("b-collapse",{attrs:{open:e.filtersOpened}},[n("div",{staticClass:"filters"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("format"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableFormats,multiple:""},model:{value:e.selectedFormats,callback:function(t){e.selectedFormats=t},expression:"selectedFormats"}})],1)]),n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("vendor"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableVendors,multiple:!0,label:"label","track-by":"value"},model:{value:e.selectedVendors,callback:function(t){e.selectedVendors=t},expression:"selectedVendors"}})],1)]),n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("tags"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableTags,label:"name","track-by":"id",multiple:!0,allPlaceholder:e.$t("all")},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)])]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("magnification"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableMagnifications,multiple:!0,searchable:!1,label:"label","track-by":"value"},model:{value:e.selectedMagnifications,callback:function(t){e.selectedMagnifications=t},expression:"selectedMagnifications"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("resolution"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableResolutions,multiple:!0,searchable:!1,label:"label","track-by":"value"},model:{value:e.selectedResolutions,callback:function(t){e.selectedResolutions=t},expression:"selectedResolutions"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("width"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-slider",{attrs:{max:e.maxWidth},model:{value:e.boundsWidth,callback:function(t){e.boundsWidth=t},expression:"boundsWidth"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("height"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-slider",{attrs:{max:e.maxHeight},model:{value:e.boundsHeight,callback:function(t){e.boundsHeight=t},expression:"boundsHeight"}})],1)])]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("user-annotations"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-slider",{attrs:{max:e.maxNbUserAnnotations},model:{value:e.boundsUserAnnotations,callback:function(t){e.boundsUserAnnotations=t},expression:"boundsUserAnnotations"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("analysis-annotations"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-slider",{attrs:{max:e.maxNbJobAnnotations},model:{value:e.boundsJobAnnotations,callback:function(t){e.boundsJobAnnotations=t},expression:"boundsJobAnnotations"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("reviewed-annotations"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-slider",{attrs:{max:e.maxNbReviewedAnnotations},model:{value:e.boundsReviewedAnnotations,callback:function(t){e.boundsReviewedAnnotations=t},expression:"boundsReviewedAnnotations"}})],1)]),n("div",{staticClass:"column filter"})])])]),n("cytomine-table",{attrs:{collection:e.imageCollection,currentPage:e.currentPage,perPage:e.perPage,openedDetailed:e.openedDetails,sort:e.sortField,order:e.sortOrder,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t}},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{label:e.$t("overview"),width:"100"}},[n("router-link",{attrs:{to:"/project/"+r.project+"/image/"+r.id}},[n("img",{staticClass:"image-overview",attrs:{src:r.thumbURL(256)}})])],1),n("b-table-column",{attrs:{field:e.blindMode?"blindedName":"instanceFilename",label:e.$t("name"),sortable:"",width:"400"}},[n("router-link",{attrs:{to:"/project/"+r.project+"/image/"+r.id}},[n("image-name",{attrs:{image:r,showBothNames:""}})],1)],1),n("b-table-column",{attrs:{field:"magnification",label:e.$t("magnification"),centered:"",sortable:"",width:"100"}},[e._v(" "+e._s(r.magnification||e.$t("unknown"))+" ")]),n("b-table-column",{attrs:{field:"numberOfAnnotations",label:e.$t("user-annotations"),centered:"",sortable:"",width:"100"}},[n("router-link",{attrs:{to:"/project/"+r.project+"/annotations?image="+r.id+"&type=user"}},[e._v(" "+e._s(r.numberOfAnnotations)+" ")])],1),n("b-table-column",{attrs:{field:"numberOfJobAnnotations",label:e.$t("analysis-annotations"),centered:"",sortable:"",width:"100"}},[n("router-link",{attrs:{to:"/project/"+r.project+"/annotations?image="+r.id+"&type=algo"}},[e._v(" "+e._s(r.numberOfJobAnnotations)+" ")])],1),n("b-table-column",{attrs:{field:"numberOfReviewedAnnotations",label:e.$t("reviewed-annotations"),centered:"",sortable:"",width:"100"}},[n("router-link",{attrs:{to:"/project/"+r.project+"/annotations?image="+r.id+"&type=reviewed"}},[e._v(" "+e._s(r.numberOfReviewedAnnotations)+" ")])],1),n("b-table-column",{attrs:{label:" ",centered:"",width:"150"}},[n("router-link",{staticClass:"button is-small is-link",attrs:{to:"/project/"+r.project+"/image/"+r.id}},[e._v(" "+e._s(e.$t("button-open"))+" ")])],1)]}},{key:"detail",fn:function(t){var r=t.row;return[n("image-details",{attrs:{image:r,excludedProperties:e.excludedProperties,editable:""},on:{delete:e.refreshData,setResolution:e.refreshData,setMagnification:e.refreshData}})]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-image")))])])]},proxy:!0}],null,!1,740728299)})],1),n("add-image-modal",{attrs:{active:e.addImageModal},on:{"update:active":function(t){e.addImageModal=t},addImage:e.refreshData}})],1)],1):n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),n("p",[e._v(e._s(e.$t("insufficient-permission")))])])},Ca=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-filter"})])}],$a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.image?n("span",[e.image.blindedName?[n("span",{staticClass:"blind-indication"},[e._v("["+e._s(this.$t("blinded-name-indication"))+"]")]),e._v(" "+e._s(e.image.blindedName)+" "),e.image.instanceFilename&&e.showBothNames?[n("br"),n("span",{staticClass:"true-name"},[e._v(" "+e._s(e.image.instanceFilename)+" ")])]:e._e()]:[e._v(e._s(e.image.instanceFilename))]],2):e._e()},ka=[],Pa={name:"image-name",props:{image:Object,showBothNames:{type:Boolean,default:!1}}},Oa=Pa,Ra=(n("0302"),Object(S["a"])(Oa,$a,ka,!1,null,"2a983bb4",null)),Sa=Ra.exports,Ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image-details-wrapper"},[n("table",{staticClass:"table"},[n("tbody",[e.isPropDisplayed("overview")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("overview")))]),n("td",{staticClass:"prop-content"},[n("router-link",{attrs:{to:"/project/"+e.image.project+"/image/"+e.image.id}},[n("img",{staticClass:"image-overview",attrs:{src:e.image.thumb}})])],1)]):e._e(),e.isPropDisplayed("status")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("status")))]),n("td",{staticClass:"prop-content"},[n("image-status",{attrs:{image:e.image}})],1)]):e._e(),e.isPropDisplayed("numberOfAnnotations")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("user-annotations")))]),n("td",{staticClass:"prop-content"},[n("router-link",{attrs:{to:"/project/"+e.image.project+"/annotations?image="+e.image.id+"&type=user"}},[e._v(" "+e._s(e.image.numberOfAnnotations)+" ")])],1)]):e._e(),e.isPropDisplayed("numberOfJobAnnotations")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("analysis-annotations")))]),n("td",{staticClass:"prop-content"},[n("router-link",{attrs:{to:"/project/"+e.image.project+"/annotations?image="+e.image.id+"&type=algo"}},[e._v(" "+e._s(e.image.numberOfJobAnnotations)+" ")])],1)]):e._e(),e.isPropDisplayed("numberOfReviewedAnnotations")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("reviewed-annotations")))]),n("td",{staticClass:"prop-content"},[n("router-link",{attrs:{to:"/project/"+e.image.project+"/annotations?image="+e.image.id+"&type=reviewed"}},[e._v(" "+e._s(e.image.numberOfReviewedAnnotations)+" ")])],1)]):e._e(),e.isPropDisplayed("description")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("description")))]),n("td",{staticClass:"prop-content"},[n("cytomine-description",{attrs:{object:e.image,canEdit:e.canEdit}})],1)]):e._e(),e.isPropDisplayed("tags")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("tags")))]),n("td",{staticClass:"prop-content"},[n("cytomine-tags",{attrs:{object:e.image,canEdit:e.canEdit}})],1)]):e._e(),e.isPropDisplayed("properties")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("properties")))]),n("td",{staticClass:"prop-content"},[n("cytomine-properties",{attrs:{object:e.image,canEdit:e.canEdit}})],1)]):e._e(),e.isPropDisplayed("attached-files")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("attached-files")))]),n("td",{staticClass:"prop-content"},[n("attached-files",{attrs:{object:e.image,canEdit:e.canEdit}})],1)]):e._e(),e.isPropDisplayed("slide-preview")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("slide-preview")))]),n("td",{staticClass:"prop-content"},[e.image.macroURL?n("a",{on:{click:function(t){e.isMetadataModalActive=!0}}},[n("img",{staticClass:"image-overview",attrs:{src:e.image.macroURL}})]):n("em",[e._v(" "+e._s(e.$t("slide-preview-not-available"))+" ")])])]):e._e(),!e.isPropDisplayed("original-filename")||e.blindMode&&!e.canManageProject?e._e():n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("originalFilename")))]),n("td",{staticClass:"prop-content"},[e._v(" "+e._s(e.image.originalFilename)+" ")])]),e.isPropDisplayed("format")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("format")))]),n("td",{staticClass:"prop-content format"},[e._v(" "+e._s(e.image.extension)+" ")])]):e._e(),e.isPropDisplayed("vendor")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("vendor")))]),n("td",{staticClass:"prop-content"},[e.vendor?n("img",{staticClass:"vendor-img",attrs:{src:e.vendor.imgPath,alt:e.vendor.name,title:e.vendor.name}}):[e._v(e._s(e.$t("unknown")))]],2)]):e._e(),e.isPropDisplayed("size")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("image-size")))]),n("td",{staticClass:"prop-content"},[e._v(" "+e._s(e.image.width+" x "+e.image.height+" "+e.$t("pixels"))+" ")])]):e._e(),e.isPropDisplayed("resolution")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("resolution")))]),n("td",{staticClass:"prop-content"},[e.image.resolution?[e._v(e._s(e.image.resolution.toFixed(3))+" "+e._s(e.$t("um-per-pixel")))]:[e._v(e._s(e.$t("unknown")))]],2)]):e._e(),e.isPropDisplayed("magnification")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("magnification")))]),n("td",{staticClass:"prop-content"},[e.image.magnification?[e._v(e._s(e.image.magnification))]:[e._v(e._s(e.$t("unknown")))]],2)]):e._e(),n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("actions")))]),n("td",{staticClass:"prop-content"},[n("div",{staticClass:"buttons are-small"},[e.isPropDisplayed("metadata")?n("button",{staticClass:"button",on:{click:function(t){e.isMetadataModalActive=!0}}},[e._v(" "+e._s(e.$t("button-metadata"))+" ")]):e._e(),e.canEdit?[e.image.reviewed||e.image.inReview?e.image.reviewUser===e.currentUser.id?[e.image.reviewed?n("button",{staticClass:"button",on:{click:function(t){return e.cancelReview()}}},[e._v(" "+e._s(e.$t("button-unvalidate-review"))+" ")]):[n("router-link",{staticClass:"button",attrs:{to:"/project/"+e.image.project+"/image/"+e.image.id+"?action=review"}},[e._v(" "+e._s(e.$t("button-continue-review"))+" ")]),n("button",{staticClass:"button",on:{click:function(t){return e.cancelReview()}}},[e._v(" "+e._s(e.$t("button-cancel-review"))+" ")])]]:e._e():n("router-link",{staticClass:"button",attrs:{to:"/project/"+e.image.project+"/image/"+e.image.id+"?action=review"}},[e._v(" "+e._s(e.$t("button-start-review"))+" ")]),!e.blindMode||e.canManageProject?n("button",{staticClass:"button",on:{click:function(t){e.isRenameModalActive=!0}}},[e._v(" "+e._s(e.$t("button-rename"))+" ")]):e._e(),n("button",{staticClass:"button",on:{click:function(t){e.isCalibrationModalActive=!0}}},[e._v(" "+e._s(e.$t("button-set-calibration"))+" ")]),n("button",{staticClass:"button",on:{click:function(t){e.isMagnificationModalActive=!0}}},[e._v(" "+e._s(e.$t("button-set-magnification"))+" ")])]:e._e(),e.canDownloadImages||e.canManageProject?n("a",{staticClass:"button",attrs:{href:e.image.downloadURL}},[e._v(" "+e._s(e.$t("button-download"))+" ")]):e._e(),e.canEdit?[n("button",{staticClass:"button is-danger",on:{click:function(t){return e.confirmDeletion()}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")])]:e._e()],2)])])])]),n("rename-modal",{attrs:{title:e.$t("rename-image"),currentName:e.image.instanceFilename,active:e.isRenameModalActive},on:{"update:active":function(t){e.isRenameModalActive=t},rename:e.rename}}),n("magnification-modal",{attrs:{image:e.image,active:e.isMagnificationModalActive},on:{"update:active":function(t){e.isMagnificationModalActive=t},setMagnification:function(t){return e.$emit("setMagnification",t)}}}),n("calibration-modal",{attrs:{image:e.image,active:e.isCalibrationModalActive},on:{"update:active":function(t){e.isCalibrationModalActive=t},setResolution:function(t){return e.$emit("setResolution",t)}}}),n("image-metadata-modal",{attrs:{active:e.isMetadataModalActive,image:e.image},on:{"update:active":function(t){e.isMetadataModalActive=t}}})],1)},Aa=[],Da=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){return t.preventDefault(),e.setMagnification()}}},[n("cytomine-modal",{attrs:{active:e.active,title:e.$t("set-magnification")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[n("b-message",{attrs:{type:"is-warning","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("warning-change-applies-in-project-only"))+" ")]),n("b-field",{attrs:{label:e.$t("magnification"),type:e.fieldType,message:e.errors.first("magnification")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal|positive",expression:"'required|decimal|positive'"}],attrs:{name:"magnification"},model:{value:e.newMagnification,callback:function(t){e.newMagnification=t},expression:"newMagnification"}})],1)],1)],1)},Ma=[],Ea={name:"magnification-modal",props:{active:{type:Boolean},image:{type:Object}},components:{CytomineModal:Ve},$_veeValidate:{validator:"new"},data:function(){return{newMagnification:""}},computed:{blindMode:function(){return this.$store.state.currentProject.project.blindMode},fieldType:function(){return{"is-danger":this.errors.has("magnification")}}},watch:{active:function(e){e&&(this.newMagnification=this.image.magnification)}},methods:{setMagnification:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return n=this.blindMode?this.image.blindedName:this.image.instanceFilename,e.prev=6,r=this.image.clone(),r.magnification=this.newMagnification,e.next=11,r.save();case 11:this.$emit("setMagnification",r.magnification),this.$notify({type:"success",text:this.$t("notif-success-magnification-update",{imageName:n})}),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](6),this.$notify({type:"error",text:this.$t("notif-error-magnification-update",{imageName:n})});case 18:this.$emit("update:active",!1);case 19:case"end":return e.stop()}}),e,this,[[6,15]])})));function t(){return e.apply(this,arguments)}return t}()}},Ia=Ea,Na=Object(S["a"])(Ia,Da,Ma,!1,null,null,null),Ua=Na.exports,Fa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){return t.preventDefault(),e.setResolution()}}},[n("cytomine-modal",{attrs:{active:e.active,title:e.$t("calibrate-image")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[n("b-message",{attrs:{type:"is-warning","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("warning-change-applies-in-project-only"))+" ")]),n("b-field",{attrs:{label:e.$t("resolution"),type:e.fieldType,message:e.errors.first("resolution")}},[n("b-field",{attrs:{type:e.fieldType}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal|positive",expression:"'required|decimal|positive'"}],attrs:{name:"resolution",expanded:""},model:{value:e.calibrationField,callback:function(t){e.calibrationField=t},expression:"calibrationField"}}),n("b-select",{model:{value:e.calibrationFactor,callback:function(t){e.calibrationFactor=t},expression:"calibrationFactor"}},[n("option",{domProps:{value:.001}},[e._v(" "+e._s(e.$t("nm-per-pixel")))]),n("option",{domProps:{value:1}},[e._v(e._s(e.$t("um-per-pixel")))]),n("option",{domProps:{value:1e3}},[e._v(e._s(e.$t("mm-per-pixel")))])])],1)],1)],1)],1)},La=[],qa={name:"calibration-modal",props:{active:{type:Boolean},image:{type:Object}},components:{CytomineModal:Ve},$_veeValidate:{validator:"new"},data:function(){return{calibrationField:"",calibrationFactor:1}},computed:{blindMode:function(){return this.$store.state.currentProject.project.blindMode},fieldType:function(){return{"is-danger":this.errors.has("resolution")}}},watch:{active:function(e){e&&(this.calibrationField=this.image.resolution)}},methods:{setResolution:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return n=this.blindMode?this.image.blindedName:this.image.instanceFilename,e.prev=6,r=this.image.clone(),r.resolution=Number(this.calibrationField)*this.calibrationFactor,e.next=11,r.save();case 11:this.$emit("setResolution",r.resolution),this.$notify({type:"success",text:this.$t("notif-success-image-calibration",{imageName:n})}),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](6),this.$notify({type:"error",text:this.$t("notif-error-image-calibration",{imageName:n})});case 18:this.$emit("update:active",!1);case 19:case"end":return e.stop()}}),e,this,[[6,15]])})));function t(){return e.apply(this,arguments)}return t}()}},za=qa,Va=Object(S["a"])(za,Fa,La,!1,null,null,null),Ba=Va.exports,Wa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("cytomine-modal",{attrs:{active:e.active,title:e.$t("image-metadata")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-close"))+" ")])]},proxy:!0}])},[e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[e.image&&e.image.macroURL?[n("p",{staticClass:"image-preview",style:e.styleImagePreview},[n("img",{ref:"image",class:"rotate-"+e.rotationAngle,attrs:{src:e.image.macroURL}})]),n("div",{staticClass:"buttons is-centered are-small"},[n("button",{staticClass:"button",on:{click:function(t){return e.rotate(-90)}}},[n("i",{staticClass:"fas fa-undo"})]),n("button",{staticClass:"button",on:{click:function(t){return e.rotate(90)}}},[n("i",{staticClass:"fas fa-undo mirror"})])])]:e._e(),n("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search",size:"is-small"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),n("ul",e._l(e.filteredProps,(function(t){return n("li",{key:t.id},[n("strong",[e._v(e._s(t.key))]),e._v(": "+e._s(t.value)+" ")])})),0)]],2)},Ja=[],Ha={name:"image-metadata-modal",props:{active:Boolean,image:Object},components:{CytomineModal:Ve},data:function(){return{error:!1,properties:[],searchString:"",rotationAngle:0}},computed:{filteredProps:function(){if(!this.searchString)return this.properties;var e=St(this.searchString);return this.properties.filter((function(t){return e.test(t.key)||e.test(t.value)}))},styleImagePreview:function(){if(this.rotationAngle,this.$refs.image){var e=90===this.rotationAngle||270===this.rotationAngle,t=this.$refs.image.clientWidth+"px",n=this.$refs.image.clientHeight+"px";return{width:e?n:t,height:e?t:n}}}},methods:{rotate:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.rotationAngle=(this.rotationAngle+t+360)%360;case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=new $["AbstractImage"]({id:this.image.baseImage,class:"be.cytomine.image.AbstractImage"}),e.next=4,$["PropertyCollection"].fetchAll({object:t});case 4:this.properties=e.sent.array,this.properties.sort((function(e,t){return e.key.localeCompare(t.key)})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.error=!0;case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},Ga=Ha,Ka=(n("566d"),Object(S["a"])(Ga,Wa,Ja,!1,null,"c1c4df70",null)),Ya=Ka.exports,Za=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"tag",class:e.tagClass},[e._v(" "+e._s(e.$t(e.label))+" ")])},Xa=[],Qa={props:{image:Object},computed:{tagClass:function(){return this.image.reviewed?"is-success":this.image.inReview?"is-info":"is-light"},label:function(){return this.image.reviewed?"reviewed":this.image.inReview?"in-review":"none"}}},ei=Qa,ti=Object(S["a"])(ei,Za,Xa,!1,null,null,null),ni=ti.exports,ri={hamamatsu:{imgPath:n("398f"),name:"Hamamatsu Photonics"},"3dh":{imgPath:n("b83e"),name:"3DHISTECH Ltd."},aperio:{imgPath:n("6284"),name:"Aperio"},leica:{imgPath:n("68c7"),name:"Leica Biosystems"},roche:{imgPath:n("99fb"),name:"La Roche Ltd."},philips:{imgPath:n("35ec"),name:"Philips"}};function ai(e){switch(e){case"openslide/ndpi":case"openslide/vms":return ri["hamamatsu"];case"openslide/mrxs":return ri["3dh"];case"openslide/svs":return ri["aperio"];case"openslide/scn":return ri["leica"];case"ventana/tif":case"ventana/bif":return ri["roche"];case"philips/tif":return ri["philips"];default:return null}}var ii={name:"image-details",components:{CytomineDescription:bt,CytomineTags:Bt,CytomineProperties:Ct,AttachedFiles:nn,MagnificationModal:Ua,CalibrationModal:Ba,ImageMetadataModal:Ya,ImageStatus:ni,RenameModal:Ke},props:{image:{type:Object},excludedProperties:{type:Array,default:function(){return[]}},editable:{type:Boolean,default:!1}},data:function(){return{isRenameModalActive:!1,isCalibrationModalActive:!1,isMagnificationModalActive:!1,isMetadataModalActive:!1}},computed:{currentUser:m("currentUser/user"),configUI:m("currentProject/configUI"),blindMode:function(){return(this.$store.state.currentProject.project||{}).blindMode||!1},canDownloadImages:function(){return(this.$store.state.currentProject.project||{}).areImagesDownloadable||!1},canManageProject:function(){return this.$store.getters["currentProject/canManageProject"]},canEdit:function(){return this.editable&&this.$store.getters["currentProject/canEditImage"](this.image)},imageNameNotif:function(){return this.blindMode?this.image.blindedName:this.image.instanceFilename},vendor:function(){return ai(this.image.mime)}},methods:{isPropDisplayed:function(e){return!this.excludedProperties.includes(e)&&this.configUI["project-explore-image-".concat(e)]},cancelReview:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.image.reviewed?"notif-error-unvalidate-review":"notif-error-cancel-review",e.prev=1,e.next=4,this.image.stopReview(!0);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),this.$notify({type:"error",text:this.$t(t)});case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(){return e.apply(this,arguments)}return t}(),rename:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.image.instanceFilename,e.prev=1,this.image.instanceFilename=t,e.next=5,this.image.save();case 5:this.$notify({type:"success",text:this.$t("notif-success-image-rename",{imageName:this.image.instanceFilename})}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.$notify({type:"error",text:this.$t("notif-error-image-rename",{imageName:n})});case 11:this.isRenameModalActive=!1;case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}(),confirmDeletion:function(){this.$buefy.dialog.confirm({title:this.$t("delete-image"),message:this.$t("delete-image-confirmation-message",{imageName:this.imageNameNotif}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:this.deleteImage})},deleteImage:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["ImageInstance"].delete(this.image.id);case 3:this.$notify({type:"success",text:this.$t("notif-success-image-deletion",{imageName:this.imageNameNotif})}),this.$emit("delete"),t=this.$store.state.currentProject.project.clone(),t.numberOfImages--,this.$store.dispatch("currentProject/updateProject",t),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-image-deletion",{imageName:this.imageNameNotif})});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()}},si=ii,oi=(n("0b1e"),Object(S["a"])(si,Ta,Aa,!1,null,"1ffffabd",null)),ci=oi.exports,li=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("cytomine-modal",{attrs:{active:e.active,title:e.$t("add-images")},on:{close:function(t){return e.$emit("update:active",!1)}}},[n("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[[n("b-input",{staticClass:"search-images",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),n("cytomine-table",{attrs:{collection:e.imageCollection,currentPage:e.currentPage,perPage:e.perPage,sort:e.sortField,order:e.sortOrder,detailed:!1},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t}},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{label:e.$t("overview")}},[n("img",{staticClass:"image-overview",attrs:{src:r.previewURL(256)}})]),n("b-table-column",{attrs:{field:"originalFilename",label:e.$t("name"),sortable:""}},[e._v(" "+e._s(r.originalFilename)+" ")]),n("b-table-column",{attrs:{field:"created",label:e.$t("created-on"),sortable:""}},[e._v(" "+e._s(e._f("moment")(Number(r.created),"ll LT"))+" ")]),n("b-table-column",{attrs:{label:" ",centered:""}},[e.wasAdded(r)?n("button",{staticClass:"button is-small is-link",attrs:{disabled:""}},[e._v(" "+e._s(e.$t("button-added"))+" ")]):e.isInProject(r)?n("span",[e._v(" "+e._s(e.$t("already-in-project"))+" ")]):n("button",{staticClass:"button is-small is-link",on:{click:function(t){return e.addImage(r)}}},[e._v(" "+e._s(e.$t("button-add"))+" ")])])]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-image")))])])]},proxy:!0}],null,!1,3702608298)})]]],2)},ui=[],di={name:"add-image-modal",props:{active:Boolean},components:{CytomineTable:Y,CytomineModal:Ve},data:function(){return{loading:!0,perPage:10,searchString:"",idsAddedImages:[],currentPage:1,sortField:"created",sortOrder:"desc"}},computed:{project:m("currentProject/project"),imageCollection:function(){var e=new $["AbstractImageCollection"]({project:this.project.id});return this.searchString&&(e["originalFilename"]={ilike:encodeURIComponent(this.searchString)}),e}},watch:{active:function(e){e&&(this.idsAddedImages=[])}},methods:{addImage:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={imageName:t.originalFilename,projectName:this.project.name},e.prev=1,e.next=4,new $["ImageInstance"]({baseImage:t.id,project:this.project.id}).save();case 4:r=e.sent,this.idsAddedImages.push(t.id),this.$emit("addImage",r),this.$notify({type:"success",text:this.$t("notif-success-add-image",n)}),a=this.project.clone(),a.numberOfImages++,this.$store.dispatch("currentProject/updateProject",a),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),this.$notify({type:"error",text:this.$t("notif-error-add-image",n)});case 16:case"end":return e.stop()}}),e,this,[[1,13]])})));function t(t){return e.apply(this,arguments)}return t}(),isInProject:function(e){return e.inProject},wasAdded:function(e){return this.idsAddedImages.includes(e.id)}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loading=!1;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},pi=di,mi=(n("3c6c"),Object(S["a"])(pi,li,ui,!1,null,"4bf4c07a",null)),fi=mi.exports;function hi(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=vi(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function vi(e,t){if(e){if("string"===typeof e)return gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gi(e,t):void 0}}function gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wi={rootModuleProp:"storeModule"},_i=function(e,t){return g(null,e,t,wi)},xi=function(e,t){return v(null,e,t,wi)},ji={name:"list-images",components:{ImageName:Sa,ImageDetails:ci,CytomineTable:Y,CytomineMultiselect:ae,CytomineSlider:pe,AddImageModal:fi},data:function(){return{loading:!0,error:!1,images:[],addImageModal:!1,excludedProperties:["overview","instanceFilename","magnification","numberOfAnnotations","numberOfJobAnnotations","numberOfReviewedAnnotations"],availableFormats:[],availableVendors:[],availableMagnifications:[],availableResolutions:[],availableTags:[],maxWidth:100,maxHeight:100,maxNbUserAnnotations:100,maxNbJobAnnotations:100,maxNbReviewedAnnotations:100,revision:0}},computed:{currentUser:m("currentUser/user"),configUI:m("currentProject/configUI"),project:m("currentProject/project"),blindMode:function(){return this.project.blindMode},canManageProject:function(){return this.$store.getters["currentProject/canManageProject"]},canAddImage:function(){return!this.currentUser.guestByNow&&(this.canManageProject||!this.project.isReadOnly)},storeModule:function(){return this.$store.getters["currentProject/currentProjectModule"]+"listImages"},searchString:f("searchString",yi(yi({},wi),{},{debounce:500})),filtersOpened:f("filtersOpened",wi),querySearchTags:function(){return this.$route.query.tags},selectedFormats:_i("formats","availableFormats"),selectedVendors:_i("vendors","availableVendors"),selectedTags:_i("selectedTags","availableTags"),selectedMagnifications:_i("magnifications","availableMagnifications"),selectedResolutions:_i("resolutions","availableResolutions"),boundsWidth:xi("boundsWidth","maxWidth"),boundsHeight:xi("boundsHeight","maxHeight"),boundsUserAnnotations:xi("boundsUserAnnotations","maxNbUserAnnotations"),boundsJobAnnotations:xi("boundsJobAnnotations","maxNbJobAnnotations"),boundsReviewedAnnotations:xi("boundsReviewedAnnotations","maxNbReviewedAnnotations"),multiSelectFilters:function(){return[{prop:"extension",selected:this.selectedFormats,total:this.availableFormats.length},{prop:"vendor",selected:this.selectedVendors.map((function(e){return e.value})),total:this.availableVendors.length},{prop:"magnification",selected:this.selectedMagnifications.map((function(e){return e.value})),total:this.availableMagnifications.length},{prop:"resolution",selected:this.selectedResolutions.map((function(e){return e.value})),total:this.availableResolutions.length},{prop:"tag",selected:this.selectedTags.map((function(e){return e.id})),total:this.availableTags.length}]},boundsFilters:function(){return[{prop:"width",bounds:this.boundsWidth},{prop:"height",bounds:this.boundsHeight},{prop:"numberOfAnnotations",bounds:this.boundsUserAnnotations},{prop:"numberOfJobAnnotations",bounds:this.boundsJobAnnotations},{prop:"numberOfReviewedAnnotations",bounds:this.boundsReviewedAnnotations}]},imageCollection:function(){var e=new $["ImageInstanceCollection"]({filterKey:"project",filterValue:this.project.id});this.searchString&&(e["name"]={ilike:encodeURIComponent(this.searchString)});var t,n=hi(this.boundsFilters);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.prop,i=r.bounds;e[a]={lte:i[1]},i[0]>0&&(e[a]["gte"]=i[0])}}catch(p){n.e(p)}finally{n.f()}var s,o=hi(this.multiSelectFilters);try{for(o.s();!(s=o.n()).done;){var c=s.value,l=c.prop,u=c.selected,d=c.total;"vendor"==l&&(l="mimeType"),u.length>0&&u.length<d&&(e[l]={in:u.join()})}}catch(p){o.e(p)}finally{o.f()}return e},nbActiveFilters:function(){return this.$store.getters[this.storeModule+"/nbActiveFilters"]},currentPage:f("currentPage",wi),perPage:f("perPage",wi),sortField:f("sortField",wi),sortOrder:f("sortOrder",wi),openedDetails:f("openedDetails",wi)},methods:{fetchFilters:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new $["ImageInstanceCollection"].fetchBounds({project:this.project.id});case 2:t=e.sent,this.maxWidth=Math.max(100,t.width.max),this.maxHeight=Math.max(100,t.height.max),this.maxNbUserAnnotations=Math.max(100,t.countImageAnnotations.max),this.maxNbJobAnnotations=Math.max(100,t.countImageJobAnnotations.max),this.maxNbReviewedAnnotations=Math.max(100,t.countImageReviewedAnnotations.max),this.availableFormats=t.format.list,this.availableVendors=t.mimeType.list.map((function(e){var t=ai(e);return{value:e||"null",label:t?t.name:n.$t("unknown")}})),this.availableMagnifications=t.magnification.list.map((function(e){return{value:e||"null",label:e||n.$t("unknown")}})),this.availableResolutions=t.resolution.list.map((function(e){return{value:e||"null",label:e?"".concat(e.toFixed(3)," ").concat(n.$t("um-per-pixel")):n.$t("unknown")}}));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchTags:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=[{id:"null",name:this.$t("no-tag")}],e.t1=B["a"],e.next=4,$["TagCollection"].fetchAll();case 4:e.t2=e.sent.array,e.t3=(0,e.t1)(e.t2),this.availableTags=e.t0.concat.call(e.t0,e.t3);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.fetchFilters()]);case 3:this.revision++,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.error=!0;case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),toggleFilterDisplay:function(){this.filtersOpened=!this.filtersOpened}},watch:{querySearchTags:function(e){if(e){this.selectedTags=[];var t=this.availableTags.filter((function(t){return e.split(",").includes(t.name)}));t&&(this.selectedTags=t)}}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.fetchFilters(),this.fetchTags()]);case 3:this.loading=!1,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.error=!0;case 9:this.$route.query.tags&&(t=this.availableTags.filter((function(e){return n.$route.query.tags.split(",").includes(e.name)})),t&&(this.selectedTags=t));case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},Ci=ji,$i=(n("5b3d"),Object(S["a"])(Ci,ja,Ca,!1,null,"5096ea02",null)),ki=$i.exports,Pi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.permissionError||e.notFoundError?n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t(e.permissionError?"access-denied":"not-found"))+" ")]),n("p",[e._v(" "+e._s(e.$t(e.permissionError?"insufficient-permission":"not-found-error"))+" ")])]):n("div",{staticClass:"content-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading},on:{"update:active":function(t){e.loading=t}}}),e.loading?e._e():n("div",{staticClass:"box"},[n("i18n",{attrs:{path:"detailed-image-information",tag:"h1"}},[n("router-link",{attrs:{place:"imageName",to:"/project/"+e.image.project+"/image/"+e.image.id}},[n("image-name",{attrs:{image:e.image}})],1)],1),e.image?n("image-details",{attrs:{image:e.image,editable:""},on:{setResolution:function(t){return e.image.resolution=t},setMagnification:function(t){return e.image.magnification=t},delete:function(t){return e.deleteImage()}}}):e._e()],1)],1)},Oi=[],Ri={name:"image-information",components:{ImageName:Sa,ImageDetails:ci},data:function(){return{loading:!0,image:null,permissionError:!1,notFoundError:!1}},computed:{idImage:function(){return this.$route.params.idImage}},watch:{idImage:function(){this.loadImage()}},methods:{loadImage:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.permissionError=!1,this.notFoundError=!1,e.prev=3,e.next=6,$["ImageInstance"].fetch(this.idImage);case 6:this.image=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),403===e.t0.response.status?this.permissionError=!0:this.notFoundError=!0;case 12:this.loading=!1;case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(){return e.apply(this,arguments)}return t}(),deleteImage:function(){this.$router.push("/project/".concat(this.image.project))}},created:function(){this.loadImage()}},Si=Ri,Ti=Object(S["a"])(Si,Pi,Oi,!1,null,null,null),Ai=Ti.exports,Di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.configUI["project-annotations-tab"]?e.error?n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(e._s(e.$t("error-load-annotations-filters")))])]):n("div",{staticClass:"content-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():n("div",[n("div",{staticClass:"box"},[n("h2",[e._v(" "+e._s(e.$t("display"))+" ")]),n("div",{staticClass:"filters"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("preview-size"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.allowedSizes,label:"label","track-by":"size","allow-empty":!1,searchable:!1},model:{value:e.selectedSize,callback:function(t){e.selectedSize=t},expression:"selectedSize"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("number-per-page"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:[10,25,50,100],"allow-empty":!1,searchable:!1},model:{value:e.nbPerPage,callback:function(t){e.nbPerPage=t},expression:"nbPerPage"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("outline-color"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.colors,label:"label","track-by":"name","allow-empty":!1,searchable:!1},model:{value:e.selectedColor,callback:function(t){e.selectedColor=t},expression:"selectedColor"}})],1)])])]),n("h2",[e._v(" "+e._s(e.$t("filters"))+" ")]),n("div",{staticClass:"filters"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("annotation-type"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.annotationTypes,"allow-empty":!1,searchable:!1},model:{value:e.selectedAnnotationType,callback:function(t){e.selectedAnnotationType=t},expression:"selectedAnnotationType"}})],1)]),n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("images"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.images,label:e.blindMode?"blindedName":"instanceFilename","track-by":"id",multiple:"",allPlaceholder:e.$t("all-images")},model:{value:e.selectedImages,callback:function(t){e.selectedImages=t},expression:"selectedImages"}})],1)]),e.ontology?n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("terms"))+" ")]),n("div",{staticClass:"filter-body"},[n("ontology-tree-multiselect",{attrs:{ontology:e.ontology,additionalNodes:e.additionalNodes},model:{value:e.selectedTermsIds,callback:function(t){e.selectedTermsIds=t},expression:"selectedTermsIds"}})],1)]):e._e(),e.selectedAnnotationType===e.jobAnnotationOption?n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("analyses"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.userJobs,label:"fullName","track-by":"id",multiple:"",allPlaceholder:e.$t("all-analyses")},model:{value:e.selectedUserJobs,callback:function(t){e.selectedUserJobs=t},expression:"selectedUserJobs"}})],1)]):e.selectedAnnotationType===e.userAnnotationOption?n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("members"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.filteredMembers,label:"fullName","track-by":"id",multiple:""},model:{value:e.selectedMembers,callback:function(t){e.selectedMembers=t},expression:"selectedMembers"}})],1)]):n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("reviewers"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.members,label:"fullName","track-by":"id",multiple:""},model:{value:e.selectedReviewers,callback:function(t){e.selectedReviewers=t},expression:"selectedReviewers"}})],1)])]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("tags"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableTags,label:"name","track-by":"id",multiple:!0,allPlaceholder:e.$t("all")},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)]),n("div",{staticClass:"column filter is-one-quarter"}),n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("from"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-datepicker",{attrs:{styles:["multiselect"],maxDate:e.toDate||new Date},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}})],1)]),n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("to"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-datepicker",{attrs:{styles:["multiselect"],minDate:e.fromDate},model:{value:e.toDate,callback:function(t){e.toDate=t},expression:"toDate"}})],1)])])])]),e._l(e.termsOptions,(function(t){return n("list-annotations-by-term",{directives:[{name:"show",rawName:"v-show",value:e.selectedTermsIds.includes(t.id),expression:"selectedTermsIds.includes(term.id)"}],key:t.id,attrs:{size:e.selectedSize.size,color:e.selectedColor.hexaCode,nbPerPage:e.nbPerPage,allTerms:e.terms,allUsers:e.allUsers,allImages:e.images,term:t,multipleTerms:t.id===e.multipleTermsOption.id,noTerm:t.id===e.noTermOption.id,imagesIds:e.selectedImagesIds,usersIds:e.selectedUsersIds,tagsIds:e.tagsIdsNotNull,noTag:e.noTag,reviewed:e.reviewed,reviewUsersIds:e.reviewUsersIds,afterThan:e.afterThan,beforeThan:e.beforeThan,revision:e.revision},on:{addTerm:e.addTerm,update:function(t){e.revision++}}})})),n("div",{staticClass:"box"},[n("h2",{staticClass:"has-text-centered"},[e._v(" "+e._s(e.$t("download-results"))+" ")]),n("div",{staticClass:"buttons is-centered"},[n("a",{staticClass:"button is-link",attrs:{href:e.downloadURL("pdf")}},[e._v(e._s(e.$t("download-PDF")))]),n("a",{staticClass:"button is-link",attrs:{href:e.downloadURL("csv")}},[e._v(e._s(e.$t("download-CSV")))]),n("a",{staticClass:"button is-link",attrs:{href:e.downloadURL("xls")}},[e._v(e._s(e.$t("download-excel")))])])])],2)],1):n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),n("p",[e._v(e._s(e.$t("insufficient-permission")))])])},Mi=[],Ei=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-datepicker",{class:e.styles,attrs:{value:e.value,placeholder:e.placeholder||this.$t("select-date"),"min-date":e.minDate,"max-date":e.maxDate,"month-names":e.moment.months(),"day-names":e.moment.weekdaysMin(),"date-formatter":function(t){return e.moment(t).format("ll")},size:"is-small"},on:{input:function(t){return e.$emit("input",t)}}},[e.resetButton?n("div",{staticClass:"has-text-centered"},[n("button",{staticClass:"button is-small is-link",attrs:{disabled:!e.value},on:{click:function(t){return e.$emit("input",null)}}},[e._v(" "+e._s(e.$t("button-reset"))+" ")])]):e._e()])},Ii=[],Ni={name:"cytomine-date-picker",props:{value:Date,resetButton:{type:Boolean,default:!0},maxDate:Date,minDate:Date,placeholder:String,styles:{type:Array,default:function(){return[]}}},computed:{moment:function(){return we.a}}},Ui=Ni,Fi=(n("6bcc"),Object(S["a"])(Ui,Ei,Ii,!1,null,null,null)),Li=Fi.exports,qi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.activeSelector=!1},expression:"() => activeSelector = false"}],staticClass:"multiselect",class:{"multiselect--active":e.activeSelector}},[n("div",{staticClass:"multiselect__select",on:{click:function(t){e.activeSelector=!e.activeSelector}}}),n("div",{staticClass:"multiselect__tags",on:{click:function(t){e.activeSelector=!0}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.activeSelector,expression:"!activeSelector"}],staticClass:"multiselect__tags-wrap"},[e.allSelected?n("strong",[e._v(" "+e._s(e.$t("all"))+" ")]):[e._l(e.displayedSelectedTerms,(function(t,r){return n("span",{key:t.id},[n("cytomine-term",{attrs:{term:t}}),r<e.displayedSelectedTerms.length-1?n("span",{staticClass:"comma"},[e._v(",")]):e._e()],1)})),e.countNotDisplayed>0?n("strong",[e._v(" "+e._s(e.$tc("and-count-others",e.countNotDisplayed,{count:e.countNotDisplayed}))+" ")]):e._e()]],2),n("input",{directives:[{name:"show",rawName:"v-show",value:e.activeSelector,expression:"activeSelector"},{name:"model",rawName:"v-model",value:e.searchString,expression:"searchString"}],ref:"input",staticClass:"multiselect__input",attrs:{type:"text",placeholder:e.$t("select-options")},domProps:{value:e.searchString},on:{input:function(t){t.target.composing||(e.searchString=t.target.value)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.activeSelector,expression:"activeSelector"}],staticClass:"multiselect__content-wrapper"},[e.multiple?n("ul",[n("li",{staticClass:"multiselect__element multiselect__select-all",on:{click:function(t){return e.selectAll()}}},[n("span",{class:["multiselect__option",e.allSelected?"multiselect__option--selected":""]},[e._v(" "+e._s(e.$t("select-all"))+" ")])])]):e._e(),n("ontology-tree",{attrs:{ontology:e.ontology,additionalNodes:e.additionalNodes,startWithAdditionalNodes:e.startWithAdditionalNodes,selectedNodes:e.selectedNodes,searchString:e.searchString,multipleSelection:e.multiple},on:{select:function(t){return e.handleSelection()},setSelectedNodes:function(t){return e.$emit("setSelectedNodes",t)}},scopedSlots:e._u([{key:"no-result",fn:function(){return[n("ul",{staticClass:"multiselect__content"},[n("li",{on:{click:function(t){return e.selectAll()}}},[n("span",{staticClass:"multiselect__option"},[e._v(" "+e._s(e.$t("no-result"))+" ")])])])]},proxy:!0}])})],1)])},zi=[];function Vi(e){return Bi(e.children.array)}function Bi(e){var t=[];return e.forEach((function(e){t.push(e),e.children&&t.push.apply(t,Object(B["a"])(Bi(e.children)))})),t}var Wi={name:"ontology-tree-multiselect",components:{OntologyTree:jr,CytomineTerm:ur},model:{prop:"selectedNodes",event:"setSelectedNodes"},props:{ontology:{type:Object},additionalNodes:{type:Array,default:function(){return[]}},startWithAdditionalNodes:{type:Boolean,default:!1},selectedNodes:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!0}},data:function(){return{activeSelector:!1,searchString:"",maxNbDisplayed:3}},computed:{allTerms:function(){if(!this.ontology)return[];var e=this.additionalNodes.map((function(e){return e}));return e.push.apply(e,Object(B["a"])(Vi(this.ontology))),e},allSelected:function(){return this.allTerms.length===this.selectedNodes.length},displayedSelectedTerms:function(){var e=this,t=this.selectedNodes.slice(0,this.maxNbDisplayed);return t.map((function(t){return e.allTerms.find((function(e){return e.id===t}))}))},countNotDisplayed:function(){return this.selectedNodes.length-this.maxNbDisplayed}},watch:{activeSelector:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,this.$nextTick();case 3:this.$refs.input.focus();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},methods:{selectAll:function(){this.$emit("setSelectedNodes",this.allSelected?[]:this.allTerms.map((function(e){return e.id})))},handleSelection:function(){this.multiple||(this.activeSelector=!1)}}},Ji=Wi,Hi=Object(S["a"])(Ji,qi,zi,!1,null,null,null),Gi=Hi.exports,Ki=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[n("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),n("h2",[e._v(" "+e._s(e.title)+" ("+e._s(e.nbAnnotations)+") ")]),e.error?[n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("failed-fetch-annots"))+" ")])]:e.annotations.length?[e._l(e.annotations,(function(t){return n("annotation-preview",{key:e.title+t.id,attrs:{annot:t,size:e.size,color:e.color,terms:e.allTerms,users:e.allUsers,images:e.allImages},on:{addTerm:function(t){return e.$emit("addTerm",t)},update:function(n){return e.$emit("update",t.id)}}})})),n("b-pagination",{attrs:{total:e.nbAnnotations,current:e.currentPage,size:"is-small","per-page":e.nbPerPage},on:{"update:current":function(t){e.currentPage=t}}})]:[n("em",{staticClass:"no-result"},[e._v(e._s(e.$t("no-annotation")))])]],2)},Yi=[],Zi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-popover",{attrs:{placement:"right",trigger:"manual",open:e.opened,"auto-hide":!1},scopedSlots:e._u([{key:"popover",fn:function(){return[e.opened?n("annotation-details",{directives:[{name:"click-outside",rawName:"v-click-outside.capture",value:function(t){return e.close(t)},expression:"(event) => close(event)",modifiers:{capture:!0}}],attrs:{annotation:e.annot,terms:e.terms,users:e.users,images:e.images},on:{addTerm:function(t){return e.$emit("addTerm",t)},updateTerms:function(t){return e.$emit("update")},deletion:e.handleDeletion}}):e._e()]},proxy:!0}])},[n("div",{staticClass:"annot-preview",style:e.styleAnnotDetails,on:{click:function(t){return t.target!==t.currentTarget?null:e.viewAnnot()}}},[n("button",{ref:"previewButton",staticClass:"button is-small",on:{click:function(t){e.opened=!e.opened}}},[n("i",{class:["fas",e.opened?"fa-minus":"fa-plus"]})])])])},Xi=[],Qi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"annotation-details"},[n("table",{staticClass:"table"},[n("tbody",[e.showImageInfo?n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("image")))])]),n("td",[n("router-link",{attrs:{to:"/project/"+e.annotation.project+"/image/"+e.annotation.image}},[n("image-name",{attrs:{image:e.image}})],1)],1)]):e._e(),e.isPropDisplayed("geometry-info")?[e.annotation.area>0?n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("area")))])]),n("td",[e._v(e._s(e.annotation.area.toFixed(3)+" "+e.annotation.areaUnit))])]):e._e(),e.annotation.perimeter>0?n("tr",[n("td",[n("strong",[e._v(e._s(e.$t(e.annotation.area>0?"perimeter":"length")))])]),n("td",[e._v(e._s(e.annotation.perimeter.toFixed(3)+" "+e.annotation.perimeterUnit))])]):e._e()]:e._e(),e.isPropDisplayed("description")?n("tr",[n("td",{attrs:{colspan:"2"}},[n("h5",[e._v(e._s(e.$t("description")))]),n("cytomine-description",{attrs:{object:e.annotation,canEdit:e.canEdit,maxPreviewLength:300}})],1)]):e._e(),e.isPropDisplayed("terms")&&e.ontology?n("tr",[n("td",{attrs:{colspan:"2"}},[n("h5",[e._v(e._s(e.$t("terms")))]),e._l(e.associatedTerms,(function(t){var r=t.term,a=t.user;return n("b-tag",{key:r.id,attrs:{title:e.$t("associated-by",{username:a.fullName})}},[n("cytomine-term",{attrs:{term:r}}),e.canEditTerms?n("button",{staticClass:"delete is-small",attrs:{title:e.$t("button-delete")},on:{click:function(t){return e.removeTerm(r.id,a.id)}}}):e._e()],1)})),e.canEditTerms?n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.showTermSelector=!1},expression:"() => showTermSelector = false"}],staticClass:"add-term-wrapper"},[n("b-field",[n("b-input",{attrs:{size:"is-small",expanded:"",placeholder:e.$t("add-term")},on:{focus:function(t){e.showTermSelector=!0}},model:{value:e.addTermString,callback:function(t){e.addTermString=t},expression:"addTermString"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showTermSelector,expression:"showTermSelector"}],staticClass:"ontology-tree-container"},[n("ontology-tree",{staticClass:"ontology-tree",attrs:{ontology:e.ontology,searchString:e.addTermString,selectedNodes:e.associatedTermsIds,allowNew:!0},on:{newTerm:e.newTerm,select:e.addTerm,unselect:e.removeTerm}})],1)],1):e.associatedTerms.length?e._e():n("em",[e._v(e._s(e.$t("no-term")))])],2)]):e._e(),e.isPropDisplayed("tags")?n("tr",[n("td",{attrs:{colspan:"2"}},[n("h5",[e._v(e._s(e.$t("tags")))]),n("cytomine-tags",{attrs:{object:e.annotation,canEdit:e.canEdit}})],1)]):e._e(),e.isPropDisplayed("properties")?n("tr",[n("td",{attrs:{colspan:"2"}},[n("h5",[e._v(e._s(e.$t("properties")))]),n("cytomine-properties",{attrs:{object:e.annotation,canEdit:e.canEdit},on:{update:function(t){return e.$emit("updateProperties")}}})],1)]):e._e(),e.isPropDisplayed("attached-files")?n("tr",[n("td",{attrs:{colspan:"2"}},[n("h5",[e._v(e._s(e.$t("attached-files")))]),n("attached-files",{attrs:{object:e.annotation,canEdit:e.canEdit}})],1)]):e._e(),e.isPropDisplayed("creation-info")?[n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("created-by")))])]),n("td",[e._v(" "+e._s(e.creator.fullName)+" ")])]),e.isReview?[n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("reviewed-by")))])]),n("td",[e._v(" "+e._s(e.reviewer.fullName)+" ")])]),n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("reviewed-on")))])]),n("td",[e._v(" "+e._s(e._f("moment")(Number(e.annotation.created),"ll"))+" ")])])]:n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("created-on")))])]),n("td",[e._v(" "+e._s(e._f("moment")(Number(e.annotation.created),"ll"))+" ")])])]:e._e()],2)]),n("div",{staticClass:"actions"},[e.showImageInfo?n("router-link",{staticClass:"button is-link is-small is-fullwidth",attrs:{to:e.annotationURL}},[e._v(" "+e._s(e.$t("button-view-in-image"))+" ")]):n("a",{staticClass:"button is-link is-small is-fullwidth",on:{click:function(t){return e.$emit("centerView")}}},[e._v(" "+e._s(e.$t("button-center-view-on-annot"))+" ")]),n("div",{staticClass:"level"},[n("a",{staticClass:"level-item button is-small",attrs:{href:e.annotation.url+"?draw=true&complete=true&increaseArea=1.25",target:"_blank"}},[e._v(" "+e._s(e.$t("button-view-crop"))+" ")]),n("button",{staticClass:"level-item button is-small",on:{click:function(t){return e.copyURL()}}},[e._v(" "+e._s(e.$t("button-copy-url"))+" ")]),e.isPropDisplayed("comments")&&e.comments?n("button",{staticClass:"level-item button is-small",on:{click:function(t){return e.openCommentsModal()}}},[e._v(" "+e._s(e.$t("button-comments"))+" ("+e._s(e.comments.length)+") ")]):e._e(),e.canEdit?n("button",{staticClass:"level-item button is-small is-danger",on:{click:function(t){return e.confirmDeletion()}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")]):e._e()])],1)])},es=[],ts=n("f904"),ns=n.n(ts),rs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("cytomine-modal-card",{attrs:{title:e.$t("annotation-comments")},on:{close:function(t){return e.$parent.close()}}},[e.comments&&e.comments.length?[n("div",{staticClass:"comments-wrapper"},e._l(e.comments,(function(t){return n("div",{key:t.id},[n("p",{staticClass:"comment-sender is-size-7"},[n("strong",[e._v(e._s(t.senderName))]),n("span",{staticClass:"has-text-grey"},[e._v(e._s(e._f("moment")(Number(t.created),"ll LT")))])]),n("p",{staticClass:"comment-content"},[e._v(e._s(t.comment))]),n("hr")])})),0)]:n("div",[n("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("no-annotation-comments"))+" ")]),n("hr")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.addingComment,expression:"!addingComment"}],staticClass:"has-text-centered"},[n("button",{staticClass:"button is-link",on:{click:function(t){e.addingComment=!0}}},[e._v(e._s(e.$t("button-add-comment")))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.addingComment,expression:"addingComment"}]},[n("h2",[e._v(e._s(e.$t("add-new-comment")))]),n("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("comment-will-be-sent-by-email"))+" ")]),n("b-field",[n("b-radio",{attrs:{"native-value":!0,disabled:0==e.members.length},model:{value:e.sendToAllMembers,callback:function(t){e.sendToAllMembers=t},expression:"sendToAllMembers"}},[e._v(" "+e._s(e.$t("send-to-all-project-members"))+" ")])],1),n("b-field",[n("b-radio",{attrs:{"native-value":!1},model:{value:e.sendToAllMembers,callback:function(t){e.sendToAllMembers=t},expression:"sendToAllMembers"}},[e._v(" "+e._s(e.$t("send-to-some-members"))+" ")])],1),e.sendToAllMembers?e._e():n("b-field",{attrs:{type:{"is-danger":e.errors.has("members")},message:e.errors.first("members")}},[n("domain-tag-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{domains:e.members,placeholder:"search-user",name:"members",searchedProperty:"fullName",displayedProperty:"fullName"},model:{value:e.selectedMembers,callback:function(t){e.selectedMembers=t},expression:"selectedMembers"}})],1),n("b-field",{attrs:{type:{"is-danger":e.errors.has("comment")},message:e.errors.first("comment")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"textarea",placeholder:e.$t("enter-comment"),rows:"2",name:"comment"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),n("p",{staticClass:"buttons is-right are-small"},[n("button",{staticClass:"button",attrs:{disabled:e.loading},on:{click:function(t){e.addingComment=!1}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",class:{"is-loading":e.loading},attrs:{disabled:e.loading||0==e.members.length||e.errors.any()},on:{click:function(t){return e.share()}}},[e._v(" "+e._s(e.$t("button-share"))+" ")])])],1)],2)},as=[],is={name:"annotation-comments-modal",components:{DomainTagInput:Mt,CytomineModalCard:Fe},$_veeValidate:{validator:"new"},props:{annotation:Object,comments:Array},data:function(){return{addingComment:!1,sendToAllMembers:!0,selectedMembers:[],text:"",loading:!1}},computed:{currentUser:m("currentUser/user"),allMembers:m("currentProject/members"),members:function(){var e=this;return this.allMembers.filter((function(t){return t.id!==e.currentUser.id}))},annotationURL:function(){var e="project/".concat(this.annotation.project,"/image/").concat(this.annotation.image,"/annotation/").concat(this.annotation.id);return"".concat(window.location.origin,"/#/").concat(e)}},watch:{addingComment:function(){var e=this;this.text="",this.selectedMembers=[],this.$nextTick((function(){e.sendToAllMembers=!0,e.$validator.reset()}))}},methods:{share:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return this.loading=!0,e.prev=6,n=_e(this.currentUser),e.next=10,new $["AnnotationComment"]({annotation:this.annotation,subject:"Cytomine: ".concat(n," commented an annotation"),from:n,receivers:(this.sendToAllMembers?this.members:this.selectedMembers).map((function(e){return e.id})),comment:this.text,annotationURL:this.annotationURL,shareAnnotationURL:this.annotationURL+"?action=comments"}).save();case 10:r=e.sent,this.$emit("addComment",r),this.$notify({type:"success",text:this.$t("notif-success-new-comment")}),this.addingComment=!1,e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](6),this.$notify({type:"error",text:this.$t("notif-error-new-comment")});case 19:this.loading=!1;case 20:case"end":return e.stop()}}),e,this,[[6,16]])})));function t(){return e.apply(this,arguments)}return t}()}},ss=is,os=(n("04b0"),Object(S["a"])(ss,rs,as,!1,null,"00a946fa",null)),cs=os.exports,ls={name:"annotations-details",components:{ImageName:Sa,CytomineDescription:bt,CytomineTerm:ur,OntologyTree:jr,CytomineTags:Bt,CytomineProperties:Ct,AttachedFiles:nn,AnnotationCommentsModal:cs},props:{annotation:{type:Object},terms:{type:Array},users:{type:Array},images:{type:Array},showImageInfo:{type:Boolean,default:!0},showComments:{type:Boolean,default:!1}},data:function(){return{addTermString:"",showTermSelector:!1,comments:null,revTerms:0}},computed:{configUI:m("currentProject/configUI"),ontology:m("currentProject/ontology"),creator:function(){var e=this;return this.users.find((function(t){return t.id===e.annotation.user}))||{}},isReview:function(){return this.annotation.type===$["AnnotationType"].REVIEWED},reviewer:function(){var e=this;if(this.isReview)return this.users.find((function(t){return t.id===e.annotation.reviewUser}))||{}},canEdit:function(){return this.$store.getters["currentProject/canEditAnnot"](this.annotation)},canEditTerms:function(){return this.canEdit&&this.annotation.type===$["AnnotationType"].USER},image:function(){var e=this;return this.images.find((function(t){return t.id===e.annotation.image}))||{}},annotationURL:function(){return"/project/".concat(this.annotation.project,"/image/").concat(this.annotation.image,"/annotation/").concat(this.annotation.id)},associatedTerms:function(){var e=this;return this.annotation.userByTerm?this.annotation.userByTerm.map((function(t){var n=e.terms.find((function(e){return t.term===e.id})),r=e.users.find((function(e){return e.id===t.user[0]}))||{};return{term:n,user:r}})):[]},associatedTermsIds:function(){return this.revTerms,this.associatedTerms.map((function(e){var t=e.term;return t.id}))}},methods:{isPropDisplayed:function(e){return this.configUI["project-explore-annotation-".concat(e)]},copyURL:function(){ns()(window.location.origin+"/#"+this.annotationURL),this.$notify({type:"success",text:this.$t("notif-success-annot-URL-copied")})},newTerm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$emit("addTerm",t),this.$store.dispatch("currentProject/fetchOntology"),this.addTerm(t.id);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addTerm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=15;break}return e.prev=1,e.next=4,new $["AnnotationTerm"]({annotation:this.annotation.id,term:t}).save();case 4:this.$emit("updateTerms"),this.showTermSelector=!1,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),this.$notify({type:"error",text:this.$t("notif-error-add-term")}),this.revTerms++;case 12:return e.prev=12,this.addTermString="",e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[1,8,12,15]])})));function t(t){return e.apply(this,arguments)}return t}(),removeTerm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=n||this.findUserByTerm(t),n){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,$["AnnotationTerm"].delete(this.annotation.id,t,Number(n));case 6:this.$emit("updateTerms"),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](3),this.$notify({type:"error",text:this.$t("notif-error-remove-term")}),this.revTerms++;case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(t,n){return e.apply(this,arguments)}return t}(),findUserByTerm:function(e){if(this.annotation.userByTerm){var t=this.annotation.userByTerm.find((function(t){return t.term===e}));if(t)return t.user[0]}},openCommentsModal:function(){this.$buefy.modal.open({parent:this,component:cs,props:{annotation:this.annotation,comments:this.comments},hasModalCard:!0,events:{addComment:this.addComment}})},addComment:function(e){this.comments.unshift(e)},confirmDeletion:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-annotation"),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.deleteAnnot()}})},deleteAnnot:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.annotation.delete();case 3:this.$emit("deletion"),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-annotation-deletion")});case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isPropDisplayed("comments")||![$["AnnotationType"].ALGO,$["AnnotationType"].USER].includes(this.annotation.type)){e.next=11;break}return e.prev=1,e.next=4,$["AnnotationCommentCollection"].fetchAll({annotation:this.annotation});case 4:this.comments=e.sent.array,this.showComments&&this.openCommentsModal(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.$notify({type:"error",text:this.$t("notif-error-fetch-annotation-comments")});case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}()},us=ls,ds=(n("f6c7"),Object(S["a"])(us,Qi,es,!1,null,"04a98d69",null)),ps=ds.exports,ms={name:"annotation-preview",props:{annot:Object,size:Number,color:String,terms:Array,users:Array,images:Array},components:{AnnotationDetails:ps},data:function(){return{opened:!1}},computed:{styleAnnotDetails:function(){var e=this.color?"&draw=true&color=0x"+this.color:"",t="".concat(this.annot.url,"?maxSize=").concat(this.size,"&square=true&complete=false&thickness=2&increaseArea=1.25").concat(e);return{backgroundImage:"url(".concat(t,")"),backgroundRepeat:"no-repeat",width:this.size+"px",height:this.size+"px"}}},methods:{viewAnnot:function(){this.$router.push("/project/".concat(this.annot.project,"/image/").concat(this.annot.image,"/annotation/").concat(this.annot.id))},close:function(e){if(this.opened){var t=e.target;while(t){if(t.classList.contains("modal")||t.classList.contains("notifications")||t.isSameNode(this.$refs.previewButton))return;t=t.parentElement}this.opened=!1}},handleDeletion:function(){this.$eventBus.$emit("deleteAnnotation",this.annot),this.$emit("update")}}},fs=ms,hs=(n("e795"),Object(S["a"])(fs,Zi,Xi,!1,null,"52f8df75",null)),vs=hs.exports,gs={name:"list-annotations-by-term",props:{nbPerPage:Number,size:Number,color:String,term:Object,multipleTerms:Boolean,noTerm:Boolean,imagesIds:Array,usersIds:Array,tagsIds:Array,noTag:Boolean,reviewed:Boolean,reviewUsersIds:Array,afterThan:Number,beforeThan:Number,allTerms:Array,allUsers:Array,allImages:Array,revision:Number},components:{AnnotationPreview:vs},data:function(){return{loading:!1,error:!1,annotations:[],nbAnnotations:0,openedAnnot:0}},computed:{collection:function(){return this.revision,new $["AnnotationCollection"]({images:this.imagesIds,term:this.multipleTerms||this.noTerm?null:this.term.id,noTerm:this.noTerm,users:this.usersIds,reviewed:this.reviewed,reviewUsers:this.reviewUsersIds,tags:this.tagsIds,noTag:this.noTag,multipleTerm:this.multipleTerms,showTerm:!0,showGIS:!0,afterThan:this.afterThan,beforeThan:this.beforeThan,max:this.nbPerPage})},title:function(){return this.multipleTerms?this.$t("multiple-terms"):this.noTerm?this.$t("no-term"):this.term.name},currentProject:m("currentProject/project"),projectModule:function(){return this.$store.getters["currentProject/currentProjectModule"]},currentPage:{get:function(){return this.$store.state.projects[this.currentProject.id].listAnnotations.currentPages[this.term.id]||1},set:function(e){this.$store.commit(this.projectModule+"listAnnotations/setCurrentPage",{term:this.term.id,page:e})}}},watch:{currentPage:function(){this.fetchPage()},collection:function(){this.fetchPage()}},methods:{fetchPage:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.imagesIds.length&&(this.reviewed||this.usersIds.length)&&(!this.reviewed||this.reviewUsersIds.length)){e.next=4;break}return this.annotations=[],this.nbAnnotations=0,e.abrupt("return");case 4:return this.loading=!0,e.prev=5,e.next=8,this.collection.fetchPage(this.currentPage-1);case 8:t=e.sent,this.annotations=t.array,this.nbAnnotations=t.totalNbItems,this.annotations.map((function(e){return e.id})).includes(this.openedAnnot)||(this.openedAnnot=0),e.next=21;break;case 14:if(e.prev=14,e.t0=e["catch"](5),!(this.currentPage>1)){e.next=19;break}return this.currentPage=1,e.abrupt("return");case 19:this.nbAnnotations=0,this.error=!0;case 21:this.loading=!1;case 22:case"end":return e.stop()}}),e,this,[[5,14]])})));function t(){return e.apply(this,arguments)}return t}(),viewAnnot:function(e){this.$router.push("/project/".concat(e.project,"/image/").concat(e.image,"/annotation/").concat(e.id))}},created:function(){this.fetchPage()}},bs=gs,ys=(n("d867"),Object(S["a"])(bs,Ki,Yi,!1,null,"141d7138",null)),ws=ys.exports,_s=(n("0d6d"),n("8682")),xs=n("83a6"),js=n("ce2c"),Cs=n("6c77"),$s=n("8295"),ks=n("9a44"),Ps=n("5c38");function Os(e){var t=e.get("annot");if(t)return null!=t.count}function Rs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return new _s["a"]({color:[0,0,0,e],width:2})}function Ss(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=Object(Ps["a"])(e),r=n.slice();r[3]=t;var a=new xs["a"]({color:r}),i=new js["a"]({radius:5,fill:new xs["a"]({color:n}),stroke:Rs(1)});return i.setOpacity(t),new Cs["c"]({fill:a,stroke:Rs(t),image:i})}function Ts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=Object(Ps["a"])(e),r=n.slice();return r[3]=t,new Cs["c"]({stroke:new _s["a"]({color:r,width:3})})}var As=new xs["a"]({color:"#fff"}),Ds=new _s["a"]({color:"#000",width:3});function Ms(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"22px",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:As,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ds;return new Cs["c"]({text:new $s["a"]({text:e,font:"".concat(t," Arial, sans-serif"),overflow:!0,fill:n,stroke:r})})}var Es=2,Is=[0,153,255,1],Ns=[51,160,79,1],Us=[17,214,76,1],Fs=[200,40,40,1],Ls=[255,56,56,1],qs=[255,255,255,1],zs=new _s["a"]({color:Is,width:Es}),Vs=new _s["a"]({color:Ns,width:Es+1}),Bs=new _s["a"]({color:Us,width:Es}),Ws=new _s["a"]({color:Fs,width:Es+1}),Js=new _s["a"]({color:Ls,width:Es}),Hs=new _s["a"]({color:qs,width:Es+2}),Gs=[new Cs["c"]({stroke:Hs}),new Cs["c"]({stroke:zs}),new Cs["c"]({image:new js["a"]({radius:6,stroke:zs})})],Ks=new Cs["c"]({image:new js["a"]({radius:Es+1,fill:new xs["a"]({color:Is})}),geometry:function(e){var t=e.getGeometry().getCoordinates()[0];return new ks["a"](t)}}),Ys=[new Cs["c"]({stroke:Vs}),new Cs["c"]({image:new js["a"]({radius:6,stroke:Vs})})],Zs=[new Cs["c"]({stroke:Hs}),new Cs["c"]({stroke:Bs}),new Cs["c"]({image:new js["a"]({radius:6,stroke:Bs})})],Xs=[new Cs["c"]({stroke:Ws}),new Cs["c"]({image:new js["a"]({radius:6,stroke:Ws})})],Qs=[new Cs["c"]({stroke:Hs}),new Cs["c"]({stroke:Js}),new Cs["c"]({image:new js["a"]({radius:6,stroke:Js})})];function eo(e,t){var n=e.getStroke();n&&(n.getColor()[3]=t);var r=e.getFill();r&&(r.getColor()[3]=t);var a=e.getImage();a&&a.setOpacity(t)}function to(e,t){return{name:e,fill:new xs["a"]({color:"#"+t}),hexaCode:t}}var no=Object.freeze([to("black","000000"),to("white","ffffff"),to("red","ff0000"),to("orange","ff6600"),to("yellow","ffff00"),to("green","008000"),to("blue","0000ff"),to("purple","800080")]);function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var io={rootModuleProp:"storeModule"},so=function(e,t){return g(null,e,t,io)},oo={name:"list-annotations",components:{CytomineMultiselect:ae,CytomineDatepicker:Li,OntologyTreeMultiselect:Gi,ListAnnotationsByTerm:ws},data:function(){return{loading:!0,error:!1,revision:0,projectUsers:[],userJobs:[],allowedSizes:[{label:this.$t("small"),size:85},{label:this.$t("medium"),size:125},{label:this.$t("large"),size:200},{label:this.$t("huge"),size:400}],userAnnotationOption:this.$t("user-annotations"),jobAnnotationOption:this.$t("analysis-annotations"),reviewedAnnotationOption:this.$t("reviewed-annotations"),annotationTypes:[],images:[],availableTags:[],noTermOption:{id:0,name:this.$t("no-term")},multipleTermsOption:{id:-1,name:this.$t("multiple-terms")}}},computed:{currentUser:m("currentUser/user"),project:m("currentProject/project"),blindMode:function(){return this.project.blindMode},canManageProject:function(){return this.$store.getters["currentProject/canManageProject"]},ontology:m("currentProject/ontology"),configUI:m("currentProject/configUI"),storeModule:function(){return this.$store.getters["currentProject/currentProjectModule"]+"listAnnotations"},colors:function(){var e=this,t=no.map((function(t){return ao({label:e.$t(t.name)},t)}));return t.push({label:this.$t("no-outline")}),t},selectedSize:f("previewSize",io),nbPerPage:f("perPage",io),selectedColor:f("outlineColor",io),targetAnnotationType:function(){switch(this.$route.query.type){case"user":return this.userAnnotationOption;case"algo":return this.jobAnnotationOption;case"reviewed":return this.reviewedAnnotationOption}},allUsers:function(){return this.projectUsers.concat(this.userJobs)},members:m("currentProject/members"),managers:m("currentProject/managers"),filteredMembers:function(){var e=this;if(this.canManageProject||!this.project.hideUsersLayers&&!this.project.hideAdminsLayers)return this.members;var t=this.managers.map((function(e){return e.id}));return this.members.filter((function(n){if(e.currentUser.id===n.id)return!0;var r=t.includes(n.id);return r?!e.project.hideAdminsLayers:!e.project.hideUsersLayers}))},terms:function(){return this.$store.getters["currentProject/terms"]||[]},additionalNodes:function(){var e=[this.noTermOption];return this.terms.length>1&&e.push(this.multipleTermsOption),e},termsOptions:function(){return this.terms.concat(this.additionalNodes)},termOptionsIds:function(){return this.termsOptions.map((function(e){return e.id}))},selectedAnnotationType:f("annotationType",io),selectedMembers:so("members","filteredMembers"),selectedReviewers:so("reviewers","members"),selectedUserJobs:so("userJobs","userJobs"),selectedImages:so("images","images"),selectedTags:so("tags","availableTags"),selectedTermsIds:so("termsIds","termOptionsIds"),fromDate:f("fromDate",io),toDate:f("toDate",io),afterThan:function(){return this.fromDate?this.fromDate.getTime():null},beforeThan:function(){return this.toDate?this.toDate.setHours(23,59,59,999):null},reviewed:function(){return this.selectedAnnotationType===this.reviewedAnnotationOption},selectedUsersIds:function(){if(this.reviewed)return null;var e=this.selectedAnnotationType===this.jobAnnotationOption?this.selectedUserJobs:this.selectedMembers;return e.map((function(e){return e.id}))},reviewUsersIds:function(){return this.reviewed?this.selectedReviewers.map((function(e){return e.id})):null},querySearchImage:function(){return this.$route.query.image},querySearchTags:function(){return this.$route.query.tags},selectedImagesIds:function(){return this.selectedImages.map((function(e){return e.id}))},selectedTagsIds:function(){return this.selectedTags.map((function(e){return e.id}))},tagsIdsNotNull:function(){if(this.selectedTagsIds.indexOf("null")>=0){var e=this.selectedTagsIds.slice();return e.splice(e.indexOf("null"),1),e}return this.selectedTagsIds},noTag:function(){return this.selectedTagsIds.indexOf("null")>=0},collection:function(){var e=new $["AnnotationCollection"]({project:this.project.id,terms:this.selectedTermsIds,images:this.selectedImagesIds,users:this.selectedUsersIds,reviewed:this.reviewed,reviewUsers:this.reviewUsersIds,noTerm:this.selectedTermsIds.includes(this.noTermOption.id),multipleTerms:this.selectedTermsIds.includes(this.multipleTermsOption.id),afterThan:this.afterThan,beforeThan:this.beforeThan});return this.selectedTagsIds.length>0&&this.selectedTagsIds.length<this.availableTags.length&&(e["tags"]=this.selectedTagsIds,e["noTag"]=this.noTag),e}},methods:{fetchImages:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ImageInstanceCollection"].fetchAll({filterKey:"project",filterValue:this.project.id,light:!0});case 2:this.images=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchUsers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new $["UserCollection"]({filterKey:"project",filterValue:this.project.id}),e.next=3,t.fetchAll();case 3:this.projectUsers=e.sent.array,this.projectUsers.forEach((function(e){e.fullName=_e(e)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchUserJobs:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["UserJobCollection"].fetchAll({filterKey:"project",filterValue:this.project.id});case 2:this.userJobs=e.sent.array,this.userJobs.forEach((function(e){e.fullName=_e(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchTags:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=[{id:"null",name:this.$t("no-tag")}],e.t1=B["a"],e.next=4,$["TagCollection"].fetchAll();case 4:e.t2=e.sent.array,e.t3=(0,e.t1)(e.t2),this.availableTags=e.t0.concat.call(e.t0,e.t3);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),downloadURL:function(e){return this.collection.getDownloadURL(e)},addTerm:function(e){this.terms.push(e),this.selectedTermsIds.push(e.id)},resetPagesAndFilters:function(){this.$store.commit(this.storeModule+"/resetPagesAndFilters")}},watch:{querySearchTags:function(e){if(e){this.selectedTags=[];var t=this.availableTags.filter((function(t){return e.split(",").includes(t.name)}));t&&(this.resetPagesAndFilters(),this.selectedTags=t)}},querySearchImage:function(e){if(e){this.selectedImages=[];var t=this.images.find((function(t){return t.id===Number(e)}));t&&(this.resetPagesAndFilters(),this.selectedImages=[t])}}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.annotationTypes=[this.userAnnotationOption,this.jobAnnotationOption,this.reviewedAnnotationOption],this.selectedSize||(this.selectedSize=this.allowedSizes[0]),this.selectedColor||(this.selectedColor=this.colors[0]),this.selectedAnnotationType||(this.selectedAnnotationType=this.userAnnotationOption),e.prev=4,e.next=7,Promise.all([this.fetchImages(),this.fetchUsers(),this.fetchUserJobs(),this.fetchTags()]);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e["catch"](4),this.error=!0,e.abrupt("return");case 13:this.targetAnnotationType&&(this.resetPagesAndFilters(),this.selectedAnnotationType=this.targetAnnotationType),this.$route.query.image&&(t=this.images.find((function(e){return e.id===Number(a.$route.query.image)})),t&&(this.resetPagesAndFilters(),this.selectedImages=[t])),this.$route.query.userJob&&(n=this.userJobs.find((function(e){return e.id===Number(a.$route.query.userJob)})),n&&(this.resetPagesAndFilters(),this.selectedAnnotationType=this.jobAnnotationOption,this.selectedUserJobs=[n])),this.$route.query.tags&&(r=this.availableTags.filter((function(e){return a.$route.query.tags.split(",").includes(e.name)})),r&&(this.resetPagesAndFilters(),this.selectedTags=r)),this.loading=!1;case 18:case"end":return e.stop()}}),e,this,[[4,9]])})));function t(){return e.apply(this,arguments)}return t}()},co=oo,lo=(n("f020"),Object(S["a"])(co,Di,Mi,!1,null,"0eff98a6",null)),uo=lo.exports,po=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.configUI["project-activities-tab"]?n("div",{staticClass:"project-activity-wrapper content-wrapper"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[e.canManageProject?n("b-field",{staticClass:"radio-buttons-fullwidth is-hovered"},[n("b-radio-button",{attrs:{"native-value":"charts",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("activity-charts"))+" ")]),n("b-radio-button",{attrs:{"native-value":"members",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("members-activity"))+" ")]),n("b-radio-button",{attrs:{"native-value":"logs",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("activity-logs"))+" ")])],1):e._e()],1),n("div",{staticClass:"column is-narrow"},[n("b-dropdown",{staticClass:"date-picker-dropdown",attrs:{position:"is-bottom-left",disabled:"members"===e.activeTab},scopedSlots:e._u([{key:"trigger",fn:function(){return[n("button",{staticClass:"button is-hovered"},[n("i",{staticClass:"far fa-calendar"})])]},proxy:!0}])},[n("b-dropdown-item",{attrs:{custom:""}},[n("b-field",{attrs:{label:e.$t("from"),horizontal:""}},[n("cytomine-datepicker",{attrs:{maxDate:e.endDate||new Date},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),n("b-field",{attrs:{label:e.$t("to"),horizontal:""}},[n("cytomine-datepicker",{attrs:{minDate:e.startDate,maxDate:new Date},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)],1)],1)],1)]),n("div",{staticClass:"component-wrapper"},[n("keep-alive",[n(e.activeComponent,{tag:"component",attrs:{startDate:e.startDate?e.startDate.getTime():null,endDate:e.endDate?e.endDate.setHours(23,59,59,999):null}})],1)],1)]):n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),n("p",[e._v(e._s(e.$t("insufficient-permission")))])])},mo=[],fo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tile is-ancestor is-vertical project-activity-charts-wrapper"},[n("div",{staticClass:"tile"},[n("div",{staticClass:"tile is-parent"},[n("div",{staticClass:"tile is-child box chart-box"},[n("div",{staticClass:"columns"},[n("h2",{staticClass:"column"},[e._v(e._s(e.$t("activity")))]),n("div",{staticClass:"column is-narrow is-info-circle"},[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("activity-chart-info-message")))]),n("p",[e._v(e._s(e.$t("barchart-hover-mouse-for-details")))]),n("p",[e._v(e._s(e.$t("barchart-click-label-to-toggle-visibility")))])]},proxy:!0}])},[n("i",{staticClass:"fas fa-info-circle"})])],1)]),n("div",{staticClass:"chart-container big"},[n("activity-overview-chart",{attrs:{"css-classes":"chart",project:e.project,startDate:e.startDate,endDate:e.endDate,daysRange:e.daysRange}})],1)])]),n("div",{staticClass:"tile is-vertical single-metrics"},[n("div",{staticClass:"tile is-parent"},[n("div",{staticClass:"tile is-child box single-metric"},[n("div",{staticClass:"absolute-info-circle"},[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("project-connections-info-message")))])]},proxy:!0}])},[n("i",{staticClass:"fas fa-info-circle"})])],1),n("strong",{staticClass:"metric"},[e._v(e._s(null!=e.nbProjectVisits?e.nbProjectVisits:"?"))]),n("strong",[e._v(e._s(e.$t("project-connections")))])])]),n("div",{staticClass:"tile is-parent"},[n("div",{staticClass:"tile is-child box single-metric"},[n("div",{staticClass:"absolute-info-circle"},[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("image-consultations-info-message")))])]},proxy:!0}])},[n("i",{staticClass:"fas fa-info-circle"})])],1),n("strong",{staticClass:"metric"},[e._v(e._s(null!=e.nbImageConsultations?e.nbImageConsultations:"?"))]),n("strong",[e._v(e._s(e.$t("image-consultations")))])])]),n("div",{staticClass:"tile is-parent"},[n("div",{staticClass:"tile is-child box single-metric"},[n("div",{staticClass:"absolute-info-circle"},[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("annotation-selections-info-message")))])]},proxy:!0}])},[n("i",{staticClass:"fas fa-info-circle"})])],1),n("strong",{staticClass:"metric"},[e._v(e._s(null!=e.nbAnnotationSelections?e.nbAnnotationSelections:"?"))]),n("strong",[e._v(e._s(e.$t("annotation-selections")))])])])])]),n("div",{staticClass:"tile"},[n("div",{staticClass:"tile is-vertical single-metrics"},[n("div",{staticClass:"tile is-parent"},[n("div",{staticClass:"tile is-child box single-metric"},[n("div",{staticClass:"absolute-info-circle"},[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("manual-annotations-info-message")))])]},proxy:!0}])},[n("i",{staticClass:"fas fa-info-circle"})])],1),n("strong",{staticClass:"metric"},[e._v(" "+e._s(null!=e.nbAnnotations[e.annotationTypes.USER]?e.nbAnnotations[e.annotationTypes.USER]:"?")+" ")]),n("strong",[e._v(e._s(e.$t("user-annotations")))])])]),n("div",{staticClass:"tile is-parent"},[n("div",{staticClass:"tile is-child box single-metric"},[n("div",{staticClass:"absolute-info-circle"},[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("analysis-annotations-info-message")))])]},proxy:!0}])},[n("i",{staticClass:"fas fa-info-circle"})])],1),n("strong",{staticClass:"metric"},[e._v(" "+e._s(null!=e.nbAnnotations[e.annotationTypes.ALGO]?e.nbAnnotations[e.annotationTypes.ALGO]:"?")+" ")]),n("strong",[e._v(e._s(e.$t("analysis-annotations")))])])]),n("div",{staticClass:"tile is-parent"},[n("div",{staticClass:"tile is-child box single-metric"},[n("div",{staticClass:"absolute-info-circle"},[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("reviewed-annotations-info-message")))])]},proxy:!0}])},[n("i",{staticClass:"fas fa-info-circle"})])],1),n("strong",{staticClass:"metric"},[e._v(" "+e._s(null!=e.nbAnnotations[e.annotationTypes.REVIEWED]?e.nbAnnotations[e.annotationTypes.REVIEWED]:"?")+" ")]),n("strong",[e._v(e._s(e.$t("reviewed-annotations")))])])])]),n("div",{staticClass:"tile is-parent"},[n("div",{staticClass:"tile is-child box chart-box"},[n("div",{staticClass:"columns"},[n("h2",{staticClass:"column"},[e._v(e._s(e.$t("number-annotations")))]),e.ontology?[n("div",{staticClass:"column is-narrow has-text-right"},[n("div",{staticClass:"filter-label"},[e._v(e._s(e.$t("term")))])]),n("div",{staticClass:"column is-one-third"},[n("ontology-tree-multiselect",{attrs:{ontology:e.ontology,additionalNodes:[{id:0,name:this.$t("all")}],startWithAdditionalNodes:!0,multiple:!1},model:{value:e.selectedTerms,callback:function(t){e.selectedTerms=t},expression:"selectedTerms"}})],1)]:e._e(),n("div",{staticClass:"column is-narrow is-info-circle"},[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("number-annotations-chart-info-message")))]),n("p",[e._v(e._s(e.$t("barchart-hover-mouse-for-details")))]),n("p",[e._v(e._s(e.$t("barchart-click-label-to-toggle-visibility")))])]},proxy:!0}])},[n("i",{staticClass:"fas fa-info-circle"})])],1)],2),n("div",{staticClass:"chart-container big"},[n("number-annotations-chart",{attrs:{"css-classes":"chart",project:e.project,startDate:e.startDate,endDate:e.endDate,daysRange:e.daysRange,term:e.selectedTerms[0]||null}})],1)])])]),e.ontology?n("div",{staticClass:"tile"},[n("div",{staticClass:"tile is-6 is-parent is-vertical"},[n("div",{staticClass:"tile is-child box chart-box no-grow"},[n("div",{staticClass:"columns"},[n("h2",{staticClass:"column"},[e._v(e._s(e.$t("manual-annotations-vs-term")))]),n("div",{staticClass:"column is-narrow is-info-circle"},[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("annotations-vs-terms-chart-info-message")))])]},proxy:!0}],null,!1,1450839247)},[n("i",{staticClass:"fas fa-info-circle"})])],1)]),n("div",{staticClass:"chart-container",style:e.styleAnnotationTermChart},[n("annotation-term-chart",{attrs:{"css-classes":"chart",project:e.project,startDate:e.startDate,endDate:e.endDate},on:{nbElems:function(t){return e.nbElemsAnnotationTermChart=t}}})],1)])]),n("div",{staticClass:"tile is-6 is-parent is-vertical"},[n("div",{staticClass:"tile is-child box chart-box no-grow"},[n("div",{staticClass:"columns"},[n("h2",{staticClass:"column"},[e._v(e._s(e.$t("annotated-images-vs-term")))]),n("div",{staticClass:"column is-narrow is-info-circle"},[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("annotated-images-vs-terms-chart-info-message")))])]},proxy:!0}],null,!1,1273985580)},[n("i",{staticClass:"fas fa-info-circle"})])],1)]),n("div",{staticClass:"chart-container",style:e.styleAnnotationTermChart},[n("annotated-images-by-term-chart",{attrs:{"css-classes":"chart",project:e.project,startDate:e.startDate,endDate:e.endDate}})],1)])])]):e._e(),n("div",{staticClass:"tile"},[n("div",{staticClass:"tile is-6 is-parent is-vertical"},[n("div",{staticClass:"tile is-child box chart-box no-grow"},[n("div",{staticClass:"columns"},[n("h2",{staticClass:"column"},[e._v(e._s(e.$t("manual-annotations-vs-contributor")))]),n("div",{staticClass:"column is-narrow is-info-circle"},[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("annotations-vs-contributors-chart-info-message")))])]},proxy:!0}])},[n("i",{staticClass:"fas fa-info-circle"})])],1)]),n("div",{staticClass:"chart-container",style:e.styleAnnotationContributorChart},[n("annotation-contributor-chart",{attrs:{"css-classes":"chart",project:e.project,startDate:e.startDate,endDate:e.endDate},on:{nbElems:function(t){return e.nbElemsAnnotationContributorChart=t}}})],1)])]),n("div",{staticClass:"tile is-6 is-parent is-vertical"},[n("div",{staticClass:"tile is-child box chart-box no-grow"},[n("div",{staticClass:"columns"},[n("h2",{staticClass:"column"},[e._v(e._s(e.$t("annotated-images-vs-contributor")))]),n("div",{staticClass:"column is-narrow is-info-circle"},[n("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",[e._v(e._s(e.$t("annotated-images-vs-contributors-chart-info-message")))])]},proxy:!0}])},[n("i",{staticClass:"fas fa-info-circle"})])],1)]),n("div",{staticClass:"chart-container",style:e.styleAnnotationContributorChart},[n("annotated-images-by-contributor-chart",{attrs:{"css-classes":"chart",project:e.project,startDate:e.startDate,endDate:e.endDate}})],1)])])])])},ho=[],vo=n("1fca");function go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?go(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yo={name:"number-annotations-chart",extends:vo["a"],props:{project:Object,term:Number,startDate:Number,endDate:Number,daysRange:Number},data:function(){var e;return{annotationsEvolution:(e={},Object(c["a"])(e,$["AnnotationType"].USER,[]),Object(c["a"])(e,$["AnnotationType"].ALGO,[]),Object(c["a"])(e,$["AnnotationType"].REVIEWED,[]),e),chartData:null}},computed:{locale:function(){return this.$i18n.locale},queryParams:function(){return{daysRange:this.daysRange,startDate:this.startDate,endDate:this.endDate,accumulate:!1,reverseOrder:!1,term:this.term}}},watch:{queryParams:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:this.updateChart();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),locale:function(){this.updateLabels(),this.updateChart()}},methods:{fetchAnnotationsEvolution:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchAnnotationsEvolution(bo({annotationType:t},this.queryParams));case 2:this.annotationsEvolution[t]=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),fetchData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.fetchAnnotationsEvolution($["AnnotationType"].USER),this.fetchAnnotationsEvolution($["AnnotationType"].ALGO),this.fetchAnnotationsEvolution($["AnnotationType"].REVIEWED)]);case 2:this.chartData.datasets[0].data=this.annotationsEvolution[$["AnnotationType"].USER].map((function(e){return e.size})),this.chartData.datasets[1].data=this.annotationsEvolution[$["AnnotationType"].ALGO].map((function(e){return e.size})),this.chartData.datasets[2].data=this.annotationsEvolution[$["AnnotationType"].REVIEWED].map((function(e){return e.size})),this.updateLabels();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateLabels:function(){var e=this;this.chartData.labels=this.annotationsEvolution[$["AnnotationType"].USER].map((function(t){var n=e.$options.filters.moment;return 1===e.daysRange?n(Number(t.date),"ll"):[n(Number(t.date),"ll")+" - ",n(Number(t.endDate),"ll")]}))},updateChart:function(){this.$data._chart.update()}},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.chartData={labels:[],datasets:[{label:this.$t("user-annotations"),data:[],backgroundColor:"#4480c4",borderWidth:0},{label:this.$t("analysis-annotations"),data:[],backgroundColor:"#aaa",borderWidth:0},{label:this.$t("reviewed-annotations"),data:[],backgroundColor:"#42ce77",borderWidth:0}]},e.next=3,this.fetchData();case 3:this.renderChart(this.chartData,{maintainAspectRatio:!1,scales:{yAxes:[{ticks:{min:0}}],xAxes:[{categoryPercentage:.6,gridLines:{display:!1}}]}});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},wo=n("a9be"),_o=n.n(wo),xo="#eee",jo={name:"annotation-term-chart",extends:vo["b"],props:{project:Object,startDate:Number,endDate:Number},data:function(){return{chartData:null}},computed:{queryParams:function(){return{startDate:this.startDate,endDate:this.endDate,leafsOnly:!1}}},watch:{queryParams:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.doRenderChart();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},methods:{doRenderChart:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchStatsTerms(this.queryParams);case 2:t=e.sent,n=t.map((function(e){return e.value})),r=t.map((function(e){var t=Object(Ps["a"])(e.color||xo),n=Object(Pt["a"])(t,3),r=n[0],a=n[1],i=n[2],s=.8;return"rgba(".concat(r*s,", ").concat(a*s,", ").concat(i*s,", 1)")})),this.$emit("nbElems",n.length),this.renderChart({labels:t.map((function(e){return e.key||a.$t("no-term")})),datasets:[{data:n,backgroundColor:t.map((function(e){return e.color||xo})),borderColor:r,borderWidth:1,hoverBorderColor:r}]},{maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{ticks:{min:0,suggestedMax:Math.round(1.2*Math.max.apply(Math,Object(B["a"])(n)))+1}}],yAxes:[{gridLines:{display:!1},categoryPercentage:.6}]}});case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.addPlugin(_o.a),this.doRenderChart();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Co="#eee",$o={name:"annotated-images-by-term-chart",extends:vo["b"],props:{project:Object,startDate:Number,endDate:Number},data:function(){return{chartData:null}},computed:{queryParams:function(){return{startDate:this.startDate,endDate:this.endDate}}},watch:{queryParams:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.doRenderChart();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},methods:{doRenderChart:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchStatsAnnotatedImagesByTerm(this.queryParams);case 2:t=e.sent,n=t.map((function(e){return e.value})),r=t.map((function(e){var t=Object(Ps["a"])(e.color||Co),n=Object(Pt["a"])(t,3),r=n[0],a=n[1],i=n[2],s=.8;return"rgba(".concat(r*s,", ").concat(a*s,", ").concat(i*s,", 1)")})),this.$emit("nbElems",n.length),this.renderChart({labels:t.map((function(e){return e.key||a.$t("no-term")})),datasets:[{data:n,backgroundColor:t.map((function(e){return e.color||Co})),borderColor:r,borderWidth:1,hoverBorderColor:r}]},{maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{ticks:{min:0,suggestedMax:Math.round(1.2*Math.max.apply(Math,Object(B["a"])(n)))+1}}],yAxes:[{gridLines:{display:!1},categoryPercentage:.6}]}});case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.addPlugin(_o.a),this.doRenderChart();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},ko={name:"annotation-contributor-chart",extends:vo["b"],props:{project:Object,startDate:Number,endDate:Number},data:function(){return{chartData:null}},computed:{queryParams:function(){return{startDate:this.startDate,endDate:this.endDate}}},watch:{queryParams:function(){this.doRenderChart()}},methods:{doRenderChart:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchStatsAnnotationCreators(this.queryParams);case 2:t=e.sent,n=t.map((function(e){return e.value})),this.$emit("nbElems",n.length),this.renderChart({labels:t.map((function(e){return e.key})),datasets:[{data:n,backgroundColor:"#4480c4",borderWidth:0}]},{maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{ticks:{min:0,suggestedMax:Math.round(1.2*Math.max.apply(Math,Object(B["a"])(n)))+1}}],yAxes:[{gridLines:{display:!1},categoryPercentage:.6}]}});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.addPlugin(_o.a),this.doRenderChart();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Po={name:"annotated-images-by-contributor-chart",extends:vo["b"],props:{project:Object,startDate:Number,endDate:Number},data:function(){return{chartData:null}},computed:{queryParams:function(){return{startDate:this.startDate,endDate:this.endDate}}},watch:{queryParams:function(){this.doRenderChart()}},methods:{doRenderChart:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchStatsAnnotatedImagesByCreator(this.queryParams);case 2:t=e.sent,n=t.map((function(e){return e.value})),this.$emit("nbElems",n.length),this.renderChart({labels:t.map((function(e){return e.key})),datasets:[{data:n,backgroundColor:"#4480c4",borderWidth:0}]},{maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{ticks:{min:0,suggestedMax:Math.round(1.2*Math.max.apply(Math,Object(B["a"])(n)))+1}}],yAxes:[{gridLines:{display:!1},categoryPercentage:.6}]}});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.addPlugin(_o.a),this.doRenderChart();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()};function Oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oo(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var So={name:"activity-overview-chart",extends:vo["a"],props:{project:Object,startDate:Number,endDate:Number,daysRange:Number},data:function(){return{projectConnections:[],imageConsultations:[],annotationSelections:[],chartData:null}},computed:{locale:function(){return this.$i18n.locale},queryParams:function(){return{daysRange:this.daysRange,startDate:this.startDate,endDate:this.endDate,accumulate:!1}}},watch:{queryParams:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:this.updateChart();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),locale:function(){this.updateLabels(),this.updateChart()}},methods:{fetchProjectConnections:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchConnectionsEvolution(this.queryParams);case 2:this.projectConnections=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchImageConsultations:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchImageConsultationsEvolution(this.queryParams);case 2:this.imageConsultations=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchAnnotationSelections:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchAnnotationActionsEvolution(Ro({action:"select"},this.queryParams));case 2:this.annotationSelections=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.fetchProjectConnections(),this.fetchImageConsultations(),this.fetchAnnotationSelections()]);case 2:this.chartData.datasets[0].data=this.projectConnections.map((function(e){return e.size})),this.chartData.datasets[1].data=this.imageConsultations.map((function(e){return e.size})),this.chartData.datasets[2].data=this.annotationSelections.map((function(e){return e.size})),this.updateLabels();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateLabels:function(){var e=this;this.chartData.labels=this.projectConnections.map((function(t){var n=e.$options.filters.moment;return 1===e.daysRange?n(Number(t.date),"ll"):[n(Number(t.date),"ll")+" - ",n(Number(t.endDate),"ll")]}))},updateChart:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$data._chart.update();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.chartData={labels:[],datasets:[{label:this.$t("project-connections"),data:[],backgroundColor:"#4480c4",borderWidth:0},{label:this.$t("image-consultations"),data:[],backgroundColor:"#f2418e",borderWidth:0},{label:this.$t("annotation-selections"),data:[],backgroundColor:"#ffa500",borderWidth:0}]},e.next=3,this.fetchData();case 3:this.renderChart(this.chartData,{maintainAspectRatio:!1,scales:{yAxes:[{ticks:{min:0}}],xAxes:[{categoryPercentage:.6,gridLines:{display:!1}}]}});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()};function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Do={name:"project-activity-charts",props:{startDate:Number,endDate:Number},components:{NumberAnnotationsChart:yo,AnnotationTermChart:jo,AnnotatedImagesByTermChart:$o,AnnotationContributorChart:ko,AnnotatedImagesByContributorChart:Po,ActivityOverviewChart:So,OntologyTreeMultiselect:Gi},data:function(){var e;return{loading:!0,nbProjectVisits:null,nbImageConsultations:null,nbAnnotationSelections:null,nbAnnotations:(e={},Object(c["a"])(e,$["AnnotationType"].USER,null),Object(c["a"])(e,$["AnnotationType"].ALGO,null),Object(c["a"])(e,$["AnnotationType"].REVIEWED,null),e),selectedTerms:[0],nbElemsAnnotationTermChart:0,nbElemsAnnotationContributorChart:0}},computed:{project:m("currentProject/project"),ontology:m("currentProject/ontology"),queryParams:function(){return{startDate:this.startDate,endDate:this.endDate}},annotationTypes:function(){return $["AnnotationType"]},daysRange:function(){var e=864e5,t=(this.endDate||(new Date).getTime())-(this.startDate||this.project.created);return t>730*e?Math.round(t/e/30):t>365*e?28:t>186*e?14:t>31*e?7:1},styleAnnotationTermChart:function(){return{height:30+25*this.nbElemsAnnotationTermChart+"px"}},styleAnnotationContributorChart:function(){return{height:30+25*this.nbElemsAnnotationContributorChart+"px"}}},watch:{startDate:function(){this.loadData()},endDate:function(){this.loadData()}},methods:{fetchNbConnections:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.nbProjectVisits=null,e.next=3,this.project.fetchNbConnections(this.queryParams);case 3:this.nbProjectVisits=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchNbImageConsultations:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.nbImageConsultations=null,e.next=3,this.project.fetchNbImageConsultations(this.queryParams);case 3:this.nbImageConsultations=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchNbAnnotationSelections:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.nbAnnotationSelections=null,e.next=3,this.project.fetchNbAnnotationActions(Ao({type:"select"},this.queryParams));case 3:this.nbAnnotationSelections=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchNbAnnotations:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.nbAnnotations[t]=null,e.next=3,this.project.fetchNbAnnotations(Ao({annotationType:t},this.queryParams));case 3:this.nbAnnotations[t]=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.fetchNbConnections(),this.fetchNbImageConsultations(),this.fetchNbAnnotationSelections(),this.fetchNbAnnotations($["AnnotationType"].USER),this.fetchNbAnnotations($["AnnotationType"].ALGO),this.fetchNbAnnotations($["AnnotationType"].REVIEWED)].map((function(e){return e.catch((function(e){}))})));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadData();case 2:this.loading=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Mo=Do,Eo=(n("8eb4"),n("6474"),Object(S["a"])(Mo,fo,ho,!1,null,"3e3ea781",null)),Io=Eo.exports,No=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("div",{staticClass:"box"},[e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[n("div",{staticClass:"columns"},[n("h2",{staticClass:"column is-marginless"},[e._v(e._s(e.$t("members-activity")))]),n("p",{staticClass:"column has-text-right is-size-7 has-text-grey"},[e._v(" "+e._s(e.$t("data-last-updated-on",{time:e.$options.filters.moment(e.lastUpdate,"LTS")}))+" ")])]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),n("div",{staticClass:"column"},[n("button",{staticClass:"button",on:{click:function(t){e.filtersOpened=!e.filtersOpened}}},[n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-filter"})]),n("span",[e._v(e._s(e.filtersOpened?e.$t("button-hide-filters"):e.$t("button-show-filters")))])])])]),n("b-collapse",{attrs:{open:e.filtersOpened}},[n("div",{staticClass:"filters columns"},[n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("status"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableStatus,multiple:"",searchable:!1},model:{value:e.selectedStatus,callback:function(t){e.selectedStatus=t},expression:"selectedStatus"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("role"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableRoles,multiple:"",searchable:!1},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1)])])]),n("b-table",{attrs:{data:e.filteredMembers,"default-sort":"username",paginated:!0,"per-page":e.perPage,"pagination-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{field:"username",label:e.$t("username"),sortable:"",width:"100"}},[n("username",{attrs:{user:r,online:e.onlineIds?e.onlineIds.includes(r.id):null,displayFullName:!1}})],1),n("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:"",width:"150"}},[e._v(" "+e._s(r.name)+" ")]),n("b-table-column",{attrs:{field:"role",label:e.$t("role"),centered:"",sortable:"",width:"20"}},[n("icon-project-member-role",{attrs:{"is-manager":r.role===e.managerRole}})],1),n("b-table-column",{attrs:{field:"lastImageName",label:e.$t("last-image"),sortable:"",width:"100"}},[r.lastImageId?[n("router-link",{attrs:{to:"/project/"+e.project.id+"/image/"+r.lastImageId}},[e._v(" "+e._s(r.lastImageName)+" ")])]:n("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("no-record")))])],2),n("b-table-column",{attrs:{field:"lastConnection",label:e.$t("last-connection"),sortable:"",width:"100"}},[r.lastConnection?[e._v(" "+e._s(e._f("moment")(Number(r.lastConnection),"ll LT"))+" ")]:n("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("no-record")))])],2),n("b-table-column",{attrs:{field:"frequency",label:e.$t("number-connections"),sortable:"",width:"100"}},[e._v(" "+e._s(r.frequency)+" ")]),n("b-table-column",{attrs:{label:"",centered:"",width:"50"}},[n("router-link",{staticClass:"button is-small is-link",attrs:{to:"/project/"+e.project.id+"/activity/user/"+r.id}},[e._v(" "+e._s(e.$t("button-details"))+" ")])],1)]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-member-fitting-criteria")))])])]},proxy:!0},e.isManager?{key:"footer",fn:function(){return[n("p",{staticClass:"has-text-centered"},[n("router-link",{staticClass:"button is-link add-member",attrs:{to:"/project/"+e.project.id+"/configuration?tab=members"}},[e._v(" "+e._s(e.$t("button-manage-members"))+" ")])],1)]},proxy:!0}:null,{key:"bottom-left",fn:function(){return[n("b-select",{attrs:{size:"is-small"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[n("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),n("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),n("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),n("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}],null,!0)}),n("div",{staticClass:"legend"},[n("h2",[e._v(e._s(e.$t("legend")))]),n("p",[n("icon-project-member-role"),e._v(" : "+e._s(e.$t("project-contributor")))],1),n("p",[n("icon-project-member-role",{attrs:{"is-manager":!0}}),e._v(" : "+e._s(e.$t("project-manager")))],1)])]],2)},Uo=[],Fo={name:"members-activity",components:{IconProjectMemberRole:yn,CytomineMultiselect:ae,Username:$e},data:function(){return{loading:!0,error:!1,searchString:"",filtersOpened:!1,perPage:25,members:[],onlineIds:null,contributorRole:this.$t("contributor"),managerRole:this.$t("manager"),availableRoles:[],selectedRoles:[],onlineStatus:this.$t("online"),offlineStatus:this.$t("offline"),availableStatus:[],selectedStatus:[],lastUpdate:null,timeout:null}},computed:{project:m("currentProject/project"),isManager:function(){return this.$store.getters["currentProject/canManageProject"]},idManagers:function(){return this.$store.state.currentProject.managers.map((function(e){return e.id}))},regexp:function(){return St(this.searchString)},filteredMembers:function(){var e=this,t=Boolean(this.onlineIds),n=this.selectedStatus.includes(this.onlineStatus),r=this.selectedStatus.includes(this.offlineStatus);return this.members.filter((function(a){var i=t?e.onlineIds.includes(a.id):null;return(e.regexp.test(a.name)||e.regexp.test(a.username))&&(!t||n&&i||r&&!i)&&e.selectedRoles.includes(a.role)}))}},methods:{fetchData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.fetchMembers(),this.fetchOnlines()]);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e["catch"](0),this.error=!0,e.abrupt("return");case 9:this.lastUpdate=new Date,clearTimeout(this.timeout),this.timeout=setTimeout(this.fetchData,N.MEMBERS_ACTIVITY_REFRESH_INTERVAL);case 12:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}(),fetchMembers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchUsersActivity();case 2:t=e.sent.array,t.forEach((function(e){e.name="".concat(e.firstname," ").concat(e.lastname),e.role=n.idManagers.includes(e.id)?n.managerRole:n.contributorRole})),this.members=t;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchOnlines:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.project.fetchConnectedUsers();case 3:t=e.sent,this.onlineIds=t.map((function(e){return e.id})),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.onlineIds=null;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.availableRoles=[this.contributorRole,this.managerRole],this.selectedRoles=this.availableRoles,this.availableStatus=[this.onlineStatus,this.offlineStatus],this.selectedStatus=this.availableStatus;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),activated:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:this.loading=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deactivated:function(){clearTimeout(this.timeout)}},Lo=Fo,qo=(n("1f96"),Object(S["a"])(Lo,No,Uo,!1,null,"819454d2",null)),zo=qo.exports,Vo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tile is-child box last-actions"},[n("h2",[e._v(e._s(e.$t("activity-logs")))]),n("b-select",{model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}},[n("option",{domProps:{value:null}},[e._v(e._s(e.$t("all-users-analyses")))]),n("optgroup",{attrs:{label:e.$t("members")}},e._l(e.members,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.fullName))])})),0),n("optgroup",{attrs:{label:e.$t("analyses")}},e._l(e.userJobs,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.fullName))])})),0)]),n("activity-logs",{attrs:{idUser:e.selectedUser,startDate:e.startDate,endDate:e.endDate,project:e.project}})],1)},Bo=[],Wo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):e.actions.length>0?n("div",{ref:"listActions",staticClass:"list-actions",on:{scroll:e.scrollHandler}},[e._l(e.formattedActions,(function(t,r){return n("div",{key:r},[n("h3",[e._v(e._s(e._f("moment")(t.refDate,"MMMM YYYY")))]),e._l(t.days,(function(t,r){return n("div",{key:r},[n("h4",[e._v(e._s(e._f("moment")(t.refDate,"ll")))]),n("ul",e._l(t.actions,(function(e){return n("activity-logs-item",{key:e.id,attrs:{action:e}})})),1)])}))],2)})),e.loadedAllActions?e._e():n("button",{staticClass:"button",class:{"is-loading":e.loading},on:{click:function(t){return e.loadActions()}}},[e._v(" "+e._s(e.$t("button-load-more"))+" ")])],2):n("div",{staticClass:"no-result"},[n("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("no-log-to-display")))])])},Jo=[],Ho=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{key:e.action.id},[n("strong",[e._v(e._s(e._f("moment")(Number(e.action.created),"l LTS"))+":")]),n("span",{staticClass:"content",on:{mouseenter:e.enter,mouseleave:e.leave}},[e.route?n("router-link",{attrs:{to:e.route}},[e._v(" "+e._s(e.action.message)+" ")]):[e._v(e._s(e.action.message))]],2),e.previewUrl?n("div",{staticClass:"preview",class:{visible:e.showPreview}},[n("div",{staticClass:"box"},[n("img",{attrs:{src:e.previewUrl}})])]):e._e()])},Go=[],Ko=1,Yo=2,Zo=3,Xo={name:"activity-logs-item",props:{action:Object},data:function(){return{showPreview:!1,previewUrl:null,route:null}},computed:{actionData:function(){return JSON.parse(this.action.data)},type:function(){switch(this.action.serviceName){case"userAnnotationService":case"reviewedAnnotationService":case"algoAnnotationService":return Ko;case"imageInstanceService":return Yo;case"projectService":return Zo}}},methods:{enter:function(){this.showPreview=!0},leave:function(){this.showPreview=!1},annotationHandler:function(e){this.previewUrl="".concat(e.url,"?maxSize=125&complete=true&thickness=2&increaseArea=1.25&draw=true"),this.route="/project/".concat(e.project,"/image/").concat(e.image,"/annotation/").concat(e.id)},imageHandler:function(e){e.deleted||(this.previewUrl=e.thumb,this.route="/project/".concat(e.project,"/image/").concat(e.id))},projectHandler:function(e){this.route="/project/".concat(e.id)},addCommandHandler:function(){switch(this.type){case Ko:this.annotationHandler(this.actionData);break;case Yo:this.imageHandler(this.actionData);break;case Zo:this.projectHandler(this.actionData);break}},editCommandHandler:function(){switch(this.type){case Ko:this.annotationHandler(this.actionData.newUserAnnotation||this.actionData.newReviewedAnnotation||this.actionData.newAlgoAnnotation||this.actionData.newAnnotation);break;case Yo:this.imageHandler(this.actionData.newImageInstance);break}}},created:function(){switch(this.action.className){case"be.cytomine.command.AddCommand":this.addCommandHandler();break;case"be.cytomine.command.EditCommand":this.editCommandHandler();break;case"be.cytomine.command.DeleteCommand":break;default:}}},Qo=Xo,ec=(n("179f"),Object(S["a"])(Qo,Ho,Go,!1,null,"905a3ede",null)),tc=ec.exports;function nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nc(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ac,ic={name:"activity-logs",props:{startDate:Number,endDate:Number,idUser:Number,project:Object},components:{ActivityLogsItem:tc},data:function(){return{loading:!0,error:!1,offset:0,nbActionsPerPage:50,loadedAllActions:!1,actions:[]}},computed:{params:function(){return{user:this.idUser,startDate:this.startDate,endDate:this.endDate,project:this.project?this.project.id:null,fullData:!0}},formattedActions:function(){for(var e=[],t=null,n=-1,r=-1,a=0;a<this.actions.length;a++){var i=this.actions[a],s=we()(Number(i.created));t&&s.isSame(t,"day")?e[n].days[r].actions.push(i):(t&&s.isSame(t,"month")||(e.push({refDate:Number(i.created),days:[]}),n++,r=-1),e[n].days.push({refDate:Number(i.created),actions:[i]}),r++),t=s}return e}},watch:{params:function(){this.loadActions(!1)}},methods:{scrollHandler:u.a.debounce((function(){var e=this.$refs.listActions,t=e.scrollTop+e.clientHeight===e.scrollHeight;t&&!this.loadedAllActions&&this.loadActions()}),100),loadActions:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=!(a.length>0&&void 0!==a[0])||a[0],this.loading=!0,t||(this.actions=[],this.offset=0,this.loadedAllActions=!1),e.prev=3,e.next=6,$["Project"].fetchCommandHistory(rc({max:this.nbActionsPerPage,offset:this.offset},this.params));case 6:r=e.sent,(n=this.actions).push.apply(n,Object(B["a"])(r)),this.offset+=this.nbActionsPerPage,r.length<this.nbActionsPerPage&&(this.loadedAllActions=!0),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](3),this.error=!0;case 15:this.loading=!1;case 16:case"end":return e.stop()}}),e,this,[[3,12]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadActions();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),this.error=!0;case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()},sc=ic,oc=(n("fae8"),Object(S["a"])(sc,Wo,Jo,!1,null,"03cb74c6",null)),cc=oc.exports,lc={name:"project-activity-logs",props:{startDate:Number,endDate:Number},components:{ActivityLogs:cc},data:function(){return{userJobs:[],selectedUser:null}},computed:{project:m("currentProject/project"),members:m("currentProject/members")},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["UserJobCollection"].fetchAll({filterKey:"project",filterValue:this.project.id});case 3:t=e.sent.array,t.forEach((function(e){return e.fullName=_e(e)})),this.userJobs=t,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},uc=lc,dc=(n("c11d"),Object(S["a"])(uc,Vo,Bo,!1,null,"3dd3d26a",null)),pc=dc.exports,mc="charts",fc={name:"project-activity",components:{CytomineDatepicker:Li},data:function(){return{activeTab:mc,startDate:null,endDate:null}},computed:{configUI:m("currentProject/configUI"),canManageProject:function(){return this.$store.getters["currentProject/canManageProject"]},moment:function(){return we.a},queriedTab:function(){return this.$route.query.tab},activeComponent:function(){if(!this.canManageProject)return Io;switch(this.activeTab){case"charts":return Io;case"members":return zo;case"logs":return pc}}},watch:{queriedTab:function(){this.changeTab()},activeTab:function(){(this.activeTab!==mc||this.queriedTab)&&this.$router.push("?tab=".concat(this.activeTab))}},methods:{changeTab:function(){this.activeTab=this.queriedTab||mc,this.activeComponent||(this.activeTab=mc)}},created:function(){this.changeTab()}},hc=fc,vc=(n("5faf"),n("f6d5"),Object(S["a"])(hc,po,mo,!1,null,"89d613ec",null)),gc=vc.exports,bc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.configUI["project-jobs-tab"]?e.error?n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(e._s(e.$t("unexpected-error-info-message")))])]):n("div",{staticClass:"list-jobs-wrapper content-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("analysis"))+" "),e.canAddJob?n("button",{staticClass:"button is-link",on:{click:function(t){e.launchModal=!0}}},[e._v(" "+e._s(e.$t("button-launch-new-analysis"))+" ")]):e._e()]),n("div",{staticClass:"panel-block"},[n("div",{staticClass:"filters"},[n("h2",[e._v(e._s(e.$t("filters")))]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("algorithm"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableSoftwares,multiple:"","track-by":"id",label:"fullName"},model:{value:e.selectedSoftwares,callback:function(t){e.selectedSoftwares=t},expression:"selectedSoftwares"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("launcher"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableLaunchers,multiple:""},model:{value:e.selectedLaunchers,callback:function(t){e.selectedLaunchers=t},expression:"selectedLaunchers"}})],1)]),n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("execution-date"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-datepicker",{attrs:{styles:["multiselect","bold-placeholder"],placeholder:e.$t("all-dates"),maxDate:new Date},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1)]),n("div",{staticClass:"column"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("status"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableStatus,label:"label","track-by":"status",multiple:""},model:{value:e.selectedStatus,callback:function(t){e.selectedStatus=t},expression:"selectedStatus"}})],1)])])]),n("cytomine-table",{attrs:{collection:e.jobCollection,currentPage:e.currentPage,perPage:e.perPage,openedDetailed:e.openedDetails,sort:e.sortField,order:e.sortOrder,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t}},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{field:"softwareName",label:e.$t("algorithm"),sortable:"",width:"1000"}},[e._v(" "+e._s(r.softwareName)+" ")]),n("b-table-column",{attrs:{label:e.$t("run-number"),width:"500",centered:""}},[e._v(" "+e._s(r.number)+" ")]),n("b-table-column",{attrs:{field:"username",label:e.$t("launched-by"),sortable:"",width:"1000"}},[e._v(" "+e._s(r.username)+" ")]),n("b-table-column",{attrs:{field:"created",label:e.$t("execution-date"),sortable:"",width:"1000"}},[e._v(" "+e._s(e._f("moment")(Number(r.created),"ll LT"))+" ")]),n("b-table-column",{attrs:{field:"status",label:e.$t("status"),sortable:"",centered:"",width:"1000"}},[n("job-status",{attrs:{status:r.status}})],1)]}},{key:"detail",fn:function(t){var r=t.row;return[n("job-details",{key:r.id,attrs:{job:r},on:{update:function(t){e.revision++},delete:function(t){return e.deleteJob(r)},relaunch:e.addJob}})]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-analysis-run")))])])]},proxy:!0}],null,!1,1758097932)})],1)]),n("add-job-modal",{attrs:{active:e.launchModal},on:{"update:active":function(t){e.launchModal=t},add:e.addJob}})],1):n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),n("p",[e._v(e._s(e.$t("insufficient-permission")))])])},yc=[],wc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"tag",class:e.tagClass},[e._v(" "+e._s(e.$t(e.labels[e.status].label))+" ")])},_c=[],xc=Object.freeze((ac={},Object(c["a"])(ac,$["JobStatus"].RUNNING,{label:"running",statLabel:"numberOfRunning",color:"#209CEE"}),Object(c["a"])(ac,$["JobStatus"].SUCCESS,{label:"success",statLabel:"numberOfSuccess",color:"#23D160"}),Object(c["a"])(ac,$["JobStatus"].FAILED,{label:"failed",statLabel:"numberOfFailed",color:"#FF3860"}),Object(c["a"])(ac,$["JobStatus"].NOTLAUNCH,{label:"not-launch",statLabel:"numberOfNotLaunch",color:"#F5F5F5"}),Object(c["a"])(ac,$["JobStatus"].WAIT,{label:"wait",statLabel:"numberOfWait",color:"#F5F5F5"}),Object(c["a"])(ac,$["JobStatus"].INQUEUE,{label:"in-queue",statLabel:"numberOfInQueue",color:"#F5F5F5"}),Object(c["a"])(ac,$["JobStatus"].INDETERMINATE,{label:"indeterminate",statLabel:"numberOfIndeterminate",color:"#F5F5F5"}),Object(c["a"])(ac,$["JobStatus"].KILLED,{label:"killed",statLabel:"numberOfKilled",color:"#363636"}),ac)),jc=xc,Cc={name:"job-status",props:{status:Number},computed:{labels:function(){return jc},result:function(){switch(this.status){case $["JobStatus"].KILLED:return"dark";case $["JobStatus"].NOTLAUNCH:case $["JobStatus"].INQUEUE:case $["JobStatus"].WAIT:case $["JobStatus"].INDETERMINATE:case $["JobStatus"].PREVIEWED:return"light";case $["JobStatus"].RUNNING:return"info";case $["JobStatus"].SUCCESS:return"success";case $["JobStatus"].FAILED:return"danger"}},tagClass:function(){return"is-"+this.result}}},$c=Cc,kc=Object(S["a"])($c,wc,_c,!1,null,null,null),Pc=kc.exports,Oc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"job-details-wrapper"},[n("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading},on:{"update:active":function(t){e.loading=t}}}),e.loading?e._e():[n("table",{staticClass:"table"},[n("tbody",[e.isRunning?n("tr",[n("td",[e._v(e._s(e.$t("progress")))]),n("td",[n("progress",{staticClass:"progress is-info",attrs:{max:"100"},domProps:{value:e.job.progress}},[e._v(" "+e._s(e.job.progress)+"% ")])])]):e._e(),n("tr",[n("td",[e._v(e._s(e.$t("status-comment")))]),n("td",[e._v(e._s(e.job.statusComment||"-"))])]),e.isSuccessful?n("tr",[n("td",[e._v(e._s(e.$t("execution-duration")))]),n("td",[e._v(e._s(e._f("duration")(Number(e.job.updated)-Number(e.job.created),"humanize")))])]):e._e(),n("tr",[n("td",[e._v(e._s(e.$t("parameters")))]),n("td",[n("button",{staticClass:"button is-small",on:{click:function(t){e.showParameters=!e.showParameters}}},[n("span",[e._v(e._s(e.showParameters?e.$t("button-hide"):e.$t("button-show")))])]),n("b-collapse",{attrs:{open:e.showParameters}},[n("table",{staticClass:"table is-narrow inline-table is-fullwidth"},[n("thead",[n("tr",[n("th",[e._v(e._s(e.$t("name")))]),n("th",[e._v(e._s(e.$t("value")))]),n("th",[e._v(e._s(e.$t("type")))])])]),n("tbody",e._l(e.job.jobParameters.array,(function(t){return n("tr",{key:t.id},[n("td",[e._v(e._s(t.humanName))]),n("td",[e._v(e._s(t.value))]),n("td",[e._v(e._s(e.$t(t.type.toLowerCase())))])])})),0)])])],1)]),e.isFinished?n("tr",[n("td",[e._v(e._s(e.$t("execution-log")))]),e.isJustFinished&&!e.log?n("td",[n("div",{staticClass:"loading"},[n("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v(" "),n("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("log-being-collected")))])])]):e.log?n("td",[n("button",{staticClass:"button is-small",on:{click:function(t){e.showLog=!e.showLog}}},[n("span",[e._v(e._s(e.showLog?e.$t("button-hide"):e.$t("button-show")))])]),n("b-collapse",{attrs:{open:e.showLog}},[n("pre",[e._v(e._s(e.log.data))])])],1):n("td",[n("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("not-found")))])])]):e._e(),n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("tags")))]),n("td",{staticClass:"prop-content"},[n("cytomine-tags",{attrs:{object:e.job,canEdit:e.canManageJob}})],1)]),e.hasAnnotationResult?n("tr",[n("td",[e._v(e._s(e.$t("data")))]),e.hasAnnotationResult?n("td",[n("router-link",{attrs:{to:"/project/"+e.project.id+"/annotations?userJob="+e.job.userJob}},[e._v(" "+e._s(e.$tc("count-annotations",e.allData.annotations,{count:e.allData.annotations}))+" ")])],1):e._e()]):e._e(),e.hasFileResult?n("tr",[n("td",[e._v(e._s(e.$t("files")))]),n("td",[e.jobData.length>0?n("table",{staticClass:"table inline-table is-fullwidth is-narrow"},[n("thead",[n("tr",[n("th",[e._v(e._s(e.$t("filename")))]),n("th",[e._v(e._s(e.$t("comment")))]),n("th",[e._v(e._s(e.$t("size")))]),n("th")])]),n("tbody",e._l(e.jobData,(function(t){return n("tr",{key:t.id},[n("td",[e._v(e._s(t.filename))]),n("td",[e._v(e._s(t.key))]),n("td",[e._v(e._s(e.filesize(t.size)))]),n("td",[n("div",{staticClass:"buttons"},[n("a",{staticClass:"button is-small",attrs:{href:t.viewURL,target:"_blank"}},[e._v(e._s(e.$t("button-view")))]),n("a",{staticClass:"button is-small",attrs:{href:t.downloadURL}},[e._v(e._s(e.$t("button-download")))])])])])})),0)]):n("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("no-result-file")))])])]):e._e(),e.job.dataDeleted?n("tr",[n("td",[e._v(e._s(e.$t("data")))]),n("td",[e._v(" "+e._s(e.$t("deleted-analysis-data"))+" ")])]):e._e(),e.canManageJob?n("tr",[n("td",[e._v(e._s(e.$t("actions")))]),n("td",[n("div",{staticClass:"buttons are-small"},[n("button",{staticClass:"button",on:{click:function(t){return e.relaunchJob()}}},[e._v(" "+e._s(e.$t("relaunch"))+" ")]),!e.job.dataDeleted&&e.isFinished?n("button",{staticClass:"button",on:{click:function(t){e.deletionModal=!0}}},[e._v(" "+e._s(e.$t("delete-data"))+" ")]):e._e(),e.isFinished?n("button",{staticClass:"button is-danger",on:{click:function(t){return e.confirmJobDeletion()}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")]):n("button",{staticClass:"button is-danger",on:{click:function(t){return e.confirmJobKilling()}}},[e._v(" "+e._s(e.$t("button-kill"))+" ")])])])]):e._e()])]),n("cytomine-modal",{attrs:{active:e.deletionModal,title:e.$t("delete-analysis-data")},on:{close:function(t){e.deletionModal=!1}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){e.deletionModal=!1}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-danger",on:{click:function(t){return e.deleteData()}}},[e._v(" "+e._s(e.$t("button-confirm"))+" ")])]},proxy:!0}],null,!1,617667549)},[n("p",[e._v(e._s(e.$t("confirm-deletion-analysis-data")))]),n("ul",[n("li",[e._v(e._s(e.$tc("count-annotations",e.allData.annotations,{count:e.allData.annotations})))]),n("li",[e._v(e._s(e.$tc("count-reviewed-annotations",e.allData.reviewed,{count:e.allData.reviewed})))]),n("li",[e._v(e._s(e.$tc("count-annotation-terms",e.allData.annotationsTerm,{count:e.allData.annotationsTerm})))]),n("li",[e._v(e._s(e.$tc("count-files",e.allData.jobDatas,{count:e.allData.jobDatas})))])]),n("p",{staticClass:"has-margin-top"},[e._v(e._s(e.$t("remark-long-operation")))]),e.deletionTask?[n("hr"),n("cytomine-task",{attrs:{task:e.deletionTask},on:{"update:task":function(t){e.deletionTask=t}}})]:e._e()],2)]],2)},Rc=[],Sc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.task?n("div",[n("progress",{staticClass:"progress is-info",attrs:{max:"100"},domProps:{value:e.task.progress}},[e._v(" "+e._s(e.task.progress)+"% ")]),e.lastComment?n("p",[e._v(e._s(e.lastComment))]):e._e()]):e._e()},Tc=[],Ac={name:"cytomine-task",props:{task:Object,refreshInterval:{type:Number,default:N.TASK_REFRESH_INTERVAL}},data:function(){return{timeout:null}},computed:{lastComment:function(){if(this.task&&this.task.comments&&this.task.comments.length>0)return this.task.comments[0]}},watch:{task:function(){this.refresh()}},methods:{refresh:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.task){e.next=7;break}return e.next=3,$["Task"].fetch(this.task.id);case 3:t=e.sent,this.$emit("update:task",t),clearTimeout(this.timeout),t.progress<100&&(this.timeout=setTimeout(this.refresh,this.refreshInterval));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.refresh()}},Dc=Ac,Mc=(n("b1c3"),Object(S["a"])(Dc,Sc,Tc,!1,null,"2300da1e",null)),Ec=Mc.exports,Ic=N.JOB_DETAILS_REFRESH_INTERVAL,Nc=N.JOB_LOGS_REFRESH_INTERVAL,Uc={name:"job-details",props:{job:Object},components:{CytomineModal:Ve,CytomineTask:Ec,CytomineTags:Bt},data:function(){return{loading:!0,justFinishedInterval:6e4,showParameters:!1,showLog:!1,allData:null,jobData:[],log:null,timeoutRefresh:null,deletionModal:!1,deletionTask:null}},computed:{project:m("currentProject/project"),canManageJob:function(){return this.$store.getters["currentProject/canManageJob"](this.job)},isRunning:function(){return this.job.status===$["JobStatus"].RUNNING},isSuccessful:function(){return this.job.status===$["JobStatus"].SUCCESS},isFinished:function(){return this.isSuccessful||this.job.status===$["JobStatus"].FAILED||this.job.status===$["JobStatus"].KILLED},isJustFinished:function(){return this.isFinished&&Date.now()-Number(this.job.created)<this.justFinishedInterval},hasAnnotationResult:function(){return this.allData.annotations>0},hasFileResult:function(){return this.allData.jobDatas>0}},methods:{refresh:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],!this.isFinished||t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,$["Job"].fetch(this.job.id);case 5:return n=e.sent,this.$emit("update",n),e.next=9,this.fetchData();case 9:this.job.status=n.status,this.fetchLog(),clearTimeout(this.timeoutRefresh),this.timeoutRefresh=setTimeout(this.refresh,Ic);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),filesize:function(e){return An()(e,{base:10})},fetchLog:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isFinished){e.next=16;break}t=this.isJustFinished?Math.round(this.justFinishedInterval/Nc):1;case 2:if(this.log||!(t>0)){e.next=16;break}return e.prev=3,e.next=6,this.job.fetchLog();case 6:this.log=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e["catch"](3),e.next=13,new Promise((function(e){return setTimeout(e,Nc)}));case 13:t--;case 14:e.next=2;break;case 16:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(){return e.apply(this,arguments)}return t}(),fetchData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.job.fetchAllData();case 2:if(this.allData=e.sent,!this.hasFileResult){e.next=7;break}return e.next=6,$["JobDataCollection"].fetchAll({filterKey:"job",filterValue:this.job.id});case 6:this.jobData=e.sent.array;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.job.clone(),e.prev=1,e.next=4,new $["Task"]({project:this.project.id}).save();case 4:return this.deletionTask=e.sent,e.next=7,t.deleteAllData(this.deletionTask.id);case 7:this.refresh(!0),this.deletionTask=null,this.deletionModal=!1,this.$notify({type:"success",text:this.$t("notif-success-analysis-data-deletion")}),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](1),this.deletionTask=null,this.$notify({type:"error",text:this.$t("notif-error-analysis-data-deletion")});case 17:case"end":return e.stop()}}),e,this,[[1,13]])})));function t(){return e.apply(this,arguments)}return t}(),killJob:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.job.clone(),e.prev=1,e.next=4,t.kill();case 4:this.$emit("update",t),this.$notify({type:"success",text:this.$t("notif-success-analysis-kill")}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.$notify({type:"error",text:this.$t("notif-error-analysis-data-kill")});case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}(),confirmJobDeletion:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("delete-analysis"),message:this.$t("delete-analysis-confirmation-message"),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.$emit("delete")}})},confirmJobKilling:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("kill-analysis"),message:this.$t("kill-analysis-confirmation-message"),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.killJob()}})},relaunchJob:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.job.copy();case 3:return t=e.sent,this.$emit("relaunch",t),e.next=7,t.execute();case 7:this.$notify({type:"success",text:this.$t("notif-success-analysis-launch")}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-analysis-launch")});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:this.fetchLog(),this.loading=!1,this.timeoutRefresh=setTimeout(this.refresh,Ic);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){clearTimeout(this.timeoutRefresh)}},Fc=Uc,Lc=(n("ef1e"),n("7686"),Object(S["a"])(Fc,Oc,Rc,!1,null,"d31f0db6",null)),qc=Lc.exports,zc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){return t.preventDefault(),e.createJob()}}},[n("cytomine-modal",{attrs:{active:e.active,title:e.$t("launch-new-analysis")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-launch-new-analysis"))+" ")])]},proxy:!0}])},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-narrow"},[n("strong",[e._v(e._s(e.$t("algorithm")))])]),n("div",{staticClass:"column"},[n("cytomine-multiselect",{attrs:{options:e.executableSoftwares,"track-by":"id",label:"fullName"},model:{value:e.selectedSoftware,callback:function(t){e.selectedSoftware=t},expression:"selectedSoftware"}})],1)]),e.selectedSoftware?[e.selectedSoftware.deprecated?n("b-message",{attrs:{type:"is-info","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("notif-deprecated-software"))+" ")]):e._e(),n("table",{staticClass:"table is-fullwidth"},[n("thead",[n("tr",[n("th"),n("th",[e._v(e._s(e.$t("name")))]),n("th",[e._v(e._s(e.$t("value")))])])]),n("tbody",[e._l(e.paramsMandatoryNoDefault,(function(t){return n("job-parameter-row",{key:t.id,attrs:{param:t},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"param.value"}})})),n("tr",{directives:[{name:"show",rawName:"v-show",value:e.optionalParams.length>0,expression:"optionalParams.length > 0"}],staticClass:"row-separator"},[n("td",{attrs:{colspan:"3"}},[e._v(" "+e._s(e.$t("optional-parameters"))+" "),n("button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:function(t){e.showOptional=!e.showOptional}}},[e._v(" "+e._s(e.$t(e.showOptional?"button-hide":"button-show"))+" ")])])]),e.showOptional?e._l(e.optionalParams,(function(t){return n("job-parameter-row",{key:t.id,attrs:{param:t},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"param.value"}})})):e._e(),n("tr",{directives:[{name:"show",rawName:"v-show",value:e.prefilledParams.length>0,expression:"prefilledParams.length > 0"}],staticClass:"row-separator"},[n("td",{attrs:{colspan:"3"}},[e._v(" "+e._s(e.$t("prefilled-parameters"))+" "),n("button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:function(t){e.showPrefilled=!e.showPrefilled}}},[e._v(" "+e._s(e.$t(e.showPrefilled?"button-hide":"button-show"))+" ")])])]),e.showPrefilled?e._l(e.prefilledParams,(function(t){return n("job-parameter-row",{key:t.id,attrs:{param:t},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"param.value"}})})):e._e()],2)])]:e._e()],2)],1)},Vc=[],Bc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{staticClass:"job-param-row-wrapper"},[n("td",[e.description?n("div",[n("v-popover",{attrs:{"popover-base-class":"tooltip popover job-description-popover"},scopedSlots:e._u([{key:"popover",fn:function(){return[n("p",{domProps:{innerHTML:e._s(e.description.data)}})]},proxy:!0}],null,!1,5788555)},[n("i",{staticClass:"fas fa-info-circle"})])],1):e._e()]),n("td",[e._v(e._s(e.param.humanName))]),n("td",[n("b-field",{attrs:{type:{"is-danger":e.errors.has(e.validationName)},message:e.errors.first(e.validationName)}},[e.loading?n("b-input",{attrs:{loading:"",disabled:""}}):e.options?n("cytomine-multiselect",{directives:[{name:"validate",rawName:"v-validate",value:e.validationRules,expression:"validationRules"}],class:{"is-danger":e.errors.has(e.validationName)},attrs:{options:e.options,"track-by":"id",label:e.param.uriPrintAttribut,multiple:"ListDomain"===e.param.type,name:e.validationName},scopedSlots:e._u([{key:"option",fn:function(t){var r=t.option;return[e.areAnnotationObjects?n("div",{staticClass:"is-flex"},[n("div",{staticClass:"thumb-wrapper"},[n("img",{staticClass:"thumb",attrs:{src:r.smallCropURL+"&draw=true&complete=true&increaseArea=1.25"}})]),n("span",{staticClass:"option__title"},[e._v(" "+e._s(r[e.param.uriPrintAttribut])+" ")])]):r.thumb?n("div",{staticClass:"is-flex"},[n("div",{staticClass:"thumb-wrapper"},[n("img",{staticClass:"thumb",attrs:{src:r.thumb}})]),n("span",{staticClass:"option__title"},[e._v(" "+e._s(r[e.param.uriPrintAttribut])+" ")])]):e.areTermObjects?n("div",{staticClass:"is-flex"},[n("cytomine-term",{attrs:{term:r}})],1):e.areJobObjects?n("div",{staticClass:"is-flex"},[n("span",{staticClass:"option__title"},[e._v(" "+e._s(e.formatJob(r,e.param.uriPrintAttribut))+" ")])]):e._e()]}}]),model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}}):"Boolean"===e.param.type?n("b-checkbox",{model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}}):n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:e.validationRules,expression:"validationRules"}],attrs:{name:e.validationName},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})],1)],1)])},Wc=[],Jc={name:"job-parameter-row",inject:["$validator"],components:{CytomineTerm:ur,CytomineMultiselect:ae},props:{param:Object,value:null},data:function(){return{internalValue:null,options:null,description:null,loading:!0}},computed:{project:m("currentProject/project"),ontology:m("currentProject/ontology"),processedUri:function(){if(this.param.uri_){var e=this.param.uri_.replace(new RegExp("^"+$["Cytomine"].instance.basePath),"");return e=e.replace("$currentProjectCreationDate$",this.project.created),e=e.replace("$currentProject$",this.project.id),e=e.replace("$cytomineHost$",$["Cytomine"].instance.host),e=e.replace("$currentDate$",(new Date).getTime()),e=e.replace("$currentOntology$",this.ontology?this.ontology.id:null),e}},validationName:function(){return String(this.param.id)},validationRules:function(){return{required:this.param.required,decimal:"Number"===this.param.type}},objectsClass:function(){if(this.options&&this.options.length>0)return this.options[0].class},areAnnotationObjects:function(){if(this.objectsClass)return["be.cytomine.ontology.AlgoAnnotation","be.cytomine.ontology.UserAnnotation","be.cytomine.ontology.ReviewedAnnotation"].includes(this.objectsClass)},areTermObjects:function(){return"be.cytomine.ontology.Term"===this.objectsClass},areJobObjects:function(){return"be.cytomine.processing.Job"===this.objectsClass}},watch:{internalValue:function(e){e!==this.value&&this.$emit("input",e)},"param.value":function(){this.internalValue=this.param.value}},methods:{getInitialValue:function(){if(this.param.defaultParamValue)return"Boolean"===this.param.type?"true"===this.param.defaultParamValue.toLowerCase():this.param.defaultParamValue;switch(this.param.type){case"ListDomain":return[];case"Domain":return null;case"Boolean":return!1;default:return""}},formatJob:function(e,t){if(["softwareName","created","fullName","number"].includes(t)){var n=we()(Number(e.created)).format("L LTS");return"".concat(e["softwareName"]," - ").concat(n," (#").concat(e["number"],")")}return e[t]}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.internalValue=this.getInitialValue(),e.prev=1,e.next=4,$["Description"].fetch(this.param);case 4:this.description=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](1);case 9:if(!this.processedUri){e.next=23;break}return e.prev=10,e.next=13,$["Cytomine"].instance.api.get(this.processedUri);case 13:t=e.sent,n=t.data,r=n.collection,this.param.uriSortAttribut&&r.sort((function(e,t){return e[a.param.uriSortAttribut]<t[a.param.uriSortAttribut]?-1:1})),this.options=r,e.next=23;break;case 20:e.prev=20,e.t1=e["catch"](10),this.$notify({type:"error",text:this.$t("notif-error-analysis-parameters-options",{paramName:this.param.name})});case 23:this.loading=!1;case 24:case"end":return e.stop()}}),e,this,[[1,7],[10,20]])})));function t(){return e.apply(this,arguments)}return t}()},Hc=Jc,Gc=(n("4eff"),Object(S["a"])(Hc,Bc,Wc,!1,null,null,null)),Kc=Gc.exports;function Yc(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Zc(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function Zc(e,t){if(e){if("string"===typeof e)return Xc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xc(e,t):void 0}}function Xc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qc={name:"add-job-modal",props:{active:Boolean},components:{CytomineModal:Ve,CytomineMultiselect:ae,JobParameterRow:Kc},$_veeValidate:{validator:"new"},data:function(){return{softwares:[],selectedSoftware:null,showPrefilled:!1,showOptional:!1}},computed:{project:m("currentProject/project"),params:function(){return this.selectedSoftware?this.selectedSoftware.parameters.array:[]},optionalParams:function(){return this.params.filter((function(e){return!e.required&&!e.defaultParamValue}))},prefilledParams:function(){return this.params.filter((function(e){return e.defaultParamValue}))},paramsMandatoryNoDefault:function(){return this.params.filter((function(e){return e.required&&!e.defaultParamValue}))},jobParameters:function(){return this.params.filter((function(e){return e.value||0===e.value})).map((function(e){var t=e.value;return t.id&&(t=t.id),Array.isArray(t)&&(t.length?t[0].id&&(t=t.map((function(e){return e.id})).join()):t=null),new $["JobParameter"]({softwareParameter:e.id,value:t})}))},executableSoftwares:function(){return this.softwares.filter((function(e){return e.executable}))}},watch:{active:function(e){e&&(this.selectedSoftware=null,this.showOptional=!1,this.showPrefilled=!1)},selectedSoftware:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectedSoftware){e.next=2;break}return e.abrupt("return");case 2:t=Yc(this.selectedSoftware.parameters);try{for(t.s();!(n=t.n()).done;)r=n.value,this.$set(r,"value",r.defaultParamValue)}catch(a){t.e(a)}finally{t.f()}case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},methods:{createJob:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,n=new $["Job"]({software:this.selectedSoftware.id,project:this.project.id,jobParameters:this.jobParameters}),e.next=9,n.save();case 9:return this.$emit("add",n),this.$emit("update:active",!1),e.next=13,n.execute();case 13:this.$notify({type:"success",text:this.$t("notif-success-analysis-launch")}),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](5),this.$notify({type:"error",text:this.$t("notif-error-analysis-launch")});case 19:case"end":return e.stop()}}),e,this,[[5,16]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["SoftwareCollection"].fetchAll({filterKey:"project",filterValue:this.project.id});case 2:this.softwares=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},el=Qc,tl=(n("db57"),Object(S["a"])(el,zc,Vc,!1,null,"cd7246ac",null)),nl=tl.exports,rl={rootModuleProp:"storeModule"},al=function(e,t){return g(null,e,t,rl)},il={name:"list-jobs",components:{JobStatus:Pc,JobDetails:qc,AddJobModal:nl,CytomineTable:Y,CytomineMultiselect:ae,CytomineDatepicker:Li},data:function(){return{loading:!0,error:!1,launchModal:!1,availableSoftwares:[],availableLaunchers:[],revision:0}},computed:{currentUser:m("currentUser/user"),project:m("currentProject/project"),configUI:m("currentProject/configUI"),canManageProject:function(){return this.$store.getters["currentProject/canManageProject"]},canAddJob:function(){return!this.currentUser.guestByNow&&(this.canManageProject||!this.project.isReadOnly)},availableStatus:function(){var e=this;return Object.keys(jc).map((function(t){return{label:e.$t(jc[t].label),status:t}}))},storeModule:function(){return this.$store.getters["currentProject/currentProjectModule"]+"listJobs"},selectedSoftwares:al("softwares","availableSoftwares"),selectedLaunchers:al("launchers","availableLaunchers"),selectedDate:f("executionDate",rl),selectedStatus:al("statuses","availableStatus"),jobCollection:function(){var e=new $["JobCollection"]({project:this.project.id,software:this.selectedSoftwares.length>0&&this.selectedSoftwares.length<this.availableSoftwares.length?this.selectedSoftwares.map((function(e){return e.id})).join(","):null});return this.selectedLaunchers.length>0&&(e["username"]={in:this.selectedLaunchers.join()}),this.selectedStatus.length>0&&(e["status"]={in:this.selectedStatus.map((function(e){return e.status})).join()}),this.selectedDate&&(e.created={gte:this.selectedDate.getTime(),lte:new Date(this.selectedDate).setHours(15,15,59,999)}),e},currentPage:f("currentPage",rl),perPage:f("perPage",rl),sortField:f("sortField",rl),sortOrder:f("sortOrder",rl),openedDetails:f("openedDetails",rl)},methods:{fetchMultiselectOptions:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["JobCollection"].fetchBounds({project:this.project.id});case 2:t=e.sent,this.availableSoftwares=t.software.list,this.availableLaunchers=t.username.list;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addJob:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.openedDetails=[t.id].concat(Object(B["a"])(this.openedDetails)),e.next=3,this.fetchMultiselectOptions();case 3:this.revision++;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),deleteJob:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.delete();case 3:this.$notify({type:"success",text:this.$t("notif-success-analysis-deletion")}),this.fetchMultiselectOptions(),this.revision++,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-analysis-deletion")});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchMultiselectOptions();case 3:this.loading=!1,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.error=!0;case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},sl=il,ol=(n("0080"),Object(S["a"])(sl,bc,yc,!1,null,"9d96b340",null)),cl=ol.exports,ll=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.configUI["project-information-tab"]?n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"box"},[n("project-details",{attrs:{project:e.project,"excluded-properties":["imagesPreview"],editable:""},on:{update:e.updateProject,delete:function(t){return e.deleteProject()}}})],1)]):n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),n("p",[e._v(e._s(e.$t("insufficient-permission")))])])},ul=[],dl={name:"project-information",components:{ProjectDetails:on},computed:{project:m("currentProject/project"),configUI:m("currentProject/configUI")},methods:{updateProject:function(e){this.$store.dispatch("currentProject/updateProject",e)},deleteProject:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["Project"].delete(this.project.id);case 3:this.$notify({type:"success",text:this.$t("notif-success-project-deletion",{projectName:this.project.name})}),this.$router.push("/projects"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-project-deletion",{projectName:this.project.name})});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.$store.dispatch("currentProject/reloadProject")}},pl=dl,ml=Object(S["a"])(pl,ll,ul,!1,null,null,null),fl=ml.exports,hl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.configUI["project-configuration-tab"]?n("div",{staticClass:"content-wrapper"},[n("b-field",{staticClass:"radio-buttons-fullwidth"},[n("b-radio-button",{attrs:{"native-value":"general",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("general"))+" ")]),n("b-radio-button",{attrs:{"native-value":"members",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("members"))+" ")]),n("b-radio-button",{attrs:{"native-value":"customUI",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("custom-ui"))+" ")]),n("b-radio-button",{attrs:{"native-value":"algorithms",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("algorithms"))+" ")]),n("b-radio-button",{attrs:{"native-value":"imageFilters",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("image-filters"))+" ")])],1),n("div",{staticClass:"box tab-content"},[n("keep-alive",[n(e.activeComponent,{tag:"component"})],1)],1)],1):n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),n("p",[e._v(e._s(e.$t("insufficient-permission")))])])},vl=[],gl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v(e._s(e.$t("editing-mode")))]),n("p",{staticClass:"explanation"},[e._v(e._s(e.$t("editing-mode-explanation")))]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("b-radio",{attrs:{"native-value":"CLASSIC"},model:{value:e.editingMode,callback:function(t){e.editingMode=t},expression:"editingMode"}},[e._v(" "+e._s(e.$t("classic"))+" ")])],1),n("div",{staticClass:"column"},[n("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("classic-mode-explanation"))+" ")])],1)]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("b-radio",{attrs:{"native-value":"RESTRICTED"},model:{value:e.editingMode,callback:function(t){e.editingMode=t},expression:"editingMode"}},[e._v(" "+e._s(e.$t("restricted"))+" ")])],1),n("div",{staticClass:"column"},[n("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("restricted-mode-explanation"))+" ")])],1)]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("b-radio",{attrs:{"native-value":"READ-ONLY"},model:{value:e.editingMode,callback:function(t){e.editingMode=t},expression:"editingMode"}},[e._v(" "+e._s(e.$t("read-only"))+" ")])],1),n("div",{staticClass:"column"},[n("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("read-only-mode-explanation"))+" ")])],1)]),n("h2",[e._v(e._s(e.$t("blind-mode")))]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("b-checkbox",{model:{value:e.blindMode,callback:function(t){e.blindMode=t},expression:"blindMode"}},[e._v(" "+e._s(e.$t("blind-mode"))+" ")])],1),n("div",{staticClass:"column"},[n("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("blind-mode-explanation"))+" ")])],1)]),n("h2",[e._v(e._s(e.$t("annotation-layers")))]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("b-checkbox",{model:{value:e.hideManagersLayers,callback:function(t){e.hideManagersLayers=t},expression:"hideManagersLayers"}},[e._v(" "+e._s(e.$t("hide-managers-layers"))+" ")])],1),n("div",{staticClass:"column"},[n("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("hide-managers-layers-explanation"))+" ")])],1)]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("b-checkbox",{model:{value:e.hideContributorsLayers,callback:function(t){e.hideContributorsLayers=t},expression:"hideContributorsLayers"}},[e._v(" "+e._s(e.$t("hide-contributors-layers"))+" ")])],1),n("div",{staticClass:"column"},[n("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("hide-contributors-layers-explanation"))+" ")])],1)]),n("h2",[e._v(e._s(e.$t("default-annotation-layers")))]),n("b-field",{attrs:{grouped:""}},[n("b-select",{attrs:{size:"is-small",placeholder:e.$t("select-layer-placeholder")},model:{value:e.layerToAdd,callback:function(t){e.layerToAdd=t},expression:"layerToAdd"}},e._l(e.unselectedLayers,(function(t){return n("option",{key:t.id,domProps:{value:t}},[e._v(" "+e._s(e.fullName(t))+" ")])})),0),n("button",{staticClass:"button is-small",attrs:{disabled:!e.layerToAdd},on:{click:function(t){return e.addDefaultLayer()}}},[e._v(" "+e._s(e.$t("button-add"))+" ")])],1),e.selectedLayers.length>0?n("table",{staticClass:"table"},[n("tbody",[n("tr",[n("th",[e._v(e._s(e.$t("layer")))]),n("th",[e._v(e._s(e.$t("hide-by-default")))]),n("th")]),e._l(e.selectedLayers,(function(t,r){return n("tr",{key:t.id},[n("td",[e._v(e._s(e.fullName(t)))]),n("td",{staticClass:"is-centered"},[n("b-checkbox",{attrs:{size:"is-small"},on:{input:function(t){return e.saveDefaultLayer(r)}},model:{value:e.defaultLayers[r].hideByDefault,callback:function(t){e.$set(e.defaultLayers[r],"hideByDefault",t)},expression:"defaultLayers[idx].hideByDefault"}})],1),n("td",[n("button",{staticClass:"button is-small",on:{click:function(t){return e.deleteDefaultLayer(r)}}},[e._v(" "+e._s(e.$t("button-remove")))])])])}))],2)]):e._e(),n("h2",[e._v(e._s(e.$t("default-property")))]),n("default-property"),n("h2",[e._v(e._s(e.$t("download-permission")))]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("b-checkbox",{model:{value:e.imagesDownloadable,callback:function(t){e.imagesDownloadable=t},expression:"imagesDownloadable"}},[e._v(" "+e._s(e.$t("images_downloadable_by_contributor"))+" ")])],1),n("div",{staticClass:"column"},[n("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("images_downloadable_by_contributor-explanation"))+" ")])],1)]),n("h2",[e._v("Actions")]),n("project-actions",{attrs:{project:e.project,size:"is-normal"},on:{update:e.externalProjectUpdate,delete:function(t){return e.deleteProject()}}})],1)},bl=[],yl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):n("b-field",{attrs:{grouped:""}},[n("b-autocomplete",{attrs:{data:e.filteredKeys,placeholder:e.$t("no-default-property"),loading:e.loading,disabled:e.loading,size:"is-small"},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v(e._s(e.$t("no-property-matching-search-string",{searchString:e.searchString})))]},proxy:!0}]),model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),n("button",{staticClass:"button is-small",attrs:{disabled:e.defaultPropertyProp&&e.searchString===e.defaultPropertyProp.value},on:{click:function(t){return e.confirm()}}},[e._v(" "+e._s(e.$t("button-save"))+" ")])],1)},wl=[],_l={data:function(){return{loading:!0,error:!1,searchString:"",defaultPropertyProp:null,keysAnnotationProps:[]}},computed:{project:m("currentProject/project"),filteredKeys:function(){if(!this.searchString.length)return this.keysAnnotationProps;var e=St(this.searchString);return this.keysAnnotationProps.filter((function(t){return e.test(t)}))}},methods:{fetchKeysAnnotationProperties:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["PropertyCollection"].fetchKeysAnnotationProperties(this.project.id);case 2:this.keysAnnotationProps=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchDefaultPropertyProp:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["PropertyCollection"].fetchAll({object:this.project});case 3:t=e.sent.array,this.defaultPropertyProp=t.find((function(e){return e.key===N.DEFAULT_PROPERTY_KEY})),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:this.defaultPropertyProp||(this.defaultPropertyProp=new $["Property"]({key:N.DEFAULT_PROPERTY_KEY,value:""},this.project)),this.searchString=this.defaultPropertyProp.value;case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),confirm:function(){var e=this;!this.keysAnnotationProps.includes(this.searchString)&&this.searchString.length?this.$buefy.dialog.confirm({title:this.$t("confirm-default-property"),message:this.$t("confirm-default-property-not-used-in-project",{key:this.searchString}),type:"is-info",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.save()},onCancel:function(){return e.searchString=e.defaultPropertyProp.value}}):this.save()},save:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.defaultPropertyProp.value=this.searchString,e.prev=1,this.defaultPropertyProp.value.length){e.next=9;break}if(this.defaultPropertyProp.isNew()){e.next=7;break}return e.next=6,this.defaultPropertyProp.delete();case 6:this.defaultPropertyProp=new $["Property"]({key:N.DEFAULT_PROPERTY_KEY,value:""},this.project);case 7:e.next=11;break;case 9:return e.next=11,this.defaultPropertyProp.save();case 11:this.$notify({type:"success",text:this.$t("notif-success-default-property-update")}),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](1),this.$notify({type:"error",text:this.$t("notif-error-default-property-update")});case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.fetchKeysAnnotationProperties(),this.fetchDefaultPropertyProp()]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),this.error=!0;case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()},xl=_l,jl=Object(S["a"])(xl,yl,wl,!1,null,null,null),Cl=jl.exports;function $l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$l(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pl={name:"general-configuration",components:{ProjectActions:Qe,DefaultProperty:Cl},data:function(){return{editingMode:"",blindMode:null,hideManagersLayers:null,hideContributorsLayers:null,imagesDownloadable:null,layerToAdd:null,defaultLayers:[]}},computed:{project:m("currentProject/project"),layers:m("currentProject/members"),currentEditingMode:function(){return this.project.isReadOnly?"READ-ONLY":this.project.isRestricted?"RESTRICTED":"CLASSIC"},selectedLayers:function(){var e=this;return this.defaultLayers.map((function(t){var n=e.layers.find((function(e){return e.id===t.user}));return kl(kl({},t),n)}))},unselectedLayers:function(){var e=this.defaultLayers.map((function(e){return e.user}));return this.layers.filter((function(t){return!e.includes(t.id)}))}},watch:{editingMode:function(e){e!==this.currentEditingMode&&this.updateProject({isReadOnly:"READ-ONLY"===e,isRestricted:"RESTRICTED"===e})},blindMode:function(){this.blindMode!==this.project.blindMode&&this.updateProject({blindMode:this.blindMode})},hideManagersLayers:function(){this.hideManagersLayers!==this.project.hideAdminsLayers&&this.updateProject({hideAdminsLayers:this.hideManagersLayers})},hideContributorsLayers:function(){this.hideContributorsLayers!==this.project.hideUsersLayers&&this.updateProject({hideUsersLayers:this.hideContributorsLayers})},imagesDownloadable:function(){this.imagesDownloadable!==this.project.areImagesDownloadable&&this.updateProject({areImagesDownloadable:this.imagesDownloadable})}},methods:{fullName:function(e){return _e(e)},initData:function(){this.editingMode=this.currentEditingMode,this.blindMode=this.project.blindMode,this.hideManagersLayers=this.project.hideAdminsLayers,this.hideContributorsLayers=this.project.hideUsersLayers,this.imagesDownloadable=this.project.areImagesDownloadable},fetchDefaultLayers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ProjectDefaultLayerCollection"].fetchAll({filterKey:"project",filterValue:this.project.id});case 2:this.defaultLayers=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateProject:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.project.clone(),n.populate(t),e.prev=2,e.next=5,n.save();case 5:this.$store.commit("currentProject/setProject",n),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](2),this.initData(),this.$notify({type:"error",text:this.$t("notif-error-general-config-update")});case 12:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(t){return e.apply(this,arguments)}return t}(),addDefaultLayer:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.layerToAdd){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=new $["ProjectDefaultLayer"]({project:this.project.id,user:this.layerToAdd.id}),e.next=6,t.save();case 6:this.defaultLayers.push(t),this.layerToAdd=null,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),this.$notify({type:"error",text:this.$t("notif-error-default-layer-add")});case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}(),saveDefaultLayer:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.defaultLayers[t].save();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-default-layer-update")});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}(),deleteDefaultLayer:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.defaultLayers[t].delete();case 3:this.defaultLayers.splice(t,1),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-default-layer-delete")});case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}(),externalProjectUpdate:function(e){this.$store.dispatch("currentProject/updateProject",e)},deleteProject:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["Project"].delete(this.project.id);case 3:this.$notify({type:"success",text:this.$t("notif-success-project-deletion",{projectName:this.project.name})}),this.$router.push("/projects"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-project-deletion",{projectName:this.project.name})});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.initData(),this.fetchDefaultLayers();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Ol=Pl,Rl=(n("1617"),Object(S["a"])(Ol,gl,bl,!1,null,"7819b418",null)),Sl=Rl.exports,Tl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-members-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):e.loading?e._e():[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),n("div",{staticClass:"column filter is-one-quarter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("role"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableRoles,multiple:!0,searchable:!1,label:"label","track-by":"value"},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1)]),n("div",{staticClass:"column is-one-half has-text-right-desktop buttons"},[n("button",{staticClass:"button is-link add-member",on:{click:function(t){e.addMemberModal=!0}}},[e._v(" "+e._s(e.$t("button-add-members"))+" ")]),n("button",{staticClass:"button is-danger",attrs:{disabled:0===e.selectedMembers.length},on:{click:function(t){return e.confirmMembersRemoval()}}},[e._v(" "+e._s(e.$t("button-remove-selected-members"))+" ")])])]),n("cytomine-table",{attrs:{collection:e.MemberCollection,currentPage:e.currentPage,perPage:e.perPage,sort:e.sortField,order:e.sortOrder,detailed:!1,checkable:!0,isRowCheckable:function(t){return t.id!==e.currentUser.id},checkedRows:e.selectedMembers,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t},"update:checkedRows":function(t){e.selectedMembers=t},"update:checked-rows":function(t){e.selectedMembers=t}},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{field:"username",label:e.$t("username"),sortable:"",width:"100"}},[e._v(" "+e._s(r.username)+" ")]),n("b-table-column",{attrs:{field:"fullName",label:e.$t("name"),sortable:"",width:"150"}},[e._v(" "+e._s(r.firstname)+" "+e._s(r.lastname)+" ")]),n("b-table-column",{attrs:{field:"projectRole",label:e.$t("role"),sortable:"",width:"50"}},[n("icon-project-member-role",{attrs:{"is-manager":r.role!==e.contributorRole.value,"is-representative":r.role===e.representativeRole.value,editable:""},on:{toggleManager:function(t){return e.confirmToggleManager(r)},toggleRepresentative:function(t){return e.toggleRepresentative(r)}}})],1),n("b-table-column",{attrs:{field:"origin",label:e.$t("source"),centered:"",sortable:"",width:"50"}},[n("span",{staticClass:"tag ldap is-rounded is-info",class:{ldap:r.LDAP}},[e._v(" "+e._s(e.displayMemberOrigin(r))+" ")])]),n("b-table-column",{attrs:{label:"",centered:"",width:"50"}},[n("router-link",{staticClass:"button is-small is-link",attrs:{to:"/project/"+e.project.id+"/activity/user/"+r.id}},[e._v(" "+e._s(e.$t("button-view-activity"))+" ")])],1)]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-member-fitting-criteria")))])])]},proxy:!0},{key:"footer",fn:function(){return[n("div",{staticClass:"has-text-centered"},[n("a",{staticClass:"button is-link",attrs:{href:e.exportURL,target:"_self"}},[e._v(e._s(e.$t("button-export-as-csv")))])])]},proxy:!0}])}),n("div",{staticClass:"legend"},[n("h2",[e._v(e._s(e.$t("legend")))]),n("p",[n("icon-project-member-role"),e._v(" : "+e._s(e.$t("project-contributor")))],1),n("p",[n("icon-project-member-role",{attrs:{"is-manager":!0}}),e._v(" : "+e._s(e.$t("project-manager")))],1),n("p",[n("icon-project-member-role",{attrs:{"is-manager":!0,"is-representative":!0}}),e._v(" : "+e._s(e.$t("project-representative")))],1)]),n("add-member-modal",{attrs:{active:e.addMemberModal},on:{"update:active":function(t){e.addMemberModal=t},addMembers:function(t){return e.refreshMembers()}}})]],2)},Al=[],Dl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("cytomine-modal",{attrs:{active:e.active,title:e.$t("add-members-to-project")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",on:{click:e.addMembers}},[e._v(" "+e._s(e.$t("button-add"))+" ")])]},proxy:!0}])},[n("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[n("b-field",[n("domain-tag-input",{attrs:{domains:e.notMemberUsers,placeholder:"search-user",displayedProperty:"fullName",searchedProperty:"fullName"},model:{value:e.selectedMembers,callback:function(t){e.selectedMembers=t},expression:"selectedMembers"}})],1)]],2)},Ml=[],El={name:"add-member-modal",props:{active:Boolean},components:{CytomineModal:Ve,DomainTagInput:Mt},data:function(){return{loading:!0,users:[],selectedMembers:[]}},computed:{project:m("currentProject/project"),projectMembersIds:function(){var e=this.$store.state.currentProject.members,t=e.concat(this.selectedMembers);return t.map((function(e){return e.id}))},notMemberUsers:function(){var e=this;return this.users.filter((function(t){return!e.projectMembersIds.includes(t.id)}))}},watch:{active:function(){this.selectedMembers=[]}},methods:{addMembers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.project.addUsers(this.selectedMembers.map((function(e){return e.id})));case 3:this.$emit("addMembers"),this.$notify({type:"success",text:this.$t("notif-success-add-project-members")}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-add-project-members")});case 10:this.$emit("update:active",!1);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["UserCollection"].fetchAll();case 2:t=e.sent.array,t.forEach((function(e){return e.fullName=_e(e)})),this.users=t,this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Il=El,Nl=(n("db79"),Object(S["a"])(Il,Dl,Ml,!1,null,"8b4d078a",null)),Ul=Nl.exports,Fl={name:"projet-members",components:{IconProjectMemberRole:yn,CytomineTable:Y,CytomineMultiselect:ae,AddMemberModal:Ul},data:function(){return{loading:!0,error:!1,addMemberModal:!1,currentPage:1,perPage:25,sortField:"",sortOrder:"",searchString:"",contributorRole:{label:this.$t("contributor"),value:"contributor"},managerRole:{label:this.$t("manager"),value:"manager"},representativeRole:{label:this.$t("representative"),value:"representative"},availableRoles:[],selectedRoles:[],selectedMembers:[],revision:0}},computed:{currentUser:m("currentUser/user"),project:m("currentProject/project"),MemberCollection:function(){var e=new $["UserCollection"]({filterKey:"project",filterValue:this.project.id});return this.selectedRoles.length>0&&(e["projectRole"]={in:this.selectedRoles.map((function(e){return e.value})).join()}),this.searchString&&(e["fullName"]={ilike:encodeURIComponent(this.searchString)}),e},exportURL:function(){return $["Cytomine"].instance.host+$["Cytomine"].instance.basePath+"project/".concat(this.project.id,"/user/download?format=csv")}},methods:{displayMemberOrigin:function(e){var t;return"LDAP"===e.origin&&(t="LDAP"),t="BOOTSTRAP"===e.origin?"system":"manual",this.$t(t)},refreshMembers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.revision++,e.next=4,this.$store.dispatch("currentProject/fetchProjectMembers");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.error=!0;case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),confirmMembersRemoval:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("remove-members"),message:this.$tc("remove-members-confirmation-message",this.selectedMembers.length,{count:this.selectedMembers.length,username:_e(this.selectedMembers[0])}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.removeSelectedMembers()}})},removeSelectedMembers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.project.deleteUsers(this.selectedMembers.map((function(e){return e.id})));case 3:return e.next=5,this.refreshMembers();case 5:this.$notify({type:"success",text:this.$t("notif-success-remove-project-members")}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-remove-project-members")});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),confirmToggleManager:function(e){var t=this;e.id===this.currentUser.id&&e.role!==this.contributorRole.value?this.$buefy.dialog.confirm({title:this.$t("remove-yourself-from-manager"),message:this.$tc("remove-yourself-from-manager-confirmation-message"),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.toggleManager(e)}}):this.toggleManager(e)},toggleManager:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.role===this.contributorRole.value){e.next=9;break}if(t.role!=this.representativeRole.value){e.next=5;break}return e.next=5,$["ProjectRepresentative"].delete(0,this.project.id,t.id);case 5:return e.next=7,this.project.deleteAdmin(t.id);case 7:e.next=11;break;case 9:return e.next=11,this.project.addAdmin(t.id);case 11:if(this.revision++,t.id!==this.currentUser.id){e.next=16;break}return e.next=15,this.$store.dispatch("currentProject/fetchUIConfig");case 15:this.$store.state.currentProject.configUI["project-configuration-tab"]||this.$router.push("/project/".concat(this.project.id));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-change-role",{username:_e(t)})});case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));function t(t){return e.apply(this,arguments)}return t}(),toggleRepresentative:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.role!==this.representativeRole.value){e.next=6;break}return e.next=4,$["ProjectRepresentative"].delete(0,this.project.id,t.id);case 4:e.next=8;break;case 6:return e.next=8,new $["ProjectRepresentative"]({user:t.id,project:this.project.id}).save();case 8:this.revision++,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-change-role",{username:_e(t)})});case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.availableRoles=[this.contributorRole,this.managerRole,this.representativeRole],this.selectedRoles=this.availableRoles,this.revision++,this.loading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Ll=Fl,ql=(n("e201"),n("4b0c"),Object(S["a"])(Ll,Tl,Al,!1,null,"725f628c",null)),zl=ql.exports,Vl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):e.loading?e._e():n("table",{staticClass:"table custom-ui"},e._l(e.customUITree,(function(t){return n("tbody",{key:t.label},[n("tr",[n("th",{attrs:{colspan:"3"}},[e._v(e._s(e.$t(t.label)))])]),e._l(t.props,(function(t){return n("tr",{key:t.key},[n("td",[t.superscript?n("i",{staticClass:"superscript",class:t.superscript}):e._e(),t.icon||t.iconComponent?n("span",{staticClass:"icon"},[t.icon?n("i",{class:t.icon}):n(t.iconComponent,{tag:"component"})],1):e._e(),e._v(" "+e._s(e.$t(t.label))+" ")]),n("td",[n("button",{class:["button",e.customUI[t.key]&&e.customUI[t.key].ADMIN_PROJECT&&!e.isParentDisabled(t,"ADMIN_PROJECT")?"is-success":"is-danger"],attrs:{disabled:e.isParentDisabled(t,"ADMIN_PROJECT")||"project-configuration-tab"===t.key},on:{click:function(n){return e.toggleProp(t.key,"ADMIN_PROJECT")}}},[e._v(" "+e._s(e.$t("manager"))+" ")])]),n("td",[n("button",{class:["button",e.customUI[t.key]&&e.customUI[t.key].CONTRIBUTOR_PROJECT&&!e.isParentDisabled(t,"CONTRIBUTOR_PROJECT")?"is-success":"is-danger"],attrs:{disabled:e.isParentDisabled(t,"CONTRIBUTOR_PROJECT")||"project-configuration-tab"===t.key},on:{click:function(n){return e.toggleProp(t.key,"CONTRIBUTOR_PROJECT")}}},[e._v(" "+e._s(e.$t("contributor"))+" ")])])])}))],2)})),0)},Bl=[],Wl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{"xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:cc":"http://creativecommons.org/ns#","xmlns:rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape",width:"4mm",height:"4mm",viewBox:"0 0 14.173228 14.173229",id:"svg2",version:"1.1","inkscape:version":"0.91 r13725","sodipodi:docname":"free-polygon.svg"}},[n("defs",{attrs:{id:"defs4"}}),n("sodipodi:namedview",{attrs:{id:"base",pagecolor:"#ffffff",bordercolor:"#666666",borderopacity:"1.0","inkscape:pageopacity":"0.0","inkscape:pageshadow":"2","inkscape:zoom":"52.572505","inkscape:cx":"9.7957273","inkscape:cy":"6.9348154","inkscape:document-units":"px","inkscape:current-layer":"layer1",showgrid:"false","inkscape:window-width":"1855","inkscape:window-height":"1056","inkscape:window-x":"65","inkscape:window-y":"24","inkscape:window-maximized":"1","fit-margin-top":"0","fit-margin-left":"0","fit-margin-right":"0","fit-margin-bottom":"0"}}),n("metadata",{attrs:{id:"metadata7"}},[n("rdf:RDF",[n("cc:Work",{attrs:{"rdf:about":""}},[n("dc:format",[e._v("image/svg+xml")]),n("dc:type",{attrs:{"rdf:resource":"http://purl.org/dc/dcmitype/StillImage"}}),n("dc:title")],1)],1)],1),n("g",{attrs:{"inkscape:label":"Layer 1","inkscape:groupmode":"layer",id:"layer1",transform:"translate(-27.016003,-31.914518)"}},[n("path",{staticStyle:{fill:"none","fill-rule":"evenodd","stroke-width":"1.30416775","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"},attrs:{stroke:"#000000",d:"m 38.949622,43.986228 c 1.403938,-1.500316 -3.266544,-2.492688 0.146877,-5.771595 2.156977,-2.071976 -2.231271,-4.068703 -4.032879,-3.734999 -1.435084,0.265814 0.161219,2.123932 -1.933719,3.928337 -2.094933,1.804405 -4.714354,-0.508566 -4.747541,2.161303 -0.03833,3.084086 9.163323,4.917269 10.567262,3.416954 z",id:"path4186","inkscape:connector-curvature":"0","sodipodi:nodetypes":"zsazsz"}})])],1)},Jl=[],Hl={name:"icon-polygon-free-hand"},Gl=Hl,Kl=Object(S["a"])(Gl,Wl,Jl,!1,null,null,null),Yl=Kl.exports,Zl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{"xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:cc":"http://creativecommons.org/ns#","xmlns:rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape",width:"4mm",height:"4mm",viewBox:"0 0 14.173228 14.173229",id:"svg2",version:"1.1","inkscape:version":"0.91 r13725","sodipodi:docname":"free-line.svg"}},[n("defs",{attrs:{id:"defs4"}}),n("sodipodi:namedview",{attrs:{id:"base",pagecolor:"#ffffff",bordercolor:"#666666",borderopacity:"1.0","inkscape:pageopacity":"0.0","inkscape:pageshadow":"2","inkscape:zoom":"52.572505","inkscape:cx":"1.7591916","inkscape:cy":"6.9664237","inkscape:document-units":"px","inkscape:current-layer":"layer1",showgrid:"false","inkscape:window-width":"1855","inkscape:window-height":"1056","inkscape:window-x":"65","inkscape:window-y":"24","inkscape:window-maximized":"1","fit-margin-top":"0","fit-margin-left":"0","fit-margin-right":"0","fit-margin-bottom":"0"}}),n("metadata",{attrs:{id:"metadata7"}},[n("rdf:RDF",[n("cc:Work",{attrs:{"rdf:about":""}},[n("dc:format",[e._v("image/svg+xml")]),n("dc:type",{attrs:{"rdf:resource":"http://purl.org/dc/dcmitype/StillImage"}}),n("dc:title")],1)],1)],1),n("g",{attrs:{"inkscape:label":"Layer 1","inkscape:groupmode":"layer",id:"layer1",transform:"translate(-27.016003,-31.914518)"}},[n("path",{staticStyle:{fill:"none","fill-rule":"evenodd","stroke-width":"1.36583543","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"},attrs:{stroke:"#000000",d:"m 28.507424,40.008532 c 0,0 2.07514,5.220154 3.70608,4.821065 2.487226,-0.608621 1.213333,-9.083876 3.706081,-9.642132 1.676478,-0.375451 3.706081,5.096557 3.706081,5.096557",id:"path4148","inkscape:connector-curvature":"0","sodipodi:nodetypes":"cssc"}})])],1)},Xl=[],Ql={name:"icon-line-free-hand"},eu=Ql,tu=Object(S["a"])(eu,Zl,Xl,!1,null,null,null),nu=tu.exports,ru={name:"custom-ui-project",data:function(){return{loading:!0,error:!1,customUI:{},customUITree:[{label:"project-side-bar",props:[{key:"project-images-tab",label:"images",icon:"far fa-images"},{key:"project-annotations-tab",label:"annotations",icon:"far fa-edit"},{key:"project-jobs-tab",label:"analysis",icon:"fas fa-tasks"},{key:"project-activities-tab",label:"activity",icon:"fas fa-tachometer-alt"},{key:"project-information-tab",label:"information",icon:"fas fa-info-circle"},{key:"project-configuration-tab",label:"configuration",icon:"fas fa-cogs"}]},{label:"image-details",props:[{key:"project-explore-image-overview",label:"overview",icon:"fas fa-image"},{key:"project-explore-image-description",label:"description",icon:"far fa-file-alt"},{key:"project-explore-image-tags",label:"tags",icon:"fas fa-bookmark"},{key:"project-explore-image-properties",label:"properties",icon:"fas fa-tag"},{key:"project-explore-image-attached-files",label:"attached-files",icon:"fas fa-paperclip"},{key:"project-explore-image-slide-preview",label:"slide-preview",icon:"fas fa-image"},{key:"project-explore-image-original-filename",label:"originalFilename",icon:"fas fa-info"}]},{label:"viewer-panels",props:[{key:"project-explore-hide-tools",label:"all-panels"},{key:"project-explore-overview",label:"overview",icon:"fas fa-image",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-info",label:"information",icon:"fas fa-info",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-digital-zoom",label:"digital-zoom",icon:"fas fa-search",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-link",label:"link-images",icon:"fas fa-link",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-color-manipulation",label:"colors",icon:"fas fa-adjust",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-image-layers",label:"annotation-layers",icon:"fas fa-copy",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-ontology",label:"ontology",icon:"fas fa-hashtag",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-property",label:"properties",icon:"fas fa-tag",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-follow",label:"broadcast",icon:"fas fa-street-view",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-review",label:"review",icon:"fas fa-check-circle",parentConfiguration:"project-explore-hide-tools"}]},{label:"annotation-details",props:[{key:"project-explore-annotation-main",label:"annotation-details-box"},{key:"project-explore-annotation-geometry-info",label:"geometry-info",icon:"fas fa-ruler-combined",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-description",label:"description",icon:"far fa-file-alt",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-terms",label:"terms",icon:"fas fa-hashtag",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-tags",label:"tags",icon:"fas fa-bookmark",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-properties",label:"properties",icon:"fas fa-tag",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-attached-files",label:"attached-files",icon:"fas fa-paperclip",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-creation-info",label:"creation-info",icon:"fas fa-info",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-comments",label:"comments",icon:"fas fa-comment",parentConfiguration:"project-explore-annotation-main"}]},{label:"draw-tools",props:[{key:"project-tools-main",label:"all-draw-tools"},{key:"project-tools-select",label:"select",icon:"fas fa-mouse-pointer",parentConfiguration:"project-tools-main"},{key:"project-tools-point",label:"point",icon:"fas fa-map-marker-alt",parentConfiguration:"project-tools-main"},{key:"project-tools-line",label:"line",icon:"fas fa-minus",parentConfiguration:"project-tools-main"},{key:"project-tools-freehand-line",label:"freehand-line",iconComponent:nu,parentConfiguration:"project-tools-main"},{key:"project-tools-rectangle",label:"rectangle",icon:"far fa-square",parentConfiguration:"project-tools-main"},{key:"project-tools-circle",label:"circle",icon:"far fa-circle",parentConfiguration:"project-tools-main"},{key:"project-tools-polygon",label:"polygon",icon:"fas fa-draw-polygon",parentConfiguration:"project-tools-main"},{key:"project-tools-freehand-polygon",label:"freehand-polygon",iconComponent:Yl,parentConfiguration:"project-tools-main"},{key:"project-tools-union",label:"freehand-correct-add",icon:"fas fa-pencil-alt",superscript:"fas fa-plus",parentConfiguration:"project-tools-main"},{key:"project-tools-diff",label:"freehand-correct-remove",icon:"fas fa-pencil-alt",superscript:"fas fa-minus",parentConfiguration:"project-tools-main"},{key:"project-tools-fill",label:"fill",icon:"fas fa-fill",parentConfiguration:"project-tools-main"},{key:"project-tools-edit",label:"modify",icon:"fas fa-edit",parentConfiguration:"project-tools-main"},{key:"project-tools-move",label:"move",icon:"fas fa-arrows-alt",parentConfiguration:"project-tools-main"},{key:"project-tools-rotate",label:"rotate",icon:"fas fa-sync-alt",parentConfiguration:"project-tools-main"},{key:"project-tools-delete",label:"delete",icon:"fas fa-trash-alt",parentConfiguration:"project-tools-main"},{key:"project-tools-undo-redo",label:"undo-redo",icon:"fas fa-undo",parentConfiguration:"project-tools-main"}]}]}},computed:{project:m("currentProject/project")},methods:{toggleProp:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.customUI[t][n]=!this.customUI[t][n],e.next=4,this.project.saveUIConfig(this.customUI);case 4:this.customUI=e.sent,this.$store.dispatch("currentProject/fetchUIConfig"),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),this.customUI[t][n]=!this.customUI[t][n],this.$notify({type:"error",text:this.$t("notif-error-custom-ui-change")});case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,n){return e.apply(this,arguments)}return t}(),isParentDisabled:function(e,t){return e.parentConfiguration&&!1===this.customUI[e.parentConfiguration][t]}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.project.fetchUIConfig();case 3:this.customUI=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.error=!0;case 9:this.loading=!1;case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},au=ru,iu=(n("c96a"),n("54d3"),Object(S["a"])(au,Vl,Bl,!1,null,"909a1542",null)),su=iu.exports,ou=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"project-softwares-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):e.loading?e._e():[n("b-input",{staticClass:"search-field",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),n("b-table",{attrs:{data:e.filteredSoftwares,"default-sort":"selected","default-sort-direction":"desc",paginated:!0,"per-page":e.perPage,"pagination-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:"",width:"100"}},[n("router-link",{attrs:{to:"/software/"+r.id}},[e._v(" "+e._s(r.fullName)+" ")])],1),n("b-table-column",{attrs:{field:"softwareStatus",label:e.$t("version"),centered:"",sortable:"",width:"100","custom-sort":e.sortBySoftwareStatus}},[n("software-status",{attrs:{software:r}})],1),n("b-table-column",{attrs:{field:"executable",label:e.$t("ui-runnable"),centered:"",sortable:"",width:"100"}},[n("boolean-item",{attrs:{value:r.executable}})],1),n("b-table-column",{attrs:{field:"selected",label:e.$t("status"),sortable:"",width:"100"}},[n("button",{class:["button",r.selected?"is-success":"is-danger"],attrs:{disabled:e.loadingToggleSoftware[r.id]},on:{click:function(t){return e.toggleSoftware(r)}}},[e._v(" "+e._s(e.$t(r.selected?"enabled":"disabled"))+" ")])])]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-algorithm")))])])]},proxy:!0},{key:"bottom-left",fn:function(){return[n("b-select",{attrs:{size:"is-small"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[n("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),n("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),n("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),n("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}])})]],2)},cu=[],lu={name:"project-softwares",components:{BooleanItem:Xr,SoftwareStatus:Jr},data:function(){return{loading:!0,error:!1,searchString:"",perPage:10,softwares:[],loadingToggleSoftware:{}}},computed:{project:m("currentProject/project"),filteredSoftwares:function(){var e=St(this.searchString);return this.softwares.filter((function(t){return e.test(t.name)}))}},methods:{toggleSoftware:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.$set(this.loadingToggleSoftware,t.id,!0),!t.selected){e.next=8;break}return e.next=5,t.softwareProject.delete();case 5:t.selected=!1,e.next=13;break;case 8:return e.next=10,new $["SoftwareProject"]({software:t.id,project:this.project.id}).save();case 10:n=e.sent,t.softwareProject=n,t.selected=!0;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-change-status-algorithm-project",{softwareName:t.name})});case 18:this.$set(this.loadingToggleSoftware,t.id,!1);case 19:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}(),sortBySoftwareStatus:function(e,t,n){return(n?1:-1)*(this.getSoftwareStatusValue(e)-this.getSoftwareStatusValue(t))},getSoftwareStatusValue:function(e){return e.softwareVersion?e.deprecated?1:2:0}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=$["SoftwareCollection"].fetchAll(),n=$["SoftwareProjectCollection"].fetchAll({filterKey:"project",filterValue:this.project.id}),e.next=5,t;case 5:return r=e.sent.array,e.next=8,n;case 8:a=e.sent.array,r.forEach((function(e){e.softwareProject=a.find((function(t){return t.software===e.id})),e.selected=void 0!==e.softwareProject})),this.softwares=r,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),this.error=!0;case 16:this.loading=!1;case 17:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(){return e.apply(this,arguments)}return t}()},uu=lu,du=(n("1f4a"),n("a3ed"),Object(S["a"])(uu,ou,cu,!1,null,"6a89c4dc",null)),pu=du.exports,mu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"project-image-filters-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):e.loading?e._e():[n("b-input",{staticClass:"search-field",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),n("b-table",{attrs:{data:e.filteredImageFilters,"default-sort":"selected","default-sort-direction":"desc",paginated:!0,"per-page":e.perPage,"pagination-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:""}},[e._v(" "+e._s(r.name)+" ")]),n("b-table-column",{attrs:{field:"selected",label:e.$t("status"),sortable:""}},[n("button",{class:["button",r.selected?"is-success":"is-danger"],on:{click:function(t){return e.toggleFilter(r)}}},[e._v(" "+e._s(e.$t(r.selected?"enabled":"disabled"))+" ")])])]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-image-filter")))])])]},proxy:!0},{key:"bottom-left",fn:function(){return[n("b-select",{attrs:{size:"is-small"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[n("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),n("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),n("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),n("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}])})]],2)},fu=[],hu={name:"project-image-filters",data:function(){return{loading:!0,error:!1,searchString:"",perPage:10,imageFilters:[]}},computed:{project:m("currentProject/project"),filteredImageFilters:function(){var e=St(this.searchString);return this.imageFilters.filter((function(t){return e.test(t.name)}))}},methods:{toggleFilter:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.selected){e.next=7;break}return e.next=4,t.imageFilterProject.delete();case 4:t.selected=!1,e.next=12;break;case 7:return e.next=9,new $["ImageFilterProject"]({imageFilter:t.id,project:this.project.id}).save();case 9:n=e.sent,t.imageFilterProject=n,t.selected=!0;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-change-status-image-filter-project",{filterName:t.name})});case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=$["ImageFilterCollection"].fetchAll(),n=$["ImageFilterProjectCollection"].fetchAll({filterKey:"project",filterValue:this.project.id}),e.next=5,t;case 5:return r=e.sent.array,e.next=8,n;case 8:a=e.sent.array,r.forEach((function(e){e.imageFilterProject=a.find((function(t){return t.imageFilter===e.id})),e.selected=void 0!==e.imageFilterProject})),this.imageFilters=r,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),this.error=!0;case 16:this.loading=!1;case 17:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(){return e.apply(this,arguments)}return t}()},vu=hu,gu=(n("e658"),n("5f1c2"),Object(S["a"])(vu,mu,fu,!1,null,"038381ec",null)),bu=gu.exports,yu="general",wu={name:"project-configuration",data:function(){return{activeTab:yu}},computed:{configUI:m("currentProject/configUI"),queriedTab:function(){return this.$route.query.tab},activeComponent:function(){switch(this.activeTab){case"general":return Sl;case"members":return zl;case"customUI":return su;case"algorithms":return pu;case"imageFilters":return bu}}},watch:{queriedTab:function(){this.changeTab()},activeTab:function(){(this.activeTab!==yu||this.queriedTab)&&this.$router.push("?tab=".concat(this.activeTab))}},methods:{changeTab:function(){this.activeTab=this.$route.query.tab||yu,this.activeComponent||(this.activeTab=yu)}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.changeTab();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},_u=wu,xu=(n("0b4e"),Object(S["a"])(_u,hl,vl,!1,null,"7bd523cb",null)),ju=xu.exports,Cu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[n("i",{staticClass:"fas fa-user",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("profile"))+" ")]),n("div",{staticClass:"panel-block"},[n("form",{attrs:{"data-vv-scope":"profile"},on:{submit:function(t){return t.preventDefault(),e.editDetails()}}},[n("b-field",{attrs:{label:e.$t("username"),horizontal:""}},[n("b-input",{attrs:{value:e.currentUser.username,disabled:""}})],1),n("b-field",{attrs:{label:e.$t("role"),horizontal:""}},[n("span",{staticClass:"tag",class:e.role.class},[e._v(e._s(e.$t(e.role.label)))])]),n("b-field",{attrs:{label:e.$t("lastname"),horizontal:"",type:{"is-danger":e.errors.has("profile.lastname")},message:e.errors.first("profile.lastname")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"lastname"},model:{value:e.updatedUser.lastname,callback:function(t){e.$set(e.updatedUser,"lastname",t)},expression:"updatedUser.lastname"}})],1),n("b-field",{attrs:{label:e.$t("firstname"),horizontal:"",type:{"is-danger":e.errors.has("profile.firstname")},message:e.errors.first("profile.firstname")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"firstname"},model:{value:e.updatedUser.firstname,callback:function(t){e.$set(e.updatedUser,"firstname",t)},expression:"updatedUser.firstname"}})],1),n("b-field",{attrs:{label:e.$t("email"),horizontal:"",type:{"is-danger":e.errors.has("profile.email")},message:e.errors.first("profile.email")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{name:"email"},model:{value:e.updatedUser.email,callback:function(t){e.$set(e.updatedUser,"email",t)},expression:"updatedUser.email"}})],1),n("b-field",{attrs:{label:e.$t("language"),horizontal:""}},[n("b-select",{model:{value:e.updatedUser.language,callback:function(t){e.$set(e.updatedUser,"language",t)},expression:"updatedUser.language"}},e._l(e.languages,(function(t){var r=t.value,a=t.name;return n("option",{key:r,domProps:{value:r}},[e._v(" "+e._s(a)+" ")])})),0)],1),n("b-field",{attrs:{grouped:"",position:"is-right"}},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any("profile")}},[e._v(" "+e._s(e.$t("button-save")))])])])],1)])]),n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[n("i",{staticClass:"fas fa-briefcase",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("password"))+" ")]),n("div",{staticClass:"panel-block"},[n("form",{attrs:{"data-vv-scope":"password"},on:{submit:function(t){return t.preventDefault(),e.savePassword()}}},[n("input",{staticClass:"hidden",attrs:{id:"password",type:"password"}}),e._v(" "),e.currentUser.passwordExpired?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("password-expired-info-message"))+" ")]):n("b-field",{attrs:{label:e.$t("password-current"),horizontal:"",type:e.typeCurrentPassword,message:e.messageCurrentPassword}},[n("b-input",{attrs:{type:"password",loading:e.isCheckingPassword},model:{value:e.currentPassword,callback:function(t){e.currentPassword=t},expression:"currentPassword"}})],1),n("b-field",{attrs:{label:e.$t("password-new"),horizontal:"",type:{"is-danger":e.errors.has("password.newPassword")},message:e.errors.first("password.newPassword")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:8",expression:"'required|min:8'"}],attrs:{type:"password",name:"newPassword",disabled:e.newPasswordDisabled},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1),n("b-field",{attrs:{label:e.$t("password-confirm"),horizontal:"",type:{"is-danger":e.errors.has("password.confirmPassword")},message:e.errors.first("password.confirmPassword")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,is:e.newPassword},expression:"{required: true, is: newPassword}"}],attrs:{type:"password",name:"confirmPassword",disabled:e.newPasswordDisabled},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1),n("b-field",{attrs:{grouped:"",position:"is-right"}},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any("password")||e.newPasswordDisabled}},[e._v(" "+e._s(e.$t("button-save"))+" ")])])])],1)])]),n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[n("i",{staticClass:"fas fa-exchange-alt",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("api-keys"))+" ")]),n("div",{staticClass:"panel-block"},[n("b-field",{attrs:{label:e.$t("public-key"),horizontal:""}},[n("b-field",[n("b-input",{attrs:{value:e.currentUser.publicKey,readonly:"",expanded:""}}),n("p",{staticClass:"control"},[n("button",{staticClass:"button",on:{click:function(t){return e.copy(e.currentUser.publicKey)}}},[n("span",{staticClass:"icon"},[n("i",{staticClass:"far fa-clipboard"})]),n("span",[e._v(e._s(e.$t("button-copy")))])])])],1)],1),n("b-field",{attrs:{label:e.$t("private-key"),horizontal:""}},[n("b-field",[n("b-input",{attrs:{value:e.currentUser.privateKey,readonly:"",expanded:""}}),n("p",{staticClass:"control"},[n("button",{staticClass:"button",on:{click:function(t){return e.copy(e.currentUser.privateKey)}}},[n("span",{staticClass:"icon"},[n("i",{staticClass:"far fa-clipboard"})]),n("span",[e._v(e._s(e.$t("button-copy")))])])])],1)],1),n("b-field",{attrs:{grouped:"",position:"is-right"}},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-link",on:{click:function(t){return e.regenerateKeys()}}},[e._v(e._s(e.$t("regenerate-api-keys")))])])])],1)])])},$u=[],ku=n("a925");r["default"].use(ku["a"]);var Pu=new ku["a"]({locale:"en",fallbackLocale:"en",messages:{en:n("9ae5"),fr:n("1c71")}}),Ou={methods:{changeLanguage:function(e){e=e||this.$i18n.fallbackLocale;var t=e.toLowerCase();this.$i18n.locale=t,this.$moment.locale(t)}}},Ru=Object.freeze({ROLE_GUEST:{label:"guest",index:0,class:"is-light"},ROLE_USER:{label:"user",index:1,class:"is-link"},ROLE_ADMIN:{label:"admin",index:2,class:"is-success"},ROLE_SUPER_ADMIN:{label:"super-admin",index:3,class:"is-success"}}),Su={name:"Account",$_veeValidate:{validator:"new"},mixins:[Ou],data:function(){return{updatedUser:this.$store.state.currentUser.user.clone(),currentPassword:"",isCheckingPassword:!1,correctPassword:!1,newPassword:"",confirmPassword:"",languages:[{value:"EN",name:"English"},{value:"FR",name:"Français"}]}},computed:{currentUser:m("currentUser/user"),role:function(){var e=this.currentUser.guestByNow?"ROLE_GUEST":this.currentUser.adminByNow?"ROLE_ADMIN":"ROLE_USER";return Ru[e]},newPasswordDisabled:function(){return!this.correctPassword&&!this.currentUser.passwordExpired},messageCurrentPassword:function(){if(this.currentPassword&&!this.isCheckingPassword)return this.correctPassword?"":this.$t("invalid-password")},typeCurrentPassword:function(){if(this.currentPassword&&!this.isCheckingPassword)return this.correctPassword?"is-success":"is-danger"}},watch:{currentPassword:function(){this.isCheckingPassword=!0,this.checkPassword()}},methods:{editDetails:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll("profile");case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,this.$store.dispatch("currentUser/updateUser",this.updatedUser);case 8:this.changeLanguage(this.currentUser.language),this.$notify({type:"success",text:this.$t("notif-success-user-details-saved")}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](5),this.$notify({type:"error",text:this.$t("notif-error-user-details-not-saved")});case 15:case"end":return e.stop()}}),e,this,[[5,12]])})));function t(){return e.apply(this,arguments)}return t}(),savePassword:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll("password");case 2:if(t=e.sent,t&&(this.correctPassword||this.currentUser.passwordExpired)){e.next=5;break}return e.abrupt("return");case 5:return n=this.currentUser.clone(),n.password=this.newPassword,e.prev=7,e.next=10,this.$store.dispatch("currentUser/updateUser",n);case 10:this.$notify({type:"success",text:this.$t("notif-success-password-saved")}),this.currentPassword="",this.newPassword="",this.confirmPassword="",this.$validator.reset({scope:"password"}),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](7),this.$notify({type:"error",text:this.$t("notif-error-password-not-saved")});case 20:case"end":return e.stop()}}),e,this,[[7,17]])})));function t(){return e.apply(this,arguments)}return t}(),checkPassword:u.a.debounce(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["User"].checkCurrentPassword(this.currentPassword);case 2:this.correctPassword=e.sent,this.correctPassword||(this.newPassword="",this.confirmPassword="",this.$validator.reset({scope:"password"})),this.isCheckingPassword=!1;case 5:case"end":return e.stop()}}),e,this)}))),500),copy:function(e){ns()(e),this.$notify({type:"success",text:this.$t("notif-success-key-copied")})},regenerateKeys:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("currentUser/regenerateKeys");case 3:this.$notify({type:"success",text:this.$t("notif-success-keys-regenerated")}),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-keys-not-regenerated")});case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()}},Tu=Su,Au=(n("24e5"),Object(S["a"])(Tu,Cu,$u,!1,null,"9705f78a",null)),Du=Au.exports,Mu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.error?n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(e._s(e.$t("unexpected-error-info-message")))])]):n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"panel"},[n("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("advanced-search"))+" ")]),n("div",{staticClass:"panel-block"},[n("div",{staticClass:"search-block"},[n("b-input",{staticClass:"search-projects",attrs:{value:e.searchString,placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},on:{input:e.debounceSearchString}})],1),n("b-collapse",{attrs:{open:""}},[n("div",{staticClass:"filters"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column filter"},[n("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("tags"))+" ")]),n("div",{staticClass:"filter-body"},[n("cytomine-multiselect",{attrs:{options:e.availableTags,label:"name","track-by":"id",multiple:!0,allPlaceholder:e.$t("all")},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)]),n("div",{staticClass:"column filter"}),n("div",{staticClass:"column filter"})])])])],1),n("p",{staticClass:"panel-tabs"},[n("a",{class:{"is-active":"projects"===e.activeTab},on:{click:function(t){e.activeTab="projects"}}},[e._v(" "+e._s(e.$t("projects"))+" ("+e._s(this.projects.totalNbItems)+") ")]),n("a",{class:{"is-active":"images"===e.activeTab},on:{click:function(t){e.activeTab="images"}}},[e._v(" "+e._s(e.$t("images"))+" ("+e._s(this.images.totalNbItems)+") ")])]),n("div",{staticClass:"panel-block"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),n("div",{directives:[{name:"show",rawName:"v-show",value:"projects"===e.activeTab,expression:"activeTab === 'projects'"}],key:"projects"},[n("cytomine-table",{staticClass:"table-projects",attrs:{collection:e.projectCollection,currentPage:e.currentPage,perPage:e.perPage,openedDetailed:e.openedDetails,sort:e.sortField,order:e.sortOrder,data:e.projects,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t},"update:data":function(t){e.projects=t}},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{field:"currentUserRole",label:"",centered:"",width:"1",sortable:""}},[n("icon-project-member-role",{attrs:{"is-manager":r.currentUserRoles.admin,"is-representative":r.currentUserRoles.representative}})],1),n("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:"",width:"250"}},[n("router-link",{attrs:{to:"/project/"+r.id}},[e._v(" "+e._s(r.name)+" ")])],1),n("b-table-column",{attrs:{field:"membersCount",label:e.$t("members"),centered:"",sortable:"",width:"150"}},[e._v(" "+e._s(r.membersCount)+" ")]),n("b-table-column",{attrs:{field:"numberOfImages",label:e.$t("images"),centered:"",sortable:"",width:"150"}},[n("router-link",{attrs:{to:"/project/"+r.id+"/images"}},[e._v(e._s(r.numberOfImages))])],1),n("b-table-column",{attrs:{field:"numberOfAnnotations",label:e.$t("user-annotations"),centered:"",sortable:"",width:"150"}},[n("router-link",{attrs:{to:"/project/"+r.id+"/annotations?type=user"}},[e._v(" "+e._s(r.numberOfAnnotations)+" ")])],1),n("b-table-column",{attrs:{field:"numberOfJobAnnotations",label:e.$t("analysis-annotations"),centered:"",sortable:"",width:"150"}},[n("router-link",{attrs:{to:"/project/"+r.id+"/annotations?type=algo"}},[e._v(" "+e._s(r.numberOfJobAnnotations)+" ")])],1),n("b-table-column",{attrs:{field:"numberOfReviewedAnnotations",label:e.$t("reviewed-annotations"),centered:"",sortable:"",width:"150"}},[n("router-link",{attrs:{to:"/project/"+r.id+"/annotations?type=reviewed"}},[e._v(" "+e._s(r.numberOfReviewedAnnotations)+" ")])],1),n("b-table-column",{attrs:{field:"lastActivity",label:e.$t("last-activity"),centered:"",sortable:"",width:"180"}},[e._v(" "+e._s(e._f("moment")(Number(r.lastActivity),"ll"))+" ")]),n("b-table-column",{attrs:{label:" ",centered:"",width:"150"}},[n("router-link",{staticClass:"button is-small is-link",attrs:{to:"/project/"+r.id}},[e._v(" "+e._s(e.$t("button-open"))+" ")])],1)]}},{key:"detail",fn:function(t){var r=t.row;return[n("project-details",{attrs:{project:r,"excluded-properties":e.excludedProperties},on:{update:function(t){return e.updateProject()},delete:function(t){return e.deleteProject(r)}}})]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-project")))])])]},proxy:!0}])}),n("div",{staticClass:"legend"},[n("h2",[e._v(e._s(e.$t("legend")))]),n("p",[n("icon-project-member-role"),e._v(" : "+e._s(e.$t("contributor-icon-label")))],1),n("p",[n("icon-project-member-role",{attrs:{"is-manager":!0}}),e._v(" : "+e._s(e.$t("manager-icon-label")))],1),n("p",[n("icon-project-member-role",{attrs:{"is-manager":!0,"is-representative":!0}}),e._v(" : "+e._s(e.$t("representative-icon-label")))],1)])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"images"===e.activeTab,expression:"activeTab === 'images'"}],key:"images"},[n("cytomine-table",{attrs:{collection:e.imageCollection,currentPage:e.currentPage,perPage:e.perPage,openedDetailed:e.openedDetails,sort:e.sortField,order:e.sortOrder,data:e.images,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t},"update:data":function(t){e.images=t}},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{label:e.$t("overview"),width:"100"}},[n("router-link",{attrs:{to:"/project/"+r.project+"/image/"+r.id}},[n("img",{staticClass:"image-overview",attrs:{src:r.thumb}})])],1),n("b-table-column",{attrs:{field:r.projectBlind?"blindedName":"instanceFilename",label:e.$t("name"),sortable:"",width:"400"}},[n("router-link",{attrs:{to:"/project/"+r.project+"/image/"+r.id}},[n("image-name",{attrs:{image:r,showBothNames:""}})],1)],1),n("b-table-column",{attrs:{field:"projectName",label:e.$t("project"),width:"200"}},[n("router-link",{attrs:{to:"/project/"+r.project}},[e._v(" "+e._s(r.projectName)+" ")])],1),n("b-table-column",{attrs:{field:"magnification",label:e.$t("magnification"),centered:"",sortable:"",width:"100"}},[e._v(" "+e._s(r.magnification||e.$t("unknown"))+" ")]),n("b-table-column",{attrs:{field:"numberOfAnnotations",label:e.$t("user-annotations"),centered:"",sortable:"",width:"100"}},[n("router-link",{attrs:{to:"/project/"+r.project+"/annotations?image="+r.id+"&type=user"}},[e._v(" "+e._s(r.numberOfAnnotations)+" ")])],1),n("b-table-column",{attrs:{field:"numberOfJobAnnotations",label:e.$t("analysis-annotations"),centered:"",sortable:"",width:"100"}},[n("router-link",{attrs:{to:"/project/"+r.project+"/annotations?image="+r.id+"&type=algo"}},[e._v(" "+e._s(r.numberOfJobAnnotations)+" ")])],1),n("b-table-column",{attrs:{field:"numberOfReviewedAnnotations",label:e.$t("reviewed-annotations"),centered:"",sortable:"",width:"100"}},[n("router-link",{attrs:{to:"/project/"+r.project+"/annotations?image="+r.id+"&type=reviewed"}},[e._v(" "+e._s(r.numberOfReviewedAnnotations)+" ")])],1),n("b-table-column",{attrs:{label:" ",centered:"",width:"150"}},[n("router-link",{staticClass:"button is-small is-link",attrs:{to:"/project/"+r.project+"/image/"+r.id}},[e._v(" "+e._s(e.$t("button-open"))+" ")])],1)]}},{key:"detail",fn:function(t){var r=t.row;return[n("image-details",{attrs:{image:r,excludedProperties:e.excludedProperties}})]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-image")))])])]},proxy:!0}])})],1)],1)])])},Eu=[],Iu={name:"advanced-search",components:{IconProjectMemberRole:yn,ImageName:Sa,CytomineTable:Y,ProjectDetails:on,ImageDetails:ci,CytomineMultiselect:ae},data:function(){return{loading:!0,error:!1,searchString:"",projects:[],images:[],activeTab:"projects",perPage:10,selectedTags:[],availableTags:[],currentPage:1,sortField:"created",sortOrder:"desc",openedDetails:[],revision:0,excludedProperties:["name","imagesPreview","lastActivity"]}},methods:{debounceSearchString:u.a.debounce(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.searchString=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),500)},computed:{currentUser:m("currentUser/user"),pathSearchString:function(){return this.$route.params.searchString},querySearchString:function(){return this.$route.query.searchString},querySearchTags:function(){return this.$route.query.tags},regexp:function(){return St(this.searchString)},projectCollection:function(){var e=new $["ProjectCollection"]({withMembersCount:!0,withLastActivity:!0,withCurrentUserRoles:!0});return this.searchString&&(e["name"]={ilike:encodeURIComponent(this.searchString)}),this.selectedTags.length>0&&this.selectedTags.length<this.availableTags.length&&(e["tag"]={in:this.selectedTags.map((function(e){return e.id})).join()}),e},imageCollection:function(){var e=new $["ImageInstanceCollection"]({filterKey:"user",filterValue:this.currentUser.id});return this.searchString&&(e["name"]={ilike:encodeURIComponent(this.searchString)}),this.selectedTags.length>0&&this.selectedTags.length<this.availableTags.length&&(e["tag"]={in:this.selectedTags.map((function(e){return e.id})).join()}),e}},watch:{pathSearchString:function(e){e&&(this.searchString=e)},querySearchString:function(e){e&&!this.pathSearchString&&(this.searchString=e)},querySearchTags:function(e){if(e){this.selectedTags=[];var t=this.availableTags.filter((function(t){return e.split(",").includes(t.name)}));t&&(this.selectedTags=t)}}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.searchString=this.pathSearchString||this.querySearchString||"",e.prev=1,e.t0=[{id:"null",name:this.$t("no-tag")}],e.t1=B["a"],e.next=6,$["TagCollection"].fetchAll();case 6:e.t2=e.sent.array,e.t3=(0,e.t1)(e.t2),this.availableTags=e.t0.concat.call(e.t0,e.t3),e.next=14;break;case 11:e.prev=11,e.t4=e["catch"](1),this.error=!0;case 14:this.$route.query.tags&&(t=this.availableTags.filter((function(e){return n.$route.query.tags.split(",").includes(e.name)})),t&&(this.selectedTags=t)),this.loading=!1;case 16:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(){return e.apply(this,arguments)}return t}()},Nu=Iu,Uu=(n("fbe2"),Object(S["a"])(Nu,Mu,Eu,!1,null,"f9fb57cc",null)),Fu=Uu.exports,Lu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.error?n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(e._s(e.$t("error-loading-image")))]),e.errorBadImageProject?n("p",[e._v(e._s(e.$t("error-loading-image-bad-project")))]):e._e()]):n("div",{staticClass:"cytomine-viewer"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():n("div",{staticClass:"maps-wrapper"},[e._l(e.cells,(function(t,r){return n("div",{key:r,staticClass:"map-cell",style:"height:"+e.elementHeight+"%; width:"+e.elementWidth+"%;"},[t&&t.image?n("cytomine-image",{key:t.index+"-"+t.image.id,attrs:{index:t.index},on:{close:function(n){return e.closeMap(t.index)}}}):e._e()],1)})),n("image-selector"),n("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:e.shortkeysMapping,expression:"shortkeysMapping",modifiers:{once:!0}}],staticClass:"hidden",on:{shortkey:e.shortkeyEvent}})],2)],1)},qu=[],zu=(n("4f7f"),n("8615"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"map-container",on:{click:function(t){e.isActiveImage=!0}}},[e.loading||null===e.zoom?e._e():[n("vl-map",{ref:"map",attrs:{"data-projection":e.projectionName,"load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,"keyboard-event-target":e.document},on:{pointermove:function(t){e.projectedMousePosition=t.coordinate},mounted:e.updateKeyboardInteractions}},[n("vl-view",{ref:"view",attrs:{center:e.center,zoom:e.zoom,rotation:e.rotation,"max-zoom":e.maxZoom,"max-resolution":Math.pow(2,e.image.depth),extent:e.extent,projection:e.projectionName},on:{"update:center":function(t){e.center=t},"update:zoom":function(t){e.zoom=t},"update:rotation":function(t){e.rotation=t},mounted:function(t){return e.viewMounted()}}}),n("vl-layer-tile",{ref:"baseLayer",attrs:{extent:e.extent},on:{mounted:e.addOverviewMap}},[n("vl-source-zoomify",{ref:"baseSource",attrs:{projection:e.projectionName,urls:e.baseLayerURLs,size:e.imageSize,extent:e.extent,crossOrigin:"Anonymous"},on:{mounted:function(t){return e.setBaseSource()}}})],1),n("vl-layer-image",[e.baseSource&&e.colorManipulationOn?n("vl-source-raster",{attrs:{sources:[e.baseSource],operation:e.operation,lib:e.lib}}):e._e()],1),e._l(e.selectedLayers,(function(t){return n("annotation-layer",{key:"layer-"+t.id,attrs:{index:e.index,layer:t}})})),e.activeSelectInteraction?n("select-interaction",{attrs:{index:e.index}}):e._e(),e.activeDrawInteraction?n("draw-interaction",{attrs:{index:e.index}}):e._e(),e.activeModifyInteraction?n("modify-interaction",{attrs:{index:e.index}}):e._e()],2),e.configUI["project-tools-main"]?n("div",{staticClass:"draw-tools"},[n("draw-tools",{attrs:{index:e.index}})],1):e._e(),n("div",{staticClass:"panels"},[n("ul",[n("li",[n("a",{staticClass:"close",on:{click:function(t){return e.$emit("close")}}},[n("i",{staticClass:"fas fa-times-circle"})])]),e.isPanelDisplayed("hide-tools")?[e.isPanelDisplayed("info")?n("li",[n("a",{class:{active:"info"===e.activePanel},on:{click:function(t){return e.togglePanel("info")}}},[n("i",{staticClass:"fas fa-info"})]),n("information-panel",{directives:[{name:"show",rawName:"v-show",value:"info"===e.activePanel,expression:"activePanel === 'info'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e(),e.isPanelDisplayed("digital-zoom")?n("li",[n("a",{class:{active:"digital-zoom"===e.activePanel},on:{click:function(t){return e.togglePanel("digital-zoom")}}},[n("i",{staticClass:"fas fa-search"})]),n("digital-zoom",{directives:[{name:"show",rawName:"v-show",value:"digital-zoom"===e.activePanel,expression:"activePanel === 'digital-zoom'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e(),e.isPanelDisplayed("link")&&e.nbImages>1?n("li",[n("a",{class:{active:"link"===e.activePanel},on:{click:function(t){return e.togglePanel("link")}}},[n("i",{staticClass:"fas fa-link"})]),n("link-panel",{directives:[{name:"show",rawName:"v-show",value:"link"===e.activePanel,expression:"activePanel === 'link'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e(),e.isPanelDisplayed("color-manipulation")?n("li",[n("a",{class:{active:"colors"===e.activePanel},on:{click:function(t){return e.togglePanel("colors")}}},[n("i",{staticClass:"fas fa-adjust"})]),n("color-manipulation",{directives:[{name:"show",rawName:"v-show",value:"colors"===e.activePanel,expression:"activePanel === 'colors'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e(),e.isPanelDisplayed("image-layers")?n("li",[n("a",{class:{active:"layers"===e.activePanel},on:{click:function(t){return e.togglePanel("layers")}}},[n("i",{staticClass:"fas fa-copy"})]),n("layers-panel",{directives:[{name:"show",rawName:"v-show",value:"layers"===e.activePanel,expression:"activePanel === 'layers'"}],staticClass:"panel-options",attrs:{index:e.index,"layers-to-preload":e.layersToPreload}})],1):e._e(),e.isPanelDisplayed("ontology")&&e.terms&&e.terms.length>0?n("li",[n("a",{class:{active:"ontology"===e.activePanel},on:{click:function(t){return e.togglePanel("ontology")}}},[n("i",{staticClass:"fas fa-hashtag"})]),n("ontology-panel",{directives:[{name:"show",rawName:"v-show",value:"ontology"===e.activePanel,expression:"activePanel === 'ontology'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e(),e.isPanelDisplayed("property")?n("li",[n("a",{class:{active:"properties"===e.activePanel},on:{click:function(t){return e.togglePanel("properties")}}},[n("i",{staticClass:"fas fa-tag"})]),n("properties-panel",{directives:[{name:"show",rawName:"v-show",value:"properties"===e.activePanel,expression:"activePanel === 'properties'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e(),e.isPanelDisplayed("follow")?n("li",[n("a",{class:{active:"follow"===e.activePanel},on:{click:function(t){return e.togglePanel("follow")}}},[n("i",{staticClass:"fas fa-street-view"})]),n("follow-panel",{directives:[{name:"show",rawName:"v-show",value:"follow"===e.activePanel,expression:"activePanel === 'follow'"}],staticClass:"panel-options",attrs:{index:e.index,view:e.$refs.view}})],1):e._e(),e.isPanelDisplayed("review")&&e.canEdit?n("li",[n("a",{class:{active:"review"===e.activePanel},on:{click:function(t){return e.togglePanel("review")}}},[n("i",{staticClass:"fas fa-check-circle"})]),n("review-panel",{directives:[{name:"show",rawName:"v-show",value:"review"===e.activePanel,expression:"activePanel === 'review'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e()]:e._e()],2)]),e.imageWrapper.tracking.broadcast?n("div",{staticClass:"broadcast"},[n("i",{staticClass:"fas fa-circle"}),e._v(" "+e._s(e.$t("live"))+" ")]):e._e(),n("rotation-selector",{staticClass:"rotation-selector-wrapper",attrs:{index:e.index}}),n("scale-line",{attrs:{image:e.image,zoom:e.zoom,mousePosition:e.projectedMousePosition}}),e.isPanelDisplayed("annotation-main")?n("annotation-details-container",{attrs:{index:e.index,view:e.$refs.view}}):e._e(),n("div",{ref:"overview",staticClass:"custom-overview"},[n("p",{staticClass:"image-name",class:{hidden:e.overviewCollapsed}},[n("image-name",{attrs:{image:e.image}})],1)])]],2)}),Vu=[],Bu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vl-layer-vector",{attrs:{visible:e.layer.visible,extent:e.imageExtent,"update-while-interacting":!1}},[n("vl-source-vector",{ref:"olSource",attrs:{"loader-factory":e.loaderFactory,"strategy-factory":e.strategyFactory,url:"-"}},[n("vl-style-func",{attrs:{factory:e.styleFunctionFactory}})],1)],1)},Wu=[],Ju=n("64d9"),Hu=Object.freeze({SELECT:"select",CREATE:"create",UPDATE:"update",DELETE:"delete"});function Gu(e){return Ku.apply(this,arguments)}function Ku(){return Ku=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["AnnotationTermCollection"].fetchAll({filterKey:"annotation",filterValue:t.id});case 2:n=e.sent,t.term=[],t.userByTerm=[],r={},n.array.forEach((function(e){var n=e.term,a=e.user;t.term.includes(n)?t.userByTerm[r[n]].user.push(a):(r[n]=t.term.length,t.term.push(n),t.userByTerm.push({term:n,user:[a]}))}));case 7:case"end":return e.stop()}}),e)}))),Ku.apply(this,arguments)}function Yu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n&&e.image!==n.id)return!1;var r=e.type===$["AnnotationType"].REVIEWED;return t.isReview?r:!r&&e.user===t.id}var Zu={name:"annotation-layer",props:{index:String,layer:Object},data:function(){return{format:new Ju["a"],resolution:null,lastExtent:null,clustered:null,maxResolutionNoClusters:null}},computed:{imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},image:function(){return this.imageWrapper.imageInstance},annotsIdsToSelect:function(){return this.imageWrapper.selectedFeatures.annotsToSelect.map((function(e){return e.id}))},imageExtent:function(){return[0,0,this.image.width,this.image.height]},selectedFeatures:function(){return this.imageWrapper.selectedFeatures.selectedFeatures},ongoingEdit:function(){return this.imageWrapper.draw.ongoingEdit},terms:function(){return this.imageWrapper.style.terms||[]},styleFunctionFactory:function(){var e=this;return this.imageWrapper.selectedFeatures.selectedFeatures,this.imageWrapper.style.layersOpacity,this.terms.forEach((function(e){e.visible,e.opacity})),this.imageWrapper.style.displayNoTerm,this.imageWrapper.style.noTermOpacity,this.imageWrapper.properties.selectedPropertyKey,this.imageWrapper.properties.selectedPropertyColor,this.imageWrapper.review.reviewMode,function(){return e.$store.getters[e.imageModule+"genStyleFunction"]}},reviewMode:function(){return this.imageWrapper.review.reviewMode}},watch:{reviewMode:function(){this.clearFeatures()}},methods:{clearFeatures:function(){this.$refs.olSource&&(this.$store.commit(this.imageModule+"removeLayerFromSelectedFeatures",{layer:this.layer,cache:!0}),this.$refs.olSource.clearFeatures())},annotBelongsToLayer:function(e){return Yu(e,this.layer,this.image)},addAnnotationHandler:function(e){this.annotBelongsToLayer(e)&&this.$refs.olSource&&this.$refs.olSource.addFeature(this.createFeature(e))},selectAnnotationHandler:function(e){var t=e.annot,n=e.index;if(n===this.index&&this.annotBelongsToLayer(t)&&this.$refs.olSource){var r=this.$refs.olSource.getFeatureById(t.id);r?this.$store.dispatch(this.imageModule+"selectFeature",r):this.$store.commit(this.imageModule+"setAnnotToSelect",t)}},reloadAnnotationsHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.idImage,n=e.clear,r=void 0!==n&&n;t&&t!==this.image.id||(r?this.clearFeatures():this.loader())},reviewAnnotationHandler:function(e){this.reviewMode&&this.deleteAnnotationHandler(e)},editAnnotationHandler:function(e){if(this.annotBelongsToLayer(e)&&this.$refs.olSource){var t=this.$refs.olSource.getFeatureById(e.id);if(!t)return;t.setGeometry(this.format.readGeometry(e.location)),t.set("annot",e);var n=this.selectedFeatures.findIndex((function(t){return t.id===e.id}));n>=0&&this.$store.commit(this.imageModule+"changeAnnotSelectedFeature",{indexFeature:n,annot:e})}},deleteAnnotationHandler:function(e){if(this.annotBelongsToLayer(e)&&this.$refs.olSource){var t=this.$refs.olSource.getFeatureById(e.id);if(!t)return;this.$refs.olSource.removeFeature(t),this.selectedFeatures.some((function(t){return t.id===e.id}))&&this.$store.commit(this.imageModule+"clearSelectedFeatures")}},strategyFactory:function(){var e=this;return function(t,n){return e.lastExtent=t,e.$refs.olSource&&e.resolution&&null!=e.clustered&&(!e.clustered&&n>e.maxResolutionNoClusters||n!==e.resolution&&e.clustered)&&e.$refs.olSource.$source.loadedExtentsRtree_.clear(),[t]}},fetchAnnots:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return[0,1].forEach((function(e){t[e]<0&&(t[e]=0)})),[2,3].forEach((function(e){r.imageExtent[e]<t[e]&&(t[e]=r.imageExtent[e])})),e.next=4,new $["AnnotationCollection"]({user:this.layer.isReview?null:this.layer.id,image:this.image.id,reviewed:this.layer.isReview,notReviewedOnly:!this.layer.isReview&&this.reviewMode,bbox:t.join(),showWKT:!0,showTerm:!0,showGIS:!0,kmeans:!0}).fetchAll();case 4:return n=e.sent,e.abrupt("return",n.array);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),updateFeature:function(e,t){var n=this.selectedFeatures.findIndex((function(t){return t.id===e.getId()})),r=-1!==n;if(!t)return this.$refs.olSource.removeFeature(e),void(r&&this.$store.commit(this.imageModule+"clearSelectedFeatures"));var a=e.get("annot");if(this.clustered||t.updated!==a.updated||!this.sameTerms(t.term,a.term)){if(r){if(this.ongoingEdit)return;this.$store.commit(this.imageModule+"changeAnnotSelectedFeature",{indexFeature:n,annot:t})}e.set("annot",t),e.setGeometry(this.format.readGeometry(t.location))}},loader:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,s,o,c=this,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:this.lastExtent,n=l.length>1&&void 0!==l[1]?l[1]:this.resolution,this.resolution=n,this.layer.visible&&t){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,this.fetchAnnots(t);case 8:r=e.sent,r.sort((function(e,t){return e.area<t.area?1:-1})),e.next=16;break;case 12:return e.prev=12,e.t0=e["catch"](5),this.$notify({type:"error",text:this.$t("notif-error-fetch-annotations-viewer")}),e.abrupt("return");case 16:if(this.$refs.olSource){e.next=18;break}return e.abrupt("return");case 18:a=this.clustered,r.length&&(this.clustered=null!=r[0].count,!this.clustered&&n>this.maxResolutionNoClusters&&(this.maxResolutionNoClusters=n)),i=r.reduce((function(e,t){return e[t.id]=t,e}),{}),s=[],null!==a&&a!==this.clustered?this.clearFeatures():(o=this.clustered?this.$refs.olSource.$source.getFeatures():this.$refs.olSource.$source.getFeaturesInExtent(t),o.forEach((function(e){c.updateFeature(e,i[e.getId()]),s.push(e.getId())}))),r.forEach((function(e){s.includes(e.id)||c.$refs.olSource.addFeature(c.createFeature(e))}));case 24:case"end":return e.stop()}}),e,this,[[5,12]])})));function t(){return e.apply(this,arguments)}return t}(),loaderFactory:function(){var e=this;return function(t,n){return e.loader(t,n)}},createFeature:function(e){var t=this.format.readFeature(e.location);return t.setId(e.id),t.set("annot",e),this.annotsIdsToSelect.includes(e.id)&&this.$store.dispatch(this.imageModule+"selectFeature",t),t},sameTerms:function(e,t){return e.length===t.length&&e.every((function(e){return t.includes(e)}))}},mounted:function(){this.$eventBus.$on("addAnnotation",this.addAnnotationHandler),this.$eventBus.$on("selectAnnotation",this.selectAnnotationHandler),this.$eventBus.$on("reloadAnnotations",this.reloadAnnotationsHandler),this.$eventBus.$on("reviewAnnotation",this.reviewAnnotationHandler),this.$eventBus.$on("editAnnotation",this.editAnnotationHandler),this.$eventBus.$on("deleteAnnotation",this.deleteAnnotationHandler)},beforeDestroy:function(){this.$eventBus.$off("addAnnotation",this.addAnnotationHandler),this.$eventBus.$off("selectAnnotation",this.selectAnnotationHandler),this.$eventBus.$off("reloadAnnotations",this.reloadAnnotationsHandler),this.$eventBus.$off("reviewAnnotation",this.reviewAnnotationHandler),this.$eventBus.$off("editAnnotation",this.editAnnotationHandler),this.$eventBus.$off("deleteAnnotation",this.deleteAnnotationHandler)}},Xu=Zu,Qu=Object(S["a"])(Xu,Bu,Wu,!1,null,null,null),ed=Qu.exports,td=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rotation-selector-wrapper",class:{expanded:e.expanded}},[n("div",{staticClass:"ol-rotate ol-unselectable ol-control custom"},[n("button",{attrs:{type:"button"},on:{click:function(t){e.expanded=!0}}},[n("span",{staticClass:"ol-compass",style:{transform:"rotate("+e.rotation+"rad)"}},[e._v("⇧")])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.expanded,expression:"expanded"}]},[n("div",{staticClass:"top"},[n("div",{staticClass:"rotation-controls"},[n("b-field",[n("p",{staticClass:"control"},[n("button",{staticClass:"button is-small",on:{click:function(t){e.degreesRotation=0}}},[e._v(e._s(e.$t("button-reset")))])]),n("p",{staticClass:"control"},[n("button",{staticClass:"button is-small",on:{click:function(t){return e.increment(90)}}},[e._v("+90°")])]),n("p",{staticClass:"control"},[n("button",{staticClass:"button is-small",on:{click:function(t){return e.increment(-90)}}},[e._v("-90°")])])])],1),n("button",{staticClass:"delete is-small",on:{click:function(t){e.expanded=!1}}})]),n("cytomine-slider",{attrs:{max:360,integerOnly:!1},model:{value:e.degreesRotation,callback:function(t){e.degreesRotation=t},expression:"degreesRotation"}})],1)])},nd=[],rd={name:"rotation-selector",components:{CytomineSlider:pe},props:{index:String},data:function(){return{expanded:!1}},computed:{viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},rotation:function(){return this.imageWrapper.view.rotation},degreesRotation:{get:function(){return Math.round(180*this.rotation/Math.PI*1e3)/1e3},set:function(e){this.$store.dispatch(this.viewerModule+"setRotation",{index:this.index,rotation:Number(e)/180*Math.PI})}}},methods:{increment:function(e){this.degreesRotation=(this.degreesRotation+e+360)%360}}},ad=rd,id=(n("832a"),n("9a77"),Object(S["a"])(ad,td,nd,!1,null,"f8b04e22",null)),sd=id.exports,od=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scale-line",class:{interpolation:e.interpolation}},[n("div",{staticClass:"scale-line-top",style:{width:e.scaleLineLength+"px"}},[e._v(" "+e._s(e.scaleLength)+" ")]),n("div",{staticClass:"scale-line-bottom"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.magnification,expression:"magnification"}]},[e._v(" "+e._s(e.$t("magnification"))+": "+e._s(e.magnification)+"X ")])]),e.mousePosition?n("div",{staticClass:"scale-line-position"},[n("div",{staticStyle:{float:"left"}},[e._v("x: "+e._s(Math.round(e.mousePosition[0])))]),n("div",{staticStyle:{float:"right"}},[e._v("y: "+e._s(Math.round(e.mousePosition[1])))])]):e._e()])},cd=[],ld={name:"scale-line",props:{image:Object,zoom:Number,mousePosition:Array},data:function(){return{scaleLineLength:100}},computed:{magnification:function(){var e=Math.pow(2,this.zoom-this.image.depth)*this.image.magnification;return Math.round(100*e)/100},resolution:function(){var e=this.image.resolution?this.image.resolution:1;return Math.pow(2,this.image.depth-this.zoom)*e},scaleLength:function(){var e=this.scaleLineLength*this.resolution;if(this.image.resolution){var t=this.$t("um");return e>1e3&&(e/=1e3,t=this.$t("mm")),"".concat(e.toPrecision(3)," ").concat(t)}return"".concat(Math.round(1e3*e)/1e3," ").concat(this.$t("pixels"))},interpolation:function(){return this.zoom>this.image.depth}}},ud=ld,dd=(n("02bd"),Object(S["a"])(ud,od,cd,!1,null,"66fc9522",null)),pd=dd.exports,md=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"draw-tools-wrapper"},[e.isToolDisplayed("select")?n("div",{staticClass:"buttons has-addons are-small"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("select"),expression:"$t('select')"}],staticClass:"button",class:{"is-selected":"select"===e.activeTool},on:{click:function(t){return e.activateTool("select")}}},[e._m(0)])]):e._e(),e.reviewMode?[n("div",{staticClass:"buttons has-addons are-small"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("validate-annotation"),expression:"$t('validate-annotation')"}],staticClass:"button",class:{"is-success":!e.isToolDisabled("accept")},attrs:{disabled:e.isToolDisabled("accept")},on:{click:function(t){return e.accept()}}},[e._m(7)]),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("reject-annotation"),expression:"$t('reject-annotation')"}],staticClass:"button",class:{"is-danger":!e.isToolDisabled("reject")},attrs:{disabled:e.isToolDisabled("reject")},on:{click:function(t){return e.reject()}}},[e._m(8)])])]:[e.terms&&e.terms.length>0?n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.showTermSelector=!1},expression:"() => showTermSelector = false"}],staticClass:"buttons has-addons are-small term-selection",class:{"has-preview":e.termsToAssociate.length>0}},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("terms-new-annotation"),expression:"$t('terms-new-annotation')"}],staticClass:"button",attrs:{disabled:e.disabledDraw},on:{click:function(t){e.showTermSelector=!e.showTermSelector}}},[e._m(1)]),n("div",{staticClass:"color-preview",style:{background:e.backgroundTermsNewAnnot}},[e.termsToAssociate.length>1?n("span",[e._v(e._s(e.termsToAssociate.length))]):e._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showTermSelector,expression:"showTermSelector"}],staticClass:"ontology-tree-container"},[n("b-input",{attrs:{placeholder:e.$t("search-placeholder"),size:"is-small"},model:{value:e.searchStringTerm,callback:function(t){e.searchStringTerm=t},expression:"searchStringTerm"}}),n("ontology-tree",{staticClass:"ontology-tree",attrs:{ontology:e.ontology,searchString:e.searchStringTerm},model:{value:e.termsToAssociate,callback:function(t){e.termsToAssociate=t},expression:"termsToAssociate"}})],1)]):e._e(),n("div",{staticClass:"buttons has-addons are-small"},[e.isToolDisplayed("point")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("point"),expression:"$t('point')"}],staticClass:"button",class:{"is-selected":"point"===e.activeTool},attrs:{disabled:e.disabledDraw},on:{click:function(t){return e.activateTool("point")}}},[e._m(2)]):e._e(),e.isToolDisplayed("line")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("line"),expression:"$t('line')"}],staticClass:"button",class:{"is-selected":"line"===e.activeTool},attrs:{disabled:e.disabledDraw},on:{click:function(t){return e.activateTool("line")}}},[e._m(3)]):e._e(),e.isToolDisplayed("freehand-line")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("freehand-line"),expression:"$t('freehand-line')"}],staticClass:"button",class:{"is-selected":"freehand-line"===e.activeTool},attrs:{disabled:e.disabledDraw},on:{click:function(t){return e.activateTool("freehand-line")}}},[n("span",{staticClass:"icon is-small"},[n("icon-line-free-hand")],1)]):e._e(),e.isToolDisplayed("rectangle")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("rectangle"),expression:"$t('rectangle')"}],staticClass:"button",class:{"is-selected":"rectangle"===e.activeTool},attrs:{disabled:e.disabledDraw},on:{click:function(t){return e.activateTool("rectangle")}}},[e._m(4)]):e._e(),e.isToolDisplayed("circle")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("circle"),expression:"$t('circle')"}],staticClass:"button",class:{"is-selected":"circle"===e.activeTool},attrs:{disabled:e.disabledDraw},on:{click:function(t){return e.activateTool("circle")}}},[e._m(5)]):e._e(),e.isToolDisplayed("polygon")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("polygon"),expression:"$t('polygon')"}],staticClass:"button",class:{"is-selected":"polygon"===e.activeTool},attrs:{disabled:e.disabledDraw},on:{click:function(t){return e.activateTool("polygon")}}},[e._m(6)]):e._e(),e.isToolDisplayed("freehand-polygon")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("freehand-polygon"),expression:"$t('freehand-polygon')"}],staticClass:"button",class:{"is-selected":"freehand-polygon"===e.activeTool},attrs:{disabled:e.disabledDraw},on:{click:function(t){return e.activateTool("freehand-polygon")}}},[n("span",{staticClass:"icon is-small"},[n("icon-polygon-free-hand")],1)]):e._e()])],e.configUI["project-explore-annotation-main"]?n("div",{staticClass:"buttons has-addons are-small"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("display-annot-details"),expression:"$t('display-annot-details')"}],staticClass:"button",class:{"is-selected":e.displayAnnotDetails&&e.selectedFeature},attrs:{disabled:!e.selectedFeature},on:{click:function(t){e.displayAnnotDetails=!e.displayAnnotDetails}}},[e._m(9)])]):e._e(),n("div",{staticClass:"buttons has-addons are-small"},[e.isToolDisplayed("fill")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("fill"),expression:"$t('fill')"}],staticClass:"button",attrs:{disabled:e.isToolDisabled("fill")},on:{click:function(t){return e.fill()}}},[e._m(10)]):e._e(),e.isToolDisplayed("edit")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("modify"),expression:"$t('modify')"}],staticClass:"button",class:{"is-selected":"modify"===e.activeEditTool},attrs:{disabled:e.isToolDisabled("edit")},on:{click:function(t){return e.activateEditTool("modify")}}},[e._m(11)]):e._e(),e.isToolDisplayed("union")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("freehand-correct-add"),expression:"$t('freehand-correct-add')"}],staticClass:"button",class:{"is-selected":"correct-add"===e.activeEditTool},attrs:{disabled:e.isToolDisabled("correct-add")},on:{click:function(t){return e.activateEditTool("correct-add")}}},[e._m(12)]):e._e(),e.isToolDisplayed("diff")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("freehand-correct-remove"),expression:"$t('freehand-correct-remove')"}],staticClass:"button",class:{"is-selected":"correct-remove"===e.activeEditTool},attrs:{disabled:e.isToolDisabled("correct-remove")},on:{click:function(t){return e.activateEditTool("correct-remove")}}},[e._m(13)]):e._e(),e.isToolDisplayed("move")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("move"),expression:"$t('move')"}],staticClass:"button",class:{"is-selected":"translate"===e.activeEditTool},attrs:{disabled:e.isToolDisabled("move")},on:{click:function(t){return e.activateEditTool("translate")}}},[e._m(14)]):e._e(),e.isToolDisplayed("rotate")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("rotate"),expression:"$t('rotate')"}],staticClass:"button",class:{"is-selected":"rotate"===e.activeEditTool},attrs:{disabled:e.isToolDisabled("rotate")},on:{click:function(t){return e.activateEditTool("rotate")}}},[e._m(15)]):e._e(),e.isToolDisplayed("delete")?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("delete"),expression:"$t('delete')"}],staticClass:"button",attrs:{disabled:e.isToolDisabled("delete")},on:{click:function(t){return e.confirmDeletion()}}},[e._m(16)]):e._e()]),e.isToolDisplayed("undo-redo")?n("div",{staticClass:"buttons has-addons are-small"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("undo"),expression:"$t('undo')"}],staticClass:"button",attrs:{disabled:0===e.actions.length},on:{click:function(t){return e.undo()}}},[e._m(17)]),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("redo"),expression:"$t('redo')"}],staticClass:"button",attrs:{disabled:0===e.undoneActions.length},on:{click:function(t){return e.redo()}}},[e._m(18)])]):e._e()],2)},fd=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-mouse-pointer"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-hashtag"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-map-marker-alt"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-minus"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"far fa-square"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"far fa-circle"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-draw-polygon"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-check"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-minus"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-info"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-fill"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-edit"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"superscript fas fa-plus"}),n("i",{staticClass:"fas fa-pencil-alt"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"superscript fas fa-minus"}),n("i",{staticClass:"fas fa-pencil-alt"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-arrows-alt"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-sync-alt"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"far fa-trash-alt"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-undo"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-redo"})])}];n("6c7b");function hd(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=vd(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function vd(e,t){if(e){if("string"===typeof e)return gd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gd(e,t):void 0}}function gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bd={name:"draw-tools",components:{OntologyTree:jr,IconPolygonFreeHand:Yl,IconLineFreeHand:nu},props:{index:String},data:function(){return{showTermSelector:!1,format:new Ju["a"],searchStringTerm:""}},computed:{configUI:m("currentProject/configUI"),ontology:m("currentProject/ontology"),imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},imageWrapper:function(){return this.viewerWrapper.images[this.index]},image:function(){return this.imageWrapper.imageInstance},terms:function(){return this.$store.getters["currentProject/terms"]},termsToAssociate:{get:function(){return this.imageWrapper.draw.termsNewAnnots},set:function(e){this.$store.commit(this.imageModule+"setTermsNewAnnots",e)}},backgroundTermsNewAnnot:function(){var e=this;return 1===this.termsToAssociate.length?this.terms.find((function(t){return e.termsToAssociate[0]===t.id})).color:"#e2e2e2"},activeTool:{get:function(){return this.imageWrapper.draw.activeTool},set:function(e){this.$store.dispatch(this.imageModule+"activateTool",e)}},displayAnnotDetails:{get:function(){return this.imageWrapper.selectedFeatures.displayAnnotDetails},set:function(e){this.$store.commit(this.imageModule+"setDisplayAnnotDetails",e)}},activeEditTool:{get:function(){return this.imageWrapper.draw.activeEditTool},set:function(e){this.$store.commit(this.imageModule+"activateEditTool",e)}},selectedFeature:function(){return this.$store.getters[this.imageModule+"selectedFeature"]},layers:function(){return this.imageWrapper.layers.selectedLayers||[]},noActiveLayer:function(){return!this.layers.find((function(e){return e.drawOn}))},disabledDraw:function(){return this.noActiveLayer},actions:function(){return this.imageWrapper.undoRedo.actions},undoneActions:function(){return this.imageWrapper.undoRedo.undoneActions},isActiveImage:function(){return this.viewerWrapper.activeImage===this.index},reviewMode:function(){return this.imageWrapper.review.reviewMode}},watch:{noActiveLayer:function(e){e&&(this.activeTool="select")},selectedFeature:function(e){!e&&["correct-add","correct-remove"].includes(this.activeEditTool)&&(this.activeEditTool=null)},reviewMode:function(e){e&&(this.activeTool="select")}},methods:{isToolDisplayed:function(e){return this.configUI["project-tools-".concat(e)]},isToolDisabled:function(e){if(!this.selectedFeature)return!0;var t=this.selectedFeature,n=t.properties.annot;if("accept"===e)return n.type===$["AnnotationType"].REVIEWED;if("reject"===e)return n.type!==$["AnnotationType"].REVIEWED;if(!this.$store.getters["currentProject/canEditAnnot"](n))return!0;var r=t.geometry.type;return"Point"===r?"move"!==e&&"delete"!==e:"LineString"===r&&["fill","correct-add","correct-remove"].includes(e)},activateTool:function(e){this.activeTool=e},activateEditTool:function(e){this.activeTool="select",this.activeEditTool=this.activeEditTool===e?null:e},fill:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.selectedFeature,t){e.next=3;break}return e.abrupt("return");case 3:return this.activateEditTool(null),n=t.properties.annot.clone(),e.prev=5,e.next=8,n.fill();case 8:this.$eventBus.$emit("editAnnotation",n),this.$store.commit(this.imageModule+"addAction",{annot:n,type:Hu.UPDATE}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](5),this.$notify({type:"error",text:this.$t("notif-error-annotation-fill")});case 15:case"end":return e.stop()}}),e,this,[[5,12]])})));function t(){return e.apply(this,arguments)}return t}(),deleteAnnot:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.selectedFeature,t){e.next=3;break}return e.abrupt("return");case 3:return this.activateEditTool(null),e.prev=4,n=t.properties.annot,e.next=8,$["Annotation"].delete(n.id);case 8:this.$eventBus.$emit("deleteAnnotation",n),this.$store.commit(this.imageModule+"addAction",{annot:n,type:Hu.DELETE}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](4),this.$notify({type:"error",text:this.$t("notif-error-annotation-deletion")});case 15:case"end":return e.stop()}}),e,this,[[4,12]])})));function t(){return e.apply(this,arguments)}return t}(),confirmDeletion:function(){var e=this;this.selectedFeature&&this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-annotation"),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.deleteAnnot()}})},undo:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.actions.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.actions[this.actions.length-1],e.prev=3,e.next=6,this.reverseAction(t,!0);case 6:n=e.sent,this.$store.commit(this.imageModule+"undoAction",n),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),this.$notify({type:"error",text:this.$t("notif-error-undo")});case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(){return e.apply(this,arguments)}return t}(),redo:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.undoneActions.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.undoneActions[this.undoneActions.length-1],e.prev=3,e.next=6,this.reverseAction(t,!1);case 6:n=e.sent,this.$store.commit(this.imageModule+"redoAction",n),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),this.$notify({type:"error",text:this.$t("notif-error-redo")});case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(){return e.apply(this,arguments)}return t}(),reverseAction:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,s,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.annot,a=t.type,i=t.command,s=a,a!==Hu.CREATE){e.next=10;break}return e.next=5,$["Annotation"].delete(r.id);case 5:this.$eventBus.$emit("deleteAnnotation",r),s=Hu.DELETE,i=$["Cytomine"].instance.lastCommand,e.next=34;break;case 10:if(a!==Hu.DELETE){e.next=21;break}return e.next=13,$["Cytomine"].instance.undo(i);case 13:return o=e.sent,e.next=16,this.getUpdatedAnnotation(o);case 16:c=e.sent,this.$eventBus.$emit("addAnnotation",c),s=Hu.CREATE,e.next=34;break;case 21:if(!n){e.next=27;break}return e.next=24,$["Cytomine"].instance.undo(i);case 24:l=e.sent,e.next=30;break;case 27:return e.next=29,$["Cytomine"].instance.redo(i);case 29:l=e.sent;case 30:return e.next=32,this.getUpdatedAnnotation(l);case 32:u=e.sent,this.$eventBus.$emit("editAnnotation",u);case 34:return e.abrupt("return",{annot:r,command:i,type:s});case 35:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),getUpdatedAnnotation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=hd(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=13;break}if(a=r.value,i=a.annotation||a.reviewedannotation,!i){e.next=11;break}return s=new $["Annotation"](i),e.next=10,Gu(s);case 10:return e.abrupt("return",s);case 11:e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](1),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})));function t(t){return e.apply(this,arguments)}return t}(),accept:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.selectedFeature,t){e.next=3;break}return e.abrupt("return");case 3:if(this.activateEditTool(null),n=t.properties.annot,n.type!==$["AnnotationType"].REVIEWED){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,n.review();case 10:r=e.sent,r.userByTerm=n.userByTerm,this.$eventBus.$emit("reviewAnnotation",n),this.$eventBus.$emit("addAnnotation",r),this.$eventBus.$emit("selectAnnotation",{index:this.index,annot:r}),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](7),this.$notify({type:"error",text:this.$t("notif-error-annotation-validation")});case 20:case"end":return e.stop()}}),e,this,[[7,17]])})));function t(){return e.apply(this,arguments)}return t}(),reject:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.selectedFeature,t){e.next=3;break}return e.abrupt("return");case 3:if(this.activateEditTool(null),n=t.properties.annot,n.type===$["AnnotationType"].REVIEWED){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,$["Annotation"].fetch(n.parentIdent);case 10:return r=e.sent,r.userByTerm=n.userByTerm,e.next=14,r.cancelReview();case 14:this.$eventBus.$emit("deleteAnnotation",n),this.$eventBus.$emit("addAnnotation",r,!1),this.$eventBus.$emit("selectAnnotation",{index:this.index,annot:r}),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](7),this.$notify({type:"error",text:this.$t("notif-error-annotation-rejection")});case 22:case"end":return e.stop()}}),e,this,[[7,19]])})));function t(){return e.apply(this,arguments)}return t}(),shortkeyHandler:function(e){if(this.isActiveImage)switch(e){case"tool-select":return void(this.isToolDisplayed("select")&&this.activateTool("select"));case"tool-point":return void(this.isToolDisplayed("point")&&!this.disabledDraw&&this.activateTool("point"));case"tool-line":return void(this.isToolDisplayed("line")&&!this.disabledDraw&&this.activateTool("line"));case"tool-freehand-line":return void(this.isToolDisplayed("freehand-line")&&!this.disabledDraw&&this.activateTool("freehand-line"));case"tool-rectangle":return void(this.isToolDisplayed("rectangle")&&!this.disabledDraw&&this.activateTool("rectangle"));case"tool-circle":return void(this.isToolDisplayed("circle")&&!this.disabledDraw&&this.activateTool("circle"));case"tool-polygon":return void(this.isToolDisplayed("polygon")&&!this.disabledDraw&&this.activateTool("polygon"));case"tool-freehand-polygon":return void(this.isToolDisplayed("polygon")&&!this.disabledDraw&&this.activateTool("freehand-polygon"));case"tool-delete":return void(this.isToolDisplayed("delete")&&!this.isToolDisplayed("delete")&&this.confirmDeletion());case"tool-undo":return void(this.isToolDisplayed("undo")&&this.undo());case"tool-redo":return void(this.isToolDisplayed("redo")&&this.redo());case"tool-review-accept":return void(this.reviewMode&&this.isToolDisplayed("accept")&&this.accept());case"tool-review-reject":return void(this.reviewMode&&this.isToolDisplayed("reject")&&this.reject());case"tool-fill":return void(this.isToolDisplayed("fill")&&!this.isToolDisabled("fill")&&this.fill());case"tool-correct-add":return void(this.isToolDisplayed("union")&&!this.isToolDisabled("correct-add")&&this.activateEditTool("correct-add"));case"tool-correct-remove":return void(this.isToolDisplayed("diff")&&!this.isToolDisabled("correct-remove")&&this.activateEditTool("correct-remove"));case"tool-modify":return void(this.isToolDisplayed("edit")&&!this.isToolDisabled("edit")&&this.activateEditTool("modify"));case"tool-move":return void(this.isToolDisplayed("move")&&!this.isToolDisabled("move")&&this.activateEditTool("translate"));case"tool-rotate":return void(this.isToolDisplayed("rotate")&&!this.isToolDisabled("rotate")&&this.activateEditTool("rotate"));case"toggle-current":return void(this.configUI["project-explore-annotation-main"]&&this.selectedFeature&&(this.displayAnnotDetails=!this.displayAnnotDetails))}}},mounted:function(){this.$eventBus.$on("shortkeyEvent",this.shortkeyHandler)},beforeDestroy:function(){this.$eventBus.$off("shortkeyEvent",this.shortkeyHandler)}},yd=bd,wd=(n("00b9"),n("b1d5"),Object(S["a"])(yd,md,fd,!1,null,"02cc6faa",null)),_d=wd.exports,xd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(" "+e._s(e.$t("information"))+" ")]),n("table",{staticClass:"table"},[n("tbody",[n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("name")))])]),n("td",[n("image-name",{attrs:{image:e.image,showBothNames:""}})],1)]),n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("width")))])]),n("td",[e._v(e._s(e.image.width))])]),n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("height")))])]),n("td",[e._v(e._s(e.image.height))])]),n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("resolution")))])]),n("td",[e._v(e._s(e.resolution))])]),n("tr",[n("td",[n("strong",[e._v(e._s(e.$t("magnification")))])]),n("td",[e._v(e._s(e.magnification))])]),n("tr",[n("td",{attrs:{colspan:"2"}},[n("div",{staticClass:"buttons"},[e.canEdit?n("button",{staticClass:"button is-small",on:{click:function(t){e.calibrationModal=!0}}},[e._v(" "+e._s(e.$t("button-set-calibration"))+" ")]):e._e(),n("router-link",{staticClass:"button is-small",attrs:{to:"/project/"+e.image.project+"/image/"+e.image.id+"/information"}},[e._v(" "+e._s(e.$t("button-more-info"))+" ")])],1)])]),n("tr",[n("td",{attrs:{colspan:"2"}},[n("div",{staticClass:"buttons navigation has-addons"},[n("button",{staticClass:"button is-small",attrs:{disabled:e.isFirstImage},on:{click:function(t){return e.previousImage()}}},[n("i",{staticClass:"fas fa-angle-left fa-lg"}),e._v(" "+e._s(e.$t("button-previous-image"))+" ")]),n("button",{staticClass:"button is-small",attrs:{disabled:e.isLastImage},on:{click:function(t){return e.nextImage()}}},[e._v(" "+e._s(e.$t("button-next-image"))+" "),n("i",{staticClass:"fas fa-angle-right fa-lg"})])])])])])]),n("calibration-modal",{attrs:{image:e.image,active:e.calibrationModal},on:{"update:active":function(t){e.calibrationModal=t},setResolution:e.setResolution}})],1)},jd=[],Cd={name:"information-panel",components:{ImageName:Sa,CalibrationModal:Ba},props:{index:String},data:function(){return{calibrationModal:!1,isFirstImage:!1,isLastImage:!1}},computed:{viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},image:function(){return this.viewerWrapper.images[this.index].imageInstance},resolution:function(){return this.image.resolution?this.image.resolution.toFixed(3):this.$t("unknown")},magnification:function(){return this.image.magnification||this.$t("unknown")},canEdit:function(){return this.$store.getters["currentProject/canEditImage"](this.image)},isActiveImage:function(){return this.viewerWrapper.activeImage===this.index}},methods:{setResolution:function(e){this.$store.dispatch(this.viewerModule+"setImageResolution",{idImage:this.image.id,resolution:e}),this.$eventBus.$emit("reloadAnnotations",{idImage:this.image.id})},previousImage:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.image.fetchPrevious();case 3:if(t=e.sent,t.id){e.next=9;break}this.$notify({type:"error",text:this.$t("notif-error-first-image")}),this.isFirstImage=!0,e.next=11;break;case 9:return e.next=11,this.$store.dispatch(this.imageModule+"setImageInstance",t);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-fetch-previous-image")});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(){return e.apply(this,arguments)}return t}(),nextImage:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.image.fetchNext();case 3:if(t=e.sent,t.id){e.next=9;break}this.$notify({type:"error",text:this.$t("notif-error-last-image")}),this.isLastImage=!0,e.next=11;break;case 9:return e.next=11,this.$store.dispatch(this.imageModule+"setImageInstance",t);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-fetch-next-image")});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(){return e.apply(this,arguments)}return t}(),shortkeyHandler:function(e){this.isActiveImage&&("nav-next-image"===e?this.nextImage():"nav-previous-image"===e&&this.previousImage())}},mounted:function(){this.$eventBus.$on("shortkeyEvent",this.shortkeyHandler)},beforeDestroy:function(){this.$eventBus.$off("shortkeyEvent",this.shortkeyHandler)}},$d=Cd,kd=(n("8628"),Object(S["a"])($d,xd,jd,!1,null,"2f169f10",null)),Pd=kd.exports,Od=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(e._s(e.$t("digital-zoom")))]),n("b-checkbox",{model:{value:e.digitalZoom,callback:function(t){e.digitalZoom=t},expression:"digitalZoom"}},[e._v(" "+e._s(e.$t("digital-zoom-checkbox-label"))+" ")])],1)},Rd=[],Sd={name:"digital-zoom",props:{index:String},computed:{imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},digitalZoom:{get:function(){return this.imageWrapper.view.digitalZoom},set:function(e){this.$store.commit(this.imageModule+"setDigitalZoom",Boolean(e))}}}},Td=Sd,Ad=Object(S["a"])(Td,Od,Rd,!1,null,null,null),Dd=Ad.exports,Md=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"color-manipulation"},[n("h1",[e._v(e._s(e.$t("colors")))]),n("table",[e.filters&&e.filters.length>0?n("tr",{staticClass:"has-border-bottom"},[n("td",[e._v(e._s(e.$t("filter")))]),n("td",[n("b-select",{attrs:{size:"is-small"},model:{value:e.selectedFilter,callback:function(t){e.selectedFilter=t},expression:"selectedFilter"}},[n("option",{domProps:{value:null}},[e._v(e._s(e.$t("original-no-filter")))]),e._l(e.filters,(function(t){return n("option",{key:t.id,domProps:{value:t.prefix}},[e._v(" "+e._s(t.name)+" ")])}))],2)],1)]):e._e(),n("tr",[n("td",[e._v(e._s(e.$t("brightness")))]),n("td",[n("cytomine-slider",{attrs:{min:-255,max:255},model:{value:e.brightness,callback:function(t){e.brightness=t},expression:"brightness"}})],1)]),n("tr",[n("td",[e._v(e._s(e.$t("contrast")))]),n("td",[n("cytomine-slider",{attrs:{min:-255,max:255},model:{value:e.contrast,callback:function(t){e.contrast=t},expression:"contrast"}})],1)]),n("tr",[n("td",[e._v(e._s(e.$t("saturation")))]),n("td",[n("cytomine-slider",{attrs:{min:-100,max:100},model:{value:e.saturation,callback:function(t){e.saturation=t},expression:"saturation"}})],1)]),n("tr",[n("td",[e._v(e._s(e.$t("hue")))]),n("td",[n("cytomine-slider",{attrs:{min:-180,max:180},model:{value:e.hue,callback:function(t){e.hue=t},expression:"hue"}})],1)])]),n("div",{staticClass:"actions"},[n("button",{staticClass:"button is-small",on:{click:function(t){return e.reset()}}},[e._v(e._s(e.$t("button-reset")))])])])},Ed=[],Id={name:"color-manipulation",components:{CytomineSlider:pe},props:{index:String},data:function(){return{filters:null}},computed:{project:m("currentProject/project"),imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},selectedFilter:{get:function(){return this.imageWrapper.colors.filter},set:function(e){this.$store.commit(this.imageModule+"setFilter",e)}},brightness:{get:function(){return this.imageWrapper.colors.brightness},set:function(e){this.$store.commit(this.imageModule+"setBrightness",e)}},contrast:{get:function(){return this.imageWrapper.colors.contrast},set:function(e){this.$store.commit(this.imageModule+"setContrast",e)}},hue:{get:function(){return this.imageWrapper.colors.hue},set:function(e){this.$store.commit(this.imageModule+"setHue",e)}},saturation:{get:function(){return this.imageWrapper.colors.saturation},set:function(e){this.$store.commit(this.imageModule+"setSaturation",e)}}},methods:{reset:function(){this.$store.commit(this.imageModule+"resetColorManipulation")}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["ImageFilterProjectCollection"].fetchAll({filterKey:"project",filterValue:this.project.id});case 3:t=e.sent.array,t.forEach((function(e){return e.prefix=e.processingServer+e.baseUrl})),n=t.map((function(e){return e.prefix})),this.selectedFilter&&!n.includes(this.selectedFilter)&&(this.selectedFilter=null),this.filters=t,e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](0);case 12:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},Nd=Id,Ud=(n("dbc6"),Object(S["a"])(Nd,Md,Ed,!1,null,"b95ca178",null)),Fd=Ud.exports,Ld=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(e._s(e.$t("link-images")))]),e.linkedIndexes?n("div",{staticClass:"current-group"},[n("p",[e._v(e._s(e.$t("view-linked-with")))]),n("ul",e._l(e.linkedIndexes,(function(t){return n("li",{key:t},[n("i",{staticClass:"fas fa-caret-right"}),e._v(" "+e._s(e.$t("viewer-view",{number:e.imagesWithNum[t].number}))+" ("),n("image-name",{attrs:{image:e.imagesWithNum[t].image}}),e._v(") "),n("br")],1)})),0),n("button",{staticClass:"button is-small",on:{click:function(t){return e.unlink()}}},[e._v(e._s(e.$t("button-unlink")))])]):e._e(),e.otherGroups.length||e.otherSoloImages.length?[e.linkedIndexes?n("p",[e._v(e._s(e.$t("link-other-images-to-this-group")))]):n("p",[e._v(e._s(e.$t("link-view-with")))]),e._l(e.otherGroups,(function(t){var r=t.images,a=t.index,i=t.number;return n("p",{key:"group"+i},[n("b-checkbox",{attrs:{value:!1},nativeOn:{change:function(t){return function(t){return e.handleCheckboxChange(t,a)}(t)}}},[e._v(" "+e._s(e.$t("link-group",{number:i}))+" "),n("ul",{staticClass:"group"},e._l(r,(function(t){return n("li",{key:t},[n("i",{staticClass:"fas fa-caret-right"}),e._v(" "+e._s(e.$t("viewer-view",{number:e.imagesWithNum[t].number}))+" ("),n("image-name",{attrs:{image:e.imagesWithNum[t].image}}),e._v(") "),n("br")],1)})),0)])],1)})),e._l(e.otherSoloImages,(function(t){var r=t.image,a=t.index,i=t.number;return n("p",{key:a},[n("b-checkbox",{attrs:{value:!1},nativeOn:{change:function(t){return function(t){return e.handleCheckboxChange(t,null,a)}(t)}}},[e._v(" "+e._s(e.$t("viewer-view",{number:i}))+" ("),n("image-name",{attrs:{image:r}}),e._v(") ")],1)],1)}))]:e._e()],2)},qd=[],zd=(n("b54a"),{name:"link-panel",props:{index:String},components:{ImageName:Sa},data:function(){return{revisionNumber:0}},computed:{viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},images:function(){return this.viewerWrapper.images},imagesWithNum:function(){var e=this,t=1;return Object.keys(this.images).reduce((function(n,r){return n[r]={number:t,index:r,image:e.images[r].imageInstance},t++,n}),[])},linkGroups:function(){return this.viewerWrapper.links},linkGroupsWithNum:function(){var e=1;return this.linkGroups.reduce((function(t,n,r){return t[r]={number:e,index:r,images:n},e++,t}),[])},indexCurrentGroup:function(){var e=this;return this.linkGroups.findIndex((function(t){return t.includes(e.index)}))},linkedIndexes:function(){var e=this;return-1===this.indexCurrentGroup?null:this.linkGroups[this.indexCurrentGroup].filter((function(t){return t!==e.index}))},otherGroups:function(){var e=this;return Object.values(this.linkGroupsWithNum).filter((function(t){return t.index!==e.indexCurrentGroup}))},inGroupsIndexes:function(){var e=[];return this.linkGroups.forEach((function(t){return e.push.apply(e,Object(B["a"])(t))})),e},otherSoloImages:function(){var e=this;return Object.values(this.imagesWithNum).filter((function(t){return t.index!==e.index&&!e.inGroupsIndexes.includes(t.index)}))},trackedUser:function(){return this.viewerWrapper.images[this.index].tracking.trackedUser}},methods:{handleCheckboxChange:function(e,t,n){var r=this;this.trackedUser?this.$buefy.dialog.confirm({title:this.$t("possible-conflict"),message:this.$t("confirm-untrack-to-link-view"),confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){e.target.checked=!1,r.$store.commit(r.imageModule+"setTrackedUser",null),r.link(t,n)},onCancel:function(){return e.target.checked=!1}}):(e.target.checked=!1,this.link(t,n))},link:function(e,t){this.linkedIndexes?null!=e?this.$store.commit(this.viewerModule+"mergeLinkGroups",[this.indexCurrentGroup,e]):this.$store.commit(this.viewerModule+"linkImageToGroup",{indexGroup:this.indexCurrentGroup,indexImage:t}):null!=e?this.$store.commit(this.viewerModule+"linkImageToGroup",{indexGroup:e,indexImage:this.index}):this.$store.commit(this.viewerModule+"createLinkGroup",[this.index,t])},unlink:function(){this.$store.commit(this.viewerModule+"unlinkImage",{indexGroup:this.indexCurrentGroup,indexImage:this.index})}}}),Vd=zd,Bd=(n("e568"),Object(S["a"])(Vd,Ld,qd,!1,null,"249a8913",null)),Wd=Bd.exports,Jd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layers"},[n("h1",[e._v(e._s(e.$t("annotation-layers")))]),e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small",size:"is-small"}},[n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[n("b-field",[n("b-select",{attrs:{placeholder:e.$t("select-layer"),size:"is-small"},model:{value:e.selectedLayer,callback:function(t){e.selectedLayer=t},expression:"selectedLayer"}},e._l(e.unselectedLayers,(function(t){return n("option",{key:t.id,domProps:{value:t}},[e._v(" "+e._s(e.layerName(t))+" ")])})),0),n("button",{staticClass:"button is-small",attrs:{disabled:!e.selectedLayer},on:{click:function(t){return e.addLayer()}}},[e._v(e._s(e.$t("button-add")))])],1),n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",{staticClass:"checkbox-column"},[n("span",{staticClass:"far fa-eye"})]),e.reviewMode?e._e():n("th",{staticClass:"checkbox-column"},[n("span",{staticClass:"fas fa-pencil-alt"})]),n("th",{staticClass:"name-column"}),n("th",{staticClass:"checkbox-column"})])]),n("tbody",[e._l(e.selectedLayers,(function(t,r){return n("tr",{key:t.id},[n("td",{staticClass:"checkbox-column"},[n("b-checkbox",{attrs:{size:"is-small",value:t.visible},on:{input:function(t){return e.toggleLayerVisibility(r)}}})],1),e.reviewMode?e._e():n("td",{staticClass:"checkbox-column"},[n("b-checkbox",{attrs:{size:"is-small",value:t.drawOn,disabled:!e.canDraw(t)},on:{input:function(t){return e.toggleLayerDrawOn(r)}}})],1),n("td",{staticClass:"name-column"},[e._v(" "+e._s(e.layerName(t))+" ")]),n("td",{staticClass:"checkbox-column"},[e.reviewMode&&t.isReview?e._e():n("button",{staticClass:"button is-small",on:{click:function(t){return e.removeLayer(r)}}},[n("span",{staticClass:"fas fa-times"})])])])})),0===e.selectedLayers.length?n("tr",[n("td",{staticClass:"has-text-grey is-italic",attrs:{colspan:"4"}},[e._v(e._s(e.$t("no-selected-layers")))])]):e._e()],2)]),n("div",{staticClass:"opacity"},[n("label",[e._v(e._s(e.$t("layers-opacity")))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.layersOpacity,expression:"layersOpacity"}],staticClass:"slider is-fullwidth is-small",attrs:{step:"0.05",min:"0",max:"1",type:"range"},domProps:{value:e.layersOpacity},on:{__r:function(t){e.layersOpacity=t.target.value}}})])]],2)},Hd=[],Gd={name:"layers-panel",props:{index:String,layersToPreload:{type:Array,default:function(){return[]}}},data:function(){return{error:!1,layers:[],indexLayers:[],selectedLayer:null}},computed:{currentUser:m("currentUser/user"),project:m("currentProject/project"),imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},imageWrapper:function(){return this.viewerWrapper.images[this.index]},image:function(){return this.imageWrapper.imageInstance},activePanel:function(){return this.imageWrapper.activePanel},layersOpacity:{get:function(){return this.imageWrapper.style.layersOpacity},set:function(e){this.$store.commit(this.imageModule+"setLayersOpacity",Number(e))}},layersIds:function(){return this.layers.map((function(e){return e.id}))},selectedLayers:function(){return this.imageWrapper.layers.selectedLayers||[]},selectedLayersIds:function(){return this.selectedLayers.map((function(e){return e.id}))},unselectedLayers:function(){var e=this;return this.layers.filter((function(t){return!e.selectedLayersIds.includes(t.id)})).sort((function(e,t){return e.lastname<t.lastname?-1:1}))},nbReviewedAnnotations:function(){return this.indexLayers.reduce((function(e,t){return e+t.countReviewedAnnotation}),0)},hasReviewLayer:function(){return this.image.inReview||this.image.reviewed},reviewLayer:function(){return{id:-1,isReview:!0}},reviewMode:function(){return this.imageWrapper.review.reviewMode},isActiveImage:function(){return this.viewerWrapper.activeImage===this.index}},watch:{activePanel:function(){this.fetchIndexLayers()},reviewMode:function(){var e=this;if(this.reviewMode)this.layers.includes(this.reviewLayer)||this.layers.push(this.reviewLayer),this.addLayer(this.reviewLayer);else if(!this.hasReviewLayer){var t=this.selectedLayersIds.findIndex((function(t){return t===e.reviewLayer.id}));-1!==t&&this.removeLayer(t),this.layers=this.layers.filter((function(e){return!e.isReview}))}}},methods:{addAnnotationEventHandler:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.annotationEventHandler(e);var n=this.$store.state.currentProject.project.clone();"UserAnnotation"===e.type?t&&n.numberOfAnnotations++:n.numberOfReviewedAnnotations++,this.$store.dispatch("currentProject/updateProject",n)},deleteAnnotationEventHandler:function(e){this.annotationEventHandler(e)},annotationEventHandler:function(e){e.image===this.image.id&&this.fetchIndexLayers()},reloadAnnotationsHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.idImage;t&&t!==this.image.id||this.fetchIndexLayers()},layerName:function(e){if(e.isReview)return"".concat(this.$t("review-layer")," (").concat(this.nbReviewedAnnotations,")");var t=_e(e),n=this.indexLayers.find((function(t){return t.user===e.id}))||{};return"".concat(t," (").concat(n.countAnnotation||0,")")},canDraw:function(e){return!e.isReview&&this.$store.getters["currentProject/canEditLayer"](e.id)},addLayerById:function(e,t){var n=this.layers.find((function(t){return t.id===e}));n&&this.addLayer(n,t)},addLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedLayer,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.selectedLayersIds.includes(e.id)||(e.visible=t,e.drawOn=e.id===this.currentUser.id&&this.canDraw(e),this.$store.dispatch(this.imageModule+"addLayer",e),this.selectedLayer=null)},removeLayer:function(e){this.$store.dispatch(this.imageModule+"removeLayer",e)},toggleLayerVisibility:function(e){this.$store.dispatch(this.imageModule+"toggleLayerVisibility",e)},toggleLayerDrawOn:function(e){this.$store.commit(this.imageModule+"toggleLayerDrawOn",e)},fetchLayers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.project.fetchUserLayers(this.image.id);case 2:this.layers=e.sent.array,this.hasReviewLayer&&this.layers.push(this.reviewLayer),t=this.layers.map((function(e){return e.id})),this.$store.commit(this.imageModule+"filterSelectedLayers",t);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchIndexLayers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],t||"layers"===this.activePanel){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.image.fetchAnnotationsIndex();case 5:this.indexLayers=e.sent;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),shortkeyHandler:function(e){var t=this;if(this.isActiveImage&&"tool-review-toggle"===e){var n=this.selectedLayersIds.findIndex((function(e){return e===t.reviewLayer.id}));if(-1!==n)return void this.toggleLayerVisibility(n);this.layers.includes(this.reviewLayer)&&this.addLayer(this.reviewLayer)}}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.fetchLayers(),this.fetchIndexLayers(!0)]);case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e["catch"](0),this.error=!0,this.$notify({type:"error",text:this.$t("notif-error-loading-annotation-layers")}),e.abrupt("return");case 10:if(t=this.layersToPreload.map((function(e){return{id:e,visible:!0}})),this.imageWrapper.layers.selectedLayers){e.next=23;break}return this.layersToPreload.includes(this.currentUser.id)||t.push({id:this.currentUser.id,visible:!0}),e.prev=13,e.next=16,$["ProjectDefaultLayerCollection"].fetchAll({filterKey:"project",filterValue:this.project.id});case 16:n=e.sent,r=t.map((function(e){return e.id})),n.array.forEach((function(e){var n=e.user,a=e.hideByDefault;r.includes(n)||t.push({id:n,visible:!a})})),e.next=23;break;case 21:e.prev=21,e.t1=e["catch"](13);case 23:t.map((function(e){return a.addLayerById(e.id,e.visible)}));case 24:case"end":return e.stop()}}),e,this,[[0,5],[13,21]])})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){this.$eventBus.$on("addAnnotation",this.addAnnotationEventHandler),this.$eventBus.$on("deleteAnnotation",this.deleteAnnotationEventHandler),this.$eventBus.$on("reloadAnnotations",this.reloadAnnotationsHandler),this.$eventBus.$on("shortkeyEvent",this.shortkeyHandler)},beforeDestroy:function(){this.$eventBus.$off("addAnnotation",this.addAnnotationEventHandler),this.$eventBus.$off("deleteAnnotation",this.deleteAnnotationEventHandler),this.$eventBus.$off("reloadAnnotations",this.reloadAnnotationsHandler),this.$eventBus.$off("shortkeyEvent",this.shortkeyHandler)}},Kd=Gd,Yd=(n("59e3"),Object(S["a"])(Kd,Jd,Hd,!1,null,"7e41f174",null)),Zd=Yd.exports,Xd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(e._s(e.$t("terms")))]),n("div",{staticClass:"ontology-tree-wrapper"},[n("div",{staticClass:"header-tree"},[n("b-input",{attrs:{placeholder:e.$t("search-placeholder"),size:"is-small",expanded:""},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),n("div",{staticClass:"sidebar-tree"},[e._m(0),n("div",{staticClass:"opacity"},[e._v(e._s(e.$t("opacity")))])])],1),n("ontology-tree",{attrs:{ontology:e.ontology,allowSelection:!1,searchString:e.searchString,additionalNodes:e.additionalNodes},scopedSlots:e._u([{key:"custom-sidebar",fn:function(t){var r=t.term;return[n("div",{staticClass:"sidebar-tree"},[n("div",{staticClass:"visibility"},[r.id?n("b-checkbox",{attrs:{size:"is-small",value:e.terms[e.termsMapping[r.id]].visible},on:{input:function(t){return e.toggleTermVisibility(e.termsMapping[r.id])}}}):n("b-checkbox",{attrs:{size:"is-small"},model:{value:e.displayNoTerm,callback:function(t){e.displayNoTerm=t},expression:"displayNoTerm"}})],1),n("div",{staticClass:"opacity"},[r.id?n("input",{staticClass:"slider is-fullwidth is-small",attrs:{step:"0.05",min:"0",max:"1",type:"range",disabled:!e.terms[e.termsMapping[r.id]].visible},domProps:{value:e.terms[e.termsMapping[r.id]].opacity},on:{change:function(t){return e.changeOpacity(e.termsMapping[r.id],t)},input:function(t){return e.changeOpacity(e.termsMapping[r.id],t)}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.noTermOpacity,expression:"noTermOpacity"}],staticClass:"slider is-fullwidth is-small",attrs:{step:"0.05",min:"0",max:"1",type:"range"},domProps:{value:e.noTermOpacity},on:{__r:function(t){e.noTermOpacity=t.target.value}}})])])]}}])})],1),n("div",{staticClass:"has-text-right"},[n("button",{staticClass:"button is-small",on:{click:function(t){return e.resetOpacities()}}},[e._v(e._s(e.$t("button-reset-opacities")))])])])},Qd=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"visibility"},[n("i",{staticClass:"far fa-eye"})])}],ep={name:"ontology-panel",components:{OntologyTree:jr},props:{index:String},data:function(){return{searchString:""}},computed:{ontology:m("currentProject/ontology"),imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},terms:function(){return this.imageWrapper.style.terms},termsMapping:function(){var e={};return this.terms.forEach((function(t,n){return e[t.id]=n})),e},additionalNodes:function(){return[{id:0,name:this.$t("no-term")}]},displayNoTerm:{get:function(){return this.imageWrapper.style.displayNoTerm},set:function(e){this.$store.dispatch(this.imageModule+"setDisplayNoTerm",e)}},noTermOpacity:{get:function(){return this.imageWrapper.style.noTermOpacity},set:function(e){this.$store.commit(this.imageModule+"setNoTermOpacity",Number(e))}}},methods:{toggleTermVisibility:function(e){this.$store.dispatch(this.imageModule+"toggleTermVisibility",e)},changeOpacity:function(e,t){var n=Number(t.target.value);this.$store.commit(this.imageModule+"setTermOpacity",{indexTerm:e,opacity:n})},resetOpacities:function(){this.$store.commit(this.imageModule+"resetTermOpacities")}}},tp=ep,np=(n("7aa5"),Object(S["a"])(tp,Xd,Qd,!1,null,"97acfbd8",null)),rp=np.exports,ap=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"properties-panel"},[n("h1",[e._v(e._s(e.$t("properties")))]),n("b-field",{attrs:{horizontal:"",label:e.$t("key")}},[n("b-select",{attrs:{size:"is-small"},model:{value:e.selectedPropertyKey,callback:function(t){e.selectedPropertyKey=t},expression:"selectedPropertyKey"}},[n("option",{domProps:{value:null}},[e._v(" "+e._s(e.$t("no-key-selected"))+" ")]),e._l(e.propertiesKeys,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])}))],2)],1),n("b-field",{attrs:{horizontal:"",label:e.$t("color")}},[n("b-select",{attrs:{size:"is-small"},model:{value:e.selectedPropertyColor,callback:function(t){e.selectedPropertyColor=t},expression:"selectedPropertyColor"}},e._l(e.colors,(function(t){return n("option",{key:t.name,domProps:{value:t}},[e._v(" "+e._s(e.$t(t.name))+" ")])})),0)],1)],1)},ip=[],sp={name:"properties-panel",props:{index:String},computed:{colors:function(){return no},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},selectedPropertyKey:{get:function(){return this.imageWrapper.properties.selectedPropertyKey},set:function(e){this.$store.dispatch(this.imageModule+"setSelectedPropertyKey",e)}},selectedPropertyColor:{get:function(){return this.imageWrapper.properties.selectedPropertyColor},set:function(e){this.$store.commit(this.imageModule+"setSelectedPropertyColor",e)}},propertiesKeys:function(){return this.imageWrapper.properties.propertiesKeys}}},op=sp,cp=(n("93aa"),Object(S["a"])(op,ap,ip,!1,null,null,null)),lp=cp.exports,up=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"follow-panel"},[n("h1",[e._v(e._s(e.$t("broadcast")))]),n("div",[n("b-checkbox",{attrs:{type:"is-info",disabled:e.disabledBroadcast},model:{value:e.broadcastModel,callback:function(t){e.broadcastModel=t},expression:"broadcastModel"}},[e._v(" "+e._s(e.$t("broadcast-my-position"))+" ")])],1),n("h2",{class:{disabled:e.broadcast}},[e._v(e._s(e.$t("follow-user")))]),n("div",{staticClass:"follow-panel-content",class:{disabled:e.broadcast}},[n("div",{staticClass:"field"},[n("b-radio",{attrs:{"native-value":null,type:"is-info",disabled:e.broadcast},model:{value:e.trackedUserModel,callback:function(t){e.trackedUserModel=t},expression:"trackedUserModel"}},[e._v(" "+e._s(e.$t("no-tracking"))+" ")])],1),e.onlineManagers.length>0?[n("h3",[e._v(e._s(e.$t("online-managers")))]),e._l(e.onlineManagers,(function(t){return n("div",{key:t.id,staticClass:"field"},[n("b-radio",{attrs:{"native-value":t.id,type:"is-info",disabled:e.broadcast},model:{value:e.trackedUserModel,callback:function(t){e.trackedUserModel=t},expression:"trackedUserModel"}},[n("username",{attrs:{user:t}})],1)],1)}))]:e._e(),e.onlineContributors.length>0?[n("h3",[e._v(e._s(e.$t("online-contributors")))]),e._l(e.onlineContributors,(function(t){return n("div",{key:t.id,staticClass:"field"},[n("b-radio",{attrs:{"native-value":t.id,type:"is-info",disabled:e.broadcast},model:{value:e.trackedUserModel,callback:function(t){e.trackedUserModel=t},expression:"trackedUserModel"}},[n("username",{attrs:{user:t}})],1)],1)}))]:e._e()],2)])},dp=[],pp={name:"follow-panel",components:{Username:$e},props:{index:String,view:Object},data:function(){return{onlineUsers:[],broadcastModel:!1,trackedUserModel:null,timeoutOnlineUsers:null,timeoutTracking:null,disabledBroadcast:!1}},computed:{projectMembers:m("currentProject/members"),projectManagers:m("currentProject/managers"),projectContributors:function(){return this.$store.getters["currentProject/contributors"]},currentUser:m("currentUser/user"),project:m("currentProject/project"),blindMode:function(){return this.project.blindMode},viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},images:function(){return this.viewerWrapper.images},linkedIndexes:function(){var e=this;return this.viewerWrapper.links.find((function(t){return t.includes(e.index)}))||[]},linkedIndexTracking:function(){var e=this;return this.linkedIndexes.some((function(t){return t!==e.index&&e.images[t].tracking.trackedUser}))},imageWrapper:function(){return this.viewerWrapper.images[this.index]},image:function(){return this.imageWrapper.imageInstance},activePanel:function(){return this.imageWrapper.activePanel},broadcast:{get:function(){return this.imageWrapper.tracking.broadcast},set:function(e){this.$store.commit(this.imageModule+"setBroadcast",e)}},alreadyBroadcastingImage:function(){var e=this;return Object.keys(this.images).some((function(t){var n=e.images[t];return t!==e.index&&n.imageInstance&&n.imageInstance.id===e.image.id&&n.tracking.broadcast}))},trackedUser:{get:function(){return this.imageWrapper.tracking.trackedUser},set:function(e){this.$store.commit(this.imageModule+"setTrackedUser",e)}},onlineManagers:function(){var e=this;return this.projectManagers.filter((function(t){var n=t.id;return e.onlineUsers.includes(n)}))},onlineContributors:function(){var e=this;return this.projectContributors.filter((function(t){var n=t.id;return e.onlineUsers.includes(n)}))},trackedUserFullName:function(){var e=this,t=this.projectMembers.find((function(t){return t.id===e.trackedUser}));if(t)return t.fullName}},watch:{activePanel:function(e){"follow"===e&&this.fetchOnline()},broadcast:function(){this.broadcast&&(this.trackedUser=null)},alreadyBroadcastingImage:function(e){e||(this.disabledBroadcast=!1)},broadcastModel:function(e){var t=this;if(e&&this.alreadyBroadcastingImage)return this.$notify({type:"error",text:this.$t("notif-error-already-broadcasting-this-image")}),this.disabledBroadcast=!0,void this.$nextTick((function(){return t.broadcastModel=!1}));this.broadcast=e},trackedUserModel:function(e){var t=this;e&&this.linkedIndexTracking?this.$buefy.dialog.confirm({title:this.$t("possible-conflict"),message:this.$t("confirm-unlink-view-to-track"),confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){t.$store.commit(t.viewerModule+"unlinkImage",{indexImage:t.index}),t.trackedUser=e},onCancel:function(){return t.trackedUserModel=null}}):this.trackedUser=e},trackedUser:function(e){this.trackedUserModel=e,e&&(this.track(),this.fetchOnline())},onlineUsers:function(e){this.trackedUser&&!e.includes(this.trackedUser)&&(this.$notify({type:"info",text:this.$t("end-tracking-user-no-longer-broadcasting",{username:this.trackedUserFullName,imageName:this.blindMode?this.image.blindedName:this.image.instanceFilename})}),this.trackedUser=null)}},methods:{track:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.trackedUser){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,$["UserPosition"].fetchLastPosition(this.image.id,this.trackedUser);case 5:if(t=e.sent,t.id&&t.broadcast){e.next=8;break}return e.abrupt("return");case 8:this.view.animate({center:[t.x,t.y],zoom:t.zoom,rotation:t.rotation,duration:500}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),this.$notify({type:"error",text:this.$t("notif-error-tracked-user-position")});case 14:clearTimeout(this.timeoutTracking),this.timeoutTracking=setTimeout(this.track,N.TRACKING_REFRESH_INTERVAL);case 16:case"end":return e.stop()}}),e,this,[[2,11]])})));function t(){return e.apply(this,arguments)}return t}(),fetchOnline:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.trackedUser||"follow"===this.activePanel){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.image.fetchConnectedUsers(!0);case 4:t=e.sent,this.onlineUsers=t.filter((function(e){return e!==n.currentUser.id})),clearTimeout(this.timeoutOnlineUsers),this.timeoutOnlineUsers=setTimeout(this.fetchOnline,N.BROADCASTING_USERS_REFRESH_INTERVAL);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.trackedUserModel=this.trackedUser,this.broadcastModel=this.broadcast,this.fetchOnline(),this.track()},beforeDestroy:function(){clearTimeout(this.timeoutTracking),clearTimeout(this.timeoutOnlineUsers)}},mp=pp,fp=(n("ccde"),n("5fb3"),Object(S["a"])(mp,up,dp,!1,null,"594260b2",null)),hp=fp.exports,vp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(e._s(e.$t("review")))]),e.image.reviewed?[n("b-message",{attrs:{type:"is-success",size:"is-small","has-icon":""}},[n("i18n",{attrs:{path:e.isReviewer?"you-have-validated-image-on":"image-validated-by-on"}},[e.isReviewer?e._e():n("username",{attrs:{place:"user",user:e.reviewer}}),n("span",{attrs:{place:"date"}},[e._v(e._s(e._f("moment")(Number(e.image.reviewStop),"ll LT")))])],1)],1),e.isReviewer?n("button",{staticClass:"button is-small is-fullwidth",on:{click:function(t){return e.unvalidate()}}},[e._m(0),n("span",[e._v(e._s(e.$t("button-unvalidate-and-continue-review")))])]):e._e()]:e.image.inReview?[e.isReviewer?[e.reviewMode?n("div",[n("div",{staticClass:"small"},[n("i18n",{attrs:{path:"review-list-visible-layers"}},[n("list-usernames",{attrs:{place:"visibleLayers",users:e.visibleUserLayers}})],1),e.taskReviewAll&&100!==e.taskReviewAll.progress?n("cytomine-task",{attrs:{task:e.taskReviewAll},on:{"update:task":function(t){e.taskReviewAll=t}}}):n("div",[e._v(" "+e._s(this.$t("review-explanation"))+" "),n("div",{staticClass:"buttons is-centered are-small has-addons is-fullwidth"},[n("button",{staticClass:"button",on:{click:function(t){return e.reviewAll(!0)}}},[e._m(2),n("span",[e._v(e._s(e.$t("button-accept-all")))])]),n("button",{staticClass:"button",on:{click:function(t){return e.reviewAll(!1)}}},[e._m(3),n("span",[e._v(e._s(e.$t("button-reject-all")))])])])])],1),n("div",{staticClass:"buttons are-small"},[n("button",{staticClass:"button is-fullwidth",on:{click:function(t){e.reviewMode=!1}}},[e._m(4),n("span",[e._v(e._s(e.$t("button-continue-review-later")))])]),n("button",{staticClass:"button is-danger is-fullwidth",on:{click:function(t){return e.cancelReview()}}},[e._m(5),n("span",[e._v(e._s(e.$t("button-cancel-review")))])]),n("button",{staticClass:"button is-success is-fullwidth",on:{click:function(t){return e.validate()}}},[e._m(6),n("span",[e._v(e._s(e.$t("button-validate-review")))])])])]):n("div",[n("b-message",{attrs:{type:"is-info",size:"is-small","has-icon":""}},[n("i18n",{attrs:{path:"you-are-reviewing-image-since"}},[n("span",{attrs:{place:"date"}},[e._v(e._s(e._f("moment")(Number(e.image.reviewStart),"ll LT")))])])],1),n("button",{staticClass:"button is-small is-fullwidth",on:{click:function(t){e.reviewMode=!0}}},[e._m(1),n("span",[e._v(e._s(e.$t("button-continue-review")))])])],1)]:n("b-message",{attrs:{type:"is-info",size:"is-small","has-icon":""}},[n("i18n",{attrs:{path:"image-in-review-by-since"}},[n("username",{attrs:{place:"user",user:e.reviewer}}),n("span",{attrs:{place:"date"}},[e._v(e._s(e._f("moment")(Number(e.image.reviewStart),"ll LT")))])],1)],1)]:[e._v(" "+e._s(e.$t("image-not-reviewed"))+" "),n("button",{staticClass:"button is-small is-fullwidth has-margin-top",on:{click:function(t){return e.startReview()}}},[e._m(7),n("span",[e._v(e._s(e.$t("button-start-review")))])])]],2)},gp=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-thumbs-down"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-play-circle"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-check"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-minus"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-pause-circle"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-times"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-thumbs-up"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-play-circle"})])}],bp={name:"review-panel",props:{index:String},components:{Username:$e,ListUsernames:Re,CytomineTask:Ec},data:function(){return{taskReviewAll:null,reviewer:null}},computed:{currentUser:m("currentUser/user"),project:m("currentProject/project"),imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},image:function(){return this.imageWrapper.imageInstance.clone()},reviewMode:{get:function(){return this.imageWrapper.review.reviewMode},set:function(e){this.$store.commit(this.imageModule+"setReviewMode",e)}},isReviewer:function(){return this.image.reviewUser===this.currentUser.id},selectedLayers:function(){return this.imageWrapper.layers.selectedLayers||[]},visibleUserLayers:function(){return this.selectedLayers.filter((function(e){return e.visible&&!e.isReview}))},visibleUserLayerIds:function(){return this.visibleUserLayers.map((function(e){return e.id}))},reviewLayer:function(){return this.selectedLayers.find((function(e){return e.isReview}))||{}}},methods:{commitImage:function(){this.$store.commit(this.imageModule+"setImageInstance",this.image)},startReview:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.image.review();case 3:this.commitImage(),this.reviewMode=!0,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-start-review")});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),cancelReview:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.image.stopReview(!0);case 3:this.commitImage(),this.reviewMode=!1,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-cancel-review")});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),validate:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.image.stopReview();case 3:this.commitImage(),this.reviewMode=!1,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-validate-review")});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),unvalidate:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.image.stopReview(!0);case 3:this.commitImage(),this.reviewMode=!1,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-unvalidate-review")});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),reviewAll:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new $["Task"]({project:this.project.id}).save();case 3:return this.taskReviewAll=e.sent,e.next=6,$["AnnotationCollection"].reviewAll({accept:t,image:this.image.id,users:this.visibleUserLayerIds,task:this.taskReviewAll.id});case 6:this.$eventBus.$emit("reloadAnnotations",{idImage:this.image.id,clear:!0}),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),this.taskReviewAll=null,this.$notify({type:"error",text:this.$t("notif-error-review-"+(t?"accept":"reject")+"-all")});case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.image.reviewUser||this.isReviewer){e.next=4;break}return e.next=3,$["User"].fetch(this.image.reviewUser);case 3:this.reviewer=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},yp=bp,wp=(n("0fc4"),Object(S["a"])(yp,vp,gp,!1,null,"f97fe7e4",null)),_p=wp.exports,xp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"playground",staticClass:"annotation-details-playground"},[e.selectedFeature&&e.selectedFeature.properties&&e.reload?n("vue-draggable-resizable",{directives:[{name:"show",rawName:"v-show",value:e.displayAnnotDetails,expression:"displayAnnotDetails"}],ref:"detailsPanel",staticClass:"draggable",attrs:{parent:!0,resizable:!1,"drag-handle":".drag",w:e.width,h:"auto",x:e.positionAnnotDetails.x,y:e.positionAnnotDetails.y},on:{dragstop:e.dragStop}},[n("div",{staticClass:"actions"},[n("h1",[e._v(e._s(e.$t("current-selection")))]),n("button",{staticClass:"drag button is-small close"},[n("i",{staticClass:"fas fa-arrows-alt"})]),n("button",{staticClass:"button is-small close",on:{click:function(t){e.displayAnnotDetails=!1}}},[n("i",{staticClass:"fas fa-times"})])]),n("div",{staticClass:"annotation-details-container"},[n("annotation-details",{key:e.selectedFeature.id,attrs:{annotation:e.selectedFeature.properties.annot,terms:e.terms,users:e.allUsers,showImageInfo:!1,showComments:e.showComments},on:{addTerm:e.addTerm,updateTerms:function(t){return e.updateTerms()},updateProperties:function(t){return e.updateProperties()},centerView:function(t){return e.centerViewOnAnnot()},deletion:function(t){return e.handleDeletion()}}})],1)]):e._e()],1)},jp=[],Cp=n("fb19"),$p=n.n(Cp),kp={name:"annotations-details-container",components:{VueDraggableResizable:$p.a,AnnotationDetails:ps},props:{index:String,view:Object},data:function(){return{width:320,projectUsers:[],userJobs:[],reload:!0,format:new Ju["a"],showComments:!1}},computed:{viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},image:function(){return this.imageWrapper.imageInstance},displayAnnotDetails:{get:function(){return this.imageWrapper.selectedFeatures.displayAnnotDetails},set:function(e){this.$store.commit(this.imageModule+"setDisplayAnnotDetails",e)}},positionAnnotDetails:{get:function(){return this.imageWrapper.selectedFeatures.positionAnnotDetails},set:function(e){this.$store.commit(this.imageModule+"setPositionAnnotDetails",e)}},selectedFeature:function(){return this.$store.getters[this.imageModule+"selectedFeature"]},allUsers:function(){var e=this.projectUsers.concat(this.userJobs);return e.forEach((function(e){return e.fullName=_e(e)})),e},annot:function(){return this.selectedFeature?this.selectedFeature.properties.annot:{}},terms:function(){return this.$store.getters["currentProject/terms"]||[]}},watch:{selectedFeature:function(){if(this.selectedFeature){this.displayAnnotDetails=!0;var e=this.imageWrapper.selectedFeatures.showComments;this.showComments=e===this.annot.id,null!==e&&this.$store.commit(this.imageModule+"setShowComments",null)}}},methods:{fetchUsers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new $["UserCollection"]({filterKey:"project",filterValue:this.image.project}),e.next=3,t.fetchAll();case 3:this.projectUsers=e.sent.array;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchUserJobs:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["UserJobCollection"].fetchAll({filterKey:"project",filterValue:this.image.project});case 2:this.userJobs=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),centerViewOnAnnot:function(){var e=this.format.readGeometry(this.annot.location);this.view.fit(e,{duration:500,padding:[10,10,10,10],maxZoom:this.image.depth})},addTerm:function(e){this.$store.dispatch(this.viewerModule+"addTerm",e)},updateTerms:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.annot.clone().fetch();case 2:return t=e.sent,e.next=5,Gu(t);case 5:this.$eventBus.$emit("editAnnotation",t),this.$store.commit(this.imageModule+"changeAnnotSelectedFeature",{indexFeature:0,annot:t});case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateProperties:function(){this.$store.dispatch(this.imageModule+"refreshProperties",this.index)},handleDeletion:function(){this.$store.commit(this.imageModule+"addAction",{annot:this.annot,type:Hu.DELETE}),this.$eventBus.$emit("deleteAnnotation",this.annot)},dragStop:function(e,t){this.positionAnnotDetails={x:e,y:t}},handleResize:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$nextTick();case 2:this.$refs.playground&&(t=Math.max(this.$refs.playground.clientWidth-this.width,0),n=Math.max(this.$refs.playground.clientHeight-this.$refs.detailsPanel.height,0),r=Math.min(this.positionAnnotDetails.x,t),a=Math.min(this.positionAnnotDetails.y,n),this.positionAnnotDetails={x:r,y:a},this.reload=!1,this.$nextTick((function(){return i.reload=!0})));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.fetchUsers(),this.fetchUserJobs()},mounted:function(){window.addEventListener("resize",this.handleResize),this.$eventBus.$on("updateMapSize",this.handleResize)},destroyed:function(){window.removeEventListener("resize",this.handleResize),this.$eventBus.$off("updateMapSize",this.handleResize)}},Pp=kp,Op=(n("d67d"),n("f929"),Object(S["a"])(Pp,xp,jp,!1,null,"6f28865f",null)),Rp=Op.exports,Sp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vl-interaction-select",{ref:"interactionSelect",attrs:{ident:"select-target-"+e.index,filter:e.filterFunction,features:e.selectedFeatures,"toggle-condition":e.never,"remove-condition":e.shiftKeyOnly,multi:!0},on:{"update:features":function(t){e.selectedFeatures=t}}},[n("vl-style-func",{attrs:{factory:e.styleFunctionFactory}})],1)},Tp=[],Ap=n("06f8"),Dp={name:"select-interaction",props:{index:String},computed:{imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},selectedFeatures:{get:function(){return this.imageWrapper.selectedFeatures.selectedFeatures},set:function(e){var t=e.filter((function(e){return!Object.keys(e).includes("id")&&null===e.properties}));if(1==t.length)return e=t,void this.$store.commit(this.imageModule+"setSelectedFeatures",e);e.sort((function(e,t){return e.properties.annot.area>t.properties.annot.area?1:-1}));var n=this.imageWrapper.selectedFeatures.selectionTargetedFeatures,r=this.imageWrapper.selectedFeatures.selectedFeatures[0];if(this.$store.commit(this.imageModule+"setSelectionTargetedFeatures",e),0==this.imageWrapper.selectedFeatures.selectedFeatures.length)e.length>=1&&(e=[e[0]]);else if(e.length>1)if(e.map((function(e){return e.id})).includes(r.id)){var a=n.findIndex((function(e){return e.id===r.id})),i=n.slice(0,a+1);a=0;for(var s=0;s<e.length;s++)if(!i.map((function(e){return e.id})).includes(e[s].id)){a=s;break}e=[e[a]]}else e=[e[0]];if(e.length>=1&&null!==e[0].properties){var o=e[0].properties.annot;o.recordAction()}this.$store.commit(this.imageModule+"setSelectedFeatures",e)}},terms:function(){return this.imageWrapper.style.terms||[]},styleFunctionFactory:function(){var e=this;return this.imageWrapper.selectedFeatures.selectedFeatures,this.imageWrapper.style.layersOpacity,this.terms.forEach((function(e){e.visible,e.opacity})),this.imageWrapper.style.displayNoTerm,this.imageWrapper.style.noTermOpacity,this.imageWrapper.draw.activeEditTool,this.imageWrapper.properties.selectedPropertyValues,this.imageWrapper.properties.selectedPropertyColor,this.imageWrapper.review.reviewMode,function(){return e.$store.getters[e.imageModule+"genStyleFunction"]}},filterFunction:function(){return function(e){return!Os(e)}},never:function(){return Ap["g"]},shiftKeyOnly:function(){return Ap["k"]}},watch:{styleFunctionFactory:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$refs.interactionSelect||!this.$refs.interactionSelect.$interaction){e.next=3;break}return e.next=3,this.$refs.interactionSelect.$interaction.getFeatures().forEach((function(e){return e.changed()}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Mp=Dp,Ep=Object(S["a"])(Mp,Sp,Tp,!1,null,null,null),Ip=Ep.exports,Np=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("vl-layer-vector",[n("vl-source-vector",{ref:"olSourceDrawTarget",attrs:{ident:e.drawSourceName}})],1),e.nbActiveLayers>0||e.drawCorrection?n("vl-interaction-draw",{ref:"olDrawInteraction",attrs:{source:e.drawSourceName,type:e.drawType,freehand:e.drawFreehand,"freehand-condition":void 0,"geometry-function":e.drawGeometryFunction},on:{drawend:e.drawEndHandler}}):e._e()],1)},Up=[],Fp=n("5bc3"),Lp={name:"draw-interaction",props:{index:String},data:function(){return{format:new Ju["a"]}},computed:{currentUser:m("currentUser/user"),imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},rotation:function(){return this.imageWrapper.view.rotation},termsToAssociate:function(){return this.imageWrapper.draw.termsNewAnnots},image:function(){return this.imageWrapper.imageInstance},activeTool:function(){return this.imageWrapper.draw.activeTool},activeEditTool:function(){return this.imageWrapper.draw.activeEditTool},selectedFeature:function(){return this.$store.getters[this.imageModule+"selectedFeature"]},drawType:function(){switch(this.activeTool){case"point":return"Point";case"line":case"freehand-line":return"LineString";case"rectangle":case"circle":return"Circle";case"polygon":case"freehand-polygon":case"select":return"Polygon"}},drawCorrection:function(){return"select"===this.activeTool},drawFreehand:function(){return"freehand-polygon"===this.activeTool||"freehand-line"===this.activeTool||this.drawCorrection},drawGeometryFunction:function(){var e=this;return"rectangle"===this.activeTool?function(t,n){var r=e.rotateCoords(t,e.rotation),a=Object(Pt["a"])(r,2),i=a[0],s=a[1],o=[s[0],i[1]],c=[i[0],s[1]],l=[i,o,s,c,i],u=[e.rotateCoords(l,-e.rotation)];return n?n.setCoordinates(u):n=new Fp["b"](u),n}:null},layers:function(){return this.imageWrapper.layers.selectedLayers||[]},activeLayers:function(){return this.layers.filter((function(e){return e.drawOn}))},nbActiveLayers:function(){return this.activeLayers.length},drawSourceName:function(){return"draw-target-".concat(this.index)}},watch:{activeTool:function(){this.$refs.olDrawInteraction.scheduleRecreate()}},methods:{rotateCoords:function(e,t){var n=Math.cos(t),r=Math.sin(t);return e.map((function(e){var t=Object(Pt["a"])(e,2),a=t[0],i=t[1];return[a*n+i*r,-a*r+i*n]}))},clearDrawnFeatures:function(){this.$refs.olSourceDrawTarget.clear(!0)},drawEndHandler:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.feature,!this.drawCorrection){e.next=6;break}return e.next=4,this.endCorrection(n);case 4:e.next=9;break;case 6:if(!(this.nbActiveLayers>0)){e.next=9;break}return e.next=9,this.endDraw(n);case 9:this.clearDrawnFeatures();case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),endDraw:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.activeLayers.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r,a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=new $["Annotation"]({location:n.getWktLocation(t),image:n.image.id,user:r.id,term:n.termsToAssociate}),e.prev=1,e.next=4,i.save();case 4:i.userByTerm=n.termsToAssociate.map((function(e){return{term:e,user:[n.currentUser.id]}})),n.$eventBus.$emit("addAnnotation",i),a===n.nbActiveLayers-1&&n.$eventBus.$emit("selectAnnotation",{index:n.index,annot:i}),n.$store.commit(n.imageModule+"addAction",{annot:i,type:Hu.CREATE}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),n.$notify({type:"error",text:n.$t("notif-error-annotation-creation")});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),endCorrection:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectedFeature){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n=this.selectedFeature.properties.annot,e.next=6,$["Annotation"].correctAnnotations({location:this.getWktLocation(t),review:n.type===$["AnnotationType"].REVIEWED,remove:"correct-remove"===this.activeEditTool,annotation:n.id});case 6:r=e.sent,r&&(r.userByTerm=n.userByTerm,this.$store.commit(this.imageModule+"addAction",{annot:r,type:Hu.UPDATE}),this.$eventBus.$emit("editAnnotation",r)),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),this.$notify({type:"error",text:this.$t("notif-error-annotation-correction")});case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(t){return e.apply(this,arguments)}return t}(),getWktLocation:function(e){var t=e.getGeometry();return"Circle"===t.getType()&&e.setGeometry(Object(Fp["c"])(t)),this.format.writeFeature(e)}}},qp=Lp,zp=Object(S["a"])(qp,Np,Up,!1,null,null,null),Vp=zp.exports,Bp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["modify"===e.activeEditTool?n("vl-interaction-modify",{attrs:{source:e.selectSource,"delete-condition":e.deleteCondition},on:{modifystart:e.startEdit,modifyend:e.endEdit}}):e._e(),"translate"===e.activeEditTool?n("vl-interaction-translate",{attrs:{source:e.selectSource},on:{translatestart:e.startEdit,translateend:e.endEdit}}):e._e(),"rotate"===e.activeEditTool?n("vl-interaction-rotate",{attrs:{source:e.selectSource},on:{rotatestart:e.startEdit,rotateend:e.endEdit}}):e._e()],1)},Wp=[],Jp={name:"modify-interaction",props:{index:String},data:function(){return{format:new Ju["a"]}},computed:{imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},image:function(){return this.imageWrapper.imageInstance},selectSource:function(){return"select-target-".concat(this.index)},activeEditTool:function(){return this.imageWrapper.draw.activeEditTool},ongoingEdit:{get:function(){return this.imageWrapper.draw.ongoingEdit},set:function(e){this.$store.commit(this.imageModule+"setOngoingEdit",e)}},deleteCondition:function(){return function(e){return e.originalEvent.ctrlKey&&Object(Ap["l"])(e)}}},methods:{startEdit:function(){this.ongoingEdit=!0},endEdit:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.features,n.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.get("annot")){e.next=2;break}return e.abrupt("return");case 2:return n=t.get("annot").clone(),a=n.location,e.prev=4,n.location=r.format.writeFeature(t),n.terms=n.term,e.next=9,n.save();case 9:r.$eventBus.$emit("editAnnotation",n),r.$store.commit(r.imageModule+"addAction",{annot:n,type:Hu.UPDATE}),e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](4),r.$notify({type:"error",text:r.$t("notif-error-annotation-update")}),n.location=a,t.setGeometry(r.format.readGeometry(n.location));case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()),this.ongoingEdit=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},Hp=Jp,Gp=Object(S["a"])(Hp,Bp,Wp,!1,null,null,null),Kp=Gp.exports,Yp=n("2986"),Zp=n("a2c7"),Xp=n("e50d"),Qp=n("1b42"),em=n("0c10");function tm(e){return 259*(e+255)/255/(259-e)}function nm(e){var t=e*Math.PI/180,n=Math.cos(t),r=Math.sin(t),a=Math.sqrt(1/3),i=[[n+(1-n)/3,1/3*(1-n)-a*r,1/3*(1-n)+a*r],[1/3*(1-n)+a*r,n+1/3*(1-n),1/3*(1-n)-a*r],[1/3*(1-n)-a*r,1/3*(1-n)+a*r,n+1/3*(1-n)]];return i}function rm(e){return e<0?0:e>255?255:e}function am(e){for(var t=0;t<3;t++){var n=truncatePixelValue(contrastFactor*(e[t]-128)+128)+brightness;e[t]=truncatePixelValue(n)}}function im(e){for(var t=e[0],n=e[1],r=e[2],a=Math.sqrt(t*t*Pr+n*n*Pg+r*r*Pb),i=0;i<3;i++){var s=a+(e[i]-a)*(1+saturation/100);e[i]=truncatePixelValue(s)}}function sm(e){for(var t=e[0],n=e[1],r=e[2],a=0;a<3;a++){var i=hueMatrix[a][0]*t+hueMatrix[a][1]*n+hueMatrix[a][2]*r;e[a]=truncatePixelValue(i)}}var om={Pr:.299,Pg:.587,Pb:.114,truncatePixelValue:rm,changeBrightnessContrast:am,changeSaturation:im,changeHue:sm,computeContrastFactor:tm,computeHueMatrix:nm,contrastFactor:-1,hueMatrix:-1};function cm(e){var t=e[0];return 0===brightness&&0===contrast||(-1===contrastFactor&&(contrastFactor=computeContrastFactor(contrast)),changeBrightnessContrast(t)),0!==saturation&&changeSaturation(t),0!==hue&&(-1===hueMatrix&&(hueMatrix=computeHueMatrix(hue)),changeHue(t)),t}function lm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function um(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lm(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dm={name:"cytomine-image",props:{index:String},components:{ImageName:Sa,AnnotationLayer:ed,RotationSelector:sd,ScaleLine:pd,DrawTools:_d,AnnotationDetailsContainer:Rp,InformationPanel:Pd,DigitalZoom:Dd,ColorManipulation:Fd,LinkPanel:Wd,LayersPanel:Zd,OntologyPanel:rp,PropertiesPanel:lp,FollowPanel:hp,ReviewPanel:_p,SelectInteraction:Ip,DrawInteraction:Vp,ModifyInteraction:Kp},data:function(){return{minZoom:0,projectedMousePosition:[0,0],baseSource:null,routedAnnotation:null,timeoutSavePosition:null,loading:!0,overview:null}},computed:{document:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return document})),routedAction:function(){return this.$route.query.action},configUI:m("currentProject/configUI"),viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},nbImages:function(){return Object.keys(this.viewerWrapper.images).length},imageWrapper:function(){return this.viewerWrapper.images[this.index]},image:function(){return this.imageWrapper.imageInstance},canEdit:function(){return this.$store.getters["currentProject/canEditImage"](this.image)},projectionName:function(){return"CYTO-".concat(this.image.id)},terms:function(){return this.$store.getters["currentProject/terms"]},selectedLayers:function(){return this.imageWrapper.layers.selectedLayers||[]},isActiveImage:{get:function(){return this.viewerWrapper.activeImage===this.index},set:function(e){if(!e)throw new Error("Cannot unset active map");this.viewerWrapper&&this.$store.commit(this.viewerModule+"setActiveImage",this.index)}},activePanel:function(){return this.imageWrapper.activePanel},activeTool:function(){return this.imageWrapper.draw.activeTool},activeEditTool:function(){return this.imageWrapper.draw.activeEditTool},maxZoom:function(){return this.$store.getters[this.imageModule+"maxZoom"]},center:{get:function(){return this.imageWrapper.view.center},set:function(e){this.$store.dispatch(this.viewerModule+"setCenter",{index:this.index,center:e})}},zoom:{get:function(){return this.imageWrapper.view.zoom},set:function(e){this.$store.dispatch(this.viewerModule+"setZoom",{index:this.index,zoom:Number(e)})}},rotation:{get:function(){return this.imageWrapper.view.rotation},set:function(e){this.$store.dispatch(this.viewerModule+"setRotation",{index:this.index,rotation:Number(e)})}},viewState:function(){return{center:this.center,zoom:this.zoom,rotation:this.rotation}},extent:function(){return[0,0,this.image.width,this.image.height]},imageSize:function(){return[this.image.width,this.image.height]},baseLayerURLs:function(){var e=this.imageWrapper.colors.filter||"",t="&tileGroup={TileGroup}&x={x}&y={y}&z={z}&channels=0&layer=0&timeframe=0&mimeType=".concat(this.image.mime);return this.image.imageServerURLs.map((function(n){return e+n+t}))},colorManipulationOn:function(){return 0!==this.imageWrapper.colors.brightness||0!==this.imageWrapper.colors.contrast||0!==this.imageWrapper.colors.hue||0!==this.imageWrapper.colors.saturation},operation:function(){return cm},lib:function(){return um(um({},om),{},{brightness:this.imageWrapper.colors.brightness,contrast:this.imageWrapper.colors.contrast,saturation:this.imageWrapper.colors.saturation,hue:this.imageWrapper.colors.hue})},layersToPreload:function(){var e=[];return this.routedAnnotation&&e.push(this.routedAnnotation.type===$["AnnotationType"].REVIEWED?-1:this.routedAnnotation.user),"review"!==this.routedAction||e.includes(-1)||e.push(-1),e},overviewCollapsed:function(){return this.overview?this.overview.getCollapsed():this.imageWrapper.view.overviewCollapsed},correction:function(){return["correct-add","correct-remove"].includes(this.activeEditTool)},activeSelectInteraction:function(){return"select"===this.activeTool},activeDrawInteraction:function(){return!this.activeSelectInteraction||this.correction},activeModifyInteraction:function(){return this.activeSelectInteraction&&this.activeEditTool&&!this.correction}},watch:{viewState:function(){this.savePosition()},overviewCollapsed:function(e){this.$store.commit(this.imageModule+"setOverviewCollapsed",e)}},methods:{setInitialZoom:function(){if(null===this.zoom){var e=this.$refs.container,t=this.image.width,n=this.image.height,r=this.image.depth;while(t>e.clientWidth||n>e.clientHeight)t/=2,n/=2,r--;this.zoom=r}},updateMapSize:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$nextTick();case 2:this.$refs.map&&this.$refs.map.updateSize();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateKeyboardInteractions:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.map.$createPromise;case 2:this.$refs.map.$map.getInteractions().forEach((function(e){(e instanceof Qp["a"]||e instanceof em["a"])&&(e.condition_=function(e){return Object(Ap["h"])(e)&&Object(Ap["m"])(e)&&t.isActiveImage&&!e.originalEvent.target.classList.contains("ql-editor")})}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),viewMounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.view.$createPromise;case 2:this.routedAnnotation&&(t=this.routedAnnotation,n=(new Ju["a"]).readGeometry(t.location),this.$refs.view.fit(n,{padding:[10,10,10,10],maxZoom:this.image.depth}),this.center="Point"===n.getType()?n.getFirstCoordinate():[t.centroid.x,t.centroid.y]),this.savePosition();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setBaseSource:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.baseSource.$createPromise;case 2:this.baseSource=this.$refs.baseSource.$source;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addOverviewMap:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isPanelDisplayed("overview")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.$refs.map.$createPromise;case 4:return e.next=6,this.$refs.baseLayer.$createPromise;case 6:this.overview=new Xp["a"]({view:new Zp["a"]({projection:this.projectionName}),layers:[this.$refs.baseLayer.$layer],tipLabel:this.$t("overview"),target:this.$refs.overview,collapsed:this.imageWrapper.view.overviewCollapsed}),this.$refs.map.$map.addControl(this.overview);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),toggleOverview:function(){this.overview&&this.overview.setCollapsed(!this.imageWrapper.view.overviewCollapsed)},togglePanel:function(e){this.$store.commit(this.imageModule+"togglePanel",e)},savePosition:u.a.debounce(Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$refs.view){e.next=12;break}return t=this.$refs.view.$view.calculateExtent(),e.prev=2,e.next=5,$["UserPosition"].create({image:this.image.id,zoom:this.zoom,rotation:this.rotation,bottomLeftX:Math.round(t[0]),bottomLeftY:Math.round(t[1]),bottomRightX:Math.round(t[2]),bottomRightY:Math.round(t[1]),topLeftX:Math.round(t[0]),topLeftY:Math.round(t[3]),topRightX:Math.round(t[2]),topRightY:Math.round(t[3]),broadcast:this.imageWrapper.tracking.broadcast});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](2),this.$notify({type:"error",text:this.$t("notif-error-save-user-position")});case 10:clearTimeout(this.timeoutSavePosition),this.timeoutSavePosition=setTimeout(this.savePosition,N.SAVE_POSITION_IN_IMAGE_INTERVAL);case 12:case"end":return e.stop()}}),e,this,[[2,7]])}))),500),isPanelDisplayed:function(e){return this.configUI["project-explore-".concat(e)]},shortkeyHandler:function(e){if(this.isActiveImage)switch(e){case"toggle-information":return void(this.isPanelDisplayed("info")&&this.togglePanel("info"));case"toggle-zoom":return void(this.isPanelDisplayed("digital-zoom")&&this.togglePanel("digital-zoom"));case"toggle-link":return void(this.isPanelDisplayed("link")&&this.nbImages>1&&this.togglePanel("link"));case"toggle-filters":return void(this.isPanelDisplayed("color-manipulation")&&this.togglePanel("colors"));case"toggle-layers":return void(this.isPanelDisplayed("image-layers")&&this.togglePanel("layers"));case"toggle-ontology":return void(this.isPanelDisplayed("ontology")&&this.terms&&this.terms.length>0&&this.togglePanel("ontology"));case"toggle-properties":return void(this.isPanelDisplayed("property")&&this.togglePanel("properties"));case"toggle-broadcast":return void(this.isPanelDisplayed("follow")&&this.togglePanel("follow"));case"toggle-review":return void(this.isPanelDisplayed("review")&&this.canEdit&&this.togglePanel("review"));case"toggle-overview":return void(this.isPanelDisplayed("overview")&&this.toggleOverview())}}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Object(Yp["k"])(this.projectionName)||(t=Object(Yp["i"])({code:this.projectionName,units:"pixels",extent:this.extent}),Object(Yp["h"])(t)),"review"!==this.routedAction){e.next=15;break}if(this.togglePanel("review"),this.image.inReview){e.next=14;break}return e.prev=4,e.next=7,this.image.clone().review();case 7:n=e.sent,this.$store.commit(this.imageModule+"setImageInstance",n),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),this.$notify({type:"error",text:this.$t("notif-error-start-review")});case 14:this.$store.commit(this.imageModule+"setReviewMode",!0);case 15:if(this.selectedLayers.forEach((function(e){i.$store.commit(i.imageModule+"removeLayerFromSelectedFeatures",{layer:e,cache:!0})})),r=this.$route.params.idAnnotation,!r){e.next=28;break}return e.prev=18,e.next=21,$["Annotation"].fetch(r);case 21:a=e.sent,a.image===this.image.id&&(this.routedAnnotation=a,"comments"===this.routedAction&&this.$store.commit(this.imageModule+"setShowComments",a),this.$store.commit(this.imageModule+"setAnnotToSelect",a)),e.next=28;break;case 25:e.prev=25,e.t1=e["catch"](18),this.$notify({type:"error",text:this.$t("notif-error-target-annotation")});case 28:return e.prev=28,e.next=31,new $["ImageConsultation"]({image:this.image.id}).save();case 31:e.next=36;break;case 33:e.prev=33,e.t2=e["catch"](28),this.$notify({type:"error",text:this.$t("notif-error-save-image-consultation")});case 36:this.loading=!1;case 37:case"end":return e.stop()}}),e,this,[[4,11],[18,25],[28,33]])})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){this.$eventBus.$on("updateMapSize",this.updateMapSize),this.$eventBus.$on("shortkeyEvent",this.shortkeyHandler),this.setInitialZoom()},beforeDestroy:function(){this.$eventBus.$off("updateMapSize",this.updateMapSize),this.$eventBus.$off("shortkeyEvent",this.shortkeyHandler),clearTimeout(this.timeoutSavePosition)}},pm=dm,mm=(n("cc13"),Object(S["a"])(pm,zu,Vu,!1,null,null,null)),fm=mm.exports,hm=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.imageSelectorEnabled,expression:"imageSelectorEnabled"}],staticClass:"image-selector-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[n("div",{staticClass:"header"},[n("b-input",{staticClass:"search-images",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),n("button",{staticClass:"delete",on:{click:function(t){e.imageSelectorEnabled=!1}}})],1),e.error?n("div",{staticClass:"content-wrapper"},[n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])])],1):n("div",{staticClass:"image-selector"},[e._l(e.displayedImages,(function(t){return n("div",{key:t.id,staticClass:"card"},[n("a",{staticClass:"card-image",style:"background-image: url("+t.preview+")",on:{click:function(n){return e.addImage(t)}}}),n("div",{staticClass:"card-content"},[n("div",{staticClass:"content"},[n("a",{on:{click:function(n){return e.addImage(t)}}},[n("image-name",{attrs:{image:t}})],1)])])])})),e.nbImagesDisplayed<e.filteredImages.length?n("button",{staticClass:"button",on:{click:function(t){return e.more()}}},[e._v(" "+e._s(e.$t("button-more"))+" ")]):e._e(),n("div",{staticClass:"space"})],2)]],2),n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("add-image"),placement:"left"},expression:"{content: $t('add-image'), placement: 'left'}"}],staticClass:"image-selector-button",on:{click:function(t){e.imageSelectorEnabled=!0}}},[n("i",{staticClass:"fas fa-plus"})])])},vm=[],gm={name:"image-selector",components:{ImageName:Sa},data:function(){return{images:[],searchString:"",nbImagesDisplayed:20,loading:!0,error:!1}},computed:{project:m("currentProject/project"),viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageSelectorEnabled:{get:function(){return this.$store.getters["currentProject/currentViewer"].imageSelector},set:function(e){this.$store.commit(this.viewerModule+"setImageSelector",e)}},filteredImages:function(){var e=this.images;if(this.searchString){var t=St(this.searchString);e=e.filter((function(e){return t.test(e.instanceFilename)}))}return e},displayedImages:function(){return this.filteredImages.slice(0,this.nbImagesDisplayed)}},methods:{addImage:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetch();case 3:return e.next=5,this.$store.dispatch(this.viewerModule+"addImage",t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-add-viewer-image")});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}(),more:function(){this.nbImagesDisplayed+=20},toggle:function(){this.imageSelectorEnabled=!this.imageSelectorEnabled},shortkeyHandler:function(e){"toggle-add-image"===e&&this.toggle()}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["ImageInstanceCollection"].fetchAll({filterKey:"project",filterValue:this.project.id});case 3:this.images=e.sent.array,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.error=!0;case 9:this.loading=!1;case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){this.$eventBus.$on("shortkeyEvent",this.shortkeyHandler)},beforeDestroy:function(){this.$eventBus.$off("shortkeyEvent",this.shortkeyHandler)}},bm=gm,ym=(n("5513"),Object(S["a"])(bm,hm,vm,!1,null,"d428ec68",null)),wm=ym.exports,_m=n("2f62");function xm(){return{user:null,expandedSidebar:!0}}var jm={namespaced:!0,state:xm(),mutations:{setUser:function(e,t){e.user=t?t.clone():null},setAdminByNow:function(e,t){e.user.adminByNow=t},setExpandedSidebar:function(e,t){e.expandedSidebar=t},resetState:function(e){Object.assign(e,xm())}},actions:{fetchUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,$["User"].fetchCurrent();case 3:r=e.sent,r.id?n("setUser",r):n("setUser",null);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updateUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,n.update();case 3:r("setUser",n);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),regenerateKeys:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=t.commit,a=n.user.clone(),e.next=4,a.regenerateKeys();case 4:r("setUser",a);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),openAdminSession:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,$["Cytomine"].instance.openAdminSession();case 3:n("setAdminByNow",!0);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),closeAdminSession:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,$["Cytomine"].instance.closeAdminSession();case 3:n("setAdminByNow",!1);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,e.next=3,$["Cytomine"].instance.login(n.username,n.password,n.rememberMe);case 3:return e.next=5,r("fetchUser");case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}};function Cm(){return{project:null,configUI:{},ontology:null,managers:[],members:[],currentViewer:null}}var $m={namespaced:!0,state:Cm(),mutations:{resetState:function(e){Object.assign(e,Cm())},setProject:function(e,t){e.project=t},setOntology:function(e,t){e.ontology=t},setConfigUI:function(e,t){e.configUI=t},setManagers:function(e,t){e.managers=t},setMembers:function(e,t){e.members=t},setCurrentViewer:function(e,t){e.currentViewer=t}},actions:{loadProject:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,a=t.dispatch,i=t.commit,s=!r.project||r.project.id!==n,e.next=4,$["Project"].fetch(n);case 4:return o=e.sent,i("setProject",o),i("projects/".concat(o.id,"/setProject"),o,{root:!0}),c=[a("fetchUIConfig"),a("fetchOntology"),a("fetchProjectMembers")],s&&c.push(new $["ProjectConnection"]({project:n}).save()),e.next=11,Promise.all(c);case 11:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),reloadProject:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=t.commit,e.next=3,$["Project"].fetch(n.project.id);case 3:a=e.sent,r("setProject",a);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updateProject:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,a=t.dispatch,i=t.commit,s=r.project.ontology!==n.ontology,i("setProject",n),i("projects/".concat(n.id,"/setProject"),n,{root:!0}),!s){e.next=7;break}return e.next=7,a("fetchOntology");case 7:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),fetchUIConfig:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=t.commit,e.next=3,$["Cytomine"].instance.fetchUIConfigCurrentUser(n.project.id);case 3:a=e.sent,r("setConfigUI",a);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fetchProjectMembers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=t.commit,a=new $["UserCollection"]({filterKey:"project",filterValue:n.project.id}),e.next=4,a.fetchAll();case 4:i=e.sent.array,s=i.filter((function(e){return e.role==$["ProjectMemberRole"].MANAGER||e.role==$["ProjectMemberRole"].REPRESENTATIVE})),i.forEach((function(e){return e.fullName=_e(e)})),r("setManagers",s),r("setMembers",i);case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fetchOntology:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.state,r=t.commit,!n.project.ontology){e.next=7;break}return e.next=4,$["Ontology"].fetch(n.project.ontology);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:a=e.t0,r("setOntology",a);case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},getters:{canEditLayer:function(e,t,n){return function(r){var a=n.currentUser.user,i=e.project;return t.canManageProject||!i.isReadOnly&&(r===a.id||!i.isRestricted)}},canEditAnnot:function(e,t,n){return function(e){var r=n.currentUser.user,a=e.user;return e.type===$["AnnotationType"].REVIEWED?r.adminByNow||!r.guestByNow&&e.reviewUser===r.id:t.canEditLayer(a)}},canEditImage:function(e,t,n){return function(r){var a=n.currentUser.user,i=e.project;return t.canManageProject||!a.guestByNow&&!i.isReadOnly&&(r.user===a.id||!i.isRestricted)}},canManageJob:function(e,t,n){return function(r){var a=n.currentUser.user,i=e.project;return t.canManageProject||!a.guestByNow&&!i.isReadOnly&&(r.username===a.username||!i.isRestricted)}},canManageProject:function(e,t,n){var r=n.currentUser.user||{};return r.adminByNow||!r.guestByNow&&e.managers.some((function(e){return e.id===r.id}))},contributors:function(e){var t=e.managers.map((function(e){return e.id}));return e.members.filter((function(e){return!t.includes(e.id)}))},terms:function(e){return e.ontology?Vi(e.ontology):null},currentProjectModule:function(e){return e.project?"projects/".concat(e.project.id,"/"):null},currentViewer:function(e,t,n){return e.project?n.projects[e.project.id].viewers[e.currentViewer]:null},currentViewerModule:function(e,t){return"".concat(t.currentProjectModule,"viewers/").concat(e.currentViewer,"/")},imageModule:function(e,t){return function(e){return"".concat(t.currentViewerModule,"images/").concat(e,"/")}}}};function km(){return{searchString:"",selectedOntology:null}}var Pm={namespaced:!0,state:km(),mutations:{setSelectedOntology:function(e,t){e.selectedOntology=t},setSearchString:function(e,t){e.searchString=t},resetState:function(e){Object.assign(e,km())}}};function Om(){return{searchString:"",filtersOpened:!1,filters:{selectedOntologies:[],selectedRoles:[],selectedTags:[],boundsMembers:null,boundsImages:null,boundsUserAnnotations:null,boundsJobAnnotations:null,boundsReviewedAnnotations:null},currentPage:1,perPage:10,sortField:"lastActivity",sortOrder:"desc",openedDetails:[]}}var Rm={namespaced:!0,state:Om(),mutations:{resetState:function(e){Object.assign(e,Om())},setSearchString:function(e,t){e.searchString=t},setFiltersOpened:function(e,t){e.filtersOpened=t},setFilter:function(e,t){var n=t.filterName,r=t.propValue;e.filters[n]=r},setCurrentPage:function(e,t){e.currentPage=t},setPerPage:function(e,t){e.perPage=t},setSortField:function(e,t){e.sortField=t},setSortOrder:function(e,t){e.sortOrder=t},setOpenedDetails:function(e,t){e.openedDetails=t}},getters:{nbActiveFilters:function(e){return Object.values(e.filters).filter((function(e){return e&&e.length>0})).length}}};function Sm(){return{searchString:"",filtersOpened:!1,filters:{boundsJobs:null,boundsSuccessJobs:null,onlyLastReleases:!0,onlyExecutables:!0},currentPage:1,perPage:10,sort:{field:"name",order:"asc"},openedDetails:[]}}var Tm={namespaced:!0,state:Sm(),mutations:{resetState:function(e){Object.assign(e,Sm())},setSearchString:function(e,t){e.searchString=t},setFiltersOpened:function(e,t){e.filtersOpened=t},setFilter:function(e,t){var n=t.filterName,r=t.propValue;e.filters[n]=r},setCurrentPage:function(e,t){e.currentPage=t},setPerPage:function(e,t){e.perPage=t},setSort:function(e,t){e.sort=t},setOpenedDetails:function(e,t){e.openedDetails=t}},getters:{nbActiveFilters:function(e){return Object.values(e.filters).filter((function(e){return e})).length}}};r["default"].use(_m["a"]);var Am=new _m["a"].Store({actions:{logout:function(e){var t=e.state,n=e.commit;for(var r in n("currentUser/resetState"),n("currentProject/resetState"),n("ontologies/resetState"),n("listProjects/resetState"),n("listSoftware/resetState"),t.projects)this.unregisterModule(["projects",r])}},modules:{currentUser:jm,currentProject:$m,ontologies:Pm,listProjects:Rm,listSoftware:Tm,projects:{namespaced:!0}},strict:!1}),Dm=Am;function Mm(e){var t=Object.keys(Am._modulesNamespaceMap),n=t.find((function(t){return Am._modulesNamespaceMap[t].context.state===e}));if("string"===typeof n)return n.slice(0,-1).split("/")}var Em={state:function(){return{brightness:0,contrast:0,hue:0,saturation:0,filter:null}},mutations:{setBrightness:function(e,t){e.brightness=t},setContrast:function(e,t){e.contrast=t},setHue:function(e,t){e.hue=t},setSaturation:function(e,t){e.saturation=t},resetColorManipulation:function(e){e.brightness=0,e.contrast=0,e.hue=0,e.saturation=0},setFilter:function(e,t){e.filter=t}}},Im={state:function(){return{activeTool:"select",termsNewAnnots:[],activeEditTool:null,ongoingEdit:!1}},mutations:{activateTool:function(e,t){e.activeTool=t},activateEditTool:function(e,t){e.activeEditTool=t},setOngoingEdit:function(e,t){e.ongoingEdit=t},setTermsNewAnnots:function(e,t){e.termsNewAnnots=t},filterTermsNewAnnots:function(e,t){var n=t.map((function(e){return e.id}));e.termsNewAnnots=e.termsNewAnnots.filter((function(e){return n.includes(e)}))}},actions:{activateTool:function(e,t){var n=e.state,r=e.commit,a=n.activeTool;"select"===a&&"select"!==t&&(r("clearSelectedFeatures"),r("activateEditTool",{tool:null})),r("activateTool",t)},refreshData:function(e){var t=e.commit,n=e.rootGetters;t("filterTermsNewAnnots",n["currentProject/terms"]||[])}}};function Nm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Um(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nm(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fm={state:function(){return{selectedLayers:null}},mutations:{addLayer:function(e,t){e.selectedLayers||(e.selectedLayers=[]),e.selectedLayers.push(Um({},t))},removeLayer:function(e,t){e.selectedLayers.splice(t,1)},toggleLayerVisibility:function(e,t){var n=e.selectedLayers[t];n.visible=!n.visible},toggleLayerDrawOn:function(e,t){var n=e.selectedLayers[t];n.drawOn=!n.drawOn},filterSelectedLayers:function(e,t){e.selectedLayers&&(e.selectedLayers=e.selectedLayers.filter((function(e){return t.includes(e.id)})))}},actions:{addLayer:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,r("addLayer",n);case 2:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),toggleLayerVisibility:function(e,t){var n=e.state,r=e.commit;r("toggleLayerVisibility",t);var a=n.selectedLayers[t];a.visible||r("removeLayerFromSelectedFeatures",{layer:a})},removeLayer:function(e,t){var n=e.state,r=e.commit,a=n.selectedLayers[t];r("removeLayer",t),r("removeLayerFromSelectedFeatures",{layer:a})}},getters:{selectedLayers:function(e){return e.selectedLayers}}};function Lm(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=qm(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function qm(e,t){if(e){if("string"===typeof e)return zm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zm(e,t):void 0}}function zm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vm(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wm={state:function(){return{idImage:0,propertiesKeys:null,selectedPropertyKey:null,selectedPropertyColor:no[0],selectedPropertyValues:{}}},mutations:{setIdImage:function(e,t){e.idImage=t},setPropertiesKeys:function(e,t){e.propertiesKeys=t},setSelectedPropertyKey:function(e,t){e.selectedPropertyKey=t},setSelectedPropertyColor:function(e,t){e.selectedPropertyColor=t},setSelectedPropertyValues:function(e,t){e.selectedPropertyValues=t},addSelectedPropertyValues:function(e,t){e.selectedPropertyValues=Bm(Bm({},e.selectedPropertyValues),t)}},actions:{initialize:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,s,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=t.rootState,r("setIdImage",n.id),e.next=4,Promise.all([Gm(n.id),$["PropertyCollection"].fetchAll({object:a.currentProject.project})]);case 4:i=e.sent,s=Object(Pt["a"])(i,2),o=s[0],c=s[1],l=null,u=c.array.find((function(e){return e.key===N.DEFAULT_PROPERTY_KEY})),u&&o.includes(u.value)&&(l=u.value),r("setPropertiesKeys",o),r("setSelectedPropertyKey",l);case 13:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),setSelectedPropertyKey:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,s,o,c,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,a=t.commit,i=t.getters,s=i.selectedLayers,o={},!n||!s){e.next=23;break}c=Lm(s),e.prev=5,c.s();case 7:if((l=c.n()).done){e.next=15;break}return u=l.value,e.next=11,Jm(u.id,r.idImage,n);case 11:d=e.sent,o=Bm(Bm({},o),d);case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),c.e(e.t0);case 20:return e.prev=20,c.f(),e.finish(20);case 23:a("setSelectedPropertyValues",o),a("setSelectedPropertyKey",n);case 25:case"end":return e.stop()}}),e,null,[[5,17,20,23]])})));function t(t,n){return e.apply(this,arguments)}return t}(),addLayer:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,a=t.commit,i=r.selectedPropertyKey,s={},!i){e.next=7;break}return e.next=6,Jm(n.id,r.idImage,i);case 6:s=e.sent;case 7:a("addSelectedPropertyValues",s);case 8:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),setImageInstance:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=t.dispatch,r("setIdImage",n.id),e.next=4,a("refreshProperties");case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),refreshProperties:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=t.commit,a=t.dispatch,e.next=3,Gm(n.idImage);case 3:i=e.sent,r("setPropertiesKeys",i),s=n.selectedPropertyKey,o=i.includes(s)?s:null,a("setSelectedPropertyKey",o);case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),refreshData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,e.next=3,n("refreshProperties");case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}};function Jm(e,t,n){return Hm.apply(this,arguments)}function Hm(){return Hm=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1!==t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,$["PropertyCollection"].fetchPropertiesValuesAndPositions(t,n,r);case 4:return a=e.sent,i={},a.forEach((function(e){i[e.idAnnotation]?i[e.idAnnotation]+="; "+e.value:i[e.idAnnotation]=e.value})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),Hm.apply(this,arguments)}function Gm(e){return Km.apply(this,arguments)}function Km(){return Km=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["PropertyCollection"].fetchKeysAnnotationProperties(null,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),Km.apply(this,arguments)}var Ym=n("7df7"),Zm={state:function(){return{selectionTargetedFeatures:[],selectedFeatures:[],annotsToSelect:[],showComments:null,displayAnnotDetails:!0,positionAnnotDetails:{x:0,y:0}}},mutations:{setSelectionTargetedFeatures:function(e,t){e.selectionTargetedFeatures=t},setSelectedFeatures:function(e,t){var n=JSON.stringify(t),r=JSON.stringify(e.selectedFeatures);n!==r&&(e.selectedFeatures=t)},clearSelectedFeatures:function(e){e.selectedFeatures=[],e.annotsToSelect=[]},selectFeature:function(e,t){e.selectedFeatures.push(Object(Ym["a"])().writeFeatureObject(t))},changeAnnotSelectedFeature:function(e,t){var n=t.indexFeature,r=t.annot;e.selectedFeatures[n].properties.annot=r},removeLayerFromSelectedFeatures:function(e,t){for(var n=t.layer,r=t.cache,a=void 0!==r&&r,i=e.selectedFeatures,s=i.length-1;s>=0;s--){var o=i[s],c=o.properties.annot;Yu(c,n)&&(i.splice(s,1),a&&e.annotsToSelect.push(c))}a||(e.annotsToSelect=e.annotsToSelect.filter((function(e){return!Yu(e,n)})))},removeTermFromSelectedFeatures:function(e,t){var n=t.idTerm,r=t.terms;e.selectedFeatures=e.selectedFeatures.filter((function(e){var t=e.properties.annot;return!t.term.includes(n)||r.some((function(e){return e.visible&&t.term.includes(e.id)}))}))},removeNoTermFromSelectedFeatures:function(e){e.selectedFeatures=e.selectedFeatures.filter((function(e){var t=e.properties.annot;return t.term.length}))},setAnnotToSelect:function(e,t){e.annotsToSelect=[t]},setShowComments:function(e,t){e.showComments=t?t.id:null},setDisplayAnnotDetails:function(e,t){e.displayAnnotDetails=t},setPositionAnnotDetails:function(e,t){e.positionAnnotDetails=t}},actions:{selectFeature:function(e,t){var n=e.commit;n("clearSelectedFeatures"),n("selectFeature",t)},setImageInstance:function(e){var t=e.commit;t("clearSelectedFeatures")}},getters:{selectedFeature:function(e){if(1===e.selectedFeatures.length)return e.selectedFeatures[0]}}},Xm=1,Qm=.5,ef={state:function(){return{terms:null,displayNoTerm:!0,noTermOpacity:Xm,noTermStyle:Ss("#fff",Qm*Xm),defaultStyle:Ss("#fff",Qm),multipleTermsStyle:Ss("#fff",Qm),layersOpacity:Qm}},mutations:{addTerm:function(e,t){e.terms.push(nf(t,e.layersOpacity))},setTerms:function(e,t){e.terms=t},toggleTermVisibility:function(e,t){var n=e.terms[t];n.visible=!n.visible},setDisplayNoTerm:function(e,t){e.displayNoTerm=t},setTermOpacity:function(e,t){var n=t.indexTerm,r=t.opacity,a=e.terms[n];a.opacity=r,eo(a.olStyle,e.layersOpacity*r),eo(a.olLineStyle,e.layersOpacity*r)},setNoTermOpacity:function(e,t){e.noTermOpacity=t,eo(e.noTermStyle,e.layersOpacity*t)},resetTermOpacities:function(e){e.terms.forEach((function(t){t.opacity=Xm,eo(t.olStyle,e.layersOpacity*Xm),eo(t.olLineStyle,e.layersOpacity*Xm)})),e.noTermOpacity=Xm,eo(e.noTermStyle,e.layersOpacity*e.noTermOpacity)},setLayersOpacity:function(e,t){e.layersOpacity=t,e.terms&&e.terms.forEach((function(e){eo(e.olStyle,t*e.opacity),eo(e.olLineStyle,t*e.opacity)})),eo(e.noTermStyle,t*e.noTermOpacity),eo(e.multipleTermsStyle,t),eo(e.defaultStyle,t)}},actions:{initialize:function(e){var t=e.commit,n=e.rootGetters,r=tf(n["currentProject/terms"],Qm);t("setTerms",r)},toggleTermVisibility:function(e,t){var n=e.state,r=e.commit;r("toggleTermVisibility",t);var a=n.terms[t];a.visible||r("removeTermFromSelectedFeatures",{idTerm:a.id,terms:n.terms})},setDisplayNoTerm:function(e,t){var n=e.commit;n("setDisplayNoTerm",t),t||n("removeNoTermFromSelectedFeatures")},refreshData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.state,r=t.commit,a=t.rootGetters,i=tf(a["currentProject/terms"],n.layersOpacity,n.terms),r("setTerms",i);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},getters:{termsMapping:function(e){return e.terms.reduce((function(e,t){return e[t.id]=t,e}),{})}}};function tf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e){for(var r=[],a=e.length,i=function(a){var i=e[a],s=n.find((function(e){return e.id===i.id}));r.push(s||nf(i,t))},s=0;s<a;s++)i(s);return r}}function nf(e,t){var n={id:e.id};return n.opacity=Xm,n.olStyle=Ss(e.color,Xm*t),n.olLineStyle=Ts(e.color,Xm*t),n.visible=!0,n}var rf={state:function(){return{broadcast:!1,trackedUser:null}},mutations:{setBroadcast:function(e,t){e.broadcast=t},setTrackedUser:function(e,t){e.trackedUser=t}}},af={state:function(){return{actions:[],undoneActions:[]}},mutations:{resetActions:function(e){e.actions=[],e.undoneActions=[]},addAction:function(e,t){var n=t.annot,r=t.type,a={annot:n,type:r,command:$["Cytomine"].instance.lastCommand};e.actions.push(a),e.undoneActions=[]},undoAction:function(e,t){e.actions.pop(),e.undoneActions.push(t)},redoAction:function(e,t){e.undoneActions.pop(),e.actions.push(t)}},actions:{setImageInstance:function(e){var t=e.commit;t("resetActions")}}},sf={state:function(){return{zoom:null,center:[0,0],rotation:0,digitalZoom:!0,overviewCollapsed:!1}},mutations:{setCenter:function(e,t){e.center=t},setZoom:function(e,t){e.zoom=t},setRotation:function(e,t){e.rotation=t},setDigitalZoom:function(e,t){e.digitalZoom=t},setOverviewCollapsed:function(e,t){e.overviewCollapsed=t}},actions:{initialize:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,r("setCenter",[n.width/2,n.height/2]);case 2:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}},of={state:function(){return{reviewMode:!1}},mutations:{setReviewMode:function(e,t){e.reviewMode=t}},actions:{setImageInstance:function(e){var t=e.commit;t("setReviewMode",!1)}}},cf={namespaced:!0,state:function(){return{imageInstance:null,activePanel:null}},mutations:{setImageInstance:function(e,t){e.imageInstance=t},setResolution:function(e,t){e.imageInstance.resolution=t},togglePanel:function(e,t){e.activePanel=e.activePanel===t?null:t}},actions:{initialize:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=n.clone(),e.next=4,df(a);case 4:r("setImageInstance",a);case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),setImageInstance:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,a=t.rootState,e.next=3,r("initialize",n);case 3:i=a.currentProject.project.id,s=a.currentProject.currentViewer,r("projects/".concat(i,"/viewers/").concat(s,"/changePath"),null,{root:!0});case 6:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),refreshData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=t.commit,e.next=3,lf(n.imageInstance.id);case 3:a=e.sent,r("setImageInstance",a);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},getters:{genStyleFunction:function(e,t){return function(n){var r=n.get("annot");if(r){if(Os(n))return[e.style.defaultStyle,Ms(r.count.toString())];var a=[],i=r.term.length,s=e.style.terms;if(s&&1===i){var o=t.termsMapping[r.term[0]];if(o){if(!o.visible)return;"LineString"===n.getGeometry().getType()?a.push(o.olLineStyle):a.push(o.olStyle)}else a.push(e.style.noTermStyle)}else if(s&&i>1){var c=s.some((function(e){return e.visible&&r.term.includes(e.id)}));if(!c)return;a.push(e.style.multipleTermsStyle)}else{if(!e.style.displayNoTerm)return;a.push(e.style.noTermStyle)}var l=r.type===$["AnnotationType"].REVIEWED,u=e.review.reviewMode&&!l;e.selectedFeatures.selectedFeatures.map((function(e){return e.id})).includes(n.getId())?(a.push.apply(a,Object(B["a"])(l?Zs:u?Qs:Gs)),"modify"===e.draw.activeEditTool&&a.push(Ks)):l?a.push.apply(a,Object(B["a"])(Ys)):u&&a.push.apply(a,Object(B["a"])(Xs));var d=e.properties.selectedPropertyValues[r.id];if(d){var p=e.properties.selectedPropertyColor,m="34px";e.view.zoom<=3?m="12px":e.view.zoom<=6?m="19px":e.view.zoom<=8&&(m="26px"),a.push(Ms(d,m,p.fill,null))}return a}}},maxZoom:function(e){if(!e.imageInstance)return 0;var t=e.view.digitalZoom?N.DIGITAL_ZOOM_INCREMENT:0;return e.imageInstance.depth+t}},modules:{colors:Em,draw:Im,layers:Fm,properties:Wm,selectedFeatures:Zm,style:ef,tracking:rf,undoRedo:af,view:sf,review:of}};function lf(e){return uf.apply(this,arguments)}function uf(){return uf=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ImageInstance"].fetch(t);case 2:return n=e.sent,e.next=5,df(n);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),uf.apply(this,arguments)}function df(e){return pf.apply(this,arguments)}function pf(){return pf=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.imageServerURLs){e.next=4;break}return e.next=3,new $["AbstractImage"]({id:t.baseImage}).fetchImageServers();case 3:t.imageServerURLs=e.sent;case 4:case"end":return e.stop()}}),e)}))),pf.apply(this,arguments)}var mf={namespaced:!0,state:function(){return{links:[],imageSelector:!1,activeImage:0,indexNextImage:0}},mutations:{setImageSelector:function(e,t){e.imageSelector=t},addImage:function(e){e.imageSelector=!1,e.activeImage=e.indexNextImage,e.indexNextImage++},setActiveImage:function(e,t){e.activeImage=t},createLinkGroup:function(e,t){e.links.push(t)},linkImageToGroup:function(e,t){var n=t.indexGroup,r=t.indexImage;e.links[n].push(r)},mergeLinkGroups:function(e,t){var n;(n=e.links[t[0]]).push.apply(n,Object(B["a"])(e.links[t[1]])),e.links.splice(t[1],1)},unlinkImage:function(e,t){var n=t.indexGroup,r=t.indexImage,a=e.links;if(n||(n=a.findIndex((function(e){return e.includes(r)})),-1!==n)){var i=a[n],s=i.findIndex((function(e){return e===r}));i.splice(s,1),1===i.length&&a.splice(n,1)}}},actions:{changePath:function(e){var t=e.getters,n=Uv.currentRoute.params.idAnnotation,r=Uv.currentRoute.query.action;Uv.replace(t.pathViewer({idAnnotation:n,action:r}))},addImage:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,a=t.commit,i=t.getters,s=t.dispatch,o=r.indexNextImage,a("addImage"),this.registerModule(i.pathImageModule(o),cf),e.next=6,s("images/".concat(o,"/initialize"),n);case 6:s("changePath");case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),setImageResolution:function(e,t){var n=e.state,r=e.commit,a=t.idImage,i=t.resolution;for(var s in n.images){var o=n.images[s].imageInstance;o&&o.id===a&&r("images/".concat(s,"/setResolution"),i)}},addTerm:function(e,t){var n=e.state,r=e.commit;for(var a in n.images)r("images/".concat(a,"/addTerm"),t)},setCenter:function(e,t){var n=e.state,r=e.getters,a=e.commit,i=t.index,s=t.center,o=n.images[i],c=o.view.center.map((function(e,t){return s[t]-e})),l=o.imageInstance.depth-o.view.zoom,u=r.getLinkedIndexes(i);u.forEach((function(e){var t=n.images[e],r=t.imageInstance.depth-t.view.zoom-l,i=Math.pow(2,r);a("images/".concat(e,"/setCenter"),t.view.center.map((function(e,t){return e+c[t]*i})))}))},setZoom:function(e,t){var n=e.state,r=e.getters,a=e.commit,i=t.index,s=t.zoom,o=s-n.images[i].view.zoom,c=r.getLinkedIndexes(i);c.forEach((function(e){a("images/".concat(e,"/setZoom"),n.images[e].view.zoom+o)}))},setRotation:function(e,t){var n=e.state,r=e.getters,a=e.commit,i=t.index,s=t.rotation,o=s-n.images[i].view.rotation+2*Math.PI,c=r.getLinkedIndexes(i);c.forEach((function(e){a("images/".concat(e,"/setRotation"),(n.images[e].view.rotation+o)%(2*Math.PI))}))},refreshData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=t.dispatch,e.next=3,Promise.all(Object.keys(n.images).map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r("images/".concat(t,"/refreshData"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:r("changePath");case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),removeImage:function(e,t){var n=e.commit,r=e.getters,a=e.dispatch;n("unlinkImage",{indexImage:t}),this.unregisterModule(r.pathImageModule(t),cf),a("changePath")}},getters:{pathModule:function(e){return Mm(e)},pathImageModule:function(e,t){return function(e){return[].concat(Object(B["a"])(t.pathModule),["images",e])}},pathViewer:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.idAnnotation,a=n.action,i=t.pathModule[1],s=t.pathModule[3],o=Object.values(e.images).map((function(e){return e.imageInstance?e.imageInstance.id:0})),c=r?"/annotation/".concat(r):"",l=a?"&action="+a:"";return"/project/".concat(i,"/image/").concat(o.join("-")).concat(c,"?viewer=").concat(s).concat(l)}},getLinkedIndexes:function(e){return function(t){return e.links.find((function(e){return e.includes(t)}))||[t]}}},modules:{images:{namespaced:!0}}},ff="ctrl",hf=Object.freeze({"general-close-modal":["esc"],"viewer-nav-zoom-in":["+"],"viewer-nav-zoom-out":["-"],"viewer-nav-move-up":["arrowup"],"viewer-nav-move-down":["arrowdown"],"viewer-nav-move-left":["arrowleft"],"viewer-nav-move-right":["arrowright"],"viewer-nav-next-image":["shift","arrowright"],"viewer-nav-previous-image":["shift","arrowleft"],"viewer-nav-drag-rotate":["alt","shift","drag"],"viewer-nav-drag-zoom":["shift","drag"],"viewer-tool-select":["s"],"viewer-tool-point":["o"],"viewer-tool-line":["l"],"viewer-tool-freehand-line":["shift","l"],"viewer-tool-rectangle":["r"],"viewer-tool-circle":["c"],"viewer-tool-polygon":["p"],"viewer-tool-freehand-polygon":["shift","p"],"viewer-tool-fill":["f"],"viewer-tool-correct-add":["shift","c"],"viewer-tool-correct-remove":["alt","shift","c"],"viewer-tool-modify":["m"],"viewer-tool-modify-delete-vertex":["ctrl","click"],"viewer-tool-move":["t"],"viewer-tool-rotate":["shift","t"],"viewer-tool-delete":["del"],"viewer-tool-undo":[ff,"z"],"viewer-tool-redo":[ff,"y"],"viewer-tool-review-accept":["j"],"viewer-tool-review-reject":["k"],"viewer-tool-review-toggle":["i"],"viewer-toggle-information":["alt","i"],"viewer-toggle-zoom":["alt","z"],"viewer-toggle-link":["alt","s"],"viewer-toggle-filters":["alt","f"],"viewer-toggle-layers":["alt","l"],"viewer-toggle-ontology":["alt","t"],"viewer-toggle-properties":["alt","p"],"viewer-toggle-broadcast":["alt","b"],"viewer-toggle-review":["alt","r"],"viewer-toggle-overview":["alt","o"],"viewer-toggle-annotations":["alt","a"],"viewer-toggle-current":["alt","c"],"viewer-toggle-add-image":["alt","+"],"text-editor-bold":[ff,"b"],"text-editor-italic":[ff,"i"],"text-editor-underline":[ff,"u"]}),vf={name:"cytomine-viewer",components:{CytomineImage:fm,ImageSelector:wm},data:function(){return{error:!1,errorBadImageProject:!1,loading:!0,reloadInterval:null,idViewer:null}},computed:{project:m("currentProject/project"),viewers:function(){return this.$store.state.projects[this.project.id].viewers},idImages:function(){return this.$route.params.idImages.split("-")},paramIdViewer:function(){return this.$route.query.viewer},viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},viewer:function(){return this.viewers[this.idViewer]},indexImages:function(){return this.viewer?Object.keys(this.viewer.images):[]},nbImages:function(){return this.indexImages.length},nbHorizontalCells:function(){return Math.ceil(Math.sqrt(this.nbImages))},nbVerticalCells:function(){return this.nbHorizontalCells?Math.ceil(this.nbImages/this.nbHorizontalCells):0},cells:function(){for(var e=new Array(this.nbHorizontalCells*this.nbVerticalCells),t=0;t<this.nbImages;t++){var n=this.indexImages[t],r=this.viewer.images[n].imageInstance;e[t]={index:n,image:r}}return e},elementHeight:function(){return 100/this.nbVerticalCells},elementWidth:function(){return 100/this.nbHorizontalCells},shortkeysMapping:function(){var e=["nav-next-image","nav-previous-image","nav-next-slice","nav-previous-slice","nav-next-t","nav-previous-t","nav-next-c","nav-previous-c","nav-first-slice","nav-last-slice","nav-first-t","nav-last-t","nav-first-z","nav-last-z","nav-first-c","nav-last-c","tool-select","tool-point","tool-line","tool-freehand-line","tool-rectangle","tool-circle","tool-polygon","tool-freehand-polygon","tool-fill","tool-correct-add","tool-correct-remove","tool-modify","tool-rescale","tool-move","tool-rotate","tool-delete","tool-undo","tool-redo","tool-review-accept","tool-review-reject","tool-review-toggle","tool-go-to-slice-t","tool-go-to-slice-z","tool-go-to-slice-c","toggle-information","toggle-zoom","toggle-filters","toggle-layers","toggle-ontology","toggle-properties","toggle-broadcast","toggle-review","toggle-overview","toggle-annotations","toggle-current","toggle-add-image","toggle-link","nav-next-z","nav-previous-z"];return Object.keys(hf).filter((function(t){return e.includes(t.replace("viewer-",""))})).reduce((function(e,t){return e[t.replace("viewer-","")]=hf[t],e}),{})}},watch:{paramIdViewer:function(){this.findIdViewer()},idViewer:function(e,t){t&&(this.loading=!0,this.loadViewer())},viewer:function(){this.viewer||this.$router.push("/project/".concat(this.$route.params.idProject))},nbImages:function(){this.$eventBus.$emit("updateMapSize")}},methods:{findIdViewer:function(){if(this.paramIdViewer)this.idViewer=this.paramIdViewer;else{for(var e in this.viewers){var t=Object.values(this.viewers[e].images).map((function(e){return e.imageInstance.id})).join("-");if(t===this.$route.params.idImages)return void(this.idViewer=e)}this.idViewer=Math.random().toString(36).substr(2,9)}},closeMap:function(e){1===this.nbImages?(this.$store.unregisterModule(["projects",this.project.id,"viewers",this.idViewer]),this.$router.push("/project/".concat(this.$route.params.idProject))):this.$store.dispatch(this.viewerModule+"removeImage",e)},loadViewer:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.$store.commit("currentProject/setCurrentViewer",this.idViewer),this.viewer){e.next=15;break}return this.$store.registerModule(["projects",this.project.id,"viewers",this.idViewer],mf),t={},n=Object(B["a"])(new Set(this.idImages)),e.next=8,Promise.all(n.map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ImageInstance"].fetch(n);case 2:r=e.sent,t[n]=r;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:if(r=Object.values(t).filter((function(e){return e.project!=a.project.id})),!(r.length>0)){e.next=12;break}throw this.errorBadImageProject=!0,new Error("Some images are not from this project");case 12:this.idImages.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$store.dispatch(a.viewerModule+"addImage",t[n]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=17;break;case 15:return e.next=17,this.$store.dispatch(this.viewerModule+"refreshData");case 17:this.loading=!1,e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](0),this.error=!0;case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));function t(){return e.apply(this,arguments)}return t}(),shortkeyEvent:function(e){this.$eventBus.$emit("shortkeyEvent",e.srcKey)}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.findIdViewer(),e.next=3,this.loadViewer();case 3:this.reloadInterval=setInterval((function(){return t.$eventBus.$emit("reloadAnnotations")}),N.VIEWER_ANNOTATIONS_REFRESH_INTERVAL);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){clearInterval(this.reloadInterval)}},gf=vf,bf=(n("6bc5"),Object(S["a"])(gf,Lu,qu,!1,null,"44275351",null)),yf=bf.exports,wf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.permissionError||e.notFoundError?n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t(e.permissionError?"access-denied":"not-found"))+" ")]),n("p",[e._v(" "+e._s(e.$t(e.permissionError?"insufficient-permission":"not-found-error"))+" ")])]):n("div",{staticClass:"project-container"},[e.loading?e._e():n("project-sidebar",{key:e.idProject}),n("div",{staticClass:"app-content"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():n("router-view")],1)],1)},_f=[],xf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"sidebar",staticClass:"sidebar-wrapper",class:{expanded:e.expanded}},[n("nav",{staticClass:"sidebar",on:{click:e.clickHandler}},[n("h1",{staticClass:"project-name"},[e._v(e._s(e.$t("project")+": "+e.project.name))]),n("ul",[e.isTabDisplayed("images")?[n("router-link",{attrs:{tag:"li",to:"/project/"+e.project.id+"/images"}},[n("a",[n("i",{staticClass:"far fa-images"}),e._v(" "+e._s(e.$t("images"))+" ")])])]:e._e(),e.isTabDisplayed("annotations")?n("router-link",{attrs:{tag:"li",to:"/project/"+e.project.id+"/annotations"}},[n("a",[n("i",{staticClass:"far fa-edit"}),e._v(" "+e._s(e.$t("annotations"))+" ")])]):e._e(),e.isTabDisplayed("jobs")?n("router-link",{attrs:{tag:"li",to:"/project/"+e.project.id+"/analysis"}},[n("a",[n("i",{staticClass:"fas fa-tasks"}),e._v(" "+e._s(e.$t("analysis"))+" ")])]):e._e(),e.isTabDisplayed("activities")?n("router-link",{attrs:{tag:"li",to:"/project/"+e.project.id+"/activity"}},[n("a",[n("i",{staticClass:"fas fa-tachometer-alt"}),e._v(" "+e._s(e.$t("activity"))+" ")])]):e._e(),e.isTabDisplayed("information")?n("router-link",{attrs:{tag:"li",to:"/project/"+e.project.id+"/information"}},[n("a",[n("i",{staticClass:"fas fa-info-circle"}),e._v(" "+e._s(e.$t("information"))+" ")])]):e._e()],2),n("ul",{staticClass:"bottom-menu"},[e.isTabDisplayed("configuration")?n("router-link",{attrs:{tag:"li",to:"/project/"+e.project.id+"/configuration"}},[n("a",[n("i",{staticClass:"fas fa-cogs"}),e._v(" "+e._s(e.$t("configuration"))+" ")])]):e._e()],1)]),n("div",{staticClass:"arrow-sidebar",on:{click:function(t){e.expanded=!1}}},[n("i")])])},jf=[],Cf={name:"project-sidebar",computed:{project:m("currentProject/project"),configUI:m("currentProject/configUI"),expanded:f("currentUser/expandedSidebar")},methods:{clickHandler:function(e){var t=e.target;this.expanded||"I"===t.tagName||"A"===t.tagName||(this.expanded=!0)},isTabDisplayed:function(e){return this.configUI["project-".concat(e,"-tab")]},transitionEndHandler:function(){this.$eventBus.$emit("updateMapSize")}},mounted:function(){this.$refs.sidebar.addEventListener("transitionend",this.transitionEndHandler)},beforeDestroy:function(){this.$refs.sidebar.removeEventListener("transitionend",this.transitionEndHandler)}},$f=Cf,kf=(n("6124"),Object(S["a"])($f,xf,jf,!1,null,"2888de7a",null)),Pf=kf.exports,Of={namespaced:!0,state:function(){return{searchString:"",filtersOpened:!1,filters:{formats:[],vendors:[],selectedTags:[],magnifications:[],resolutions:[],boundsWidth:null,boundsHeight:null,boundsUserAnnotations:null,boundsJobAnnotations:null,boundsReviewedAnnotations:null},currentPage:1,perPage:10,sortField:null,sortOrder:"asc",openedDetails:[]}},mutations:{setSearchString:function(e,t){e.searchString=t},setFiltersOpened:function(e,t){e.filtersOpened=t},setFilter:function(e,t){var n=t.filterName,r=t.propValue;e.filters[n]=r},setCurrentPage:function(e,t){e.currentPage=t},setPerPage:function(e,t){e.perPage=t},setSortField:function(e,t){e.sortField=t},setSortOrder:function(e,t){e.sortOrder=t},setOpenedDetails:function(e,t){e.openedDetails=t}},getters:{nbActiveFilters:function(e){return Object.values(e.filters).filter((function(e){return e&&e.length>0})).length}}},Rf={namespaced:!0,state:function(){return{previewSize:null,perPage:25,outlineColor:null,annotationType:null,filters:{members:null,reviewers:null,userJobs:null,images:null,termsIds:null,tags:null},fromDate:null,toDate:null,currentPages:{}}},mutations:{setPreviewSize:function(e,t){e.previewSize=t},setPerPage:function(e,t){e.perPage=t},setOutlineColor:function(e,t){e.outlineColor=t},setAnnotationType:function(e,t){e.annotationType=t},setFilter:function(e,t){var n=t.filterName,r=t.propValue;e.filters[n]=r},setFromDate:function(e,t){e.fromDate=t},setToDate:function(e,t){e.toDate=t},resetPagesAndFilters:function(e){for(var t in e.filters)e.filters[t]=null;e.fromDate=null,e.toDate=null,e.currentPages={}},setCurrentPage:function(e,t){var n=t.term,a=t.page;r["default"].set(e.currentPages,n,a)}}},Sf={namespaced:!0,state:function(){return{filters:{softwares:[],launchers:[],statuses:[]},executionDate:null,currentPage:1,perPage:10,sortField:"created",sortOrder:"desc",openedDetails:[]}},mutations:{setFilter:function(e,t){var n=t.filterName,r=t.propValue;e.filters[n]=r},setExecutionDate:function(e,t){e.executionDate=t},setCurrentPage:function(e,t){e.currentPage=t},setPerPage:function(e,t){e.perPage=t},setSortField:function(e,t){e.sortField=t},setSortOrder:function(e,t){e.sortOrder=t},setOpenedDetails:function(e,t){e.openedDetails=t}}},Tf={namespaced:!0,state:function(){return{id:null,name:null}},mutations:{setProject:function(e,t){e.id=t.id,e.name=t.name}},modules:{viewers:{namespaced:!0},listImages:Of,listAnnotations:Rf,listJobs:Sf}},Af={name:"cytomine-project",components:{ProjectSidebar:Pf},data:function(){return{loading:!0,permissionError:!1,notFoundError:!1}},computed:{idProject:function(){return this.$route.params.idProject},project:m("currentProject/project"),projectModule:function(){return this.$store.state.projects[this.idProject]}},watch:{idProject:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.loadProject();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),projectModule:function(){this.projectModule||(this.$store.commit("currentProject/resetState"),this.$router.push("/projects"))}},methods:{loadProject:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.$store.state.projects[this.idProject]||this.$store.registerModule(["projects",this.idProject],Tf),e.next=4,this.$store.dispatch("currentProject/loadProject",this.idProject);case 4:this.loading=!1,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),e.t0.response&&403===e.t0.response.status?this.permissionError=!0:this.notFoundError=!0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),deleteAnnotationEventHandler:function(e){var t=this.$store.state.currentProject.project.clone();"UserAnnotation"===e.type?t.numberOfAnnotations--:t.numberOfReviewedAnnotations--,this.$store.dispatch("currentProject/updateProject",t)}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadProject();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){this.$eventBus.$on("deleteAnnotation",this.deleteAnnotationEventHandler)},beforeDestroy:function(){this.$eventBus.$off("deleteAnnotation",this.deleteAnnotationEventHandler)}},Df=Af,Mf=(n("4560"),Object(S["a"])(Df,wf,_f,!1,null,null,null)),Ef=Mf.exports,If=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},Nf=[],Uf={computed:{project:m("currentProject/project"),configUI:m("currentProject/configUI")},created:function(){this.configUI["project-images-tab"]?this.$router.replace("/project/".concat(this.project.id,"/images")):this.$router.replace("/project/".concat(this.project.id,"/information"))}},Ff=Uf,Lf=Object(S["a"])(Ff,If,Nf,!1,null,null,null),qf=Lf.exports,zf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-activity-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():n("div",{staticClass:"content-wrapper"},[n("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[n("ul",[n("li",[n("router-link",{attrs:{to:"/project/"+e.project.id}},[e._v(e._s(e.project.name))])],1),n("li",[n("router-link",{attrs:{to:"/project/"+e.project.id+"/activity?tab=members"}},[e._v(e._s(e.$t("members-activity")))])],1),n("li",{staticClass:"is-active"},[n("a",{attrs:{href:"#","aria-current":"page"}},[e._v(e._s(e.$t("activity-of-user",{username:e.user.fullName})))])])])]),n("div",{staticClass:"box"},[e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[n("p",{staticClass:"last-update is-size-7 has-text-grey"},[e._v(" "+e._s(e.$t("data-last-updated-on",{time:e.$options.filters.moment(e.lastUpdate,"LTS")}))+" ")]),n("h1",[e._v(e._s(e.$t("activity-of-user",{username:e.user.fullName})))]),n("ul",[e.currentUser.adminByNow?n("li",[n("strong",[e._v(e._s(e.$t("email"))+":")]),e._v(" "),n("a",{attrs:{href:"mailto:"+e.user.email}},[e._v(e._s(e.user.email))])]):e._e(),n("li",[n("strong",[e._v(e._s(e.$t("registration-date"))+":")]),e._v(" "+e._s(e._f("moment")(Number(e.user.created),"ll LTS")))]),n("li",[n("strong",[e._v(e._s(e.$t("first-project-connection"))+":")]),e._v(" "+e._s(e._f("moment")(Number(e.resumeActivity.firstConnection),"ll LTS")))]),n("li",[n("strong",[e._v(e._s(e.$t("last-project-connection"))+":")]),e._v(" "+e._s(e._f("moment")(Number(e.resumeActivity.lastConnection),"ll LTS")))])]),n("hr"),n("div",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[e._v(e._s(e.$t("project-connections")))]),n("p",{staticClass:"title"},[e._v(e._s(e.resumeActivity.totalConnections))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[e._v(e._s(e.$t("image-consultations")))]),n("p",{staticClass:"title"},[e._v(e._s(e.resumeActivity.totalConsultations))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[e._v(e._s(e.$t("annotation-selections")))]),n("p",{staticClass:"title"},[e._v(e._s(e.resumeActivity.totalAnnotationSelections))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[e._v(e._s(e.$t("annotation-creations")))]),n("p",{staticClass:"title"},[e._v(e._s(e.resumeActivity.totalAnnotations))])])])]),n("hr"),n("h2",[e._v(e._s(e.$t("detailed-project-connections")))]),n("b-table",{attrs:{data:e.connections.array,"default-sort":"created","default-sort-direction":"desc",paginated:!0,"per-page":e.connectionsPerPage,"pagination-size":"is-small",detailed:"","detail-key":"id"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{label:e.$t("date"),field:"created",sortable:""}},[e._v(" "+e._s(e._f("moment")(Number(r.created),"ll LT"))+" ")]),n("b-table-column",{attrs:{label:e.$t("duration"),field:"time",sortable:""}},[e._v(" "+e._s(e._f("duration")(r.time,"humanize"))+" "),r.online?n("span",{staticClass:"tag is-success"},[e._v(e._s(e.$t("ongoing")))]):e._e()]),n("b-table-column",{attrs:{label:e.$t("number-viewed-images"),field:"countViewedImages",centered:"",sortable:""}},[e._v(" "+e._s(r.countViewedImages)+" ")]),n("b-table-column",{attrs:{label:e.$t("number-annotation-creations"),field:"countCreatedAnnotations",centered:"",sortable:""}},[e._v(" "+e._s(r.countCreatedAnnotations)+" ")])]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-project-connection")))])])]},proxy:!0},{key:"detail",fn:function(e){var t=e.row;return[n("project-connection-details",{key:t.id,attrs:{connection:t}})]}},{key:"footer",fn:function(){return[n("p",{staticClass:"has-text-centered"},[n("a",{staticClass:"button is-link",attrs:{href:e.connections.downloadURL,target:"_self"}},[e._v(" "+e._s(e.$t("button-export-as-csv"))+" ")])])]},proxy:!0},{key:"bottom-left",fn:function(){return[n("b-select",{attrs:{size:"is-small"},model:{value:e.connectionsPerPage,callback:function(t){e.connectionsPerPage=t},expression:"connectionsPerPage"}},[n("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),n("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),n("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),n("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}],null,!1,1089540910)}),n("hr"),n("h2",[e._v(e._s(e.$t("connections-chart")))]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-narrow"},[n("b-field",{attrs:{label:e.$t("by"),horizontal:""}},[n("b-select",{attrs:{size:"is-small"},model:{value:e.period,callback:function(t){e.period=t},expression:"period"}},[n("option",{attrs:{value:"hour"}},[e._v(e._s(e.$t("hour")))]),n("option",{attrs:{value:"day"}},[e._v(e._s(e.$t("day")))]),n("option",{attrs:{value:"week"}},[e._v(e._s(e.$t("week")))])])],1)],1),n("div",{staticClass:"column is-narrow"},[n("b-field",{attrs:{label:e.$t("from"),horizontal:""}},[n("cytomine-datepicker",{attrs:{resetButton:!1,maxDate:e.endDate||new Date},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1)],1),n("div",{staticClass:"column is-narrow"},[n("b-field",{attrs:{label:e.$t("to"),horizontal:""}},[n("cytomine-datepicker",{attrs:{minDate:e.startDate,maxDate:new Date},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)],1)]),n("div",{staticClass:"chart-container"},[n("last-connections-chart",{attrs:{"css-classes":"chart",project:e.project.id,user:e.idUser,period:e.period,startDate:e.startDate.getTime(),endDate:e.endDate?e.endDate.setHours(23,59,59,999):null,showDates:!0,revision:e.chartRevision}})],1),n("hr"),n("h2",[e._v(e._s(e.$t("detailed-image-consultations")))]),n("b-table",{attrs:{data:e.consultations.array,paginated:!0,"per-page":e.consultationsPerPage,"pagination-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{label:e.$t("overview"),field:"created"}},[n("router-link",{attrs:{to:"/project/"+e.project.id+"/image/"+r.image}},[n("img",{staticClass:"image-overview",attrs:{src:r.imageThumb}})])],1),n("b-table-column",{attrs:{label:e.$t("image"),field:"imageName",sortable:""}},[n("router-link",{attrs:{to:"/project/"+e.project.id+"/image/"+r.image}},[e._v(" "+e._s(r.imageName)+" ")])],1),n("b-table-column",{attrs:{label:e.$t("duration"),field:"time",sortable:""}},[e._v(" "+e._s(e._f("duration")(r.time,"humanize"))+" ")]),n("b-table-column",{attrs:{label:e.$t("number-consultations"),field:"frequency",centered:"",sortable:""}},[e._v(" "+e._s(r.frequency)+" ")]),n("b-table-column",{attrs:{label:e.$t("first-consultation"),field:"first",centered:"",sortable:""}},[e._v(" "+e._s(e._f("moment")(Number(r.first),"ll LT"))+" ")]),n("b-table-column",{attrs:{label:e.$t("last-consultation"),field:"last",centered:"",sortable:""}},[e._v(" "+e._s(e._f("moment")(Number(r.last),"ll LT"))+" ")]),n("b-table-column",{attrs:{label:e.$t("number-annotation-creations"),field:"countCreatedAnnotations",centered:"",sortable:""}},[e._v(" "+e._s(r.countCreatedAnnotations)+" ")])]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-image-consultation")))])])]},proxy:!0},{key:"footer",fn:function(){return[n("p",{staticClass:"has-text-centered"},[n("a",{staticClass:"button is-link",attrs:{href:e.consultations.downloadURL,target:"_self"}},[e._v(" "+e._s(e.$t("button-export-as-csv"))+" ")])])]},proxy:!0},{key:"bottom-left",fn:function(){return[n("b-select",{attrs:{size:"is-small"},model:{value:e.consultationsPerPage,callback:function(t){e.consultationsPerPage=t},expression:"consultationsPerPage"}},[n("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),n("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),n("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),n("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}],null,!1,3549163850)})]],2)])],1)},Vf=[],Bf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"table"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading},on:{"update:active":function(t){e.loading=t}}}),e.loading?e._e():n("tbody",[n("tr",[n("td",[e._v(e._s(e.$t("operating-system")))]),n("td",[e._v(e._s(e.connection.os))])]),n("tr",[n("td",[e._v(e._s(e.$t("browser")))]),n("td",{staticClass:"is-capitalized"},[e._v(" "+e._s(e.connection.browser)+" "),e.connection.browserVersion?n("span",[e._v(e._s(e.connection.browserVersion))]):e._e()])]),e.consultations?n("tr",[n("td",[e._v(e._s(e.$t("image-consultations")))]),n("td",[e.consultations.length>0?n("div",{staticClass:"columns is-multiline"},e._l(e.consultations,(function(t){return n("div",{key:t.id,staticClass:"column"},[n("image-preview",{attrs:{image:t,blindMode:e.blindMode}},[n("div",{staticClass:"details"},[n("p",[n("strong",[e._v(e._s(e.$t("duration"))+":")]),e._v(" "+e._s(e._f("duration")(t.time,"humanize"))+" "),n("br"),n("strong",[e._v(e._s(e.$t("annotation-creations"))+":")]),e._v(" "+e._s(t.countCreatedAnnotations||0)+" ")])])])],1)})),0):n("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("no-image-consultation")))])])]):e._e()])],1)},Wf=[],Jf={name:"project-connection-details",components:{ImagePreview:A},props:{connection:Object},data:function(){return{loading:!0,consultations:null}},computed:{blindMode:function(){return this.$store.state.currentProject.project.blindMode}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["ImageConsultationCollection"].fetchAll({projectConnection:this.connection.id});case 3:this.consultations=e.sent.array,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("error-failed-to-fetch-image-consultations")});case 9:this.loading=!1;case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},Hf=Jf,Gf=(n("0a09"),Object(S["a"])(Hf,Bf,Wf,!1,null,"d6c43a1e",null)),Kf=Gf.exports,Yf={name:"last-connections-chart",extends:vo["a"],props:{startDate:Number,endDate:Number,period:String,project:Number,user:Number,showDates:{type:Boolean,default:!1},revision:Number},data:function(){return{chartData:null,projectConnections:null}},computed:{locale:function(){return this.$i18n.locale},queryParams:function(){return this.revision,{afterThan:this.startDate,beforeThan:this.endDate,period:this.period,user:this.user,project:this.project}},momentPeriod:function(){return this.period+"s"}},watch:{queryParams:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:this.updateChart();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),locale:function(){this.updateLabels(),this.updateChart()}},methods:{fetchData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ProjectConnectionCollection"].fetchConnectionsFrequency(this.queryParams);case 2:t=e.sent.sort(),t.sort((function(e,t){return Number(e.time)<Number(t.time)?-1:1})),n=[],r=we()(this.startDate),a=this.endDate?we()(this.endDate):we()(),i=0;while(r.isBefore(a))t[i]&&r.isSame(Number(t[i].time),this.period)?(n.push(t[i]),i++):n.push({time:r.valueOf(),frequency:0}),r.add(1,this.momentPeriod);this.projectConnections=n,this.chartData.datasets[0].data=this.projectConnections.map((function(e){return e.frequency})),this.updateLabels();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateLabels:function(){var e=this;this.chartData.labels=this.projectConnections.map((function(t){var n=Number(t.time);switch(e.period){case"hour":return we()(n).format(e.showDates?"ll LT":"LT")+" - "+we()(n).add(1,"hours").format("LT");case"day":return we()(n).format(e.showDates?"ll":"dddd");case"week":return we()(n).format("ll")+" - "+we.a.min(we()(),we()(n).endOf("week")).format("ll")}}))},updateChart:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$data._chart.update();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.chartData={labels:[],datasets:[{label:this.$t("project-connections"),data:[],backgroundColor:"#4480c4",borderWidth:0}]},e.next=3,this.fetchData();case 3:this.renderChart(this.chartData,{maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{min:0}}],xAxes:[{categoryPercentage:.6,gridLines:{display:!1}}]}});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Zf={name:"member-activity-details",components:{CytomineDatepicker:Li,ProjectConnectionDetails:Kf,LastConnectionsChart:Yf},data:function(){return{loading:!0,error:!1,user:null,resumeActivity:null,connections:null,connectionsPerPage:10,consultations:null,consultationsPerPage:10,lastUpdate:null,timeout:null,chartRevision:0,period:"day",startDate:we()().subtract(1,"month").toDate(),endDate:null}},computed:{currentUser:m("currentUser/user"),idUser:function(){return Number(this.$route.params.idUser)},project:m("currentProject/project")},methods:{fetchData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.fetchUser(),this.fetchResumeActivity(),this.fetchConnections(),this.fetchConsultations()]);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e["catch"](0),this.error=!0,e.abrupt("return");case 9:this.chartRevision++,this.lastUpdate=new Date,clearTimeout(this.timeout),this.timeout=setTimeout(this.fetchData,N.MEMBERS_ACTIVITY_REFRESH_INTERVAL);case 13:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}(),fetchUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.user.fetch();case 2:this.user.fullName=_e(this.user);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchResumeActivity:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.user.fetchResumeActivity(this.project.id);case 2:this.resumeActivity=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchConnections:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ProjectConnectionCollection"].fetchAll({project:this.project.id,user:this.idUser});case 2:this.connections=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchConsultations:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ImageConsultationCollection"].fetchAll({project:this.project.id,user:this.idUser,resume:!0});case 2:this.consultations=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.user=new $["User"]({id:this.idUser}),e.next=3,this.fetchData();case 3:this.loading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){clearTimeout(this.timeout)}},Xf=Zf,Qf=(n("3e70"),n("ae57"),Object(S["a"])(Xf,zf,Vf,!1,null,"66eaa793",null)),eh=Qf.exports,th=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.currentUser.adminByNow?n("div",{staticClass:"content-wrapper"},[n("b-field",{staticClass:"radio-buttons-fullwidth"},[n("b-radio-button",{attrs:{"native-value":"dashboard",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("dashboard"))+" ")]),n("b-radio-button",{attrs:{"native-value":"users",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("users"))+" ")]),n("b-radio-button",{attrs:{"native-value":"trusted-sources",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("trusted-sources"))+" ")]),n("b-radio-button",{attrs:{"native-value":"tags",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("tags"))+" ")]),n("b-radio-button",{attrs:{"native-value":"configuration",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("configuration"))+" ")])],1),n("div",{staticClass:"box"},[n("keep-alive",[n(e.activeComponent,{tag:"component"})],1)],1)],1):n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),n("p",[e._v(e._s(e.$t("insufficient-permission")))])])},nh=[],rh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin-dashboard-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[n("h2",[e._v(e._s(e.$t("currently")))]),e.currentStats?[n("div",{staticClass:"level"},[n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[e._v(e._s(e.$t("online-users")))]),n("p",{staticClass:"title"},[e._v(e._s(e.currentStats.users))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[e._v(e._s(e.$t("active-projects")))]),n("p",{staticClass:"title"},[e._v(e._s(e.currentStats.projects))])])]),n("div",{staticClass:"level-item has-text-centered"},[n("div",[n("p",{staticClass:"heading"},[e._v(e._s(e.$t("used-storage-space")))]),n("p",{staticClass:"title"},[e.storageStats?[e._v(e._s(Math.round(100*e.storageStats.usedP))+"%")]:[e._v("?")]],2)])])]),e.currentStats.mostActiveProject?n("p",[n("strong",[e._v(e._s(e.$t("most-active-project")))]),e._v(": "),n("router-link",{attrs:{to:"/project/"+e.currentStats.mostActiveProject.project.id}},[e._v(" "+e._s(e.currentStats.mostActiveProject.project.name)+" ")]),e._v(" ("+e._s(e.$tc("count-active-users",e.currentStats.mostActiveProject.users,{count:e.currentStats.mostActiveProject.users}))+") ")],1):e._e()]:n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("failed-fetch-current-stats"))+" ")]),n("hr"),n("h2",[e._v(e._s(e.$t("total")))]),e.totalCounts?n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("table",{staticClass:"table is-fullwidth"},[n("tbody",[n("tr",[n("td",[e._v(e._s(e.totalCounts.users))]),n("td",[e._v(e._s(e.$t("users")))])]),n("tr",[n("td",[e._v(e._s(e.totalCounts.projects))]),n("td",[e._v(e._s(e.$t("projects")))])]),n("tr",[n("td",[e._v(e._s(e.totalCounts.images))]),n("td",[e._v(e._s(e.$t("images")))])])])])]),n("div",{staticClass:"column"},[n("table",{staticClass:"table is-fullwidth"},[n("tbody",[n("tr",[n("td",[e._v(e._s(e.totalCounts.ontologies))]),n("td",[e._v(e._s(e.$t("ontologies")))])]),n("tr",[n("td",[e._v(e._s(e.totalCounts.terms))]),n("td",[e._v(e._s(e.$t("terms")))])]),n("tr",[n("td",[e._v(e._s(e.totalCounts.userAnnotations))]),n("td",[e._v(e._s(e.$t("user-annotations")))])])])])]),n("div",{staticClass:"column"},[n("table",{staticClass:"table is-fullwidth"},[n("tbody",[n("tr",[n("td",[e._v(e._s(e.totalCounts.softwares))]),n("td",[e._v(e._s(e.$t("algorithms")))])]),n("tr",[n("td",[e._v(e._s(e.totalCounts.jobs))]),n("td",[e._v(e._s(e.$t("analyses")))])]),n("tr",[n("td",[e._v(e._s(e.totalCounts.jobAnnotations))]),n("td",[e._v(e._s(e.$t("analysis-annotations")))])])])])])]):n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("failed-fetch-total-counts"))+" ")]),n("hr"),n("h2",[e._v(e._s(e.$t("last-connections")))]),n("div",{staticClass:"is-flex"},[n("strong",{staticClass:"has-margin-right"},[e._v(e._s(e.$t("period")))]),n("b-select",{model:{value:e.selectedChartOption,callback:function(t){e.selectedChartOption=t},expression:"selectedChartOption"}},e._l(e.chartOptions,(function(t){return n("option",{key:t.label,domProps:{value:t}},[e._v(" "+e._s(t.label)+" ")])})),0)],1),n("div",{staticClass:"chart-container"},[n("last-connections-chart",{attrs:{"css-classes":"chart",startDate:e.selectedChartOption.startDate,period:e.selectedChartOption.period}})],1)]],2)},ah=[],ih={name:"admin-dashboard",components:{LastConnectionsChart:Yf},data:function(){return{loading:!0,currentStats:null,totalCounts:null,storageStats:null,chartOptions:[],selectedChartOption:null}},methods:{fetchCurrentStats:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.currentStats=null,e.next=3,$["Cytomine"].instance.fetchCurrentStats();case 3:this.currentStats=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchTotalCounts:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.totalCounts=null,e.next=3,$["Cytomine"].instance.fetchTotalCounts();case 3:this.totalCounts=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchStorageStats:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.storageStats=null,e.next=3,$["Cytomine"].instance.fetchStorageStats();case 3:this.storageStats=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=this,t=[{interval:"day",period:"hour"},{interval:"week",period:"day"},{interval:"month",period:"week"},{interval:"year",period:"week"}];this.chartOptions=t.map((function(t){var n=we()().add(1,t.period+"s").subtract(1,t.interval+"s").startOf(t.period).valueOf();return{label:e.$t("last-".concat(t.interval)),period:t.period,startDate:n}})),this.selectedChartOption=this.chartOptions[0]},activated:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Promise.all([this.fetchCurrentStats(),this.fetchTotalCounts(),this.fetchStorageStats()].map((function(e){return e.catch((function(e){}))})));case 3:this.loading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},sh=ih,oh=(n("4e60"),Object(S["a"])(sh,rh,ah,!1,null,"c86b88d6",null)),ch=oh.exports,lh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),n("div",{staticClass:"column is-one-half has-text-right-desktop"},[n("button",{staticClass:"button is-link",on:{click:function(t){return e.startUserCreation()}}},[e._v(" "+e._s(e.$t("button-new-user"))+" ")])])]),n("cytomine-table",{attrs:{collection:e.userCollection,currentPage:e.currentPage,perPage:e.perPage,sort:e.sortField,order:e.sortOrder,detailed:!0,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t}},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{field:"username",label:e.$t("username"),sortable:"",width:"100"}},[e._v(" "+e._s(r.username)+" ")]),n("b-table-column",{attrs:{field:"fullName",label:e.$t("name"),sortable:"",width:"150"}},[e._v(" "+e._s(r.firstname)+" "+e._s(r.lastname)+" ")]),n("b-table-column",{attrs:{field:"role",label:e.$t("role"),sortable:"",width:"50"}},[n("span",{staticClass:"tag",class:e.getRoleData(r).class},[e._v(e._s(e.$t(e.getRoleData(r).label)))])]),n("b-table-column",{attrs:{field:"email",label:e.$t("email"),sortable:"",width:"150"}},[n("a",{attrs:{href:"mailto:"+r.email}},[e._v(e._s(r.email))])]),n("b-table-column",{attrs:{field:"origin",label:e.$t("source"),centered:"",sortable:"",width:"50"}},[n("span",{class:["tag",r.LDAP?"is-link":"is-grey"]},[e._v(" "+e._s(e.displayMemberOrigin(r))+" ")])]),n("b-table-column",{attrs:{field:"created",label:e.$t("created"),sortable:"",width:"150"}},[e._v(" "+e._s(e._f("moment")(Number(r.created),"ll LT"))+" ")]),n("b-table-column",{attrs:{field:"updated",label:e.$t("updated"),sortable:"",width:"150"}},[r.updated?[e._v(e._s(e._f("moment")(Number(r.updated),"ll LT")))]:[e._v("-")]],2),n("b-table-column",{attrs:{label:"",width:"100"}},[n("div",{staticClass:"buttons"},[n("button",{staticClass:"button is-link is-small",on:{click:function(t){return e.startUserEdition(r)}}},[e._v(" "+e._s(e.$t("button-edit"))+" ")]),r.enabled?n("button",{staticClass:"button is-danger is-small",on:{click:function(t){return e.lock(r)}}},[e._v(" "+e._s(e.$t("button-lock"))+" ")]):n("button",{staticClass:"button is-success is-small",on:{click:function(t){return e.unlock(r)}}},[e._v(" "+e._s(e.$t("button-unlock"))+" ")])])])]}},{key:"detail",fn:function(e){var t=e.row;return[n("user-details",{attrs:{user:t}})]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-user-fitting-criteria")))])])]},proxy:!0}],null,!1,1975094862)}),n("user-modal",{attrs:{active:e.modal,user:e.editedUser},on:{"update:active":function(t){e.modal=t},addUser:e.refreshUsers,updateUser:e.updateUser}})]]],2)},uh=[],dh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){return t.preventDefault(),e.save()}}},[n("cytomine-modal",{attrs:{active:e.active,title:e.title},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[n("input",{staticClass:"hidden",attrs:{id:"username",type:"text"}}),n("input",{staticClass:"hidden",attrs:{id:"password",type:"password"}}),n("b-field",{key:"username",attrs:{label:e.$t("username"),horizontal:"",type:{"is-danger":e.errors.has("username")},message:e.errors.first("username")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"username",type:"text",disabled:e.internalUser.id},model:{value:e.internalUser["username"],callback:function(t){e.$set(e.internalUser,"username",t)},expression:"internalUser['username']"}})],1),e._l(e.editableFields,(function(t){var r=t.field,a=t.validationRules;return n("b-field",{key:r,attrs:{label:e.$t("password"===r&&e.editionMode?"password-new":r),horizontal:"",type:{"is-danger":e.errors.has(r)},message:e.errors.first(r)}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:a,expression:"validationRules"}],attrs:{name:r,type:"password"===r?"password":"text","password-reveal":"password"===r},model:{value:e.internalUser[r],callback:function(t){e.$set(e.internalUser,r,t)},expression:"internalUser[field]"}})],1)})),n("b-field",{attrs:{label:e.$t("role"),horizontal:""}},[n("b-select",{model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}},e._l(e.roles,(function(t,r){return n("option",{key:r,domProps:{value:r}},[e._v(" "+e._s(e.$t(t.label))+" ")])})),0)],1),n("b-field",{attrs:{label:e.$t("language"),horizontal:""}},[n("b-select",{model:{value:e.internalUser["language"],callback:function(t){e.$set(e.internalUser,"language",t)},expression:"internalUser['language']"}},e._l(e.languages,(function(t){var r=t.value,a=t.name;return n("option",{key:r,domProps:{value:r}},[e._v(" "+e._s(a)+" ")])})),0)],1)],2)],1)},ph=[],mh="ROLE_GUEST",fh={value:"EN",name:"English"},hh={name:"user-modal",props:{active:Boolean,user:Object},components:{CytomineModal:Ve},$_veeValidate:{validator:"new"},data:function(){return{internalUser:{},rolesWithIds:null,selectedRole:mh,displayErrors:!1,languages:[{value:"EN",name:"English"},{value:"FR",name:"Français"}]}},computed:{roles:function(){return Ru},editionMode:function(){return Boolean(this.user)},title:function(){return this.$t(this.editionMode?"update-user":"create-user")},editableFields:function(){return[{field:"firstname",validationRules:"required"},{field:"lastname",validationRules:"required"},{field:"email",validationRules:"required|email"},{field:"password",validationRules:this.editionMode?"min:8":"required|min:8"}]},idRole:function(){var e=this;return this.rolesWithIds.find((function(t){return t.authority===e.selectedRole})).id}},watch:{active:function(e){if(e){if(!this.rolesWithIds)return this.$notify({type:"error",text:this.$t("notif-unexpected-error")}),void this.$emit("update:active",!1);this.internalUser=this.user?this.user.clone():new $["User"],this.selectedRole=this.user?this.user.role:mh,this.internalUser.language=this.user?this.user.language:fh.value,this.displayErrors=!1}}},methods:{save:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return n=this.editionMode?"update":"creation",e.prev=6,e.next=9,this.internalUser.save();case 9:if(this.editionMode&&this.selectedRole===this.user.role){e.next=13;break}return e.next=12,this.internalUser.defineRole(this.idRole);case 12:this.internalUser.role=this.selectedRole;case 13:if(!this.editionMode||!this.internalUser.password){e.next=16;break}return e.next=16,this.internalUser.savePassword(this.internalUser.password);case 16:this.internalUser.password="",this.$notify({type:"success",text:this.$t("notif-success-user-"+n)}),this.$emit("update:active",!1),this.$emit(this.editionMode?"updateUser":"addUser",this.internalUser),e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](6),this.$notify({type:"error",text:this.$t("notif-error-user-"+n)});case 25:case"end":return e.stop()}}),e,this,[[6,22]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["RoleCollection"].fetchAll();case 3:this.rolesWithIds=e.sent.array,e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},vh=hh,gh=(n("8e2a"),Object(S["a"])(vh,dh,ph,!1,null,"5270eaf7",null)),bh=gh.exports,yh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"details-wrapper"},[n("b-loading",{staticClass:"small",attrs:{active:e.loading,"is-full-page":!1}}),e.loading?e._e():n("table",{staticClass:"table"},[n("tbody",[n("tr",[n("td",[e._v(e._s(e.$t("projects")))]),n("td",[e._v(" "+e._s(e.projects?e.projects.length:"?")+" ")]),n("td",[e.projects&&e.projects.length?n("b-collapse",{attrs:{open:!1},scopedSlots:e._u([{key:"trigger",fn:function(t){var r=t.open;return[n("button",{staticClass:"button is-small"},[e._v(" "+e._s(e.$t(r?"button-hide":"button-show"))+" ")])]}}],null,!1,3507901580)},[n("ul",e._l(e.projects,(function(t){return n("li",{key:t.id},[n("router-link",{attrs:{to:"/project/"+t.id}},[e._v(" "+e._s(t.name)+" ")])],1)})),0)]):e._e()],1)]),n("tr",[n("td",[e._v(e._s(e.$t("managed-projects")))]),n("td",[e._v(" "+e._s(e.managedProjects?e.managedProjects.length:"?")+" ")]),n("td",[e.managedProjects&&e.managedProjects.length?n("b-collapse",{attrs:{open:!1},scopedSlots:e._u([{key:"trigger",fn:function(t){var r=t.open;return[n("button",{staticClass:"button is-small"},[e._v(" "+e._s(e.$t(r?"button-hide":"button-show"))+" ")])]}}],null,!1,3507901580)},[n("ul",e._l(e.managedProjects,(function(t){return n("li",{key:t.id},[n("router-link",{attrs:{to:"/project/"+t.id}},[e._v(" "+e._s(t.name)+" ")])],1)})),0)]):e._e()],1)]),n("tr",[n("td",[e._v(e._s(e.$t("user-annotations")))]),n("td",[e._v(" "+e._s(null==e.nbAnnotations?"?":e.nbAnnotations)+" ")]),n("td")]),e.currentUser.id!==e.user.id?n("tr",[n("td",[e._v(e._s(e.$t("actions")))]),n("td",{attrs:{colspan:"2"}},[n("button",{staticClass:"button is-link is-small",on:{click:function(t){return e.switchUser()}}},[e._v(" "+e._s(e.$t("connect-as-user",{username:e.user.username}))+" ")])])]):e._e()])])],1)},wh=[],_h={props:{user:Object},data:function(){return{loading:!0,projects:null,managedProjects:null,nbAnnotations:null,showProjects:!1,showManagedProjects:!1}},computed:{currentUser:m("currentUser/user")},methods:{fetchProjects:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ProjectCollection"].fetchAll({filterKey:"user",filterValue:this.user.id,light:!0});case 2:this.projects=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchManagedProjects:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ProjectCollection"].fetchAll({filterKey:"user",filterValue:this.user.id,light:!0,admin:!0});case 2:this.managedProjects=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchNbAnnotations:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.user.fetchNbAnnotations();case 2:this.nbAnnotations=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),switchUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["Cytomine"].instance.switchUser(this.user.username);case 3:return e.next=5,this.$store.dispatch("currentUser/fetchUser");case 5:this.$router.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-failed-to-connect-as-user")});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.fetchProjects(),this.fetchManagedProjects(),this.fetchNbAnnotations()].map((function(e){return e.catch((function(e){}))})));case 2:this.loading=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},xh=_h,jh=(n("c87b"),Object(S["a"])(xh,yh,wh,!1,null,"9006dae0",null)),Ch=jh.exports,$h={name:"admin-users",components:{CytomineTable:Y,UserModal:bh,UserDetails:Ch},data:function(){return{loading:!0,error:!1,addUserModal:!1,searchString:"",currentPage:1,perPage:25,sortField:"username",sortOrder:"",revision:0,modal:!1,editedUser:null}},computed:{roles:function(){return Ru},userCollection:function(){var e=new $["UserCollection"]({withRoles:!0});return this.searchString&&(e["fullName"]={ilike:encodeURIComponent(this.searchString)}),e}},methods:{displayMemberOrigin:function(e){var t;return"LDAP"===e.origin&&(t="LDAP"),t="BOOTSTRAP"===e.origin?"system":"manual",this.$t(t)},getRoleData:function(e){return this.roles[e.role]},lock:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.lock();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-user-lock")});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}(),unlock:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.unlock();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-user-unlock")});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}(),startUserCreation:function(){this.editedUser=null,this.modal=!0},refreshUsers:function(){this.revision++},startUserEdition:function(e){this.editedUser=e,this.modal=!0},updateUser:function(e){this.revision++,this.editedUser.populate(e)}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.revision++,this.loading=!1;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},kh=$h,Ph=Object(S["a"])(kh,lh,uh,!1,null,null,null),Oh=Ph.exports,Rh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[e.trustedSources?[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),n("div",{staticClass:"column is-one-half has-text-right-desktop"},[n("button",{staticClass:"button is-link",on:{click:function(t){return e.startSourceCreation()}}},[e._v(" "+e._s(e.$t("button-new-trusted-source"))+" ")])])]),n("b-table",{attrs:{data:e.filteredTrustedSources,paginated:!0,"per-page":e.perPage,"pagination-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{field:"source",label:e.$t("trusted-source"),width:"400"}},[n("software-source",{attrs:{source:r}})],1),n("b-table-column",{attrs:{label:"",width:"50"}},[n("div",{staticClass:"buttons"},[n("button",{staticClass:"button is-link is-small",on:{click:function(t){return e.startSourceEdition(r)}}},[e._v(" "+e._s(e.$t("button-edit"))+" ")]),n("button",{staticClass:"button is-link is-small",on:{click:function(t){return e.refresh(r)}}},[e._v(" "+e._s(e.$t("button-refresh"))+" ")]),n("button",{staticClass:"button is-danger is-small",on:{click:function(t){return e.deleteSourceDialog(r)}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")])])])]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-trusted-source-fitting-criteria")))])])]},proxy:!0},{key:"bottom-left",fn:function(){return[n("b-select",{attrs:{size:"is-small"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[n("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),n("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),n("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),n("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}],null,!1,3431149966)}),n("trusted-source-modal",{attrs:{active:e.modal,source:e.editedSource},on:{"update:active":function(t){e.modal=t},addSource:e.addSource,updateSource:e.updateSource}})]:n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])])]],2)},Sh=[],Th=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){return t.preventDefault(),e.save()}}},[n("cytomine-modal",{attrs:{active:e.active,title:e.title},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},e._l(e.editableFields,(function(t){var r=t.field,a=t.validationRules,i=t.disabled;return n("b-field",{key:r,attrs:{label:e.$t(e.fieldLabels[r]),horizontal:"",type:{"is-danger":e.errors.has(r)},message:e.errors.first(r)}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:a,expression:"validationRules"}],attrs:{name:r,placeholder:"",disabled:i},model:{value:e.internalSource[r],callback:function(t){e.$set(e.internalSource,r,t)},expression:"internalSource[field]"}})],1)})),1)],1)},Ah=[],Dh={name:"trusted-source-modal",props:{active:Boolean,source:Object},components:{CytomineModal:Ve},$_veeValidate:{validator:"new"},data:function(){return{internalSource:{},displayErrors:!1}},computed:{editionMode:function(){return Boolean(this.source)},title:function(){return this.$t(this.editionMode?"update-source":"create-source")},editableFields:function(){return[{field:"username",validationRules:"required",disabled:!1},{field:"dockerUsername",validationRules:"required",disabled:!1},{field:"prefix",validationRules:"",disabled:!1},{field:"provider",validationRules:"required",disabled:!0},{field:"environmentProvider",validationRules:"required",disabled:!0}]},fieldLabels:function(){return{provider:"source-provider",username:"source-provider-name",environmentProvider:"environment-provider",dockerUsername:"environment-provider-name",prefix:"prefix"}}},watch:{active:function(e){e&&(this.internalSource=this.formatSource(this.source?this.source.clone():new $["TrustedSource"]),this.displayErrors=!1)}},methods:{save:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return n=this.editionMode?"update":"creation",e.prev=6,e.next=9,this.internalSource.save();case 9:r=e.sent,this.internalSource=this.formatSource(r),this.$notify({type:"success",text:this.$t("notif-success-source-"+n)}),this.$emit("update:active",!1),this.$emit(this.editionMode?"updateSource":"addSource",this.internalSource),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](6),this.$notify({type:"error",text:this.$t("notif-error-source-"+n)});case 19:case"end":return e.stop()}}),e,this,[[6,16]])})));function t(){return e.apply(this,arguments)}return t}(),formatSource:function(e){return e.environmentProvider="docker",e.provider=e.provider?e.provider:"github",e}}},Mh=Dh,Eh=(n("bc4e"),Object(S["a"])(Mh,Th,Ah,!1,null,"0a1b2893",null)),Ih=Eh.exports,Nh={name:"admin-software",components:{SoftwareSource:sa,TrustedSourceModal:Ih},data:function(){return{loading:!0,trustedSources:null,addSourceModal:!1,searchString:"",perPage:25,modal:!1,editedSource:null}},computed:{regexp:function(){return St(this.searchString)},filteredTrustedSources:function(){var e=this;return this.searchString?this.trustedSources.filter((function(t){return e.regexp.test(t.name)||e.regexp.test(t.username)||e.regexp.test(t.provider)||e.regexp.test(t.dockerUsername)||e.regexp.test(t.environmentProvider)})):this.trustedSources}},methods:{formatSource:function(e){e.environmentProvider="docker"},refresh:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.refresh();case 3:this.$notify({type:"success",text:this.$t("notif-success-source-refresh")}),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-source-refresh")});case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}(),startSourceCreation:function(){this.editedSource=null,this.modal=!0},addSource:function(e){this.formatSource(e),this.trustedSources.push(e)},startSourceEdition:function(e){this.editedSource=e,this.modal=!0},updateSource:function(e){this.formatSource(e),this.editedSource.populate(e)},deleteSourceDialog:function(e){var t=this;this.$buefy.dialog.confirm({title:this.$t("delete"),message:this.$t("delete-source-confirmation-message",{username:e.username,dockerUsername:e.dockerUsername}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.deleteSource(e)}})},deleteSource:function(e){try{e.delete(),this.trustedSources.splice(this.trustedSources.indexOf(e),1),this.$notify({type:"success",text:this.$t("notif-success-source-delete",{username:e.username,dockerUsername:e.dockerUsername})})}catch(t){this.$notify({type:"error",text:this.$t("notif-error-source-delete",{username:e.username,dockerUsername:e.dockerUsername})})}}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["TrustedSourceCollection"].fetchAll();case 3:t=e.sent.array,t.forEach((function(e){return n.formatSource(e)})),this.trustedSources=t,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:this.loading=!1;case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},Uh=Nh,Fh=Object(S["a"])(Uh,Rh,Sh,!1,null,null,null),Lh=Fh.exports,qh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v(e._s(e.$t("welcome-message")))]),n("cytomine-quill-editor",{model:{value:e.welcomeConfig.value,callback:function(t){e.$set(e.welcomeConfig,"value",t)},expression:"welcomeConfig.value"}}),n("p",{staticClass:"has-text-right"},[n("button",{staticClass:"button is-link",on:{click:e.save}},[e._v(e._s(e.$t("button-save")))])])],1)},zh=[],Vh={name:"admin-configuration",components:{CytomineQuillEditor:ut},data:function(){return{welcomeConfig:new $["Configuration"]({key:N.CONFIG_KEY_WELCOME,value:"",readingRole:"all"})}},methods:{save:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.welcomeConfig.value){e.next=6;break}return e.next=4,this.welcomeConfig.delete();case 4:e.next=8;break;case 6:return e.next=8,this.welcomeConfig.save();case 8:this.$notify({type:"success",text:this.$t("notif-success-welcome-message-update")}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-welcome-message-update")});case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.welcomeConfig.fetch();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e["catch"](0);case 7:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()},Bh=Vh,Wh=(n("45d8"),Object(S["a"])(Bh,qh,zh,!1,null,"a2037cc6",null)),Jh=Wh.exports,Hh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[e.tags?[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-quarter"},[n("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),n("div",{staticClass:"column is-one-half has-text-right-desktop"},[n("button",{staticClass:"button is-link",on:{click:function(t){return e.startTagCreation()}}},[e._v(" "+e._s(e.$t("button-new-tag"))+" ")])])]),n("b-table",{attrs:{data:e.filteredTags,paginated:!0,"per-page":e.perPage,"pagination-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:""}},[e._v(" "+e._s(r.name)+" ")]),n("b-table-column",{attrs:{field:"creatorName",label:e.$t("creator"),sortable:""}},[e._v(" "+e._s(r.creatorName)+" ")]),n("b-table-column",{attrs:{field:"created",label:e.$t("created"),sortable:""}},[e._v(" "+e._s(e._f("moment")(Number(r.created),"ll"))+" ")]),n("b-table-column",{attrs:{label:" ",centered:""}},[n("div",{staticClass:"buttons"},[n("button",{staticClass:"button is-small is-link",on:{click:function(t){return e.startTagEdition(r)}}},[e._v(" "+e._s(e.$t("button-edit"))+" ")]),n("button",{staticClass:"button is-small is-danger",on:{click:function(t){return e.deleteTagDialog(r)}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")])])])]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-tag-fitting-criteria")))])])]},proxy:!0},{key:"bottom-left",fn:function(){return[n("b-select",{attrs:{size:"is-small"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[n("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),n("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),n("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),n("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}],null,!1,2904442176)}),n("tag-modal",{attrs:{active:e.modal,tag:e.editedTag},on:{"update:active":function(t){e.modal=t},addTag:e.addTag,updateTag:e.updateTag}})]:n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])])]],2)},Gh=[],Kh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(t){return t.preventDefault(),e.save()}}},[n("cytomine-modal",{attrs:{active:e.active,title:e.title},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[n("b-field",{attrs:{label:e.$t("name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name"},model:{value:e.internalTag["name"],callback:function(t){e.$set(e.internalTag,"name",t)},expression:"internalTag['name']"}})],1)],1)],1)},Yh=[],Zh={name:"tag-modal",props:{active:Boolean,tag:Object},components:{CytomineModal:Ve},$_veeValidate:{validator:"new"},data:function(){return{internalTag:{},displayErrors:!1}},computed:{editionMode:function(){return Boolean(this.tag)},title:function(){return this.$t(this.editionMode?"update-tag":"create-tag")}},watch:{active:function(e){e&&(this.internalTag=this.tag?this.tag.clone():new $["Tag"],this.displayErrors=!1)}},methods:{save:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return n=this.editionMode?"update":"creation",e.prev=6,e.next=9,this.internalTag.save();case 9:this.$notify({type:"success",text:this.$t("notif-success-tag-"+n)}),this.$emit("update:active",!1),this.$emit(this.editionMode?"updateTag":"addTag",this.internalTag),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](6),this.$notify({type:"error",text:this.$t("notif-error-tag-"+n)});case 17:case"end":return e.stop()}}),e,this,[[6,14]])})));function t(){return e.apply(this,arguments)}return t}()}},Xh=Zh,Qh=Object(S["a"])(Xh,Kh,Yh,!1,null,null,null),ev=Qh.exports,tv={name:"admin-tags",components:{TagModal:ev},data:function(){return{loading:!0,tags:null,addTagModal:!1,searchString:"",perPage:25,modal:!1,editedTag:null}},computed:{regexp:function(){return St(this.searchString)},filteredTags:function(){var e=this;return this.searchString?this.tags.filter((function(t){return e.regexp.test(t.name)})):this.tags}},methods:{startTagCreation:function(){this.editedTag=null,this.modal=!0},addTag:function(e){this.tags.push(e)},startTagEdition:function(e){this.editedTag=e,this.modal=!0},updateTag:function(e){this.editedTag.populate(e)},deleteTagDialog:function(e){var t=this;this.$buefy.dialog.confirm({title:this.$t("delete"),message:this.$t("delete-tag-confirmation-message",{tagName:e.name}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.deleteTag(e)}})},deleteTag:function(e){try{e.delete(),this.tags.splice(this.tags.indexOf(e),1),this.$notify({type:"success",text:this.$t("notif-success-tag-delete",{tagName:e.name})})}catch(t){this.$notify({type:"error",text:this.$t("notif-error-tag-delete",{tagName:this.currentTag.name})})}}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["TagCollection"].fetchAll();case 3:this.tags=e.sent.array,e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},nv=tv,rv=Object(S["a"])(nv,Hh,Gh,!1,null,null,null),av=rv.exports,iv="dashboard",sv={name:"admin-panel",data:function(){return{activeTab:0,tabNames:["dashboard","users","trusted-sources","tags","configuration"]}},computed:{currentUser:m("currentUser/user"),queriedTab:function(){return this.$route.query.tab},activeComponent:function(){switch(this.activeTab){case"dashboard":return ch;case"users":return Oh;case"configuration":return Jh;case"trusted-sources":return Lh;case"tags":return av}}},watch:{queriedTab:function(){this.changeTab()},activeTab:function(){(this.activeTab!==iv||this.queriedTab)&&this.$router.push("?tab=".concat(this.activeTab))}},methods:{changeTab:function(){this.activeTab=this.queriedTab||iv,this.activeComponent||(this.activeTab=iv)}},created:function(){this.changeTab()}},ov=sv,cv=(n("4a67"),Object(S["a"])(ov,th,nh,!1,null,"e5e0acac",null)),lv=cv.exports,uv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"box"},[n("h2",[e._v(e._s(e.$t("activity-logs")))]),n("activity-logs",{attrs:{idUser:e.currentUser.id}})],1)])},dv=[],pv={name:"user-activity",components:{ActivityLogs:cc},computed:{currentUser:m("currentUser/user")}},mv=pv,fv=(n("d537"),Object(S["a"])(mv,uv,dv,!1,null,"2fc7647f",null)),hv=fv.exports,vv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",[e._v(" "+e._s(e.$t("page-not-found"))+" ")])},gv=[],bv={name:"page-not-found"},yv=bv,wv=(n("33bb"),Object(S["a"])(yv,vv,gv,!1,null,"cbba54ee",null)),_v=wv.exports,xv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"software-wrapper"},[n("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():n("div",{staticClass:"content-wrapper"},[n("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[n("ul",[n("li",[n("router-link",{attrs:{to:"/software"}},[e._v(e._s(e.$t("algorithms")))])],1),n("li",{staticClass:"is-active"},[n("a",{attrs:{href:"#","aria-current":"page"}},[e._v(e._s(e.software.fullName))])])])]),n("div",{staticClass:"box"},[e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[n("h1",[e._v(e._s(e.software.fullName))]),n("div",{staticClass:"description"},[n("cytomine-description",{attrs:{object:e.software,canEdit:e.canManageSoftware}})],1),n("hr"),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("h2",[e._v(e._s(e.$t("projects")))]),e.projects.length?e._l(e.projects,(function(t,r){return n("span",{key:t.id},[n("router-link",{attrs:{to:"/project/"+t.id}},[e._v(e._s(t.name))]),r<e.projects.length-1?n("span",[e._v(", ")]):e._e()],1)})):e.nbProjects>0?n("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("used-in-project-no-access"))+" ")]):n("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("not-used-in-any-project"))+" ")])],2),n("div",{staticClass:"column"},[n("h2",[e._v(e._s(e.$t("statistics")))]),n("div",{staticClass:"chart-container"},[n("software-statistics-chart",{attrs:{"css-classes":"chart",software:e.software}})],1)])]),n("hr"),n("h2",[e._v(e._s(e.$t("software-parameters")))]),n("b-table",{attrs:{data:e.softwareParameters,"default-sort":"created","default-sort-direction":"desc",paginated:!0,"per-page":e.softwareParametersPerPage,"pagination-size":"is-small",detailed:"","detail-key":"id"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("b-table-column",{attrs:{label:e.$t("name"),field:"name",sortable:""}},[e._v(" "+e._s(r.humanName)+" ")]),n("b-table-column",{attrs:{label:e.$t("type"),field:"type",sortable:""}},[e._v(" "+e._s(e.$t(r.type.toLowerCase()))+" ")]),n("b-table-column",{attrs:{label:e.$t("default-value"),field:"defaultValue"}},[e._v(" "+e._s(r.defaultParamValue)+" ")]),n("b-table-column",{attrs:{label:e.$t("mandatory"),field:"mandatory"}},[r.required?[e._v(e._s(e.$t("yes")))]:[e._v(e._s(e.$t("no")))]],2)]}},{key:"empty",fn:function(){return[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v(e._s(e.$t("no-software-parameter")))])])]},proxy:!0},{key:"detail",fn:function(e){var t=e.row;return[n("software-parameter-details",{key:t.id,attrs:{parameter:t}})]}},{key:"bottom-left",fn:function(){return[n("b-select",{attrs:{size:"is-small"},model:{value:e.softwareParametersPerPage,callback:function(t){e.softwareParametersPerPage=t},expression:"softwareParametersPerPage"}},[n("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),n("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),n("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),n("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}],null,!1,1795709409)}),n("hr"),n("h2",[e._v(e._s(e.$t("other-information")))]),n("software-details",{attrs:{software:e.software,"excluded-properties":["projects","name","description"]}})]],2)])],1)},jv=[],Cv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.error?n("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small",size:"is-small"}},[n("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),n("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):n("table",{staticClass:"table"},[n("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():n("tbody",[e.isPropDisplayed("description")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("description")))]),n("td",{staticClass:"prop-content"},[n("cytomine-description",{attrs:{object:e.parameter,canEdit:e.canManageParameter}})],1)]):e._e(),e.isPropDisplayed("name")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("name")))]),n("td",{staticClass:"prop-content"},[n("code",[e._v(e._s(e.parameter.name))])])]):e._e(),e.isPropDisplayed("valueKey")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("value-key")))]),n("td",{staticClass:"prop-content"},[n("code",[e._v(e._s(e.parameter.valueKey))])])]):e._e(),e.isPropDisplayed("commandLineFlag")?n("tr",[n("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("command-line-flag")))]),n("td",{staticClass:"prop-content"},[n("code",[e._v(e._s(e.parameter.commandLineFlag))])])]):e._e()])],1)},$v=[],kv={name:"software-parameter-details",props:{parameter:Object,excludedProperties:{type:Array,default:function(){return[]}}},components:{CytomineDescription:bt,CytomineProperties:Ct,AttachedFiles:nn,RenameModal:Ke},data:function(){return{loading:!0,error:!1}},computed:{currentUser:m("currentUser/user"),canManageParameter:function(){return this.currentUser.adminByNow}},methods:{isPropDisplayed:function(e){return!this.excludedProperties.includes(e)},fetchProjects:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loading=!0,this.error=!1,this.loading=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.fetchProjects()}},Pv=kv,Ov=(n("7ce3"),Object(S["a"])(Pv,Cv,$v,!1,null,"d0dbbcc4",null)),Rv=Ov.exports,Sv="#eee",Tv={name:"software-statistics-chart",extends:vo["b"],props:{software:Object,startDate:Number,endDate:Number},data:function(){return{chartData:null}},computed:{queryParams:function(){return{startDate:this.startDate,endDate:this.endDate}}},watch:{queryParams:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.doRenderChart();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},methods:{doRenderChart:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object.values(jc),n=t.map((function(e){return a.software[e.statLabel]})),r=t.map((function(e){var t=Object(Ps["a"])(e.color||Sv),n=Object(Pt["a"])(t,3),r=n[0],a=n[1],i=n[2],s=.8;return"rgba(".concat(r*s,", ").concat(a*s,", ").concat(i*s,", 1)")})),this.$emit("nbElems",n.length),this.renderChart({labels:t.map((function(e){return a.$t(e.label)})),datasets:[{data:n,backgroundColor:t.map((function(e){return e.color||Sv})),borderColor:r,borderWidth:1,hoverBorderColor:r}]},{maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{ticks:{min:0,suggestedMax:Math.round(1.2*Math.max.apply(Math,Object(B["a"])(n)))+1}}],yAxes:[{gridLines:{display:!1},categoryPercentage:.6}]}});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.addPlugin(_o.a),this.doRenderChart();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Av={name:"software-information",components:{SoftwareDetails:va,SoftwareStatisticsChart:Tv,SoftwareParameterDetails:Rv,CytomineDescription:bt,CytomineProperties:Ct,AttachedFiles:nn},data:function(){return{loading:!0,error:!1,software:null,softwareParameters:[],softwareParametersPerPage:10,projects:[],chartRevision:0}},computed:{currentUser:m("currentUser/user"),idSoftware:function(){return Number(this.$route.params.idSoftware)},canManageSoftware:function(){return this.currentUser.adminByNow},nbProjects:function(){return this.projects.length}},watch:{idSoftware:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.loadSoftware();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),software:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.chartRevision++;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},methods:{loadSoftware:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.fetchSoftware(),this.fetchSoftwareParameters(),this.fetchProjects()]);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e["catch"](0),this.error=!0,e.abrupt("return");case 9:this.chartRevision++;case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}(),fetchSoftware:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["Software"].fetch(this.idSoftware);case 2:this.software=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchSoftwareParameters:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["SoftwareParameterCollection"].fetchAll({filterKey:"software",filterValue:this.idSoftware});case 2:this.softwareParameters=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchProjects:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ProjectCollection"].fetchAll({filterKey:"software",filterValue:this.idSoftware});case 2:this.projects=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadSoftware();case 2:this.loading=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Dv=Av,Mv=(n("e6b7"),n("682e"),Object(S["a"])(Dv,xv,jv,!1,null,"7790eae4",null)),Ev=Mv.exports,Iv=[{path:"/",component:q},{path:"/projects",component:kn},{path:"/storage",component:Xn},{path:"/ontology/:idOntology?",component:Ur},{path:"/software",component:xa},{path:"/software/:idSoftware",component:Ev},{path:"/advanced-search/:searchString?",component:Fu},{path:"/account",component:Du},{path:"/project/:idProject",component:Ef,children:[{path:"",component:qf},{path:"images",component:ki},{path:"image/:idImages",component:yf},{path:"image/:idImage/information",component:Ai},{path:"image/:idImages/annotation/:idAnnotation",component:yf},{path:"annotations",component:uo},{path:"analysis",component:cl},{path:"activity",component:gc},{path:"activity/user/:idUser",component:eh},{path:"information",component:fl},{path:"configuration",component:ju},{path:"*",component:_v}]},{path:"/activity",component:hv},{path:"/admin",component:lv},{path:"/userdashboard",redirect:"/"},{path:"/project",redirect:"/projects"},{path:"/explorer",redirect:"/"},{path:"/upload",redirect:"/storage"},{path:"/activity",redirect:"/"},{path:"/activity-:idProject-",redirect:"/project/:idProject/activity"},{path:"/activity-:idProject-:idUser",redirect:"/project/:idProject/activity/user/:idUser"},{path:"/search-",redirect:"/advanced-search"},{path:"/admin-tabs-dashboard",redirect:"/admin?tab=dashboard"},{path:"/admin-tabs-users",redirect:"/admin?tab=users"},{path:"/admin-tabs-groups",redirect:"/"},{path:"/admin-tabs-permissions",redirect:"/"},{path:"/admin-tabs-configuration",redirect:"/admin?tab=configuration"},{path:"/tabs-dashboard-:idProject",redirect:"/project/:idProject/information"},{path:"/tabs-images-:idProject",redirect:"/project/:idProject/images"},{path:"/tabs-annotations-:idProject",redirect:"/project/:idProject/annotations"},{path:"/tabs-annotationproperties-:idProject-:idAnnot",redirect:"/project/:idProject"},{path:"/tabs-imageproperties-:idProject-:idImage",redirect:"/project/:idProject"},{path:"/tabs-imageproperties-:idProject-:idImage",redirect:"/project/:idProject"},{path:"/tabs-algos-:idProject",redirect:"/project/:idProject/analysis"},{path:"/tabs-config-:idProject",redirect:"/project/:idProject/configuration"},{path:"/tabs-usersconfig-:idProject",redirect:"/project/:idProject/configuration?tab=members"},{path:"/tabs-#tabs-useractivity-:idProject-:idUser",redirect:"/project/:idProject/activity/user/:idUser"},{path:"/tabs-image-:idProject-:idImage-0",redirect:"/project/:idProject/image/:idImage"},{path:"/tabs-image-:idProject-:idImage-:idAnnotation",redirect:"/project/:idProject/image/:idImage/annotation/:idAnnotation"},{path:"/tabs-image-:idProject-:idImage-",redirect:"/project/:idProject/image/:idImage"},{path:"*",component:_v}],Nv=new a["a"]({routes:Iv,linkActiveClass:"is-active"}),Uv=Nv,Fv=n("289d"),Lv=n("7bb1"),qv=n("ee98"),zv=n.n(qv),Vv=n("e37d"),Bv=n("2ead"),Wv=n.n(Bv),Jv=n("3717"),Hv=n.n(Jv),Gv=n("df4d"),Kv=n("1cf8"),Yv=n("656a"),Zv=n("dcd0"),Xv=n("9cff"),Qv=n("451a"),eg=n("78db"),tg=n("0414"),ng={tierSizeCalculation:{type:String},extent:{type:Array},size:{type:Array},url:{type:[String,Function],required:!1},urls:{type:Array},tileSize:{type:Number,default:tg["b"]}},rg=function(){return{tierSizeInTiles:null,tileCountUpToTier:null,resolutions:null}};function ag(){var e=this.size,t=e[0],n=e[1],r=[],a=this.tileSize;while(t>a||n>a)r.push([Math.ceil(t/a),Math.ceil(n/a)]),a+=a;r.push([1,1]),r.reverse();for(var i=[1],s=[0],o=1,c=r.length;o<c;o++)i.push(1<<o),s.push(r[o-1][0]*r[o-1][1]+s[o-1]);i.reverse(),this.tierSizeInTiles=r,this.tileCountUpToTier=s,this.resolutions=i}var ig,sg,og={createSource:function(){if(!this.url&&!this.urls)throw new Error("Either url or urls properties must be set for ZoomifySource");var e=new Zv["a"]({attributions:this.attributions,cacheSize:this.cacheSize,crossOrigin:this.crossOrigin,projection:this.projection,reprojectionErrorThreshold:this.reprojectionErrorThreshold,url:this.urlTmpl,tierSizeCalculation:this.tierSizeCalculation,size:this.size,extent:this.extent,transition:this.transition,tileSize:this.tileSize});if(this.urls){var t=Object(Xv["b"])(this.urls.map(this.createFromTemplate(e)));e.setTileUrlFunction(t)}return e},createTileGrid:function(){var e=this.extent||[0,-this.size[1],this.size[0],0];return new eg["a"]({tileSize:this.tileSize,extent:e,origin:[e[0],e[3]],resolutions:this.resolutions})},createFromTemplate:function(e){var t=this;return function(n){return function(r){if(r){var a=r[0],i=r[1],s=-r[2]-1,o=i+s*t.tierSizeInTiles[a][0],c=e.tileGrid.getTileSize(a),l=Array.isArray(c)?c[0]:c,u=(o+t.tileCountUpToTier[a])/l|0,d={z:a,x:i,y:s,tileIndex:o,TileGroup:"TileGroup"+u};return n.replace(/\{(\w+?)\}/g,(function(e,t){return d[t]}))}}}}},cg={urls:function(){var e=Object(Xv["b"])(this.urls.map(this.createFromTemplate(this.$source)));this.$source.setTileUrlFunction(e),this.$source.refresh()}},lg={name:"vl-source-zoomify",mixins:[Qv["a"]],props:ng,data:rg,methods:og,watch:cg,created:ag},ug=lg,dg=Object(S["a"])(ug,ig,sg,!1,null,null,null),pg=dg.exports;function mg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mg.installed||(mg.installed=!0,t=Object(Yv["u"])(t,"dataProjection"),Object.assign(pg,t),e.component(pg.name,pg))}var fg,hg,vg=mg,gg=n("bd02"),bg=n("57e8"),yg={sources:{type:Array},operation:{type:Function},lib:{type:Object}},wg={createSource:function(){return new gg["a"]({sources:this.sources,operation:this.operation,lib:this.lib})}},_g={operation:function(){this.$source.setOperation(this.operation,this.lib)},lib:function(){this.$source.setOperation(this.operation,this.lib)}},xg={name:"vl-source-raster",mixins:[bg["a"]],props:yg,methods:wg,watch:_g},jg=xg,Cg=Object(S["a"])(jg,fg,hg,!1,null,null,null),$g=Cg.exports;function kg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};kg.installed||(kg.installed=!0,t=Object(Yv["u"])(t,"dataProjection"),Object.assign($g,t),e.component($g.name,$g))}var Og=kg,Rg=n("d051"),Sg=n("f594"),Tg=n("9ce2"),Ag=n("9858"),Dg=n("0ff9"),Mg=n("86e2"),Eg={source:{type:String,required:!0},hitTolerance:{type:Number,default:0}},Ig={createInteraction:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.makeIdent(this.source),e.next=3,this.$identityMap.get(t,this.$options.INSTANCE_PROMISE_POOL);case 3:return n=e.sent,Object(Yv["l"])(n.getFeatures)&&(r=n.getFeatures(),Object(Ag["b"])(r)&&(n=r)),e.abrupt("return",new Rg["a"]({features:Object(Ag["b"])(n)?n:void 0,hitTolerance:this.hitTolerance}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mount:function(){Tg["a"].methods.mount.call(this)},unmount:function(){Tg["a"].methods.unmount.call(this)},subscribeAll:function(){Fg.call(this)}},Ng=Object(Mg["b"])(["source"],(function(){return function(){this.scheduleRecreate()}})),Ug={name:"vl-interaction-translate",mixins:[Tg["a"]],props:Eg,methods:Ig,watch:Ng};function Fg(){var e=this;Object(Dg["e"])(this);var t=Object(Sg["a"])(this.$interaction,["translatestart","translateend"]);this.subscribeTo(t,(function(t){++e.rev,e.$emit(t.type,t)}))}var Lg,qg,zg=Ug,Vg=Object(S["a"])(zg,Lg,qg,!1,null,null,null),Bg=Vg.exports;function Wg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Wg.installed||(Wg.installed=!0,t=Object(Yv["u"])(t,"dataProjection"),Object.assign(Bg,t),e.component(Bg.name,Bg))}var Jg=Wg,Hg=n("3cd2"),Gg=n("862c"),Kg=n("78cd"),Yg=n("de17"),Zg={source:{type:String,required:!0},angle:{type:Number,default:0}},Xg={createInteraction:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.makeIdent(this.source),e.next=3,this.$identityMap.get(t,this.$options.INSTANCE_PROMISE_POOL);case 3:return n=e.sent,Object(Yv["l"])(n.getFeatures)&&(r=n.getFeatures(),Object(Ag["b"])(r)&&(n=r)),e.abrupt("return",new Hg["a"]({source:Object(Ag["c"])(n)?n:void 0,features:Object(Ag["b"])(n)?n:void 0,deleteCondition:this.deleteCondition,insertVertexCondition:this.insertVertexCondition,pixelTolerance:this.pixelTolerance,style:this.createStyleFunc(),wrapX:this.wrapX}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDefaultStyles:function(){var e=Object(Yv["s"])(Object(Kg["b"])(),(function(e){return e.map(Kg["a"])}));return function(t){if(t.getGeometry())return e[t.getGeometry().getType()]}},getServices:function(){return Object(Yg["a"])(Tg["a"].methods.getServices.call(this),Gg["a"].methods.getServices.call(this))},getStyleTarget:function(){return this.$interaction},mount:function(){Tg["a"].methods.mount.call(this)},unmount:function(){Tg["a"].methods.unmount.call(this)},subscribeAll:function(){tb.call(this)},setStyle:function(e){e!==this._styles&&(this._styles=e,this.scheduleRefresh())}},Qg=Object(Mg["b"])(["source"],(function(){return function(){this.scheduleRecreate()}})),eb={name:"vl-interaction-rotate",mixins:[Tg["a"],Gg["a"]],props:Zg,methods:Xg,watch:Qg};function tb(){var e=this;Object(Dg["e"])(this);var t=Object(Sg["a"])(this.$interaction,["rotatestart","rotateend"]);this.subscribeTo(t,(function(t){++e.rev,e.$emit(t.type,t)}))}var nb,rb,ab=eb,ib=Object(S["a"])(ab,nb,rb,!1,null,null,null),sb=ib.exports;function ob(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ob.installed||(ob.installed=!0,t=Object(Yv["u"])(t,"dataProjection"),Object.assign(sb,t),e.component(sb.name,sb))}var cb=ob,lb=n("30ef"),ub=n.n(lb),db=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper",attrs:{id:"app"}},[n("notifications",{attrs:{position:"top center",width:"30%",max:5},scopedSlots:e._u([{key:"body",fn:function(t){return[n("div",{staticClass:"notification vue-notification",class:t.item.type},[n("button",{staticClass:"delete",on:{click:t.close}}),n("strong",{staticClass:"notification-title"},[e._v(" "+e._s(t.item.title)+" ")]),n("div",{staticClass:"notification-content",domProps:{innerHTML:e._s(t.item.text)}})])]}}])}),e.loading?e._e():[e.communicationError?n("div",{staticClass:"box error"},[n("h2",[e._v(" "+e._s(e.$t("communication-error"))+" ")]),e._v(" "+e._s(e.$t("core-cannot-be-reached"))+" ")]):e.currentUser?[n("cytomine-navbar"),n("div",{staticClass:"bottom"},[n("keep-alive",{attrs:{include:"cytomine-storage"}},[e.currentUser?n("router-view"):e._e()],1)],1)]:n("login")]],2)},pb=[],mb=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"navbar is-light",attrs:{role:"navigation"}},[r("div",{staticClass:"navbar-brand"},[r("router-link",{staticClass:"navbar-item",attrs:{to:"/",exact:""}},[r("img",{attrs:{src:n("9b19"),id:"logo",alt:"Cytomine"}})]),r("a",{staticClass:"navbar-burger",class:{"is-active":e.openedTopMenu},attrs:{role:""},on:{click:function(t){e.openedTopMenu=!e.openedTopMenu}}},[r("span"),e._v(" "),r("span"),e._v(" "),r("span")])],1),r("div",{staticClass:"navbar-menu",class:{"is-active":e.openedTopMenu},attrs:{id:"topMenu"}},[r("div",{staticClass:"navbar-start"},[this.nbActiveProjects>0?r("navbar-dropdown",{attrs:{icon:"fa-folder-open",title:e.$t("workspace")}},[r("navigation-tree")],1):e._e(),r("router-link",{staticClass:"navbar-item",attrs:{to:"/projects"}},[r("i",{staticClass:"fas fa-list-alt"}),e._v(" "+e._s(e.$t("projects"))+" ")]),e.currentUser.guestByNow?e._e():r("router-link",{staticClass:"navbar-item",attrs:{to:"/storage"}},[r("i",{staticClass:"fas fa-download"}),e._v(" "+e._s(e.$t("storage"))+" ")]),r("router-link",{staticClass:"navbar-item",attrs:{to:"/ontology"}},[r("i",{staticClass:"fas fa-hashtag"}),e._v(" "+e._s(e.$t("ontologies"))+" ")]),r("router-link",{staticClass:"navbar-item",attrs:{to:"/software"}},[r("i",{staticClass:"fas fa-code"}),e._v(" "+e._s(e.$t("algorithms"))+" ")]),e.currentUser.adminByNow?r("router-link",{staticClass:"navbar-item",attrs:{to:"/admin"}},[r("i",{staticClass:"fas fa-wrench"}),e._v(" "+e._s(e.$t("admin-menu"))+" ")]):e._e()],1),r("div",{staticClass:"navbar-end"},[r("cytomine-searcher"),r("navbar-dropdown",{attrs:{icon:e.currentUser.adminByNow?"fa-star":e.currentUser.isSwitched?"fa-user-ninja":"fa-user",title:e.currentUserFullInfo,linkClasses:{"has-text-dark-primary":e.currentUser.isSwitched},tag:e.currentUser.adminByNow?{type:"is-danger",text:e.$t("admin")}:null,listPathes:["/account","/activity"]}},[r("router-link",{staticClass:"navbar-item",attrs:{to:"/account"}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-user fa-xs"})]),e._v(" "+e._s(e.$t("account"))+" ")]),r("router-link",{staticClass:"navbar-item",attrs:{to:"/activity"}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-history fa-xs"})]),e._v(" "+e._s(e.$t("activity-history"))+" ")]),e.currentUser.admin?[e.currentUser.adminByNow?r("a",{staticClass:"navbar-item",on:{click:function(t){return e.closeAdminSession()}}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"far fa-star fa-xs"})]),e._v(" "+e._s(e.$t("close-admin-session"))+" ")]):r("a",{staticClass:"navbar-item",on:{click:function(t){return e.openAdminSession()}}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-star fa-xs"})]),e._v(" "+e._s(e.$t("open-admin-session"))+" ")])]:e._e(),e.currentUser.isSwitched?[r("a",{staticClass:"navbar-item has-text-dark-primary",on:{click:function(t){return e.stopSwitchUser()}}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-exchange-alt fa-xs"})]),e._v(" "+e._s(e.$t("switch-back-to-user",{username:e.currentUser.realUser}))+" ")])]:e._e(),r("a",{staticClass:"navbar-item",on:{click:function(t){return e.logout()}}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-power-off fa-xs"})]),e._v(" "+e._s(e.$t("logout"))+" ")])],2),r("navbar-dropdown",{attrs:{icon:"fa-question-circle",title:e.$t("help"),classes:["is-right"]}},[r("a",{staticClass:"navbar-item",on:{click:function(t){return e.openHotkeysModal()}}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"far fa-keyboard fa-xs"})]),e._v(" "+e._s(e.$t("shortcuts"))+" ")]),r("a",{staticClass:"navbar-item",on:{click:function(t){return e.openAboutModal()}}},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-info-circle fa-xs"})]),e._v(" "+e._s(e.$t("about-cytomine"))+" ")])])],1)])])},fb=[],hb=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[n("span",{staticClass:"navbar-link",class:Object.assign({},{"is-active":e.isActive},e.linkClasses),attrs:{tabindex:"0"}},[e.icon?n("i",{class:[e.iconPack,e.icon]}):e._e(),e._v(" "+e._s(e.title)+" "),e.tag?n("b-tag",{attrs:{type:e.tag.type}},[e._v(e._s(e.tag.text))]):e._e()],1),n("div",{staticClass:"navbar-dropdown",class:e.classes},[e._t("default")],2)])},vb=[],gb={name:"navbar-dropdown",props:{icon:String,iconPack:{type:String,default:"fas"},title:String,tag:Object,classes:Array,linkClasses:Object,listPathes:Array},data:function(){return{isActive:!1}},watch:{"$route.path":{handler:function(e){this.listPathes&&(this.isActive=this.listPathes.includes(e)),document.activeElement.blur()},immediate:!0}}},bb=gb,yb=(n("344c"),Object(S["a"])(bb,hb,vb,!1,null,null,null)),wb=yb.exports,_b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navigation-tree-wrapper"},e._l(e.projects,(function(t,r,a){return n("div",{key:t.id},[n("router-link",{staticClass:"navbar-item project-item",attrs:{to:"/project/"+t.id}},[e._v(" "+e._s(t.name)+" "),n("a",{staticClass:"delete is-small",on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.closeProject(t)}}})]),e._l(t.viewers,(function(r,a){return[e.nbImages(r)?n("router-link",{key:a,staticClass:"navbar-item viewer-item",attrs:{to:e.viewerPath(t.id,a),exact:""}},[n("div",{staticClass:"viewer-name"},[n("span",[n("i",{staticClass:"fas fa-caret-right"}),1===e.nbImages(r)?[n("image-name",{attrs:{image:Object.values(r.images)[0].imageInstance}})]:[e._v(" "+e._s(e.$t("viewer-group",{nbImages:e.nbImages(r)}))+" ")],e._v(" "+e._s(r.name)+" ")],2),e.nbImages(r)>1?n("ul",{staticClass:"viewer-details"},e._l(r.images,(function(e,t){return n("li",{key:t},[n("image-name",{attrs:{image:e.imageInstance}})],1)})),0):e._e()]),n("a",{staticClass:"delete is-small",on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.closeViewer(t.id,a)}}})]):e._e()]})),a<e.projects.length-1?n("hr",{staticClass:"navbar-divider"}):e._e()],2)})),0)},xb=[],jb={name:"navigation-tree",components:{ImageName:Sa},computed:{projects:m("projects")},methods:{nbImages:function(e){return Object.keys(e.images).length},viewerPath:function(e,t){return this.$store.getters["projects/".concat(e,"/viewers/").concat(t,"/pathViewer")]()},closeProject:function(e){var t=this,n=Object.keys(e.viewers).length;n?this.$buefy.dialog.confirm({title:this.$t("confirm-close-project"),message:this.$t("confirm-close-project-message",{viewers:this.$tc("count-viewers",n,{count:n})}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.doCloseProject(e)}}):this.doCloseProject(e)},doCloseProject:function(e){this.$store.unregisterModule(["projects",e.id])},closeViewer:function(e,t){this.$store.unregisterModule(["projects",e,"viewers",t])}}},Cb=jb,$b=(n("69d5"),Object(S["a"])(Cb,_b,xb,!1,null,"24df7cb5",null)),kb=$b.exports,Ob=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("cytomine-modal-card",{attrs:{title:e.$t("shortcuts")},on:{close:function(t){return e.$parent.close()}}},e._l(e.categories,(function(t){return n("div",{key:t},[n("h2",[e._v(e._s(e.$t("shortcut-"+t)))]),n("b-table",{staticClass:"shortcut-list",attrs:{data:e.filteredShortcuts(t)},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.row;return[n("b-table-column",{attrs:{field:"name",label:e.$t("description")}},[e._v(" "+e._s(e.$t("shortcut-"+a.name))+" ")]),n("b-table-column",{attrs:{field:"val",label:e.$t("shortcut")}},e._l(a.key,(function(r,i){return n("span",{key:""+t+a.name+r},[n("span",{staticClass:"key"},["click"===r?n("i",{staticClass:"fas fa-mouse-pointer"}):"drag"===r?n("i",{staticClass:"fas fa-hand-pointer"}):"+"===r?n("i",{staticClass:"fas fa-plus"}):"-"===r?n("i",{staticClass:"fas fa-minus"}):"arrowleft"===r?n("i",{staticClass:"fas fa-arrow-left"}):"arrowright"===r?n("i",{staticClass:"fas fa-arrow-right"}):"arrowup"===r?n("i",{staticClass:"fas fa-arrow-up"}):"arrowdown"===r?n("i",{staticClass:"fas fa-arrow-down"}):n("span","meta"===r?[e._v("⌘ Cmd")]:"shift"===r?[e._v("⇧ Shift")]:"alt"===r?[e._v("⌥ Alt")]:"pageup"===r?[e._v("Page Up")]:"pagedown"===r?[e._v("Page Down")]:"del"===r?[e._v("Delete")]:[e._v(e._s(r))])]),i<a.key.length-1?[e._v("+")]:e._e()],2)})),0)]}}],null,!0)})],1)})),0)},Rb=[],Sb=(n("ffc1"),{name:"hotkeys-modal",components:{CytomineModalCard:Fe},data:function(){return{categories:["general","viewer-nav","viewer-tool","viewer-toggle","text-editor"]}},computed:{shortcuts:function(){return Object.entries(hf).map((function(e){var t=Object(Pt["a"])(e,2),n=t[0],r=t[1];return{name:n,key:r}}))}},methods:{filteredShortcuts:function(e){return this.shortcuts.filter((function(t){return t.name.startsWith("".concat(e,"-"))}))}}}),Tb=Sb,Ab=(n("1f1d"),Object(S["a"])(Tb,Ob,Rb,!1,null,"2097f692",null)),Db=Ab.exports,Mb=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("cytomine-modal-card",{attrs:{title:e.$t("about-cytomine")},on:{close:function(t){return e.$parent.close()}}},[e.loading?e._e():[r("dl",[r("dt",[e._v(e._s(e.$t("version")))]),r("dd",[e._v(e._s(e.version||"?"))]),r("dt",[e._v(e._s(e.$t("sponsors")))]),r("dd",[r("a",{attrs:{href:"https://cytomine.coop",target:"_blank"}},[r("img",{staticClass:"sponsor",attrs:{src:n("21dc")}})]),r("a",{attrs:{href:"https://www.uliege.be",target:"_blank"}},[r("img",{staticClass:"sponsor",attrs:{src:n("7205")}})]),r("a",{attrs:{href:"https://www.wallonie.be/",target:"_blank"}},[r("img",{staticClass:"sponsor",attrs:{src:n("f07d")}})])]),r("dt",[e._v(e._s(e.$t("description")))]),r("dd",[r("i18n",{attrs:{path:"cytomine-sponsors-info"}},[r("a",{attrs:{place:"cytomineCompanyLink",href:"https://cytomine.coop",target:"_blank"}},[e._v(" "+e._s(e.$t("cytomine-company")))])])],1),r("dt",[e._v(e._s(e.$t("website")))]),r("dd",[r("i18n",{attrs:{path:"cytomine-website-info"}},[r("a",{attrs:{place:"websiteLink",href:"https://cytomine.coop",target:"_blank"}},[e._v("cytomine.org")])])],1),r("dt",[e._v(e._s(e.$t("source-code")))]),r("dd",[r("i18n",{attrs:{path:"source-code-info"}},[r("a",{attrs:{place:"githubLink",href:"http://github.com/cytomine/",target:"_blank"}},[e._v(" "+e._s(e.$t("github-repository")))])])],1),r("dt",[e._v(e._s(e.$t("documentation")))]),r("dd",[r("i18n",{attrs:{path:"documentation-info"}},[r("a",{attrs:{place:"docLink",href:"https://documentation.cytomine.org/",target:"_blank"}},[e._v(e._s(e.$t("here")))]),r("a",{attrs:{place:"apiDocLink",href:e.apiDocLink,target:"_blank"}},[e._v(e._s(e.$t("here")))])])],1),r("dt",[e._v(e._s(e.$t("contact")))]),r("dd",[r("i18n",{attrs:{path:"contact-info"}},[r("a",{attrs:{place:"contactMail",href:"mailto:info@cytomine.org"}},[e._v("info@cytomine.org")])])],1)])]],2)},Eb=[],Ib={name:"about-cytomine-wrapper",components:{CytomineModalCard:Fe},data:function(){return{version:null,loading:!0}},computed:{apiDocLink:function(){var e=N.CYTOMINE_CORE_HOST;return"".concat(e,"/restApiDoc/?doc_url=").concat(e,"/restApiDoc/api")}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["Cytomine"].instance.ping();case 3:t=e.sent,n=t.version,this.version=n,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:this.loading=!1;case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},Nb=Ib,Ub=(n("0359"),Object(S["a"])(Nb,Mb,Eb,!1,null,"7525c9fc",null)),Fb=Ub.exports,Lb=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.deactivate,expression:"deactivate"}],class:["navbar-item","search",e.displayResults?"is-active":""]},[n("b-field",{staticClass:"no-margin",attrs:{type:e.error?"is-danger":null}},[n("b-input",{staticClass:"global-search",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search",loading:e.loading,disabled:e.error},nativeOn:{click:function(t){return e.activate()}},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),n("p",{staticClass:"control"},[n("router-link",{staticClass:"button",attrs:{to:"/advanced-search","active-class":"router-link-active"},nativeOn:{click:function(t){return e.deactivate(t)}}},[e._v("+")])],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"navbar-dropdown search-results"},[n("h2",[e._v(e._s(e.$t("project"))+" ("+e._s(e.filteredProjects.length)+")")]),e.filteredProjects.length>0?n("p",[e._l(e.subsetProjects,(function(t){return n("router-link",{key:t.id,staticClass:"navbar-item",attrs:{to:"/project/"+t.id},domProps:{innerHTML:e._s(e.highlightedName(t.name))},nativeOn:{click:function(t){return e.deactivate(t)}}})})),e.moreProjects?n("a",{staticClass:"navbar-item"},[e._v("...")]):e._e()],2):n("span",{staticClass:"navbar-item no-result"},[e._v(e._s(e.$t("no-project")))]),n("h2",[e._v(e._s(e.$t("images"))+" ("+e._s(e.filteredImages.length)+")")]),e.filteredImages.length>0?n("p",[e._l(e.subsetImages,(function(t){return n("router-link",{key:t.id,staticClass:"navbar-item",attrs:{to:"/project/"+t.project+"/image/"+t.id},domProps:{innerHTML:e._s(e.htmlImageName(t))},nativeOn:{click:function(t){return e.deactivate(t)}}})})),e.moreImages?n("a",{staticClass:"navbar-item"},[e._v("...")]):e._e()],2):n("span",{staticClass:"navbar-item no-result"},[e._v(e._s(e.$t("no-image")))]),e.moreImages||e.moreProjects?n("div",{staticClass:"search-view-all"},[n("router-link",{staticClass:"button is-small",attrs:{to:"/advanced-search/"+e.searchString},nativeOn:{click:function(t){return e.deactivate(t)}}},[e._v(" "+e._s(e.$t("button-view-all"))+" ("+e._s(e.totalNbResults)+") ")])],1):e._e()])],1)},qb=[],zb={name:"cytomine-searcher",data:function(){return{isActive:!1,loading:!1,error:!1,searchString:"",projects:[],images:[],maxNbDisplayed:5}},computed:{currentUser:m("currentUser/user"),displayResults:function(){return this.isActive&&!this.error&&this.searchString.length>0},regexp:function(){return St(this.searchString)},filteredProjects:function(){var e=this;return this.searchString?this.projects.filter((function(t){return e.regexp.test(t.name)})):this.projects},subsetProjects:function(){return this.filteredProjects.slice(0,this.maxNbDisplayed)},moreProjects:function(){return this.filteredProjects>this.subsetProjects},filteredImages:function(){var e=this;return this.searchString?this.images.filter((function(t){return e.regexp.test(e.imageName(t))})):this.images},subsetImages:function(){return this.filteredImages.slice(0,this.maxNbDisplayed)},moreImages:function(){return this.filteredImages>this.subsetImages},totalNbResults:function(){return this.filteredImages.length+this.filteredProjects.length}},methods:{fetchImages:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$["ImageInstanceCollection"].fetchAllLight();case 2:this.images=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchProjects:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new $["ProjectCollection"]({light:!0,filterKey:"user",filterValue:this.currentUser.id}).fetchAll();case 2:this.projects=e.sent.array;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),activate:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isActive){e.next=12;break}return e.prev=1,this.loading=!0,e.next=5,Promise.all([this.fetchImages(),this.fetchProjects()]);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),this.error=!0;case 10:this.loading=!1,this.isActive=!0;case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(){return e.apply(this,arguments)}return t}(),deactivate:function(){this.isActive=!1},imageName:function(e){return String(e.blindedName||e.instanceFilename)},highlightedName:function(e){return e.replace(this.regexp,"<strong>$1</strong>")},htmlImageName:function(e){var t=e.blindedName?'<span class="blind">['.concat(this.$t("blinded-name-indication"),"] </span>"):"",n='<span class="in-project">('.concat(this.$t("in-project",{projectName:e.projectName}),")</span>");return"".concat(t).concat(this.highlightedName(this.imageName(e)),"&nbsp;").concat(n)}}},Vb=zb,Bb=(n("0ca2"),Object(S["a"])(Vb,Lb,qb,!1,null,"420dbf64",null)),Wb=Bb.exports,Jb={name:"cytomine-navbar",components:{NavbarDropdown:wb,NavigationTree:kb,CytomineSearcher:Wb},mixins:[Ou],data:function(){return{openedTopMenu:!1,hotkeysModal:!1,aboutModal:!1}},computed:{currentUser:m("currentUser/user"),currentUserFullInfo:function(){return _e(this.currentUser)},nbActiveProjects:function(){return Object.keys(this.$store.state.projects).length}},watch:{$route:function(){this.openedTopMenu=!1}},methods:{openHotkeysModal:function(){this.$buefy.modal.open({parent:this,component:Db,hasModalCard:!0})},openAboutModal:function(){this.$buefy.modal.open({parent:this,component:Fb,hasModalCard:!0})},openAdminSession:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("currentUser/openAdminSession");case 3:this.$router.push("/admin"),e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),closeAdminSession:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("currentUser/closeAdminSession");case 3:"/"===this.$router.currentRoute.path?this.$router.push("/projects"):this.$router.push("/"),e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),stopSwitchUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["Cytomine"].instance.stopSwitchUser();case 3:return e.next=5,this.$store.dispatch("currentUser/fetchUser");case 5:this.$router.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-failed-to-switch-back-as-real-user")});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["Cytomine"].instance.logout();case 3:this.$store.dispatch("logout"),this.changeLanguage(),this.$router.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-logout")});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()}},Hb=Jb,Gb=(n("240c"),Object(S["a"])(Hb,mb,fb,!1,null,null,null)),Kb=Gb.exports,Yb=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel"},[e.forgotUsername?[n("p",{staticClass:"panel-heading"},[n("i",{staticClass:"fas fa-user",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("forgot-username"))+" "),e._m(0)]),n("div",{staticClass:"panel-block"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.sendUsername(t)}}},[n("b-field",{attrs:{label:e.$t("email")}},[n("b-input",{model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),n("div",{staticClass:"buttons is-right"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){e.forgotUsername=!1}}},[e._v(" "+e._s(e.$t("button-cancel")))]),n("button",{staticClass:"button is-link"},[e._v(" "+e._s(e.$t("button-get-username")))])])],1)])]:e.forgotPassword?[n("p",{staticClass:"panel-heading"},[n("i",{staticClass:"fas fa-user",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("forgot-password"))+" "),e._m(1)]),n("div",{staticClass:"panel-block"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.resetPassword()}}},[n("b-field",{attrs:{label:e.$t("username")}},[n("b-input",{model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("div",{staticClass:"buttons is-right"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){e.forgotPassword=!1}}},[e._v(" "+e._s(e.$t("button-cancel")))]),n("button",{staticClass:"button is-link"},[e._v(" "+e._s(e.$t("button-reset-password")))])])],1)])]:e.registering?n("register",{on:{close:function(t){e.registering=!1}}}):[n("p",{staticClass:"panel-heading"},[n("i",{staticClass:"fas fa-user",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("login"))+" "),e._m(2)]),n("div",{staticClass:"panel-block"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.login()}}},[n("b-field",{attrs:{label:e.$t("username")}},[n("b-input",{model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("b-field",{attrs:{label:e.$t("password")}},[n("b-input",{attrs:{type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",[n("b-checkbox",{attrs:{type:"is-info"},model:{value:e.rememberMe,callback:function(t){e.rememberMe=t},expression:"rememberMe"}},[e._v(e._s(e.$t("remember-me")))])],1)],1),n("div",{staticClass:"column has-text-right"},[n("button",{staticClass:"button is-link"},[e._v(" "+e._s(e.$t("button-login")))])])])],1)]),n("i18n",{staticClass:"is-size-7 has-text-centered forgot-credentials",attrs:{path:"forgot-credentials",tag:"p"}},[n("a",{attrs:{place:"username"},on:{click:function(t){e.forgotUsername=!0}}},[e._v(e._s(e.$t("username")))]),n("a",{attrs:{place:"password"},on:{click:function(t){e.forgotPassword=!0}}},[e._v(e._s(e.$t("password")))])]),e.allowedRegistration?n("i18n",{staticClass:"is-size-7 has-text-centered",attrs:{path:"no-account-yet",tag:"p"}},[n("a",{attrs:{place:"registerLink"},on:{click:function(t){e.registering=!0}}},[e._v(e._s(e.$t("register")))])]):e._e()]],2)},Zb=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{attrs:{href:"https://doc.cytomine.org",target:"_blank"}},[r("img",{attrs:{src:n("9b19"),id:"logo",alt:"Cytomine"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{attrs:{href:"https://doc.cytomine.org",target:"_blank"}},[r("img",{attrs:{src:n("9b19"),id:"logo",alt:"Cytomine"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{attrs:{href:"https://doc.cytomine.org",target:"_blank"}},[r("img",{attrs:{src:n("9b19"),id:"logo",alt:"Cytomine"}})])}],Xb=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",{staticClass:"panel-heading"},[n("i",{staticClass:"fas fa-user-plus",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("register"))+" ")]),n("div",{staticClass:"panel-block"},[e.success?[n("b-message",{attrs:{type:"is-success","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("successful-registration"))+" ")]),n("p",{staticClass:"has-text-centered"},[n("a",{on:{click:function(t){return e.$emit("close")}}},[e._v(e._s(e.$t("back-to-login")))])])]:n("form",{on:{submit:function(t){return t.preventDefault(),e.register()}}},[n("b-field",{attrs:{label:e.$t("firstname"),type:{"is-danger":e.errors.has("firstname")},message:e.errors.first("firstname")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"firstname"},model:{value:e.firstname,callback:function(t){e.firstname=t},expression:"firstname"}})],1),n("b-field",{attrs:{label:e.$t("lastname"),type:{"is-danger":e.errors.has("lastname")},message:e.errors.first("lastname")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"lastname"},model:{value:e.lastname,callback:function(t){e.lastname=t},expression:"lastname"}})],1),n("b-field",{attrs:{label:e.$t("username"),type:{"is-danger":e.errors.has("username")},message:e.errors.first("username")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("b-field",{attrs:{label:e.$t("email"),type:{"is-danger":e.errors.has("email")},message:e.errors.first("email")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{name:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),n("div",{staticClass:"buttons is-right"},[n("button",{staticClass:"button",attrs:{type:"button",disabled:e.loading},on:{click:function(t){return e.$emit("close")}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),n("button",{staticClass:"button is-link",class:{"is-loading":e.loading},attrs:{disabled:e.errors.any()||e.loading}},[e._v(" "+e._s(e.$t("button-register"))+" ")])])],1)],2)])},Qb=[],ey={name:"register",$_veeValidate:{validator:"new"},data:function(){return{username:"",email:"",firstname:"",lastname:"",success:!1,loading:!1}},methods:{register:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,this.loading=!0,n=new URLSearchParams,n.append("firstname",this.firstname),n.append("lastname",this.lastname),n.append("username",this.username),n.append("email",this.email),e.next=14,$["Cytomine"].instance.api.post("".concat($["Cytomine"].instance.host,"/login/createAccount"),n);case 14:this.success=!0,e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),e.t0.response&&409===e.t0.response.status?this.$notify({type:"error",text:this.$t("notif-error-register-username-exists")}):this.$notify({type:"error",text:this.$t("notif-error-register")});case 20:this.loading=!1;case 21:case"end":return e.stop()}}),e,this,[[5,17]])})));function t(){return e.apply(this,arguments)}return t}()}},ty=ey,ny=Object(S["a"])(ty,Xb,Qb,!1,null,null,null),ry=ny.exports,ay={name:"login",components:{Register:ry},mixins:[Ou],data:function(){return{username:"",password:"",email:"",rememberMe:!0,allowedRegistration:!1,forgotUsername:!1,forgotPassword:!1,registering:!1}},computed:{currentUser:m("currentUser/user")},methods:{login:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("currentUser/login",{username:this.username,password:this.password,rememberMe:this.rememberMe});case 3:this.currentUser?(this.changeLanguage(this.currentUser.language),this.$notify({type:"success",text:this.$t("notif-success-login")})):this.$notify({type:"error",text:this.$t("notif-unexpected-error")}),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$notify({type:"error",text:e.t0.response.data.message});case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),sendUsername:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["Cytomine"].instance.forgotUsername(this.email);case 3:this.$notify({type:"success",text:this.$t("notif-success-forgot-username")}),this.forgotUsername=!1,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-forgot-username")});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),resetPassword:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["Cytomine"].instance.forgotPassword(this.username);case 3:this.$notify({type:"success",text:this.$t("notif-success-forgot-password")}),this.forgotPassword=!1,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("notif-error-forgot-password")});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()}},iy=ay,sy=(n("dd8c"),Object(S["a"])(iy,Yb,Zb,!1,null,"46a490de",null)),oy=sy.exports,cy=n("aaa7"),ly=n.n(cy);ly.a.setIdleDuration(N.IDLE_DURATION);var uy={name:"app",components:{CytomineNavbar:Kb,Login:oy},mixins:[Ou],data:function(){return{communicationError:!1,loading:!0,timeout:null}},computed:{currentUser:m("currentUser/user"),project:m("currentProject/project")},methods:{loginWithToken:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$["Cytomine"].instance.loginWithToken(this.$route.query.username,this.$route.query.token);case 3:return e.next=5,this.fetchUser();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$notify({type:"error",text:this.$t("invalid-token")});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),ping:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(ly.a.now()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,$["Cytomine"].instance.ping(this.project?this.project.id:null);case 5:if(t=e.sent,n=t.authenticated,!this.currentUser||n){e.next=10;break}return e.next=10,this.$store.dispatch("logout");case 10:if(this.currentUser||!n){e.next=13;break}return e.next=13,this.fetchUser();case 13:this.communicationError=!1,e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](2),this.communicationError=!0;case 19:clearTimeout(this.timeout),this.timeout=setTimeout(this.ping,N.PING_INTERVAL);case 21:case"end":return e.stop()}}),e,this,[[2,16]])})));function t(){return e.apply(this,arguments)}return t}(),fetchUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("currentUser/fetchUser");case 2:this.currentUser&&this.changeLanguage(this.currentUser.language);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Sn.a.get("configuration.json").then((function(e){return t=e.data}));case 2:for(n in N)t.hasOwnProperty(n)&&(N[n]=t[n]);if(Object.freeze(N),new $["Cytomine"](N.CYTOMINE_CORE_HOST),!this.$route.query.token||!this.$route.query.username){e.next=8;break}return e.next=8,this.loginWithToken();case 8:return e.next=10,this.ping();case 10:this.loading=!1,ly.a.on("wakeup",this.ping);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},dy=uy,py=(n("5c0b"),Object(S["a"])(dy,db,pb,!1,null,null,null)),my=py.exports;r["default"].use(a["a"]),r["default"].use(Fv["a"],{defaultIconPack:"fas"}),Lv["a"].extend("positive",(function(e){return Number(e)>0})),r["default"].use(Lv["b"],{i18nRootKey:"validations",i18n:Pu,inject:!1}),r["default"].use(zv.a),r["default"].use(Vv["a"]);var fy=n("c1df");r["default"].use(Wv.a,{moment:fy}),r["default"].use(Hv.a,{prevent:["input","textarea",".ql-editor"]}),r["default"].use(Gv),r["default"].use(Kv["a"]),r["default"].use(vg),r["default"].use(Og),r["default"].use(Jg),r["default"].use(cb),ub.a.plugins.unregister(_o.a),ub.a.helpers.merge(ub.a.defaults.global.plugins.datalabels,{anchor:"end",align:"end",offset:5,clamp:!0}),r["default"].config.productionTip=!1,r["default"].prototype.$eventBus=new r["default"],new r["default"]({render:function(e){return e(my)},router:Uv,store:Dm,i18n:Pu}).$mount("#app")},5779:function(e,t,n){},"59e3":function(e,t,n){"use strict";n("5cdd")},"5afe":function(e,t,n){},"5b3d":function(e,t,n){"use strict";n("5164")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"5cdd":function(e,t,n){},"5f10":function(e,t,n){"use strict";n("2807")},"5f1c":function(e,t,n){},"5f1c2":function(e,t,n){"use strict";n("06f5")},"5fac":function(e,t,n){},"5faf":function(e,t,n){"use strict";n("d966")},"5fb3":function(e,t,n){"use strict";n("21f4")},6124:function(e,t,n){"use strict";n("3d7e")},"612f":function(e,t,n){},"613a":function(e,t,n){},"61cc":function(e,t,n){},6284:function(e,t,n){e.exports=n.p+"img/aperio.bfe0ede1.jpg"},"62ba":function(e,t,n){},"63a3":function(e,t,n){},6474:function(e,t,n){"use strict";n("9020")},6791:function(e,t,n){},"682e":function(e,t,n){"use strict";n("7779")},"68c7":function(e,t,n){e.exports=n.p+"img/leica.1ca27d5c.png"},6941:function(e,t,n){"use strict";n("c942")},"69d5":function(e,t,n){"use strict";n("0aa9")},"6a99a":function(e,t,n){},"6bc5":function(e,t,n){"use strict";n("ab93")},"6bcc":function(e,t,n){"use strict";n("1eaf")},"6c99":function(e,t,n){},7205:function(e,t,n){e.exports=n.p+"img/logo-uliege.1f181756.png"},"731a":function(e,t,n){},7394:function(e,t,n){},7533:function(e,t,n){"use strict";n("8375")},7686:function(e,t,n){"use strict";n("ea5b")},"76e0":function(e,t,n){},7743:function(e,t,n){"use strict";n("00e4")},7779:function(e,t,n){},"7aa5":function(e,t,n){"use strict";n("967f")},"7ce3":function(e,t,n){"use strict";n("5f1c")},"7d06":function(e,t,n){},"7f1b":function(e,t,n){},"7fea":function(e,t,n){"use strict";n("613a")},"81a7":function(e,t,n){},"82b5":function(e,t,n){"use strict";n("d756")},"832a":function(e,t,n){"use strict";n("d69f")},"834d":function(e,t,n){},8372:function(e,t,n){"use strict";n("3de7")},8375:function(e,t,n){},8561:function(e,t,n){},"85e4":function(e,t,n){},8608:function(e,t,n){"use strict";n("1f05")},8628:function(e,t,n){"use strict";n("8561")},"88a0":function(e,t,n){},8972:function(e,t,n){"use strict";n("439e")},"8c1c":function(e,t,n){},"8db8":function(e,t,n){},"8e2a":function(e,t,n){"use strict";n("26c9")},"8eb4":function(e,t,n){"use strict";n("85e4")},9020:function(e,t,n){},"919e":function(e,t,n){},"93aa":function(e,t,n){"use strict";n("834d")},9602:function(e,t,n){},"967f":function(e,t,n){},"96a6":function(e,t,n){},"99fb":function(e,t,n){e.exports=n.p+"img/roche.092e0cab.gif"},"9a77":function(e,t,n){"use strict";n("0df9")},"9ae5":function(e){e.exports=JSON.parse('{"project":"Project","projects":"Projects","storage":"Storage","help":"Help","shortcuts":"Shortcuts","about-cytomine":"About Cytomine","account":"Account","logout":"Logout","dashboard":"Dashboard","image":"Image","images":"Images","annotation":"Annotation","annotations":"Annotations","activity":"Activity","analysis":"Analysis","analyses":"Analyses","configuration":"Configuration","no-project":"No project to display","no-image":"No image to display","no-image-recently-opened":"No image recently opened","statistics":"Statistics","user-annotations":"Manual Annotations","analysis-annotations":"Analysis Annotations","reviewed-annotations":"Reviewed Annotations","profile":"Profile","username":"Username","firstname":"First name","lastname":"Last name","email":"Email address","button-save":"Save","notif-success-user-details-saved":"User details correctly updated","notif-error-user-details-not-saved":"Error during update of user details","password":"Password","password-current":"Current password","password-new":"New password","password-confirm":"New password (confirm)","notif-success-password-saved":"Password correctly updated","notif-error-password-not-saved":"Error during update of password","api-keys":"API keys","public-key":"Public key","private-key":"Private key","regenerate-api-keys":"Regenerate","notif-success-keys-regenerated":"API keys correctly updated","notif-error-keys-not-regenerated":"Error during the regeneration of API keys","login":"Log in","remember-me":"Remember me","notif-success-login":"Welcome on Cytomine","notif-unexpected-error":"Unexpected error","annotation-layers":"Annotation layers","select-layer":"Select a layer","button-add":"Add","button-added":"Added","layers-opacity":"Layers opacity","terms":"Terms","no-term":"No term","brightness":"Brightness","contrast":"Contrast","hue":"Hue","saturation":"Saturation","select":"Select","point":"Point","line":"Line","freehand-line":"Freehand line","rectangle":"Rectangle","circle":"Circle","polygon":"Polygon","freehand-polygon":"Freehand polygon","freehand-correct-add":"Correct annotation by adding a freehand area","freehand-correct-remove":"Correct annotation by removing a freehand area","display-annot-details":"Display details of currently selected annotation","fill":"Fill","modify":"Modify","move":"Move","rotate":"Rotate","delete":"Delete","rename":"Rename","undo":"Undo","redo":"Redo","confirm-deletion":"Confirm deletion","confirm-deletion-annotation":"Are you sure you want to delete this annotation?","button-confirm":"Confirm","button-cancel":"Cancel","notif-error-annotation-update":"Error during annotation update","notif-error-undo":"Failed to undo last action","notif-error-redo":"Failed to redo last action","notif-error-annotation-deletion":"Error during annotation deletion","notif-error-annotation-creation":"Error during annotation creation","notif-error-annotation-correction":"Error during annotation correction","notif-error-annotation-fill":"Error during annotation fill","filename":"Filename","height":"Height","width":"Width","magnification":"Magnification","resolution":"Resolution","unknown":"Unknown","information":"Information","name":"Name","button-open":"Open","description":"Description","ontology":"Ontology","number-user-annotations":"Number of user annotations","number-analysis-annotations":"Number of analysis annotations","number-reviewed-annotations":"Number of reviewed annotations","no-description":"No description","search-placeholder":"Search","creator":"Creator","managers":"Managers","contributors":"Contributors","online":"Online","representatives":"Representatives","representative":"Representative","manager":"Manager","role":"Role","contributor":"Contributor","button-less":"Less","button-more":"More","count-per-page":"{count} per page","overview":"Overview","originalFilename":"Original filename","format":"Format","pixels":"pixels","nm-per-pixel":"nm/pixel","um-per-pixel":"µm/pixel","mm-per-pixel":"mm/pixel","vendor":"Vendor","image-size":"Image size","status":"Status","button-add-image":"Add image","actions":"Actions","button-rename":"Rename","button-properties":"Properties","button-download":"Download","button-delete":"Delete","recently-opened":"Recently opened","last-opened-image":"Last opened image","view-all-projects":"View all projects","no-recent-project":"No project recently opened","no-recent-image":"No image recently opened","advanced-search":"Advanced search","button-view-all":"View all","members":"Members","new-project":"New project","last-activity":"Last activity","created-on":"Created on","button-show-filters":"Show filters","button-hide-filters":"Hide filters","all":"All","all-images":"All","all-analyses":"All","all-ontologies":"All","all-resolutions":"All","all-dates":"All","my-role":"My role","legend":"Legend","contributor-icon-label":"You are a contributor of this project","manager-icon-label":"You are a manager of this project","representative-icon-label":"You are a representative of this project","and-count-others":"- | and one other | and {count} others","select-options":"Select options","select-all":"Select all","delete-project":"Delete project","delete-project-confirmation-message":"Do you really want to delete project {projectName}? <br> All data will be deleted! This operation will not be recoverable with undo button!","notif-success-project-deletion":"Project {projectName} was successfully deleted","notif-error-project-deletion":"Failed to delete project {projectName}","delete-image":"Delete image","delete-image-confirmation-message":"Do you really want to delete image {imageName}? <br> All data will be deleted! This operation will not be recoverable with undo button!","notif-success-image-deletion":"Image {imageName} was successfully deleted","notif-error-image-deletion":"Failed to delete image {imageName}","notif-success-add-image":"Image {imageName} was successfully added to project {projectName}","notif-error-add-image":"Failed to add image {imageName} to project {projectName}","in-project":"in {projectName}","annotation-type":"Annotation type","multiple-terms":"Multiple terms","created-by":"Created by","properties":"Properties","no-properties":"No property","tags":"Tags","no-tag":"No tag","button-new-tag":"New tag","notif-success-tag-creation":"The tag was successfully created","notif-error-tag-creation":"Failed to create the tag","notif-error-add-tags":"Failed to create the tags","associate-tags":"Associate tags","notif-success-add-tag-domain-association":"The selected tags were correctly associated","notif-error-add-tag-domain-associations":"Failed to associate the selected tags","search-or-create-tag":"Search tag (or create a new one by typing its name and pressing Enter)...","delete-tag":"Delete tag","delete-tag-confirmation-message":"Do you really want to delete tag {tagName}? <br> All associations will be deleted!","notif-success-tag-update":"Tag was successfully updated","notif-error-tag-update":"Failed to update tag","notif-success-tag-delete":"Tag {tagName} was successfully deleted","notif-error-tag-delete":"Failed to delete tag {tagName}","create-tag":"Create tag","update-tag":"Update tag","area":"Area","perimeter":"Perimeter","button-view-in-image":"View in image","button-center-view-on-annot":"Center view on this annotation","button-view-crop":"View crop","button-copy-url":"Copy URL","button-comments":"Comments","filters":"Filters","failed-fetch-annots":"Failed to fetch annotations","no-annotation":"No annotation","button-edit":"Edit","associated-by":"associated by {username}","add-term":"Add a term","key":"Key","value":"Value","notif-error-add-term":"Failed to add the term","notif-error-remove-term":"Failed to remove the term","notif-error-save-prop":"Failed to save the property","notif-error-remove-prop":"Failed to remove the property","no-term-to-add":"No term to add","error-load-annotations-filters":"Failed to load all annotation filters","button-full-text":"See full text","button-close":"Close","enter-description":"Enter description","ql-paragraph":"Paragraph","ql-header-1":"Header 1","ql-header-2":"Header 2","ql-header-3":"Header 3","ql-header-4":"Header 4","ql-font":"Font","ql-bold":"Bold","ql-italic":"Italic","ql-underline":"Underline","ql-subscript":"Subscript","ql-superscript":"Superscript","ql-font-color":"Font color","ql-background-color":"Background color","ql-align":"Text align","ql-ordered-list":"Ordered list","ql-bullet-list":"Bullet list","ql-blockquote":"Quote","ql-code-block":"Code","ql-clean-format":"Remove formatting","ql-link":"Add a link","ql-image":"Add an image","ql-video":"Add a video","ql-indent-left":"Indent left","ql-indent-right":"Indent right","ql-special-character":"Special characters","info-keyword-stop-preview-description":"Add the keyword {keyword} where you want to delimit the preview text.","notif-error-update-description":"Failed to update description","current-selection":"Current selection","digital-zoom":"Digital zoom","digital-zoom-checkbox-label":"Enable digital zoom (interpolation)","notif-success-annot-URL-copied":"Annotation URL copied to clipboard","black":"Black","white":"White","red":"Red","orange":"Orange","yellow":"Yellow","green":"Green","blue":"Blue","purple":"Purple","color":"Color","no-key-selected":"No key selected","button-reset":"Reset","select-image-to-add":"Select an image to add","link-images":"Link images","link-view-with":"Link this view with...","link-other-images-to-this-group":"Link this group with additional images...","view-linked-with":"This view is linked with","viewer-view":"View {number}","link-group":"Group {number}","button-unlink":"Unlink","terms-new-annotation":"Term(s) to associate to new annotations","core-cannot-be-reached":"Error of communication with Cytomine core","communication-error":"Communication error","follow-user":"Follow a user","online-managers":"Online managers","online-contributors":"Online contributors","no-tracking":"No tracking","end-tracking-user-no-longer-broadcasting":"Stopped following {username} on image {imageName} because he/she no longer broadcasts his/her position","um":"µm","mm":"mm","error":"Error","error-loading-image":"An error occurred during image loading","error-loading-image-bad-project":"At least one image is not in the project from the link","live":"Live","broadcast":"Broadcast","broadcast-my-position":"Broadcast my position and allow other users to follow me","possible-conflict":"Possible conflict","confirm-unlink-view-to-track":"This view is linked with another one on which you are following a user. This may cause conflicts and flickering behaviour. If you confirm, this view will be unlinked from any other to prevent such conflict.","confirm-untrack-to-link-view":"This view is currently synchronized with that of another user. This may cause conflicts and flickering behaviour. If you confirm, the tracking of this user will be cancelled.","add-images":"Add images","already-in-project":"Already in project","rename-image":"Rename the image","enter-new-name-of-image":"Enter the new name to use for this image","notif-success-image-rename":"Image {imageName} was successfully renamed","notif-error-image-rename":"Failed to rename image {imageName}","colors":"Colors","button-lock":"Lock","button-set-calibration":"Set calibration","calibrate-image":"Calibrate image","warning-change-applies-in-project-only":"If you change this value, the modification will only be performed in this project (it will not be propagated to other projects containing the image)","notif-success-image-calibration":"Image {imageName} was correctly calibrated","notif-error-image-calibration":"Failed to calibrate image {imageName}","general":"General","custom-ui":"Custom UI","algorithms":"Algorithms","image-filters":"Image filters","project-side-bar":"Project side bar","viewer-panels":"Viewer panels","all-panels":"All panels","image-details":"Image details","annotation-details":"Annotation details","annotation-details-box":"Annotation details box","geometry-info":"Geometry information (area, length)","creation-info":"Creation information","comments":"Comments","draw-tools":"Draw tools","all-draw-tools":"All draw tools","undo-redo":"Undo/Redo","notif-error-custom-ui-change":"Failed to change custom UI property","editing-mode":"Editing mode","editing-mode-explanation":"Editing mode will change authorisations of contributors. Project managers will still be able to see, add, edit or delete data for this project.","classic":"Classic (fully collaborative)","classic-mode-explanation":"Contributors will be able to add, edit or delete project data, annotations, properties and descriptions on all layers.","restricted":"Restricted","restricted-mode-explanation":"Contributors will not be able to add, edit or delete project data except annotations, properties and descriptions on their own layers.","read-only":"Read only","read-only-mode-explanation":" Contributors will not be able to add, edit or delete project data, annotations, properties and descriptions even on their own layers.","blind-mode":"Blind mode","blind-mode-explanation":"If blind mode is enabled, a contributor will not see image filename. The filename will not influence his work. Filename potentially contains the type of experiment.","hide-managers-layers":"Hide managers layers","hide-managers-layers-explanation":"If you check \\"Hide managers layers\\", a \\"simple\\" contributor will not be able to see the layers of project managers. Project managers will still be able to see all layers.","hide-contributors-layers":"Hide contributors layers","hide-contributors-layers-explanation":"If you check \\"Hide contributos layers\\", a \\"simple\\" contributor will not be able to see the layers of other contributors. Project managers will still be able to see all layers.","default-annotation-layers":"Default annotation layers","select-layer-placeholder":"Select a layer","default-property":"Default property","no-default-property":"No default property","images_downloadable_by_contributor":"Images downloadable by contributor","images_downloadable_by_contributor-explanation":"If this is enabled, contributors will be able to download the images of this project","download-permission":"Download permission","notif-error-general-config-update":"Error during update of configuration","layer":"Layer","hide-by-default":"Hide layer by default","button-remove":"Remove","notif-error-default-layer-add":"Failed to add a default layer","notif-error-default-layer-update":"Error during update of default layer","notif-error-default-layer-delete":"Failed to delete default layer","no-selected-layers":"No selected layers","button-add-members":"Add members","button-details":"Details","button-view-activity":"View activity","source":"Source","ldap":"LDAP","manual":"Manual","last-image":"Last image","last-connection":"Last connection","number-connections":"# connections","no-member-fitting-criteria":"No member fitting criteria","button-remove-selected-members":"Remove selected members","remove-members":"Remove members","remove-members-confirmation-message":"- | Do you really want to remove user {username} from project? | Do you really want to remove the {count} selected users from project?","notif-success-remove-project-members":"The selected members were correctly removed from project","notif-error-remove-project-members":"Failed to remove the selected members from project","button-export-as-csv":"Export as CSV","add-members-to-project":"Add members to project","search-user":"Search user...","notif-success-add-project-members":"The selected users were correctly added as project members","notif-error-add-project-members":"Failed to add the selected user to the project","project-contributor":"Project contributor","project-manager":"Project manager","project-representative":"Project representative","remove-yourself-from-manager":"Remove management rights","remove-yourself-from-manager-confirmation-message":"Are you sure you want to remove yourself from the project managers? You will not be able to undo this action","offline":"Offline users","notif-error-change-role":"Failed to change the role of {username}","enabled":"Enabled","disabled":"Disabled","no-algorithm":"No algorithm to display","notif-error-change-status-algorithm-project":"Failed to change the status of algorithm {softwareName}","no-image-filter":"No image filter to display","notif-error-change-status-image-filter-project":"Failed to change the status of filter {filterName}","rename-project":"Rename the project","new-name":"New name","notif-success-project-rename":"Project {projectName} was successfully renamed","notif-error-project-rename":"Failed to rename project {projectName}","button-set-magnification":"Set magnification","set-magnification":"Set magnification","notif-success-magnification-update":"Magnification of image {imageName} was correctly updated","notif-error-magnification-update":"Failed to update the magnification image {imageName}","length":"Length","create-project":"Create project","notif-success-project-creation":"The project was successfully created","notif-error-project-creation":"Failed to create the project","notif-error-project-already-exists":"Failed to create the project: This project name is already used","create-ontology-for-project":"Create ontology using project name","use-existing-ontology":"Use existing ontology","select-ontology":"Select ontology","type":"Type","attached-files":"Attached files","no-attached-file":"No attached file","add-attached-file":"Add an attached file","choose-file-or-drop":"Click and choose a file or drop it here","click-or-drop-new-file":"Click or drop new file to replace current one","notif-success-attached-file-creation":"File correctly attached","notif-error-attached-file-creation":"Failed to attach the selected file","notif-success-attached-file-deletion":"Attached file {filename} correctly deleted","notif-error-attached-file-deletion":"Failed to delete attached file {filename}","confirm-deletion-attached-file":"Do you really want to delete attached file {filename}?","opacity":"Opacity","button-reset-opacities":"Reset opacities","preview-size":"Preview size","small":"Small","medium":"Medium","large":"Large","huge":"Huge","number-per-page":"Number per page","display":"Display","add-image":"Add image","detailed-image-information":"Detailed information of image {imageName}","button-more-info":"More information","access-denied":"Access denied","insufficient-permission":"You don\'t have the permission to view this page","open-admin-session":"Open admin session","close-admin-session":"Close admin session","admin":"Admin","admin-menu":"Admin","page-not-found":"Page not found","not-found":"Not found","not-found-error":"The requested resource could not be loaded","notif-error-logout":"Error during logout","download-results":"Download results","download-PDF":"Download PDF","download-CSV":"Download CSV","download-excel":"Download Excel","no-result":"No result","upload":"Upload","important-notes":"Important notes","allowed-formats-upload-info":"Only image files (JP(E)G, PNG, BMP, TIF, TIFF, SVS, SCN, NDPI, VMS, MRXS, VSI, BIF) are allowed","vms-mrxs-upload-info":"VMS and MRXS must be zipped (the VMS/MRXS/VSI file and their nested files). One ZIP per image.","zip-upload-info":"A ZIP file containing multiple image is allowed (except for VMS and MRXS)","drag-drop-upload-info":"You can drag & drop files from your desktop on the \\"{labelButton}\\" button with Google Chrome, Mozilla Firefox and Apple Safari.","link-to-project-upload-info":"You are also able to link images with project manually after upload is done.","link-with-project":"Link with project","files":"Files","no-file":"No file","button-start":"Start","button-hide":"Hide","upload-error":"Upload error","add-files":"Add files...","start-upload":"Start upload","cancel-upload":"Cancel upload","preview":"Preview","created":"Created","size":"Size","content-type":"Content type","global-size":"Global size","from":"From","from-file":"From","no-preview-available":"No preview available","uploaded":"Uploaded","converted":"Converted","deployed":"Deployed","error-format":"Format error","error-convert":"Conversion error","uncompressed":"Uncompressed","to-deploy":"To deploy","to-convert":"To convert","error-deployment":"Deployment error","no-uploaded-file":"No uploaded file","count-files":"0 file | 1 file | {count} files","sample-preview":"Sample preview","slide-preview":"Slide preview","sample-preview-of":"Sample preview of {filename}","slide-preview-of":"Slide preview of {filename}","file-tree":"File tree","confirm-deletion-file":"Are you sure you want to delete this file?","view":"View","shortcut-viewer-nav-move-up":"Move up","shortcut-viewer-nav-move-down":"Move down","shortcut-viewer-nav-move-left":"Move left","shortcut-viewer-nav-move-right":"Move right","shortcut-viewer-nav-zoom-in":"Zoom in","shortcut-viewer-nav-zoom-out":"Zoom out","shortcut-viewer-nav-next-image":"Go to next image","shortcut-viewer-nav-previous-image":"Go to previous image","draw":"Draw","shortcut-viewer-tool-select":"Select annotation","shortcut-viewer-tool-point":"Draw a point","shortcut-viewer-tool-freehand-polygon":"Draw a freehand polygon","shortcut-viewer-tool-delete":"Delete selected annotation","shortcut-viewer-tool-undo":"Undo annotation action","shortcut-viewer-tool-redo":"Redo annotation action","review":"Review","shortcut-viewer-tool-review-accept":"Accept selected annotation in review mode","shortcut-viewer-tool-review-reject":"Reject selected annotation in review mode","shortcut-viewer-tool-review-toggle":"Toggle review layer in review mode","version":"Version","sponsors":"Sponsors","website":"Website","source-code":"Source code","documentation":"Documentation","contact":"Contact","cytomine-sponsors-info":"Cytomine is developed by the {cytomineCompanyLink} in collaboration with the University of Liège and was previously funded by research grants of the Wallonia.","cytomine-company":"Cytomine company","cytomine-website-info":"You can find more information on the website of the Cytomine project located at {websiteLink}.","source-code-info":"Cytomine is an open-source software. The licenses are Apache2 and LGPL 2.1. The source code is available on our {githubLink}.","github-repository":"GitHub repository","documentation-info":"A complete documentation is available {docLink}. More detailed documentation regarding the API of Cytomine is also available {apiDocLink}.","here":"here","contact-info":"You can contact the Cytomine Team at {contactMail}","button-previous-image":"Previous image","button-next-image":"Next image","notif-error-first-image":"This is the first image of the project","notif-error-last-image":"This is the last image of the project","notif-error-fetch-previous-image":"Failed to load previous image","notif-error-fetch-next-image":"Failed to load next image","viewer-group":"Viewer group ({nbImages} images)","activity-charts":"Activity charts","activity-logs":"Activity logs","project-connections":"Project connections","image-consultations":"Image consultations","number-annotations":"Number of annotations","manual-annotations-vs-term":"Manual annotations VS. term","annotated-images-vs-term":"Annotated images VS. term","manual-annotations-vs-contributor":"Manual annotations VS. contributor","annotated-images-vs-contributor":"Annotated images VS. contributor","nothing-more-to-load":"Nothing more to load","all-users-analyses":"All users/analyses","time-period":"Time period","button-clear":"Clear","to":"To","no-log-to-display":"No log to display","term":"Term","ontologies":"Ontologies","confirm-deletion-term":"Are you sure you want to delete term {name}?","notif-error-term-deletion":"Failed to delete the term. Ensure that no annotation is associated to this term.","not-used-in-any-project":"Not used in any project","used-in-project-no-access":"Used in projects that you are not allowed to see","confirm-deletion-ontology":"Are you sure you want to delete ontology {name}?","notif-error-ontology-deletion":"Failed to delete the ontology","notif-success-ontology-deletion":"Ontology {name} was successfully deleted","cannot-delete-ontology-with-projects":"Cannot delete the ontology: it is used in projects","rename-ontology":"Rename ontology","notif-success-ontology-rename":"Ontology {name} was successfully renamed","notif-error-ontology-rename":"Failed to rename ontology {name}","new-ontology":"New ontology","create-ontology":"Create ontology","notif-success-ontology-creation":"The ontology was successfully created","notif-error-ontology-creation":"Failed to create the ontology","create-term":"Create term","update-term":"Update term","notif-success-term-creation":"The term was successfully created","notif-error-term-creation":"Failed to create the term","notif-success-term-update":"The term was successfully updated","notif-error-term-update":"Failed to update the term","notif-error-ontology-tree-update":"Failed to update the ontology tree organization","notif-warn-ontology-tree-order-not-persisted":"The order of children in the ontology tree is not persisted in database","workspace":"Workspace","outline-color":"Outline color","no-outline":"No outline","button-launch-new-analysis":"Launch new analysis","launch-new-analysis":"Launch new analysis","algorithm":"Algorithm","run-number":"Run number","execution-date":"Execution date","launched-by":"Launched by","not-launch":"Not launched","in-queue":"In queue","running":"Running","success":"Success","failed":"Failed","indeterminate":"Indeterminate","wait":"Wait","previewed":"Previewed","killed":"Killed","no-analysis-run":"No analysis run","launcher":"Launcher","status-comment":"Status comment","execution-duration":"Execution duration","parameters":"Parameters","button-show":"Show","results":"Results","comment":"Comment","no-result-file":"No result file","button-view":"View","data":"Data","relaunch":"Relaunch","delete-data":"Delete data","count-annotations":"0 annotation | 1 annotation | {count} annotations","deleted-analysis-data":"Analysis data was deleted","delete-analysis-data":"Delete analysis data","confirm-deletion-analysis-data":"Do you confirm you want to delete the following analysis data:","count-reviewed-annotations":"0 reviewed annotation | 1 reviewed annotation | {count} reviewed annotations","count-annotation-terms":"0 term associated to an annotation | 1 term associated to an annotation | {count} terms associated to annotations","remark-long-operation":"Remark: this operation may take some time","progress":"Progress","notif-success-analysis-data-deletion":"Analysis data was successfully deleted","notif-error-analysis-data-deletion":"Failed to delete analysis data","optional-parameters":"Optional parameters","prefilled-parameters":"Pre-filled parameters","notif-success-analysis-launch":"Successfully launched the analysis","notif-error-analysis-launch":"Failed to launch the analysis","notif-error-analysis-parameters-options":"Failed to retrieve the options for parameter {paramName}","activity-of-user":"Activity of {username}","annotation-selections":"Annotation selections","detailed-project-connections":"Detailed project connections","detailed-image-consultations":"Detailed image consultations","date":"Date","duration":"Duration","number-viewed-images":"Number of viewed images","number-annotation-creations":"Number of annotation creations","annotation-creations":"Annotation creations","no-project-connection":"No project connection","no-image-consultation":"No image consultation","operating-system":"Operating system","system":"System","browser":"Browser","first-consultation":"First consultation","last-consultation":"Last consultation","number-consultations":"Number of consultations","error-failed-to-fetch-image-consultations":"Error: failed to fetch image consultations","users":"Users","currently":"Currently","online-users":"Online users","active-projects":"Active projects","most-active-project":"Most active project","used-storage-space":"Used storage space","total":"Total","count-active-users":"no active user | one active user | {count} active users","welcome-message":"Welcome message","enter-text":"Enter text","notif-success-welcome-message-update":"Welcome message successfully updated","notif-error-welcome-message-update":"Failed to update the welcome message","super-admin":"Super admin","user":"User","guest":"Guest","updated":"Updated","button-new-user":"New user","button-unlock":"Unlock","notif-error-user-lock":"Failed to unlock the user","no-user-fitting-criteria":"No user fitting search criteria","members-activity":"Members activity","select-date":"Select a date","no-record":"No record","button-manage-members":"Manage members","barchart-hover-mouse-for-details":"Hover the mouse over a bar to display details related to this bar","barchart-click-label-to-toggle-visibility":"Click on a label at the top of the chart to toggle the visibility of this data in the chart","activity-chart-info-message":"This chart presents the activity performed in the selected period","project-connections-info-message":"A project connection is recorded each time a user opens a project in Cytomine","image-consultations-info-message":"An image consultation is recorded each time a user opens an image in Cytomine","annotation-selections-info-message":"An annotation selection is recorded each time a user selects an annotation","manual-annotations-info-message":"Annotations created by a user","analysis-annotations-info-message":"Annotations created by an automatic analysis (run of an algorithm)","reviewed-annotations-info-message":"Annotations validated during the review process","number-annotations-chart-info-message":"This chart presents the number of annotation creations during the selected period","annotations-vs-terms-chart-info-message":"This chart presents the number of manual annotation associated to each term. Only annotations created during the selected period are taken into account.","annotated-images-vs-terms-chart-info-message":"This chart presents for each term the number of images having at least one user annotation associated with this term. Only annotations created during the selected period are taken into account.","annotations-vs-contributors-chart-info-message":"This chart presents the number of annotation created by each project member during the selected period","annotated-images-vs-contributors-chart-info-message":"This chart presents the number of images annotated by each project member. Only annotations created during the selected period are taken into account.","data-last-updated-on":"Data refreshed at {time}","ongoing":"Ongoing","last-connections":"Last connections","last-day":"Last day","last-week":"Last week","last-month":"Last month","last-year":"Last year","period":"Period","by":"By","day":"Day","hour":"Hour","week":"Week","connections-chart":"Connections chart","create-user":"Create user","update-user":"Update user","notif-success-user-creation":"User successfully created","notif-error-user-creation":"Failed to create the user","notif-success-user-update":"User successfully updated","notif-error-user-update":"Failed to update the user","button-login":"Log in","button-get-username":"Get username","forgot-username":"Forgot username","forgot-password":"Forgot password","button-reset-password":"Reset password","notif-success-forgot-username":"A mail containing your username was sent to your email address","notif-error-forgot-username":"Failed to send an email to the provided email address","notif-success-forgot-password":"A mail containing a connection link was sent to your email address","notif-error-forgot-password":"Failed to send an email allowing to reset the password","forgot-credentials":"Forgot your {username} or your {password}?","password-expired-info-message":"Your password has expired. Please choose a new one.","failed-fetch-current-stats":"Failed to fetch current statistics","failed-fetch-total-counts":"Failed to fetch the total counts","unexpected-error-info-message":"An unexpected error occurred","error-attached-files":"Error fetching attached files","error-fetch-properties":"Error fetching properties","failed-fetch-recent-projects":"Failed to fetch recent projects","error-cannot-upload":"Unexpected error prevents upload","notif-error-fetch-annotations-viewer":"An error occurred while fetching annotations","notif-error-save-user-position":"Failed to save your position in the image","notif-error-save-image-consultation":"Failed to save image consultation","notif-error-target-annotation":"Failed to fetch the requested annotation","notif-error-add-viewer-image":"Failed to add the image","notif-error-loading-annotation-layers":"Failed to fetch annotation layers","notif-error-tracked-user-position":"Failed to retrieve the position of the followed user","annotation-comments":"Annotation comments","notif-error-fetch-annotation-comments":"Failed to retrieve the comments of this annotation","no-annotation-comments":"No comment for this annotation so far","button-share":"Share","enter-comment":"Enter your comment","send-to-all-project-members":"Send to all project members","send-to-some-members":"Send to some project members only","add-new-comment":"Add new comment","button-add-comment":"Add comment","comment-will-be-sent-by-email":"The comment will be sent by email to the selected users","notif-error-new-comment":"Failed to add a comment to the annotation","notif-success-new-comment":"Your comment was successfully send by email","reviewers":"Reviewers","review-layer":"Review layer","reviewed-by":"Reviewed by","reviewed-on":"Reviewed on","button-metadata":"Metadata","image-metadata":"Image metadata","registration-date":"Registration date","first-project-connection":"First project connection","last-project-connection":"Last project connection","notif-error-already-broadcasting-this-image":"You are already broadcasting this image on another view","delete-analysis":"Delete analysis","delete-analysis-confirmation-message":"Do you really want to delete this analysis? <br> All data will be deleted! This operation will not be recoverable with undo button!","notif-success-analysis-deletion":"The analysis was successfully deleted","notif-error-analysis-deletion":"Failed to delete the analysis","number-projects-info-message":"The number of projects of which you are a member","number-images-info-message":"The number of images available in the projects of which you are a member","number-annotations-info-message":"The number of annotations that you created","number-reviewed-annotations-info-message":"The number of annotations that you validated during a review","blinded-name-indication":"Blind","language":"Language","no-property-matching-search-string":"No existing property matching {searchString}","confirm-default-property":"Confirm default property","confirm-default-property-not-used-in-project":"\'{key}\' is currently not used as an annotation property key in this project.<br> Are you sure you want to use it as default property?","notif-success-default-property-update":"Default property successfully updated","notif-error-default-property-update":"Failed to update the default property","notif-error-delete-uploaded-file":"Failed to delete the uploaded file (unexpected error)","notif-error-delete-used-uploaded-file":"This image has instances in active projects ({projects}) under the following names: {names}","no-ontology":"No ontology","button-change-ontology":"Change ontology","change-ontology":"Change ontology","change-ontology-warning-message":"Changing the ontology will result in the deletion of all existing terms associations. This operation will not be recoverable with undo button!","notif-success-project-ontology-change":"Ontology of project {projectName} was successfully updated","notif-error-project-ontology-change":"Failed to change the ontology of project {projectName}","notif-error-project-ontology-change-job-terms":"Cannot change the ontology of this project: some analyses associated terms to annotations. You must clean these associations prior to the ontology change.","notif-error-project-ontology-change-reviewed-terms":"Cannot change the ontology of this project: some terms are associated to reviewed annotations. You must remove these associations prior to the ontology change.","confirm-ontology-change":"Confirm ontology change","confirm-ontology-change-delete-user-terms":"Some members of this project have associated terms to annotations ({count} associations). <br> Are you sure you want to delete those associations to change the ontology?","invalid-token":"Invalid token","slide-preview-not-available":"No slide preview","button-load-more":"Load more","dont-have-access-to-any-ontology":"You don\'t have access to any ontology","managed-projects":"Managed projects","connect-as-user":"Connect as {username}","notif-error-failed-to-connect-as-user":"Failed to connect as the selected user","switch-back-to-user":"Switch back to {username}","notif-error-failed-to-switch-back-as-real-user":"Failed to switch back to real account","notif-error-invalid-key-prefix":"The property key cannot start by {prefix}: this prefix is reserved for internal use","button-copy":"Copy","notif-success-key-copied":"Key copied to clipboard","confirm-close-project":"Close project","confirm-close-project-message":"Do you really want to close this project? The {viewers} it contains will be closed as well","count-viewers":"no viewer | viewer | {count} viewers","validations":{"messages":{"_default":"Invalid field","required":"This field is required","email":"Must be a valid email address","is":"Invalid confirmation","min":"Must have at least {1} characters","decimal":"Must be a number","positive":"Must be positive"}},"invalid-password":"Invalid password","activity-history":"Activity history","image-not-reviewed":"This image has not been reviewed","button-start-review":"Start review","notif-error-start-review":"Failed to start reviewing the image","you-are-reviewing-image-since":"You are reviewing this image since {date}","button-continue-review":"Continue review","you-have-validated-image-on":"You have validated this image on {date}","image-validated-by-on":"This image has been validated by {user} on {date}","button-unvalidate-review":"Unvalidate my review","button-unvalidate-and-continue-review":"Unvalidate and continue my review","notif-error-review-accept-all":"Failed to accept all annotations","notif-error-review-reject-all":"Failed to reject all annotations","image-in-review-by-since":"This image is reviewed by {user} since {date}","button-continue-review-later":"Continue my review later","button-cancel-review":"Cancel my review","button-validate-review":"Validate my review","notif-error-cancel-review":"Failed to cancel the review of the image","notif-error-validate-review":"Failed to validate the image","notif-error-unvalidate-review":"Failed to unvalidate the image review","review-list-visible-layers":"The following layers are currently displayed: {visibleLayers}.","button-accept-all":"Accept all","button-reject-all":"Reject all","review-explanation":"You can review the visible annotations individually using the select tool or treat them all in batch with below buttons.","validate-annotation":"Validate annotation","reject-annotation":"Reject annotation","notif-error-annotation-validation":"Failed to validate the annotation","notif-error-annotation-rejection":"Failed to reject the annotation","in-review":"In review","reviewed":"Reviewed","none":"None","button-register":"Register","register":"Register","notif-error-register":"Error during registration","notif-error-register-username-exists":"This username is already used","no-account-yet":"Don\'t have an account yet ? {registerLink}","successful-registration":"Your account was successfully created. Check your inbox to enable it.","back-to-login":"Back to login form","filter":"Filter","original-no-filter":"Original (no filter)","by-term":"By term","annotations-list":"Annotation list","shortcut-viewer-nav-next-t":"Go to next frame","shortcut-viewer-nav-previous-t":"Go to previous frame","shortcut-viewer-nav-first-t":"Go to first frame","shortcut-viewer-nav-last-t":"Go to last frame","shortcut-viewer-nav-next-c":"Go to next channel","shortcut-viewer-nav-previous-c":"Go to previous channel","shortcut-viewer-nav-first-c":"Go to first channel","shortcut-viewer-nav-last-c":"Go to last channel","shortcut-viewer-nav-next-z":"Go to next slice","shortcut-viewer-nav-previous-z":"Go to previous slice","shortcut-viewer-nav-first-z":"Go to first slice","shortcut-viewer-nav-last-z":"Go to last slice","shortcut-viewer-nav-next-slice":"Go to next plane","shortcut-viewer-nav-previous-slice":"Go to previous plane","shortcut-viewer-nav-first-slice":"Go to first plane","shortcut-viewer-nav-last-slice":"Go to last plane","shortcut-viewer-nav-drag-rotate":"Rotate image","shortcut-viewer-nav-drag-zoom":"Zoom in area","shortcut-viewer-tool-line":"Draw a line","shortcut-viewer-tool-freehand-line":"Draw a freehand line","shortcut-viewer-tool-rectangle":"Draw a rectangle","shortcut-viewer-tool-circle":"Draw a circle","shortcut-viewer-tool-polygon":"Draw a polygon","shortcut-viewer-tool-fill":"Fill annotation","shortcut-viewer-tool-correct-add":"Correct annotation by adding a freehand area","shortcut-viewer-tool-correct-remove":"Correct annotation by removing a freehand area","shortcut-viewer-tool-modify":"Modify annotation","shortcut-viewer-tool-modify-delete-vertex":"Delete a vertex with the modify tool","shortcut-viewer-tool-move":"Move annotation","shortcut-viewer-tool-rotate":"Rotate annotation","shortcut-viewer-toggle-information":"Toggle information panel","shortcut-viewer-toggle-zoom":"Toggle zoom panel","shortcut-viewer-toggle-link":"Toggle image synchronization panel","shortcut-viewer-toggle-filters":"Toggle image color panel","shortcut-viewer-toggle-layers":"Toggle layers panel","shortcut-viewer-toggle-ontology":"Toggle terms panel","shortcut-viewer-toggle-properties":"Toggle properties panel","shortcut-viewer-toggle-broadcast":"Toggle broadcast panel","shortcut-viewer-toggle-review":"Toggle review panel","shortcut-viewer-toggle-overview":"Toggle overview","shortcut-viewer-toggle-annotations":"Toggle annotations panel","shortcut-viewer-toggle-current":"Toggle currently selected annotation panel","shortcut-viewer-toggle-add-image":"Toggle image selector","shortcut-general-close-modal":"Close a modal","shortcut-text-editor-bold":"Format text in bold","shortcut-text-editor-italic":"Format text in italic","shortcut-text-editor-underline":"Format text underlined","shortcut-text-editor":"Text editor","shortcut-viewer-toggle":"Viewer: Display","shortcut-viewer-tool":"Viewer: Tools","shortcut-viewer-nav":"Viewer: Navigation","shortcut-general":"General","shortcut":"Keyboard shortcut","new-algorithm":"New algorithm","nb-jobs":"Number of jobs","nb-success-jobs":"Number of successful jobs","only-last-release":"Only last releases","only-UI-runnable":"Only runnable algorithms","yes":"Yes","no":"No","creation-date":"Creation date","no-software":"No algorithm","notif-success-algorithm-deletion":"Algorithm correctly deleted","notif-error-algortihm-deletion":"Error during algorithm deletion","github":"Github","dockerhub":"DockerHub","no-info":"No information","deprecated":"Deprecated","last-release":"Last release","ui-runnable":"Runnable","number-jobs":"Jobs","number-success":"Successful jobs","software-parameters":"Algorithm parameters","default-value":"Default value","mandatory":"Mandatory","domain":"Cytomine domain","listdomain":"List of Cytomine domains","list":"List","number":"Number","string":"String","boolean":"Boolean","value-key":"Value key","command-line-flag":"Command line flag","other-information":"Other information","execute-command":"Execute command","pulling-command":"Pulling command","trusted-source":"Trusted source","see-source-code-on":"See source code on","see-environment-on":"See environment on","button-kill":"Kill","notif-success-analysis-kill":"Analysis was successfully killed","notif-error-analysis-kill":"Failed to kill analysis","execution-log":"Execution log","log-being-collected":"Execution log is being collected","trusted-sources":"Trusted sources","button-refresh":"Refresh","button-new-trusted-source":"New trusted source","source-provider":"Source code provider","source-provider-name":"Source code provider username","environment-provider":"Environment provider","environment-provider-name":"Environment provider username","prefix":"Prefix","create-source":"Create trusted source","update-source":"Update trusted source","notif-success-source-creation":"Trusted source successfully created","notif-error-source-creation":"Failed to create the trusted source","notif-success-source-update":"Trusted source successfully updated","notif-error-source-update":"Failed to update the trusted source","notif-success-source-refresh":"The trusted source refreshing has been asked","notif-error-source-refresh":"Error during the refresh of the trusted source","fav":"Fav.","favorite":"Favorite","hide-successful-upload":"Hide successful uploads","no-trusted-source-fitting-criteria":"No trusted source fitting criteria","no-tag-fitting-criteria":"No tag fitting criteria","no-trusted-source":"No trusted source","hierarchical-drag-drop-term":"Terms can be organized hierarchically using Drag & Drop","notif-deprecated-software":"This software is deprecated","delete-source":"Delete source","delete-source-confirmation-message":"Do you really want to delete trusted source {username}/{dockerUsername}?","notif-success-source-delete":"Trusted source {username}/{dockerUsername} was successfully deleted","notif-error-source-delete":"Failed to delete trusted source {username}/{dockerUsername}"}')},"9b19":function(e,t,n){e.exports=n.p+"img/logo.8bfe6faf.svg"},"9c0c":function(e,t,n){},a3ed:function(e,t,n){"use strict";n("d0f2")},a411:function(e,t,n){"use strict";n("b074")},a460:function(e,t,n){"use strict";n("919e")},ab93:function(e,t,n){},abeb:function(e,t,n){},ad2d:function(e,t,n){"use strict";n("6791")},ad73:function(e,t,n){},ae57:function(e,t,n){"use strict";n("39cd")},b070:function(e,t,n){"use strict";n("398e")},b074:function(e,t,n){},b1b3:function(e,t,n){"use strict";n("9602")},b1c3:function(e,t,n){"use strict";n("d557")},b1d5:function(e,t,n){"use strict";n("ef5d")},b2b0:function(e,t,n){},b2b7:function(e,t,n){},b4d7:function(e,t,n){},b4e7:function(e,t,n){},b83e:function(e,t,n){e.exports=n.p+"img/3dh.bb638da6.png"},b884:function(e,t,n){"use strict";n("62ba")},baf3:function(e,t,n){"use strict";n("42b7")},bc4e:function(e,t,n){"use strict";n("f7cb")},c00e:function(e,t,n){},c0b7:function(e,t,n){"use strict";n("3e71")},c0d5:function(e,t,n){},c11d:function(e,t,n){"use strict";n("612f")},c168:function(e,t,n){},c4e3:function(e,t,n){},c5bd:function(e,t,n){},c73e:function(e,t,n){},c87b:function(e,t,n){"use strict";n("059d")},c942:function(e,t,n){},c96a:function(e,t,n){"use strict";n("0a9d4")},cc13:function(e,t,n){"use strict";n("d67f")},ccde:function(e,t,n){"use strict";n("4b5b")},cf14:function(e,t,n){},d0f2:function(e,t,n){},d252:function(e,t,n){"use strict";n("88a0")},d367:function(e,t,n){},d3be:function(e,t,n){},d537:function(e,t,n){"use strict";n("e346")},d557:function(e,t,n){},d67d:function(e,t,n){"use strict";n("0b21")},d67f:function(e,t,n){},d69f:function(e,t,n){},d723:function(e,t,n){},d733:function(e,t,n){},d756:function(e,t,n){},d867:function(e,t,n){"use strict";n("d367")},d966:function(e,t,n){},db57:function(e,t,n){"use strict";n("1646")},db79:function(e,t,n){"use strict";n("c5bd")},dbc6:function(e,t,n){"use strict";n("042d")},dd4c:function(e,t,n){},dd8c:function(e,t,n){"use strict";n("c0d5")},de84:function(e,t,n){},deed:function(e,t,n){},e201:function(e,t,n){"use strict";n("3047")},e2aa:function(e,t,n){},e346:function(e,t,n){},e568:function(e,t,n){"use strict";n("1f8f")},e658:function(e,t,n){"use strict";n("dd4c")},e6b7:function(e,t,n){"use strict";n("c168")},e795:function(e,t,n){"use strict";n("2842")},ea5b:function(e,t,n){},ea91:function(e,t,n){},ed2b:function(e,t,n){"use strict";n("61cc")},ed72:function(e,t,n){},ef1e:function(e,t,n){"use strict";n("e2aa")},ef5d:function(e,t,n){},f00b:function(e,t,n){},f020:function(e,t,n){"use strict";n("5093")},f07d:function(e,t,n){e.exports=n.p+"img/logo-wallonie.45258121.png"},f4c1:function(e,t,n){},f615:function(e,t,n){"use strict";n("4a0c")},f6c7:function(e,t,n){"use strict";n("3f52")},f6d5:function(e,t,n){"use strict";n("d723")},f7cb:function(e,t,n){},f929:function(e,t,n){"use strict";n("b2b0")},fae4:function(e,t,n){"use strict";n("ad73")},fae8:function(e,t,n){"use strict";n("2ebc")},fbe2:function(e,t,n){"use strict";n("f4c1")},fd6e:function(e,t,n){"use strict";n("cf14")},ff51:function(e,t,n){"use strict";n("2fdc")},ff5e:function(e,t,n){"use strict";n("b2b7")}});
//# sourceMappingURL=app.71e531bf.js.map