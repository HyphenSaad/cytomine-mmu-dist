(function(e){function t(t){for(var a,o,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0126":function(e,t,n){},"0170":function(e,t,n){},"03b1":function(e,t,n){},"0480":function(e,t,n){"use strict";n("cb9e")},"0622":function(e,t,n){"use strict";n("92ff")},"072d":function(e,t,n){"use strict";n("d216")},"077c":function(e,t,n){},"07ee":function(e,t,n){},"0809":function(e,t,n){"use strict";n("5f2c")},"084f":function(e,t,n){"use strict";n("4b22")},"0904":function(e,t,n){},"0abe":function(e,t,n){"use strict";n("cc03")},"0ac7":function(e,t,n){},"0b9b":function(e,t,n){},"0bc6":function(e,t,n){},"0c3c":function(e,t,n){},"0f64":function(e,t,n){"use strict";n("a716")},1060:function(e,t,n){"use strict";n("33bc")},"11da":function(e,t,n){"use strict";n("e9f5"),n("db9b"),n("d3b7");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ontology-tree",class:{selector:e.allowSelection,draggable:e.allowDrag,editable:e.allowEdition}},[t("sl-vue-tree",{ref:"tree",attrs:{allowMultiselect:!1},on:{select:e.select,drop:e.drop},scopedSlots:e._u([{key:"toggle",fn:function(n){var a=n.node;return[!a.data.hidden&&!a.isLeaf&&a.children.length>0?[t("i",{class:["tree-toggle","fas",a.isExpanded?"fa-angle-down":"fa-angle-right"]})]:e._e(),t("div",{staticClass:"sl-vue-tree-gap"})]}},{key:"title",fn:function(n){var a=n.node;return[a.data.hidden?t("div"):t("div",{staticClass:"tree-selector"},[e.allowSelection?t("i",{staticClass:"tree-checkbox",class:e.classNames(a)}):e._e(),t("cytomine-term",{attrs:{term:a.data}})],1)]}},{key:"sidebar",fn:function(n){var a=n.node;return[a.data.hidden?e._e():e._t("custom-sidebar",(function(){return[e.allowEdition?t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-small",on:{click:function(t){return e.startTermUpdate(a)}}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-edit"})])]),t("button",{staticClass:"button is-small",on:{click:function(t){return e.confirmTermDeletion(a)}}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"far fa-trash-alt"})])])]):e._e()]}),{term:a.data})]}}],null,!0),model:{value:e.treeNodes,callback:function(t){e.treeNodes=t},expression:"treeNodes"}}),e.noResult?e._t("no-result",(function(){return[t("em",{staticClass:"has-text-grey no-result"},[e._v(e._s(e.$t("no-result")))])]})):e._e(),e.allowEdition||e.allowNew?t("div",{staticClass:"add-term-container"},[t("button",{staticClass:"button is-small",on:{click:function(t){return e.startTermCreation()}}},[e._v(e._s(e.$t("add-term")))])]):e._e()],2)},r=[],i=n("c7eb"),o=n("1da1"),s=n("5530"),c=(n("99af"),n("4de4"),n("caad"),n("d81d"),n("14d9"),n("fb6a"),n("a434"),n("b0c0"),n("d866"),n("910d"),n("7d54"),n("ab43"),n("a732"),n("ac1f"),n("00b4"),n("2532"),n("159b"),n("c536")),l=n.n(c),u=n("47f0"),d=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.save()}}},[t("cytomine-modal-card",{staticClass:"term-modal",attrs:{title:e.$t(e.term?"update-term":"create-term")},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[t("b-field",{attrs:{label:e.$t("name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("sketch-picker",{attrs:{presetColors:e.presetColors},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1)],1)},p=[],m=(n("25f0"),n("1246")),f=n("c345"),h=n("b286"),g={name:"term-modal",props:{term:Object,ontology:Object},components:{"sketch-picker":f["Sketch"],CytomineModalCard:h["a"]},$_veeValidate:{validator:"new"},data:function(){return{name:"",color:null}},computed:{presetColors:function(){return["#F44E3B","#FB9E00","#FCDC00","#68BC00","#16A5A5","#009CE0","#7B10D8","#F06292","#000","#777","#FFF"]}},methods:{randomColor:function(){return"#"+(Math.random().toString(16)+"0000000").slice(2,8)},save:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:e.term?e.update():e.create();case 6:case"end":return t.stop()}}),t)})))()},create:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new m["Term"]({name:e.name,color:e.color.hex,ontology:e.ontology.id}).save();case 3:n=t.sent,e.$notify({type:"success",text:e.$t("notif-success-term-creation")}),e.$emit("newTerm",n),e.$parent.close(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-term-creation")});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},update:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new m["Term"](e.term),n.color=e.color.hex,n.name=e.name,t.prev=3,t.next=6,n.save();case 6:e.$notify({type:"success",text:e.$t("notif-success-term-update")}),e.$emit("updateTerm",n),e.$parent.close(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),e.$notify({type:"error",text:e.$t("notif-error-term-update")});case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))()}},created:function(){this.name=this.term?this.term.name:"",this.color={hex:this.term?this.term.color:this.randomColor()}}},v=g,b=(n("0622"),n("2877")),y=Object(b["a"])(v,d,p,!1,null,null,null),w=y.exports,j=n("b910"),k={name:"ontology-tree",model:{prop:"selectedNodes",event:"setSelectedNodes"},props:{ontology:{type:Object},additionalNodes:{type:Array,default:function(){return[]}},startWithAdditionalNodes:{type:Boolean,default:!1},searchString:{type:String,default:""},selectedNodes:{type:Array,default:function(){return[]}},allowSelection:{type:Boolean,default:!0},multipleSelection:{type:Boolean,default:!0},allowDrag:{type:Boolean,default:!1},allowEdition:{type:Boolean,default:!1},allowNew:{type:Boolean,default:!1},hiddenNodes:{type:Array,default:function(){return[]}}},components:{SlVueTree:l.a,CytomineTerm:u["a"]},data:function(){return{treeNodes:[],internalSelectedNodes:[],editedNode:null}},computed:{regexp:function(){return Object(j["a"])(this.searchString)},noResult:function(){return this.treeNodes.every((function(e){return e.data.hidden}))}},watch:{ontology:function(){this.makeTree()},additionalNodes:function(){this.makeTree()},selectedNodes:function(){this.internalSelectedNodes=this.selectedNodes.slice(),this.refreshNodeSelection()},regexp:function(){this.filter()},hiddenNodes:function(){this.filter()}},methods:{makeTree:function(){var e=this.ontology?this.createSubTree(this.ontology.children.array.slice()):[],t=this.createSubTree(this.additionalNodes.slice());this.treeNodes=this.startWithAdditionalNodes?t.concat(e):e.concat(t),this.filter()},createSubTree:function(e){var t=this;return e.map((function(e){return t.createNode(e)}))},createNode:function(e){return{title:e.name,isLeaf:!1,isDraggable:this.allowDrag,isExpanded:!0,isSelected:this.internalSelectedNodes.includes(e.id),data:{id:e.id,name:e.name,color:e.color,parent:e.parent,ontology:this.ontology?this.ontology.id:null,hidden:!1},children:e.children&&e.children.length>0?this.createSubTree(e.children):[]}},filter:function(){var e=this;this.applyToAllNodes((function(t){var n=e.regexp.test(t.title)&&!e.hiddenNodes.includes(t.data.id);if(t.children){var a=t.children.some((function(e){return!e.data.hidden}));t.isExpanded=a,n=n||a}t.data.hidden=!n}))},classNames:function(e){return this.multipleSelection?e.isSelected?["fas","fa-check-square"]:["far","fa-square"]:e.isSelected?["fas","fa-dot-circle"]:["far","fa-circle"]},select:function(e,t){var n=this;this.allowSelection&&(this.clickOnTreeSelector(t.target)&&(e.forEach((function(e){if(n.multipleSelection){var t=n.internalSelectedNodes.indexOf(e.data.id);t>=0?(n.internalSelectedNodes.splice(t,1),n.$emit("unselect",e.data.id)):(n.internalSelectedNodes.push(e.data.id),n.$emit("select",e.data.id))}else n.internalSelectedNodes.includes(e.data.id)?n.internalSelectedNodes=[]:n.internalSelectedNodes=[e.data.id],n.$emit("select",e.data.id)})),this.$emit("setSelectedNodes",this.internalSelectedNodes)),this.refreshNodeSelection())},refreshNodeSelection:function(){var e=this;this.allowSelection&&this.applyToAllNodes((function(t){t.isSelected=e.internalSelectedNodes.some((function(e){return e===t.data.id}))}))},clickOnTreeSelector:function(e){return!!e.classList.contains("tree-selector")||!!e.parentElement&&this.clickOnTreeSelector(e.parentElement)},applyToAllNodes:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.treeNodes;n.forEach((function(n){n.children&&t.applyToAllNodes(e,n.children),e(n)}))},startTermCreation:function(){this.editedNode=null,this.openModal()},createTerm:function(e){this.treeNodes.push(this.createNode(e)),this.$emit("newTerm",e)},startTermUpdate:function(e){this.editedNode=e,this.openModal()},updateTerm:function(e){this.$refs.tree.updateNode(this.editedNode.path,{data:Object(s["a"])({},e)})},openModal:function(){this.$buefy.modal.open({parent:this,component:w,props:{term:this.editedNode?this.editedNode.data:null,ontology:this.ontology},events:{newTerm:this.createTerm,updateTerm:this.updateTerm},hasModalCard:!0})},drop:function(e,t){var n=this;e.forEach(function(){var e=Object(o["a"])(Object(i["a"])().mark((function e(a){var r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="inside"===t.placement?t.node.data.id:t.node.data.parent,a.data.parent===r){e.next=13;break}return e.prev=2,e.next=5,new m["Term"](a.data).changeParent(r);case 5:n.applyToAllNodes((function(e){e.data.id===a.data.id&&(e.data.parent=r)})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),n.$notify({type:"error",text:n.$t("notif-error-ontology-tree-update")});case 11:e.next=14;break;case 13:n.$notify({type:"warn",text:n.$t("notif-warn-ontology-tree-order-not-persisted")});case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}())},confirmTermDeletion:function(e){var t=this;this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-term",{name:e.data.name}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.deleteTerm(e)}})},deleteTerm:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m["Term"].delete(e.data.id);case 3:t.$refs.tree.remove([e.path]),n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-term-deletion")});case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()}},created:function(){this.internalSelectedNodes=this.selectedNodes.slice(),this.makeTree()}},_=k,x=(n("9b22"),n("882e"),Object(b["a"])(_,a,r,!1,null,"4cca4912",null));t["a"]=x.exports},1238:function(e,t,n){},"128e":function(e,t,n){"use strict";n("fb4f")},"12a2":function(e,t,n){"use strict";n("9117")},"14cd":function(e,t,n){},1813:function(e,t,n){"use strict";n("3884")},1975:function(e,t,n){},"1b4b":function(e,t,n){"use strict";n("8f17")},"1c71":function(e){e.exports=JSON.parse('{"about-cytomine":"À propos de Cytomine","absolute-link-mode":"Absolu","access-denied":"Accès non autorisé","account":"Compte","actions":"Actions","active-projects":"Projets actifs","activity-chart-info-message":"Ce graphique présente un résumé de l\'activité ayant eu lieu durant la période sélectionnée","activity-charts":"Graphiques d\'activité","activity-history":"Historique de l\'activité","activity-logs":"Logs d\'activité","activity-of-user":"Activité de l\'utilisateur {username}","activity":"Activité","add-attached-file":"Ajouter un fichier joint","add-files":"Ajouter des fichiers...","add-image":"Ajouter une image","add-images":"Ajout d\'images","add-members-to-project":"Ajouter des membres au projet","add-new-comment":"Ajouter un nouveau commentaire","add-term":"Nouveau terme","add-track":"Ajouter une trace","admin-menu":"Administration","admin-warning":" Je confirme que je veux faire de cet utilisateur un administrateur.","admin":"Admin","advanced-search":"Recherche avancée","algorithm":"Algorithme","algorithms":"Algorithmes","all-analyses":"Toutes","all-annotations-uncategorized":"Toutes les annotations non classées","all-channels":"Tous les canaux","all-dates":"Toutes","all-draw-tools":"Tous les outils de tracé","all-images":"Toutes","all-ontologies":"Toutes","all-panels":"Tous les outils","all-resolutions":"Toutes","all-users-analyses":"Tous les utilisateurs/analyses","all":"Tous","allowed-formats-upload-info":"Formats d\'image supportés:","already-in-project":"Déjà dans le projet","analyses":"Analyses","analysis-annotations-info-message":"Annotations créées par une analyse automatique (exécution d\'un algorithme)","analysis-annotations":"Annotations d\'analyse","analysis":"Analyse","and-count-others":"- | et un autre | et {count} autres","annotated-images-vs-contributor":"Images annotées VS. contributeur","annotated-images-vs-contributors-chart-info-message":"ce graphique présente le nombre d\'images annotées par chaque membre. Seules les annotations créées durant la période sélectionnée sont prises en compte.","annotated-images-vs-term":"Images annotées VS. terme","annotated-images-vs-terms-chart-info-message":"Ce graphique présente, pour chaque terme, le nombre d\'images ayant au moins une annotation associée à ce terme. Seules les annotations créées durant la période sélectionnée sont prises en compte.","annotation-comments":"Commentaires","annotation-creations":"Créations d\'annotations","annotation-details-box":"Boîte de détails","annotation-details":"Détails de l\'annotation","annotation-layers":"Calques d\'annotations","annotation-selections-info-message":"À chaque fois qu\'un utilisateur clique sur une annotation dans une image, une sélection d\'annotation est enregistrée","annotation-selections":"Sélections d\'annotations","annotation-type":"Type d\'annotation","annotation":"Annotation","annotations-list":" Liste des annotations","annotations-vs-contributors-chart-info-message":"Ce graphique présente le nombre d\'annotations créées par chaque membre durant la période sélectionnée","annotations-vs-terms-chart-info-message":"Ce graphique présente le nombre d\'annotations manuelles associées à chaque terme. Seules les annotations créées durant la période sélectionnée sont prises en compte.","annotations":"Annotations","api-keys":"Clés API","area":"Aire","associate-tags":"Associer des tags","associated-by":"associé par {username}","attached-files":"Fichiers joints","back-to-login":"Retour au formulaire d\'authentification","barchart-click-label-to-toggle-visibility":"Cliquez sur un label au-dessus du graphique pour afficher/masquer les données associées à ce label dans le graphique","barchart-hover-mouse-for-details":"Passez la souris sur une barre pour afficher les détails relatifs à cette barre","black":"Noir","blind-mode-explanation":"Si le mode aveugle est activé, les contributeurs ne verront pas les noms des images du projet. Cela peut être utile lorsque les noms des images contiennent des informations (par exemple sur le type d\'expérience) qui pourraient potentiellement influencer le travail des contributeurs.","blind-mode":"Mode aveugle","blinded-name-indication":"Masqué","blue":"Bleu","boolean":"Booléen","brightness":"Luminosité","broadcast-my-position":"Diffuser ma position dans l\'image et autoriser d\'autres utilisateurs à me suivre","broadcast":"Diffusion et suivi","browser":"Navigateur","button-accept-all":"Tout valider","button-add-comment":"Ajouter un commentaire","button-add-image":"Ajouter une image","button-add-members":"Ajouter des membres","button-add":"Ajouter","button-added":"Ajouté","button-adjust-image":"Ajuster le plan","button-adjust-slice":"Ajuster l\'image","button-adjust":"Ajuster","button-best-fit-zoom":"Ajuster le zoom à la vue","button-cancel-review":"Annuler la validation","button-cancel":"Annuler","button-center-view-on-annot":"Cadrer sur cette annotation","button-change-ontology":"Changer l\'ontologie","button-clear":"Réinitialiser","button-close":"Fermer","button-comments":"Commentaires","button-compute-profile":"Calculer le profil","button-confirm":"Confirmer","button-continue-review-later":"Continuer la validation plus tard","button-continue-review":"Continuer la validation","button-copy-url":"Copier l\'URL","button-copy":"Copier","button-delete":"Supprimer","button-details":"Détails","button-download":"Télécharger","button-edit":"Modifier","button-export-as-csv":"Exporter CSV","button-full-text":"Voir l\'entièreté","button-get-username":"Récupérer le nom d\'utilisateur","button-hide-filters":"Cacher les filtres","button-hide":"Masquer","button-kill":"Arrêter","button-launch-new-analysis":"Lancer une nouvelle analyse","button-less":"Moins","button-load-more":"Plus","button-lock":"Verrouiller","button-login":"Se connecter","button-manage-members":"Gestion des membres","button-metadata":"Métadonnées","button-more-info":"Plus d\'informations","button-more":"Plus","button-new-tag":"Nouveau tag","button-new-trusted-source":"Nouvelle source de confiance","button-new-user":"Nouvel utilisateur","button-next-image":"Image suivante","button-open":"Ouvrir","button-previous-image":"Image précédente","button-properties":"Propriétés","button-refresh":"Rafraîchir","button-register":"S\'inscrire","button-reject-all":"Tout rejeter","button-remove-selected-members":"Retirer les membres sélectionnés","button-remove":"Supprimer","button-rename":"Renommer","button-reset-opacities":"Réinitialiser les opacités","button-reset-password":"Réinitaliser le mot de passe","button-reset-zoom":"Réinitialiser le zoom","button-reset":"Réinitialiser","button-save":"Sauvegarder","button-set-calibration":"Calibrer","button-set-magnification":"Changer le grossissement","button-share":"Partager","button-show-filters":"Montrer les filtres","button-show":"Montrer","button-start-review":"Commencer la validation","button-start":"Uploader","button-unlink":"Séparer","button-unlock":"Déverrouiller","button-unvalidate-and-continue-review":"Annuler la validation","button-unvalidate-review":"Annuler la validation","button-validate-review":"Valider l\'image","button-view-activity":"Voir l\'activité","button-view-all":"Tout voir","button-view-crop":"Voir le crop","button-view-in-image":"Voir dans l\'image","button-view":"Voir","by-term":"Par terme","by-track":"Par trace","by":"Par","calibrate-image":"Calibrer l\'image","cancel-upload":"Annuler l\'upload","cannot-delete-ontology-with-projects":"Cette ontologie ne peut être supprimée : elle est utilisée dans des projets.","categorization":"Catégorisation","change-ontology-warning-message":"Changer l\'ontologie aura pour effet de supprimer toutes les associations annotation-terme existantes. Cette action est irréversible.","change-ontology":"Changer l\'ontologie","channel-abbr":"can.","channel":"Canal","checking-integrity":"Vérification de l\'intégrité en cours","choose-file-or-drop":"Cliquez ici ou glissez-déposez le fichier de votre choix","circle":"Cercle","classic-mode-explanation":"Les contributeurs auront le droit d\'ajouter, d\'éditer et de supprimer des données dans ce projet sans restriction, y compris des annotations, des propriétés et des descriptions sur les calques d\'autres utilisateurs.","classic":"Classique (collaboratif)","click-or-drop-new-file":"Cliquez ici our glissez-déposez un nouveau fichier pour remplacer le fichier actuel","close-admin-session":"Fermer la session admin","color":"Couleur","colors":"Couleurs","command-line-flag":"Argument de la ligne de commande","comment-will-be-sent-by-email":"Le commentaire sera envoyé par e-mail aux utilisateurs sélectionnés","comment":"Commentaire","comments":"Commentaires","communication-error":"Erreur de communication","companion-files":"Fichiers liés","configuration":"Configuration","confirm-close-project-message":"Êtes-vous sûr de vouloir fermer ce projet ? Les {viewers} qu\'il contient seront également fermés.","confirm-close-project":"Fermer le projet","confirm-default-property-not-used-in-project":"Actuellement, aucune annotation de ce projet n\'est associée à une propriété ayant pour clé \'{key}\'.<br> Êtes-vous sûr de vouloir l\'utiliser comme propriété par défaut","confirm-default-property":"Confirmer la propriété par défaut","confirm-deletion-analysis-data":"Êtes-vous sûr de vouloir supprimer les données d\'analyse suivantes :","confirm-deletion-annotation":"Êtes-vous sûr de vouloir supprimer cette annotation?","confirm-deletion-attached-file":"Êtes-vous sûr de vouloir supprimer le fichier joint {filename} ?","confirm-deletion-file":"Êtes-vous sûr de vouloir supprimer ce fichier ?","confirm-deletion-ontology":"Êtes-vous sûr de vouloir supprimer l\'ontologie {name} ?","confirm-deletion-term":"Êtes-vous sûr de vouloir supprimer le terme {name} ?","confirm-deletion-track":"Etes-vous certain de vouloir supprimer la trace {name} ?","confirm-deletion":"Confirmer la suppression","confirm-ontology-change-delete-user-terms":"Des membres du projet ont associé des termes à des annotations ({count} associations). Êtes-vous sûr de vouloir supprimer ces associations ?","confirm-ontology-change":"Confirmer le changement d\'ontologie","confirm-unlink-view-to-track":"Cette image est synchronisée avec une autre image dans laquelle vous suivez un utilisateur. Cela pourrait mener à des conflits et à un comportement erratique. Si vous confirmez, la synchronisation sera interrompue de façon à éviter un tel conflit","confirm-untrack-to-link-view":"Cette image est actuellement synchronisée avec les mouvements d\'un autre utilisateur. Cela pourrait mener à des conflits et à un comportement erratique. Si vous confirmez, la synchronisation sera interrompue de façon à éviter un tel conflit","connect-as-user":"Se connecter en tant que {username}","connections-chart":"Graphique des connexions","contact-info":"Vous pouvez contacter l\'équipe de Cytomine à l\'adresse {contactMail}.","contact":"Contact","content-type":"Type de contenu","contrast":"Contraste","contributor-icon-label":"Vous êtes un contributeur du projet","contributor":"Contributeur","contributors":"Contributeurs","converted":"Converti","converting":"Conversion en cours","copy-paste":"Copier/Coller","copy":"Copier","core-cannot-be-reached":"Erreur de communication avec le backend de Cytomine","count-active-users":"aucun utilisateur actif | un utilisateur actif | {count} utilisateurs actifs","count-annotation-terms":"0 association de terme | 1 association de terme | {count} associations de terme","count-annotations":"0 annotation | 1 annotation | {count} annotations","count-bands":"- | 1 bande | {count} bandes","count-files":"0 fichier | 1 fichier | {count} fichiers","count-frames":"- | 1 frame | {count} frames","count-per-page":"{count} par page","count-reviewed-annotations":"0 annotation validée | 1 annotation validée | {count} annotations validées","count-slices":"- | 1 plan | {count} plans","count-viewers":"aucun visualisateur | visualisateurs | {count} visualisateurs","create-ontology-for-project":"Créer une ontologie ayant le même nom que le projet","create-ontology":"Créer une ontologie","create-project":"Créer un projet","create-source":"Créer une source de confiance","create-tag":"Créer un tag","create-term":"Créer un terme","create-track":"Créer une trace","create-user":"Créer un utilisateur","created-by":"Créé par","created-on":"Créé le","created":"Créé","creation-date":"Date de création","creation-info":"Informations sur la création","creator":"Créateur","current-selection":"Sélection","currently-visible-annotations-for-track":"Annotations actuellement visibles pour la trace","currently-visible-annotations-with":"Annotations actuellement visibles avec","currently":"Actuellement","custom-ui":"Personnalisation de l\'interface","cytomine-company":"Société Cytomine","cytomine-sponsors-info":"Cytomine Community Edition est développé par la {cytomineCompanyLink} en collaboration avec l\'Université de Liège et a été subventionné par des conventions de recherche de la Région Wallone.","cytomine-website-info":"Vous trouverez davantage d\'information sur le site web du projet Cytomine : {websiteLink}.","dashboard":"Tableau de bord","data-last-updated-on":"Données mises à jours à {time}","data":"Données","date":"Date","day":"Jour","default-annotation-layers":"Calques chargés par défaut","default-property":"Propriété par défaut","default-value":"Valeur par défaut","delete-analysis-confirmation-message":"Êtes-vous sûr de vouloir supprimer cette analyse ? Toutes les données de ce projet seront irrémédiablement perdues","delete-analysis-data":"Suppression des données de l\'analyse","delete-analysis":"Supprimer l\'analyse","delete-data":"Supprimer les données","delete-image-confirmation-message":"Êtes-vous sûr de vouloir supprimer l\'image {imageName} ? <br> Cette action ne pourra être annulée","delete-image":"Supprimer l\'image","delete-project-confirmation-message":"Êtes-vous sûr de vouloir supprimer le projet {projectName} ? <br> Toutes les données de ce projet seront irrémédiablement perdues","delete-project":"Supprimer le projet","delete-source-confirmation-message":"Êtes-vous sûr de vouloir supprimer la source de confiance {username}/{dockerUsername} ?","delete-source":"Supprimer la source de confiance","delete-tag-confirmation-message":"Êtes-vous sûr de vouloir supprimer le tag {projectName} ? <br> Toutes les associations seront irrémédiablement perdues","delete-tag":"Supprimer le tag","delete":"Supprimer","deleted-analysis-data":"Données de l\'analyse supprimées","deployed":"Déployé","deploying":"Déploiement en cours","deprecated":"Déprécié","description":"Description","detailed-image-consultations":"Détails des consultations d\'image","detailed-image-information":"Informations détaillées de l\'image {imageName}","detailed-project-connections":"Détails des connexions au projet","detecting-format":"Détection de format en cours","developer-mode":"Mode développeur","digital-zoom-checkbox-label":"Activer le zoom digital (par interpolation)","digital-zoom":"Zoom digital","disabled":"Désactivé","display-annot-details":"Afficher les détails de l\'annotation sélectionnée","display":"Affichage","dockerhub":"DockerHub","documentation-info":"Une documentation complète est disponible {docLink}.","documentation":"Documentation","domain":"Domaine Cytomine","dont-have-access-to-any-ontology":"Vous n\'avez accès à aucune ontologie","download-CSV":"Télécharger le CSV","download-excel":"Télécharger l\'Excel","download-PDF":"Télécharger le PDF","download-permission":"Permission de téléchargement","download-results":"Télécharger les résultats","drag-drop-upload-info":"Si vous utilisez Google Chrome, Mozilla Firefox ou Apple Safari, vous pouvez glisser-déposer des fichiers depuis votre ordinateur sur le bouton \\"{labelButton}\\".","draw-tools":"Outils de tracé","draw":"Outils d\'annotations","duration":"Durée","editing-mode-explanation":"Le mode d\'édition détermine les permissions des contributeurs. Les responsables du projet auront toujours la possibilité de voir, ajouter, éditer et supprimer les données de ce projet","editing-mode":"Mode d\'édition","email":"Adresse e-mail","enabled":"Activé","end-tracking-user-no-longer-broadcasting":"Le suivi de {username} dans l\'image {imageName} a été interrompu car il/elle a cessé de diffuser sa position.","enter-comment":"Saisissez votre commentaire","enter-description":"Saisissez une description","enter-new-name-of-image":"Nouveau nom de l\'image","enter-text":"Saisissez du texte","environment-provider-name":"Nom d\'utilisateur du fournisseur de l\'environnement d\'exécution","environment-provider":"Fournisseur de l\'environnement d\'exécution","error-attached-files":"Erreur lors du chargement des fichiers joints","error-cannot-upload":"Une erreur inattendue empêche les uploads","error-convert":"Erreur de conversion","error-deployment":"Erreur de déploiement","error-extraction":"Erreur d\'extraction","error-failed-to-fetch-image-consultations":"Une erreur a eu lieu lors de la récupération des consultations d\'images","error-fetch-properties":"Erreur lors du chargement des propriétés","error-format":"Erreur de format","error-integrity":"Fichier corrompu","error-load-annotations-filters":"Une erreur a eu lieu lors du chargement des filtres d\'annotations","error-loading-image-bad-project":" Au moins une image n\'est pas dans le project associé au lien","error-loading-image":"Une erreur a eu lieu lors du chargement de l\'image","error-unpacking":"Erreur de décompression","error":"Erreur","execute-command":"Commande d\'exécution","execution-date":"Date d\'exécution","execution-duration":"Durée de l\'exécution","execution-log":"Log d\'exécution","extracting-data":"Extraction des données en cours","failed-fetch-annots":"Une erreur a empêché le chargement des annotations","failed-fetch-current-stats":"Une erreur a eu lieu lors du chargement des statistiques sur l\'activité en cours","failed-fetch-profile":"Une erreur a empêché le chargement du profil","failed-fetch-recent-projects":"Erreur lors du chargement des projets récents","failed-fetch-total-counts":"Une erreur a eu lieu lors du chargement des statistiques","failed":"Échoué","fav":"Fav.","favorite":"Favori","file-tree":"Arborescence de fichiers","filename":"Nom de fichier","files":"Fichiers","fill":"Remplir","filter":"Filtre","filters":"Filtres","first-consultation":"Première consultation","first-project-connection":"Première connexion au projet","firstname":"Prénom","follow-user":"Suivi d\'utilisateur","followers":"Suiveurs","forgot-credentials":"Vous avez oublié votre {username} ou votre {password} ?","forgot-password":"Mot de passe oublié","forgot-username":"Nom d\'utilisateur oublié","format":"Format","frame-per-second":"f/s","frame-rate":"Débit des frames","freehand-correct-add":"Corriger l\'annotation en lui ajoutant un polygone à main levée","freehand-correct-remove":"Corriger l\'annotation en lui soustrayant un polygone à main levée","freehand-line":"Ligne à main levée","freehand-polygon":"Polygone à main levée","from-file":"Fichier parent","from":"Depuis","general":"Général","geometry-info":"Mesures (aire, périmètre, longueur)","github-repository":"répertoire GitHub","github":"Github","global-size":"Taille globale","go-back":"Page Précédente","green":"Vert","guest":"Invité","height":"Hauteur","help":"Aide","here":"ici","hide-by-default":"Caché par défaut","hide-contributors-layers-explanation":"Si cette case est cochée, un \\"simple\\" contributeur ne pourra pas voir les calques des autres contributeurs du projet. Les responsables du projet seront quant à eux toujours en mesure de visualiser tous les calques.","hide-contributors-layers":"Cacher les calques des contributeurs","hide-managers-layers-explanation":"Si cette case est cochée, un \\"simple\\" contributeur ne pourra pas voir les calques des responsables du projet. Les responsables du projet seront quant à eux toujours en mesure de visualiser tous les calques.","hide-managers-layers":"Cacher les calques des responsables","hide-successful-upload":"Cacher les uploads réussis","hierarchical-drag-drop-term":"Les termes peuvent être organisés de manière hiérarchique en utilisant le drag and drop","histogram-scale":"Echelle des histogrammes","hour":"Heure","hue":"Teinte","huge":"Très grand","id":"ID","image-channels":"Canaux","image-consultations-info-message":"Une consultation d\'image est enregistrée à chaque ouverture d\'image dans Cytomine","image-consultations":"Consultations d\'images","image-depth":"Profondeur","image-details":"Détails de l\'image","image-filters":"Filtres d\'images","image-height":"Hauteur","image-in-review-by-since":"Cette image est en cours de validation par depuis le {date}","image-metadata":"Métadonnées de l\'image","image-not-reviewed":"Cette image n\'a pas été validée","image-size":"Taille de l\'image","image-time":"Durée","image-validated-by-on":"Cette image a été validée par {user} le {date}","image-width":"Largeur","image":"Image","images_downloadable_by_contributor-explanation":"Avec cette option, les contributeurs pourront télécharger les images de ce projet","images_downloadable_by_contributor":"Images téléchargeables par les contributeurs","images-in-projects":"Images au sein des projets","images":"Images","important-notes":"Remarques importantes","in-project":"dans {projectName}","in-queue":"Dans la file","in-review":"En cours de validation","in-this-image":"dans cette image","in-this-slice":"dans ce plan","indeterminate":"Inconnu","info-keyword-stop-preview-description":"Insérez le mot-clé {keyword} à l\'endroit où vous désirez que le texte de prévisualisation s\'arrête.","information":"Information","inspect-button":"Inspecter","insufficient-permission":"Vous n\'avez pas la permission de consulter cette page","intensities-manipulation":"Ajustement des intensités","invalid-password":"Mot de passe incorrect","invalid-token":"Token invalide","job-id":"ID de l\'analyse","key":"Clé","killed":"Arrêté","language":"Langue","large":"Grand","last-activity":"Dernière activité","last-connection":"Dernière connexion","last-connections":"Dernières connexions","last-consultation":"Dernière consultation","last-day":"Dernier jour","last-image":"Dernière image","last-month":"Dernier mois","last-opened-image":"Dernière image consultée","last-project-connection":"Dernière connexion au projet","last-release":"Dernière version","last-week":"Dernière semaine","last-year":"Dernière année","lastname":"Nom","launch-new-analysis":"Lancement d\'une nouvelle analyse","launched-by":"Lancé par","launcher":"Créateur","layer":"Calque","layers-opacity":"Opacité des calques","ldap":"LDAP","legend":"Légende","length":"Longueur","line":"Ligne","linear":"Linéaire","link-group":"Groupe {number}","link-images":"Synchronisation d\'images","link-mode":"Mode","link-other-images-to-this-group":"Synchroniser ce groupe avec d\'autres images...","link-to-project-upload-info":"Vous aurez la possibilité d\'associer manuellement les images à des projets lorsque l\'upload sera terminé.","link-view-with":"Synchroniser cette image avec...","link-with-project":"Associer à un projet","link-x-y-resolution":"Lier la résolution selon les axes X et Y","list":"Liste","listdomain":"Liste de domaines Cytomine","live":"Live","log-being-collected":"Le log d\'exécution est en train d\'être collecté","logarithmic":"Logarithmic","login":"Authentification","logout":"Se déconnecter","magnification":"Grossissement","managed-projects":"Projets supervisés","manager-icon-label":"Vous êtes un responsable du projet","manager":"Responsable","managers":"Responsables","mandatory":"Obligatoire","manual-annotations-info-message":"Annotations créées par un utilisateur","manual-annotations-vs-contributor":"Annotations manuelles VS. contributeur","manual-annotations-vs-term":"Annotations manuelles VS. terme","manual":"Manuelle","max-size-upload-info":"La taille maximale par fichier est de 100 GB","medium":"Moyen","members-activity":"Activité des membres","members":"Membres","merged-channels":"Canaux fusionnés","min-max":"Min/Max","mm-per-pixel":"mm/pixel","mm-per-slice":"mm/plan","mm":"mm","modify":"Modifier","most-active-project":"Projet le plus actif","move":"Déplacer","multiple-terms":"Plusieurs termes","multiple-tracks":"Traces multiples","my-role":"Mon rôle","name":"Nom","nb-jobs":"Nombre d\'exécutions","nb-success-jobs":"Nombre d\'exécutions réussies","new-algorithm":"Nouvel algorithme","new-name":"Nouveau nom","new-ontology":"Nouvelle ontologie","new-project":"Nouveau projet","nm-per-pixel":"nm/pixel","nm-per-slice":"nm/plan","no-account-yet":"Pas encore de compte ? {registerLink}","no-algorithm":"Aucun algorithme à afficher","no-analysis-run":"Aucune analyse lancée","no-annotation-comments":"Aucun commentaire pour cette annotation","no-annotation":"Aucune annotation","no-attached-file":"Aucun fichier joint","no-default-property":"Pas de propriété par défaut","no-description":"Pas de description","no-file":"Aucun fichier","no-image-consultation":"Aucune consultation d\'image","no-image-filter":"Aucun filtre à afficher","no-image-recently-opened":"Aucune image consultée récemment","no-image":"Aucune image à afficher","no-info":"Pas d\'information","no-key-selected":"Aucune clé choisie","no-log-to-display":"Aucun log disponible","no-member-fitting-criteria":"Aucun membre ne remplissant les critères de recherche","no-ontology":"Pas d\'ontologie","no-outline":"Pas de contour","no-preview-available":"Pas d\'aperçu disponible","no-profile":"Pas de profil","no-project-connection":"Aucune connexion au projet","no-project":"Aucun projet à afficher","no-properties":"Aucune propriété","no-property-matching-search-string":"Aucune propriété ne correspond au texte recherché","no-recent-image":"Aucune image consultée récemment","no-recent-project":"Aucun projet consulté récemment","no-record":"Aucune entrée","no-result-file":"Aucun fichier de résultat","no-result":"Aucun résultat","no-selected-layers":"Pas de couche sélectionnée","no-software":"Pas d\'algorithme","no-tag-fitting-criteria":"Aucun tag ne remplissant les critètes de recherche","no-tag":"Aucun tag","no-term-to-add":"Aucun terme à ajouter","no-term":"Aucun terme","no-track-to-add":"Pas de trace à ajouter","no-track":"Pas de trace","no-tracking":"Pas de suivi","no-trusted-source-fitting-criteria":"Aucune source de confiance ne remplissant les critères de recherche","no-trusted-source":"Pas de source de confiance","no-uploaded-file":"Aucun fichier","no-user-fitting-criteria":"Aucun utilisateur ne correspond aux critères de recherche","no":"Non","none":"Aucun","not-available":"Indisponible.","not-found-error":"La ressource demandée n\'a pas pu être chargée","not-found":"Introuvable","not-launch":"Pas commencé","not-used-in-any-project":"N\'est utilisée dans aucun projet","nothing-more-to-load":"Tout a été chargé","notif-deprecated-software":"","notif-error-add-image":"Une erreur a empêché d\'ajouter l\'image {imageName} au projet {projectName}","notif-error-add-project-members":"Une erreur a empêché d\'ajouter les utilisateurs sélectionnés au projet","notif-error-add-tag-domain-associations":"Une erreur a empêché d\'associer les tags sélectionnés","notif-error-add-tags":"Une erreur a empêché de créer les tags sélectionnés","notif-error-add-term":"Une erreur a empêché d\'associer le terme","notif-error-add-track":"Impossible d\'ajouter la trace","notif-error-add-viewer-image":"Une erreur a empêché l\'ajout de l\'image","notif-error-algortihm-deletion":"Erreur durant la suppression de l\'algoritme","notif-error-already-broadcasting-this-image":"Vous diffusez déjà cette image","notif-error-analysis-data-deletion":"Une erreur a empêché la suppression des données de l\'analyse","notif-error-analysis-deletion":"Une erreur a empêché la suppression de l\'analyse","notif-error-analysis-kill":"Une erreur a empêché l\'arrêt de l\'analyse","notif-error-analysis-launch":"Une erreur a empêché de lancer l\'analyse","notif-error-analysis-parameters-options":"Une erreur a empêché de récupérer les options disponibles pour le paramètre {paramName}","notif-error-annotation-correction":"Une erreur a empêché la correction de l\'annotation","notif-error-annotation-creation":"Une erreur a empêché la création de l\'annotation","notif-error-annotation-deletion":"Une erreur a empêché la suppression de l\'annotation","notif-error-annotation-fill":"Une erreur a empêché le remplissage de l\'annotation","notif-error-annotation-paste":"L\'annotation n\'a pu être collée car elle est trop large pour cette image","notif-error-annotation-rejection":"Une erreur a empêché de rejeter l\'annotation","notif-error-annotation-repeat":"L\'annotation n\'a pu être répétée","notif-error-annotation-update":"Une erreur a empêché de modifier l\'annotation","notif-error-annotation-validation":"Une erreur a empêché de valider l\'annotation","notif-error-attached-file-creation":"Une erreur a empêché l\'upload du fichier joint","notif-error-attached-file-deletion":"Une erreur a empêché la suppression du fichier joint {filename}","notif-error-cancel-review":"Une erreur a empêché d\'annuler la validation de l\'image","notif-error-change-role":"Une erreur a empêché de changer le rôle de l\'utilisateur {username}","notif-error-change-status-algorithm-project":"Une erreur a empêché de changer le statut de l\'algorithme {softwareName}","notif-error-change-status-image-filter-project":"Une erreur a empêché de changer le statut du filtre {filterName}","notif-error-custom-ui-change":"Une erreur a empêché de mettre à jour les choix de personnalisation de l\'interface","notif-error-default-layer-add":"Une erreur a empêché d\'ajouter le calque aux calques par défaut","notif-error-default-layer-delete":"Une erreur a empêché de supprimer le calque par défaut","notif-error-default-layer-update":"Une erreur a empêché de mettre à jour le calque par défaut","notif-error-default-property-update":"Une erreur a empêché la modification de la propriété par défaut","notif-error-delete-uploaded-file":"Une erreur a empêché de supprimer le fichier","notif-error-delete-used-uploaded-file":"Cette image est utilisée dans des projets ({projects}) sous les noms suivants : {names}","notif-error-failed-to-connect-as-user":"Une erreur a empêché la connexion","notif-error-failed-to-switch-back-as-real-user":"Une erreur a empêché de vous reconnecter sous votre vrai compte","notif-error-fetch-annotation-comments":"Erreur lors de la récupération des commentaires","notif-error-fetch-annotations-viewer":"Erreur lors du chargement des annotations","notif-error-fetch-next-image":"Une erreur a empêché de charger l\'image suivante","notif-error-fetch-previous-image":"Une erreur a empêché de charger l\'image précédente","notif-error-first-image":"Il s\'agit de la première image du projet","notif-error-forgot-password":"Une erreur a empêché de vous envoyer un e-mail","notif-error-forgot-username":"Une erreur a empêché de vous envoyer un e-mail","notif-error-general-config-update":"Une erreur a empêché de mettre à jour la configuration","notif-error-image-calibration":"Une erreur a empêché de calibrer l\'image {imageName}","notif-error-image-deletion":"Une erreur a empêché la suppression de l\'image {imageName}","notif-error-image-rename":"Une erreur a empêché de renommer l\'image {imageName}","notif-error-invalid-key-prefix":"La clé ne peut commencer par {prefix} : ce préfixe est réservé par Cytomine pour une utilisation interne.","notif-error-keys-not-regenerated":"Une erreur a empêché de regénérer les clés API","notif-error-last-image":"Il s\'agit de la dernière image du projet","notif-error-loading-annotation-layers":"Erreur lors du chargement de la liste des calques d\'annotations","notif-error-logout":"Erreur lors de la déconnexion","notif-error-magnification-update":"Une erreur a empêché de mettre à jour le grossissement de l\'image {imageName}","notif-error-new-comment":"Une erreur a empêché la création du commentaire","notif-error-not-enough-representative":" Impossible retirer l\'utilisateur des personnes de contact. Il faut au moins une personnes de contact dans un projet","notif-error-ontology-creation":"Une erreur a empêché la création de l\'ontologie","notif-error-ontology-deletion":"Une erreur a empêché la suppression de l\'ontologie","notif-error-ontology-rename":"Une erreur a empêché de renommer l\'ontologie {name}","notif-error-ontology-tree-update":"Une erreur a empêché de modifir l\'arborescence de l\'ontologie","notif-error-password-not-saved":"Une erreur a empêché de sauvegarder le mot de passe","notif-error-project-already-exists":"Une erreur a empêché la création du projet: ce nom de projet est déjà utilisé","notif-error-project-creation":"Une erreur a empêché la création du projet","notif-error-project-deletion":"Une erreur a empêché la suppression du projet {projectName}","notif-error-project-ontology-change-job-terms":"Impossible de changer l\'ontologie de ce projet : des analyses ont associé des termes à des annotations.","notif-error-project-ontology-change-reviewed-terms":"Impossible de changer l\'ontologie de ce projet : des termes sont associés à des annotations validées.","notif-error-project-ontology-change":"Une erreur a empêché de modifier l\'ontologie du projet {projectName}","notif-error-project-rename":"Une erreur a empêché de renommer le projet {projectName}","notif-error-redo":"Une erreur a empêché de rétablir la dernière action","notif-error-register-username-exists":"Ce nom d\'utilisateur est déjà utilisé","notif-error-register":"Une erreur s\'est produite lors de l\'inscription","notif-error-remove-project-members":"Une erreur a empêché de retirer les membres sélectionnés du projet","notif-error-remove-prop":"Une erreur a empêché de supprimer la propriété","notif-error-remove-term":"Une erreur a empêché de retirer le terme","notif-error-remove-track":"Impossible de retirer la trace","notif-error-review-accept-all":"Une erreur a empêché de valider toutes les annotations","notif-error-review-reject-all":"Une erreur a empêché de rejeter toutes les annotations","notif-error-save-image-consultation":"Une erreur empêche de sauvegarder la consultation de l\'image","notif-error-save-prop":"Une erreur a empêché de créer la propriété","notif-error-save-user-position":"Une erreur empêche de sauvegarder votre position dans l\'image","notif-error-source-creation":"Une erreur a empêché la création de la source de confiance","notif-error-source-delete":"Une erreur a empêché de supprimer la source de confiance {username}/{dockerUsername}","notif-error-source-refresh":"Erreur durant la mise à jour de la source de confiance","notif-error-source-update":"Une erreur a empêché la modification de la source de confiance","notif-error-start-review":"Une erreur a empêché de commencer la validation de l\'image","notif-error-tag-creation":"Une erreur a empêché la création du tag","notif-error-tag-delete":"Une erreur a empêché de supprimer le tag {tagName}","notif-error-tag-update":"Une erreur a empêché de modifier le tag","notif-error-target-annotation":"Impossible d\'afficher l\'annotation demandée","notif-error-term-creation":"Une erreur a empêché la création du terme","notif-error-term-deletion":"Le terme n\'a pas pu être supprimé. Assurez-vous qu\'aucune annotation n\'est associée à ce terme.","notif-error-term-update":"Une erreur a empêche la modification du terme","notif-error-track-creation":"Erreur durant la création de la trace","notif-error-track-deletion":"Erreur lors de la suppression de la trace","notif-error-track-update":"Erreur durant la modification de la trace","notif-error-tracked-user-position":"Erreur lors de la récupération de la position de l\'utilisateur suivi","notif-error-undo":"Une erreur a empêché d\'annuler la dernière action","notif-error-unvalidate-review":"Une erreur a empêché d\'annuler la validation de l\'image","notif-error-update-description":"Une erreur a empêché de sauvegarder la description","notif-error-user-creation":"Une erreur a empêché la création de l\'utilisateur","notif-error-user-details-not-saved":"Une erreur a empêché la mise à jour du profil","notif-error-user-lock":"Une erreur a empêché de verrouiler l\'utilisateur","notif-error-user-unlock":"Une erreur a empêché de déverrouiler l\'utilisateur","notif-error-user-update":"Une erreur a empêché la modification de l\'utilisateur","notif-error-validate-review":"Une erreur a empêché la validation de l\'image","notif-error-welcome-message-update":"Une erreur a empêché de mettre à jour le message de bienvenue","notif-success-add-image":"L\'image {imageName} a été ajoutée au projet {projectName}","notif-success-add-project-members":"Les utilisateurs sélectionnés ont été ajoutés au projet","notif-success-add-tag-domain-association":"Les tags sélectionnés ont été associés","notif-success-algorithm-deletion":"L\'algorithme a été supprimé","notif-success-analysis-data-deletion":"Les données de l\'analyse ont bien été supprimées","notif-success-analysis-deletion":"L\'analyse a bien été supprimée","notif-success-analysis-kill":"L\'analyse a bien été arrêtée","notif-success-analysis-launch":"L\'analyse a bien été lancée","notif-success-annot-URL-copied":"L\'URL de l\'annotation a été copiée dans le presse-papier","notif-success-annotation-copy":"L\'annotation a été copiée","notif-success-annotation-repeat":"L\'annotation a été répétée","notif-success-attached-file-creation":"Le fichier joint a bien été uploadé","notif-success-attached-file-deletion":"Le fichier joint {filename} a bien été supprimé","notif-success-default-property-update":"La propriété par défaut a bien été mise à jour","notif-success-forgot-password":"Un e-mail permettant de réinitialiser votre mot de passe a été envoyé à votre adresse e-mail","notif-success-forgot-username":"Un e-mail contenant votre nom d\'utilisateur a été envoyé à votre adresse e-mail","notif-success-image-calibration":"La résolution de l\'image {imageName} a été mise à jour","notif-success-image-deletion":"L\'image {imageName} a été supprimée","notif-success-image-rename":"L\'image {imageName} a été renommée avec succès","notif-success-key-copied":"Clé copiée dans le presse-papier","notif-success-keys-regenerated":"Clés API mises à jour avec succès","notif-success-login":"Bienvenue sur Cytomine","notif-success-magnification-update":"Le grossissement de l\'image {imageName} a bien été mis à jour","notif-success-new-comment":"Votre commentaire a bien été envoyé par e-mail","notif-success-ontology-creation":"L\'ontologie a bien été créée","notif-success-ontology-deletion":"L\'ontologie {name} a bien été supprimée","notif-success-ontology-rename":"L\'ontologie {name} a bien été renommée","notif-success-password-saved":"Mot de passe mis à jour avec succès","notif-success-project-creation":"Le projet a bien été créé","notif-success-project-deletion":"Le projet {projectName} a été supprimé","notif-success-project-ontology-change":"L\'ontologie du projet {projectName} a bien été modifiée","notif-success-project-rename":"Le projet {projectName} a bien été renommé","notif-success-remove-project-members":"Les membres sélectionnés ont bien été retirés du projet","notif-success-source-creation":"La source de confiance a bien été créée","notif-success-source-delete":"La source de confiance {username}/{dockerUsername} a bien été supprimée","notif-success-source-refresh":"La mise à jour de la source de confiance a été demandée","notif-success-source-update":"La source de confiance a bien été modifiée","notif-success-tag-creation":"Le tag a bien été créé","notif-success-tag-delete":"Le tag {tagName} a bien été supprimé","notif-success-tag-update":"Le tag a bien été modifié","notif-success-term-creation":"Le terme a bien été créé","notif-success-term-update":"Le terme a bien été mis à jour","notif-success-track-creation":"La trace a bien été créée","notif-success-track-update":"La trace a bien été modifiée","notif-success-user-creation":"L\'utilisateur a bien été créé","notif-success-user-details-saved":"Profil mis à jour avec succès","notif-success-user-update":"L\'utilisateur a bien été modifié","notif-success-welcome-message-update":"Le message de bienvenue a bien été mis à jour","notif-unexpected-error":"Une erreur inattendue s\'est produite","notif-warn-ontology-tree-order-not-persisted":"L\'ordre des enfants dans l\'arborescence n\'est pas sauvegardée dans la base de données","number-analysis-annotations":"Nombre d\'annotations d\'analyse","number-annotation-creations":"Nombre d\'annotations créées","number-annotations-chart-info-message":"Ce graphique présente le nombre d\'annotations créées durant la période sélectionnée","number-annotations-info-message":"Le nombre d\'annotations que vous avez créées","number-annotations":"Nombre d\'annotations","number-connections":"# connexions","number-consultations":"Nombre de consultations","number-images-info-message":"Le nombre d\'images disponibles dans les projets dont vous êtes membre","number-jobs":"Exécutions","number-per-category":"Nombre par catégorie","number-per-page":"Nombre par page","number-projects-info-message":"Le nombre de projets dont vous êtes membre","number-reviewed-annotations-info-message":"Le nombre d\'annotations que vous avez validées","number-reviewed-annotations":"Nombre d\'annotations validées","number-success":"Exécutions réussies","number-user-annotations":"Nombre d\'annotations manuelles","number-viewed-images":"Nombre d\'images consultées","number":"Nombre","offline":"Utilisateurs hors ligne","ongoing":"En cours","online-contributors":"Contributeurs en ligne","online-managers":"Responsables en ligne","online-users":"Utilisateurs en ligne","online":"En ligne","only-last-release":"Seulement les dernières versions","only-UI-runnable":"Seulement les algorithmes exécutables","ontologies":"Ontologies","ontology":"Ontologie","opacity":"Opacité","open-admin-session":"Ouvrir une session admin","open-in-viewer":"Ouvrir dans le visualisateur","operating-system":"Système d\'exploitation","optional-parameters":"Paramètres optionnels","orange":"Orange","original-no-filter":"Pas de filtre","originalFilename":"Nom du fichier d\'origine","other-information":"Autres informations","outline-color":"Couleur du contour","overview":"Aperçu","page-not-found":"Page non trouvée","parameters":"Paramètres","password-confirm":"Nouveau mot de passe (confirmation)","password-current":"Mot de passe actuel","password-expired-info-message":"Votre mot de passe a expiré. Veuillez en choisir un nouveau","password-new":"Nouveau mot de passe","password":"Mot de passe","paste-repeat-info":"Répéter sur les {input} plans suivants.","paste-repeat":"Répéter","paste":"Coller","per-image":"Par image","per-term":"Par terme","per-track":"Par trace","per-user":"Par utilisateur","perimeter":"Périmètre","period":"Période","pixel-intensity":"Intensité","pixels":"pixels","point":"Point","polygon":"Polygone","possible-conflict":"Conflit potentiel","prefilled-parameters":"Paramètres pré-remplis","prefix":"Préfixe","preview-size":"Taille de l\'aperçu","preview":"Aperçu","previewed":"Prévisualisé","private-key":"Clé privée","profile":"Profil","progress":"Progrès","project-connections-info-message":"Une connexion au projet est enregistrée à chaque ouverture de projet dans Cytomine","project-connections":"Connexions au projet","project-contributor":"Contributeur du projet","project-manager":"Responsable du projet","project-representative":"Personne de contact du projet","project-side-bar":"Barre latérale du projet","project":"Projet","projects":"Projets","properties":"Propriétés","public-key":"Clé publique","pulling-command":"Commande de récupération","purple":"Violet","ql-align":"Alignement du texte","ql-background-color":"Couleur du fond","ql-blockquote":"Citation","ql-bold":"Gras","ql-bullet-list":"Liste à puces","ql-clean-format":"Supprimer la mise en forme","ql-code-block":"Code","ql-font-color":"Couleur du texte","ql-font":"Police","ql-header-1":"Titre 1","ql-header-2":"Titre 1","ql-header-3":"Titre 3","ql-header-4":"Titre 4","ql-image":"Ajouter une image","ql-indent-left":"Indentater vers la gauche","ql-indent-right":"Indenter vers la droit","ql-italic":"Italique","ql-link":"Ajouter un lien","ql-ordered-list":"Liste ordonnée","ql-paragraph":"Paragraphe","ql-special-character":"Caractères spéciaux","ql-subscript":"Indice","ql-superscript":"Exposant","ql-underline":"Souligné","ql-video":"Ajouter une vidéo","read-only-mode-explanation":"Les contributeurs ne pourront ni ajouter, ni éditer, ni supprimer d\'annotation (pas même sur leurs propres calques).","read-only":"Lecture seule","recently-opened":"Consultés récemment","rectangle":"Rectangle","red":"Rouge","redo":"Refaire","regenerate-api-keys":"Regénérer","register":"Inscription","registration-date":"Date d\'inscription","reject-annotation":"Rejeter l\'annotation","relative-link-mode":"Relatif","relaunch":"Relancer","remark-long-operation":"Remarque : cette opération pourrait prendre un certain temps","remember-me":"Se rappeler de moi","remove-members-confirmation-message":"- | Êtes-vous sûr de vouloir retirer {username} du projet ? | Êtes-vous sûr de vouloir supprimer les {count} membres sélectionnés du projet ?","remove-members":"Retirer les membres","remove-yourself-from-manager-confirmation-message":"Êtes-vous sûr de souhaiter vous retirer des responsables du projet ? Cette action est irréversible","remove-yourself-from-manager":"Retrait des droits de gestion","rename-image":"Renommer l\'image","rename-ontology":"Renommer l\'ontologie","rename-project":"Renommer le projet","rename":"Renommer","representative-icon-label":"Vous êtes une personne de contact du projet","representative":"Personne de contact","representatives":"Personnes de contact","rescale":"Redimensionner","resolution":"Résolution X/Y","restricted-mode-explanation":"Les contributeurs ne pourront ajouter, éditer et supprimer que les annotations de leurs propres calques.","restricted":"Restreint","results":"Résultats","review-explanation":"Vous pouvez valider les annotations en les sélectionnant une par une ou les traiter toutes à la fois avec les boutons ci-dessous","review-layer":"Calque de validation","review-list-visible-layers":"Les calques suivant sont affichés : {visibleLayers}.","review":"Validation","reviewed-annotation-status-not-validated":"Non validé","reviewed-annotation-status-validated":"Validé","reviewed-annotation-status":"Statut de la révision","reviewed-annotations-info-message":"Annotations validées durant le processus de validaion","reviewed-annotations":"Annotations validées","reviewed-by":"Validé par","reviewed-on":"Validé le","reviewed":"Validée","reviewers":"Validateurs","role":"Rôle","rotate":"Pivoter","run-number":"#","running":"En cours","sample-preview-of":"Aperçu de l\'image {filename}","sample-preview":"Aperçu de l\'image","saturation":"Saturation","screenshot":"Capture d\'écran de l\'image actuelle","search-or-create-tag":"Rechercher un tag (ou créer un nouveau en entrant son nom suivi de la touche Enter)...","search-placeholder":"Recherche","search-user":"Rechercher un utilisateur...","seconds":"seconde | secondes","see-environment-on":"Voir l\'environnement sur","see-source-code-on":"Voir le code source sur","select-all":"Tout sélectionner","select-date":"Choisir une date","select-image-to-add":"Sélectionner une image à ajouter","select-layer-placeholder":"Sélectionner un calque","select-layer":"Sélectionner un calque","select-ontology":"Choisir l\'ontologie","select-options":"Sélectionner les options","select":"Sélectionner","send-to-all-project-members":"Envoyer à tous les membres du projet","send-to-some-members":"Envoyer à certains membres seulement","set-magnification":"Changer le grossissement","shortcut-general-close-modal":"Fermer une fenêtre","shortcut-general-shortcuts-modal":"Afficher cette liste de raccourcis clavier","shortcut-general":"Général","shortcut-text-editor-bold":"Mettre le texte en gras","shortcut-text-editor-italic":"Mettre le texte en italique","shortcut-text-editor-underline":"Souligner le texte","shortcut-text-editor":"Editeur de texte","shortcut-viewer-nav-drag-rotate":"Faire tourner l\'image","shortcut-viewer-nav-drag-zoom":"Zoomer dans une région","shortcut-viewer-nav-first-c":"Aller au premier canal","shortcut-viewer-nav-first-slice":"Aller au premier plan","shortcut-viewer-nav-first-t":"Aller à la première frame","shortcut-viewer-nav-first-z":"Aller à la première tranche","shortcut-viewer-nav-last-c":"Aller au dernier canal","shortcut-viewer-nav-last-slice":"Aller au dernier plan","shortcut-viewer-nav-last-t":"Aller à la dernière frame","shortcut-viewer-nav-last-z":"Aller à la dernière tranche","shortcut-viewer-nav-move-down":"Déplacer vers le bas","shortcut-viewer-nav-move-left":"Déplacer vers la gauche","shortcut-viewer-nav-move-right":"Déplacer vers la droite","shortcut-viewer-nav-move-up":"Déplacer vers le haut","shortcut-viewer-nav-next-c":"Aller au canal suivant","shortcut-viewer-nav-next-image":"Aller à l\'image suivante","shortcut-viewer-nav-next-slice":"Aller au plan suivant","shortcut-viewer-nav-next-t":"Aller à la frame suivante","shortcut-viewer-nav-next-z":"Aller à la tranche suivante","shortcut-viewer-nav-previous-c":"Aller au canal précédent","shortcut-viewer-nav-previous-image":"Aller à l\'image précédente","shortcut-viewer-nav-previous-slice":"Aller au plan précédent","shortcut-viewer-nav-previous-t":"Aller à la frame précédente","shortcut-viewer-nav-previous-z":"Aller à la tranche précédente","shortcut-viewer-nav-zoom-in":"Zoomer","shortcut-viewer-nav-zoom-out":"Dézoomer","shortcut-viewer-nav":"Visualisateur : Naviguation","shortcut-viewer-toggle-add-image":"Afficher/Masquer le sélecteur d\'images","shortcut-viewer-toggle-all-annotations":"Afficher/Masquer le panneau des annotations dans toutes les vues","shortcut-viewer-toggle-all-broadcast":"Afficher/Masquer le panneau de diffusion et suivi dans toutes les vues","shortcut-viewer-toggle-all-current":"Afficher/Masquer les détails de l\'annotation sélectionnée dans toutes les vues","shortcut-viewer-toggle-all-filters":"Afficher/Masquer le panneau de colorisation de l\'image dans toutes les vues","shortcut-viewer-toggle-all-information":"Afficher/Masquer le panneau d\'information dans toutes les vues","shortcut-viewer-toggle-all-layers":"Afficher/Masquer le panneau des calques dans toutes les vues","shortcut-viewer-toggle-all-link":"Afficher/Masquer le panneau de synchronisation des images dans toutes les vues","shortcut-viewer-toggle-all-ontology":"Afficher/Masquer le panneau des termes dans toutes les vues","shortcut-viewer-toggle-all-overview":"Afficher/Masquer l\'aperçu dans toutes les vues","shortcut-viewer-toggle-all-properties":"Afficher/Masquer le panneau des propriétés dans toutes les vues","shortcut-viewer-toggle-all-review-layer":"Afficher/masquer le calque de validation en mode validation dans toutes les vues","shortcut-viewer-toggle-all-review":"Afficher/Masquer le panneau de validation dans toutes les vues","shortcut-viewer-toggle-all-selected-layers":"Afficher/masquer les calques d\'annotations sélectionnés dans toutes les vues","shortcut-viewer-toggle-all-zoom":"Afficher/Masquer le panneau de zoom dans toutes les vues","shortcut-viewer-toggle-annotations":"Afficher/Masquer le panneau des annotations","shortcut-viewer-toggle-broadcast":"Afficher/Masquer le panneau de diffusion et suivi","shortcut-viewer-toggle-current":"Afficher/Masquer les détails de l\'annotation sélectionnée","shortcut-viewer-toggle-filters":"Afficher/Masquer le panneau de colorisation de l\'image","shortcut-viewer-toggle-information":"Afficher/Masquer le panneau d\'information","shortcut-viewer-toggle-layers":"Afficher/Masquer le panneau des calques","shortcut-viewer-toggle-link":"Afficher/Masquer le panneau de synchronisation des images","shortcut-viewer-toggle-ontology":"Afficher/Masquer le panneau des termes","shortcut-viewer-toggle-overview":"Afficher/Masquer l\'aperçu","shortcut-viewer-toggle-properties":"Afficher/Masquer le panneau des propriétés","shortcut-viewer-toggle-review-layer":"Afficher/masquer le calque de validation en mode validation","shortcut-viewer-toggle-review":"Afficher/Masquer le panneau de validation","shortcut-viewer-toggle-selected-layers":"Afficher/masquer les calques d\'annotations sélectionnés","shortcut-viewer-toggle-zoom":"Afficher/Masquer le panneau de zoom","shortcut-viewer-toggle":"Visualisateur : Affichage","shortcut-viewer-tool-circle":"Dessiner un cercle","shortcut-viewer-tool-copy":"Copier l\'annotation","shortcut-viewer-tool-correct-add":"Corriger l\'annotation en lui ajoutant un polygone à main levée","shortcut-viewer-tool-correct-remove":"Corriger l\'annotation en lui soustrayant un polygone à main levée","shortcut-viewer-tool-delete":"Supprimer l\'annotation sélectionnée","shortcut-viewer-tool-fill":"Remplir l\'annotation","shortcut-viewer-tool-freehand-line":"Dessiner une ligne à main levée","shortcut-viewer-tool-freehand-polygon":"Dessiner un polygone à main levée","shortcut-viewer-tool-line":"Dessiner une ligne","shortcut-viewer-tool-modify-delete-vertex":"Supprimer un sommêt avec l\'outil de modification","shortcut-viewer-tool-modify":"Modifier l\'annotation","shortcut-viewer-tool-move":"Déplacer l\'annotation","shortcut-viewer-tool-paste":"Coller l\'annotation","shortcut-viewer-tool-point":"Dessiner un point","shortcut-viewer-tool-polygon":"Dessiner un polygone","shortcut-viewer-tool-rectangle":"Dessiner un rectangle","shortcut-viewer-tool-redo":"Refaire une action sur les annotations","shortcut-viewer-tool-rescale":"Redimensionner l\'annotation","shortcut-viewer-tool-review-accept":"Valider l\'annotation sélectionnée en mode validation","shortcut-viewer-tool-review-reject":"Rejeter l\'annotation sélectionnée en mode validation","shortcut-viewer-tool-review-toggle":"Afficher/masquer le calque de validation en mode validation","shortcut-viewer-tool-rotate":"Pivoter l\'annotation","shortcut-viewer-tool-select":"Sélectionner une annotation","shortcut-viewer-tool-undo":"Annuler une action sur les annotations","shortcut-viewer-tool":" Visualisateur : Outils","shortcut":"Raccourci clavier","shortcuts":"Raccourcis","size":"Taille","slice":"Plan","slide-preview-not-available":"Aperçu de la lame non disponible","slide-preview-of":"Aperçu de la lame {filename}","slide-preview":"Aperçu de la lame","small":"Petit","software-parameters":"Paramètres de l\'algorithme","source-code-info":"Cytomine est un logiciel open-source. Il est distribué sous les licences Apache2 et LGPL 2.1. Le code source est disponible sur notre {githubLink}.","source-code":"Code source","source-provider-name":"Nom d\'utilisateur du fournisseur de code source","source-provider":"Fournisseur du code source","source":"Source","sponsors":"Sponsors","start-upload":"Lancer l\'upload","statistics":"Statistiques","status-comment":"Commentaire","status":"Statut","step":"Saut","storage":"Stockage","string":"Chaîne de caractères","success":"Réussi","successful-registration":"Votre compte a été créé avec succès. Consultez votre boîte mail pour l\'activer.","super-admin":"Super admin","switch-back-to-user":"Retour à {username}","system":"Système","tags":"Tags","term":"Terme","terms-new-annotation":"Terme(s) à associer aux nouvelles annotations","terms":"Termes","the-term":"le terme","time-period":"Période de temps","to-convert":"À convertir","to-deploy":"À déployer","to":"Jusqu\'à","too-much-categories-to-display":"","total":"Total","tracks-new-annotation":"Trace(s) à associer à de nouvelles annotations","tracks":"Traces","trusted-source":"Source de confiance","trusted-sources":"Sources de confiance","type":"Type","ui-runnable":"Exécutable","um-per-pixel":"µm/pixel","um-per-slice":"µm/plan","um":"µm","uncategorized":"Non classé","uncompressed":"Décompressé","undo-redo":"Annuler/Refaire","undo":"Annuler","unexpected-error-info-message":"Une erreur inattendue s\'est produite","unknown":"Inconnu","unpacked":"Décompressé","unpacking":"Décompression en cours","update-source":"Modifier une source de confiance","update-tag":"Modifier un tag","update-term":"Modifier un terme","update-track":"Modifier une trace","update-user":"Modifier un utilisateur","updated":"Mis à jour","upload-error":"Erreur d\'upload","upload":"Upload","uploaded-images":"Images téléversées","uploaded":"Téléchargé","use-existing-ontology":"Utiliser une ontologie existante","used-in-project-no-access":"Utilisée dans des projets auxquels vous n\'avez pas accès","used-storage-space":"Espace de stockage utilisé","user-annotations":"Annotations manuelles","user":"Utilisateur","userjob-id":"ID de l\'utilisateur de l\'analyse","username":"Nom d\'utilisateur","users":"Utilisateurs","validate-annotation":"Valider l\'annotation","validations":{"messages":{"_default":"Champ incorrect","decimal":"Doit être un nombre","email":"Doit être une adresse e-mail valide","is":"Confirmation incorrecte","min":"Doit contenir au moins {1} caractères","positive":"Doit être positif","required":"Champ obligatoire"}},"value-key":"Valeur de la clé","value":"Valeur","vendor":"Marque du scanner","version":"Version","view-all-projects":"Voir tous les projets","view-linked-with":"Cette image est synchronisée avec :","view":"Visualisation d\'images","viewer-group":"Groupe d\'images ({nbImages} images)","viewer-panels":"Visualisateur d\'images","viewer-view":"Image {number}","vms-mrxs-upload-info":"Les fichiers VMS et MRXS doivent être compressées dans un ZIP (le ZIP doit contenir le fichier VMS/MRXS/VSI ainsi que les fichiers associés).","wait":"En attente","warning-cannot-draw-multiple-slices":"Impossible de dessiner sur plusieurs canaux simultanément","warning-change-applies-in-project-only":"Si vous changez cette valeur, la modification ne sera appliquée que dans ce projet (elle ne sera pas propagée à d\'autres projets contenant cette image)","website":"Site web","week":"Semaine","welcome-message":"Message de bienvenue","white":"Blanc","width":"Largeur","workspace":"Espace de travail","x-resolution":"Résolution X","y-resolution":"Résolution Y","x-y-resolution":"Résolution X/Y","yellow":"Jaune","yes":"Oui","you-are-reviewing-image-since":"Cette image est en cours de validation depuis le {date}","you-have-validated-image-on":"Vous avez validé cette image le {date}","z-resolution":"Résolution Z","zip-upload-info":"Il est possible d\'uploader un ZIP contenant plusieurs images (à l\'exception des images VMS et MRXS)."}')},"1c7ef":function(e,t,n){},"1fae":function(e,t,n){},2026:function(e,t,n){},"208b":function(e,t,n){"use strict";n("86af")},"21dc":function(e,t,n){e.exports=n.p+"img/logo-cytomine-coop.4a5cd544.png"},"26c8":function(e,t,n){},"272b":function(e,t,n){},"27a4":function(e,t,n){"use strict";n("0c3c")},"27a6":function(e,t,n){"use strict";n("5fb5")},"27e8":function(e,t,n){},"28cf":function(e,t,n){},"29fe":function(e,t,n){"use strict";n("077c")},"2a88":function(e,t,n){},"2bbd":function(e,t,n){"use strict";n("b45c")},"2c2b":function(e,t,n){"use strict";n("867d")},"2ca4":function(e,t,n){"use strict";n("9801")},"2e1a":function(e,t,n){},"2e2a":function(e,t,n){"use strict";n("3caf")},"2e5d":function(e,t,n){},"2eef":function(e,t,n){"use strict";n("ec95")},"2f66":function(e,t,n){"use strict";n("a4d3"),n("e01a");var a=function(){var e=this,t=e._self._c;return t("div",{class:["description-wrapper",e.loading?"loading":""]},[t("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[e.description?[t("div",{staticClass:"ql-snow"},[t("div",{staticClass:"ql-editor",domProps:{innerHTML:e._s(e.previewDescription)}})]),t("div",{staticClass:"buttons are-small"},[e.croppedDescription?t("button",{staticClass:"button",on:{click:function(t){return e.openModal(!1)}}},[e._v(" "+e._s(e.$t("button-full-text"))+" ")]):e._e(),e.canEdit?t("button",{staticClass:"button",on:{click:function(t){return e.openModal(!0)}}},[e._v(" "+e._s(e.$t("button-edit"))+" ")]):e._e()])]:[t("em",[e._v(e._s(e.$t("no-description")))]),e.canEdit?t("button",{staticClass:"button is-small margin",on:{click:function(t){return e.openModal(!0)}}},[e._v(" "+e._s(e.$t("button-add"))+" ")]):e._e()]]],2)},r=[],i=n("c7eb"),o=n("1da1"),s=(n("a9e3"),n("1246")),c=function(){var e=this,t=e._self._c;return t("cytomine-modal-card",{staticClass:"description-modal",class:{expanded:e.expanded},attrs:{title:e.$t("description")},on:{close:function(t){return e.$parent.close()}},scopedSlots:e._u([{key:"controls",fn:function(){return[t("button",{staticClass:"button is-small",on:{click:function(t){e.expanded=!e.expanded}}},[t("i",{class:["fas",e.expanded?"fa-compress":"fa-expand"]})])]},proxy:!0},e.edit?{key:"footer",fn:function(){return[t("button",{staticClass:"button",on:{click:function(t){return e.$parent.close()}}},[e._v(e._s(e.$t("button-cancel")))]),e.edit?t("button",{staticClass:"button is-link",on:{click:function(t){return e.save()}}},[e._v(" "+e._s(e.$t("button-save"))+" ")]):e._e()]},proxy:!0}:null],null,!0)},[e.edit?[t("div",{staticClass:"keyword-info"},[t("i",{staticClass:"fas fa-info-circle"}),t("i18n",{attrs:{path:"info-keyword-stop-preview-description"}},[t("span",{staticClass:"keyword",attrs:{place:"keyword"}},[e._v(" "+e._s(e.stopPreviewKeyword)+" ")])])],1),t("cytomine-quill-editor",{attrs:{placeholder:e.$t("enter-description")},model:{value:e.descriptionContent,callback:function(t){e.descriptionContent=t},expression:"descriptionContent"}})]:t("div",{staticClass:"ql-snow"},[t("div",{staticClass:"ql-editor preview",domProps:{innerHTML:e._s(e.descriptionWithoutKeywords)}})])],2)},l=[],u=(n("4d63"),n("c607"),n("ac1f"),n("2c3e"),n("25f0"),n("5319"),n("f320")),d=n("b286"),p=n("c9d9"),m={name:"cytomine-description-modal",props:{description:Object,edit:Boolean},components:{CytomineModalCard:d["a"],CytomineQuillEditor:u["a"]},data:function(){return{descriptionContent:"",expanded:!1}},computed:{descriptionWithoutKeywords:function(){return this.description.data.replace(new RegExp(p["a"].STOP_PREVIEW_KEYWORD,"g"),"")},stopPreviewKeyword:function(){return p["a"].STOP_PREVIEW_KEYWORD}},methods:{save:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.description.clone(),t.prev=1,!e.descriptionContent){t.next=9;break}return n.data=e.descriptionContent,t.next=6,n.save();case 6:e.$emit("change",n),t.next=13;break;case 9:if(!e.description.data){t.next=13;break}return t.next=12,n.delete();case 12:e.$emit("change",null);case 13:e.$parent.close(),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](1),e.descriptionContent=e.description.data,e.$notify({type:"error",text:e.$t("notif-error-update-description")});case 20:case"end":return t.stop()}}),t,null,[[1,16]])})))()}},created:function(){this.descriptionContent=this.description.data}},f=m,h=(n("3bc9"),n("2877")),g=Object(h["a"])(f,c,l,!1,null,null,null),v=g.exports,b={name:"cytomine-description",props:{object:{type:Object},canEdit:{type:Boolean,default:!0},maxPreviewLength:{type:Number,default:0}},data:function(){return{loading:!0,description:null,modalOpened:!1}},computed:{previewDescription:function(){var e=this.description.data.indexOf(p["a"].STOP_PREVIEW_KEYWORD);return-1!==e?this.description.data.substring(0,e):this.maxPreviewLength&&this.description.data.length>this.maxPreviewLength?this.description.data.substring(0,this.maxPreviewLength)+"...":this.description.data},croppedDescription:function(){return this.description.data.length!==this.previewDescription.length}},methods:{openModal:function(e){var t=this;this.$buefy.modal.open({parent:this,component:v,props:{description:this.description||new s["Description"]({data:"",object:this.object}),edit:e},hasModalCard:!0,events:{change:function(e){return t.description=e}}})}},created:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["Description"].fetch(e.object);case 3:e.description=t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:e.loading=!1;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},y=b,w=(n("5785"),Object(h["a"])(y,a,r,!1,null,"2038f6b8",null));t["a"]=w.exports},3039:function(e,t,n){},"303d":function(e,t,n){},"305f":function(e,t,n){"use strict";n.r(t);n("99af"),n("a9e3"),n("b680");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"annotation-details"},[t("table",{staticClass:"table"},[t("tbody",[e.showImageInfo?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("image")))])]),t("td",[t("router-link",{attrs:{to:"/project/".concat(e.annotation.project,"/image/").concat(e.annotation.image)}},[t("image-name",{attrs:{image:e.image}})],1)],1)]):e._e(),e.showChannelInfo?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("channel")))])]),t("td",[t("channel-name",{attrs:{channel:e.sliceChannel}})],1)]):e._e(),e.isPropDisplayed("geometry-info")?[e.annotation.area>0?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("area")))])]),t("td",[e._v(e._s("".concat(e.annotation.area.toFixed(3)," ").concat(e.annotation.areaUnit)))])]):e._e(),e.annotation.perimeter>0?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t(e.annotation.area>0?"perimeter":"length")))])]),t("td",[e._v(e._s("".concat(e.annotation.perimeter.toFixed(3)," ").concat(e.annotation.perimeterUnit)))])]):e._e()]:e._e(),e.isPropDisplayed("description")?t("tr",[t("td",{attrs:{colspan:"2"}},[t("h5",[e._v(e._s(e.$t("description")))]),t("cytomine-description",{attrs:{object:e.annotation,canEdit:e.canEdit,maxPreviewLength:300}})],1)]):e._e(),e.isPropDisplayed("terms")&&e.ontology?t("tr",[t("td",{attrs:{colspan:"2"}},[t("h5",[e._v(e._s(e.$t("terms")))]),e._l(e.associatedTerms,(function(n){var a=n.term,r=n.user;return t("b-tag",{key:a.id,attrs:{title:e.$t("associated-by",{username:r.fullName})}},[t("cytomine-term",{attrs:{term:a}}),e.canEditTerms?t("button",{staticClass:"delete is-small",attrs:{title:e.$t("button-delete")},on:{click:function(t){return e.removeTerm(a.id,r.id)}}}):e._e()],1)})),e.canEditTerms?t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.showTermSelector=!1},expression:"() => showTermSelector = false"}],staticClass:"add-term-wrapper"},[t("b-field",[t("b-input",{attrs:{size:"is-small",expanded:"",placeholder:e.$t("add-term")},on:{focus:function(t){e.showTermSelector=!0}},model:{value:e.addTermString,callback:function(t){e.addTermString=t},expression:"addTermString"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showTermSelector,expression:"showTermSelector"}],staticClass:"ontology-tree-container"},[t("ontology-tree",{staticClass:"ontology-tree",attrs:{ontology:e.ontology,searchString:e.addTermString,selectedNodes:e.associatedTermsIds,allowNew:!0},on:{newTerm:e.newTerm,select:e.addTerm,unselect:e.removeTerm}})],1)],1):e.associatedTerms.length?e._e():t("em",[e._v(e._s(e.$t("no-term")))])],2)]):e._e(),e.isPropDisplayed("tracks")&&e.maxRank>1?t("tr",[t("td",{attrs:{colspan:"2"}},[t("h5",[e._v(e._s(e.$t("tracks")))]),e._l(e.associatedTracks,(function(n){var a=n.track;return t("b-tag",{key:a.id},[t("cytomine-track",{attrs:{track:a}}),e.canEditTerms?t("button",{staticClass:"delete is-small",attrs:{title:e.$t("button-delete")},on:{click:function(t){return e.removeTrack(a.id)}}}):e._e()],1)})),e.canEditTerms?t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.showTrackSelector=!1},expression:"() => showTrackSelector = false"}],staticClass:"add-track-wrapper"},[t("b-field",[t("b-input",{attrs:{size:"is-small",expanded:"",placeholder:e.$t("add-track")},on:{focus:function(t){e.showTrackSelector=!0}},model:{value:e.addTrackString,callback:function(t){e.addTrackString=t},expression:"addTrackString"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showTrackSelector,expression:"showTrackSelector"}],staticClass:"track-tree-container"},[t("track-tree",{staticClass:"track-tree",attrs:{tracks:e.availableTracks,searchString:e.addTrackString,selectedNodes:e.associatedTracksIds,allowNew:!0,image:e.image},on:{newTrack:e.newTrack,select:e.addTrack,unselect:e.removeTrack}})],1)],1):e.associatedTracks.length?e._e():t("em",[e._v(e._s(e.$t("no-track")))])],2)]):e._e(),e.isPropDisplayed("tags")?t("tr",[t("td",{attrs:{colspan:"2"}},[t("h5",[e._v(e._s(e.$t("tags")))]),t("cytomine-tags",{attrs:{object:e.annotation,canEdit:e.canEdit}})],1)]):e._e(),e.isPropDisplayed("properties")?t("tr",[t("td",{attrs:{colspan:"2"}},[t("h5",[e._v(e._s(e.$t("properties")))]),t("cytomine-properties",{attrs:{object:e.annotation,canEdit:e.canEdit,properties:e.internalUseFilteredProperties},on:{deleted:e.removeProp,added:e.addProp,updateProperties:function(t){return e.$emit("updateProperties")}}})],1)]):e._e(),e.isPropDisplayed("attached-files")?t("tr",[t("td",{attrs:{colspan:"2"}},[t("h5",[e._v(e._s(e.$t("attached-files")))]),t("attached-files",{attrs:{object:e.annotation,canEdit:e.canEdit}})],1)]):e._e(),e.isPropDisplayed("creation-info")?[t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("created-by")))])]),t("td",[e._v(" "+e._s(e.creator.fullName)+" ")])]),e.isReviewedAnnotation?[t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("reviewed-by")))])]),t("td",[e._v(" "+e._s(e.reviewer.fullName)+" ")])]),t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("reviewed-on")))])]),t("td",[e._v(" "+e._s(e._f("moment")(Number(e.annotation.created),"ll"))+" ")])]),e.isImageInReviewMode?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("reviewed-annotation-status")))])]),t("td",[t("span",{staticClass:"tag is-success"},[e._v(" "+e._s(e.$t("reviewed-annotation-status-validated"))+" ")])])]):e._e()]:[t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("created-on")))])]),t("td",[e._v(" "+e._s(e._f("moment")(Number(e.annotation.created),"ll"))+" ")])]),e.isImageInReviewMode?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("reviewed-annotation-status")))])]),t("td",[t("span",{staticClass:"tag is-danger"},[e._v(" "+e._s(e.$t("reviewed-annotation-status-not-validated"))+" ")])])]):e._e()]]:e._e(),e.currentUser.isDeveloper?[t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("id")))])]),t("td",[e._v(e._s(e.annotation.id))])])]:e._e()],2)]),t("div",{staticClass:"actions"},[e.showImageInfo?t("router-link",{staticClass:"button is-link is-small is-fullwidth",attrs:{to:e.annotationURL}},[e._v(" "+e._s(e.$t("button-view-in-image"))+" ")]):t("a",{staticClass:"button is-link is-small is-fullwidth",on:{click:function(t){return e.$emit("centerView")}}},[e._v(" "+e._s(e.$t("button-center-view-on-annot"))+" ")]),t("div",{staticClass:"level"},[t("a",{staticClass:"level-item button is-small",on:{click:function(t){return e.openCrop(e.annotation)}}},[e._v(" "+e._s(e.$t("button-view-crop"))+" ")]),t("button",{staticClass:"level-item button is-small",on:{click:function(t){return e.copyURL()}}},[e._v(" "+e._s(e.$t("button-copy-url"))+" ")]),e.isPropDisplayed("comments")&&e.comments?t("button",{staticClass:"level-item button is-small",on:{click:function(t){return e.openCommentsModal()}}},[e._v(" "+e._s(e.$t("button-comments"))+" ("+e._s(e.comments.length)+") ")]):e._e(),e.canEdit?t("button",{staticClass:"level-item button is-small is-danger",on:{click:function(t){return e.confirmDeletion()}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")]):e._e()])],1)])},r=[],i=n("c7eb"),o=n("1da1"),s=(n("4de4"),n("7db0"),n("caad"),n("d81d"),n("14d9"),n("fb6a"),n("e9f5"),n("910d"),n("f665"),n("ab43"),n("d3b7"),n("2532"),n("2ca0"),n("8b18")),c=n("1246"),l=n("f904"),u=n.n(l),d=n("9f17"),p=n("2f66"),m=n("f679"),f=n("72d0"),h=n("47f0"),g=n("9966"),v=n("11da"),b=n("d3f2"),y=n("435d"),w=function(){var e=this,t=e._self._c;return t("cytomine-modal-card",{attrs:{title:e.$t("annotation-comments")},on:{close:function(t){return e.$parent.close()}}},[e.comments&&e.comments.length?[t("div",{staticClass:"comments-wrapper"},e._l(e.comments,(function(n){return t("div",{key:n.id},[t("p",{staticClass:"comment-sender is-size-7"},[t("strong",[e._v(e._s(n.senderName))]),t("span",{staticClass:"has-text-grey"},[e._v(e._s(e._f("moment")(Number(n.created),"ll LT")))])]),t("p",{staticClass:"comment-content"},[e._v(e._s(n.comment))]),t("hr")])})),0)]:t("div",[t("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("no-annotation-comments"))+" ")]),t("hr")]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.addingComment,expression:"!addingComment"}],staticClass:"has-text-centered"},[e.currentUser.guestByNow?e._e():t("button",{staticClass:"button is-link",on:{click:function(t){e.addingComment=!0}}},[e._v(e._s(e.$t("button-add-comment")))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.addingComment,expression:"addingComment"}]},[t("h2",[e._v(e._s(e.$t("add-new-comment")))]),t("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("comment-will-be-sent-by-email"))+" ")]),t("b-field",[t("b-radio",{attrs:{"native-value":!0,disabled:0==e.members.length},model:{value:e.sendToAllMembers,callback:function(t){e.sendToAllMembers=t},expression:"sendToAllMembers"}},[e._v(" "+e._s(e.$t("send-to-all-project-members"))+" ")])],1),t("b-field",[t("b-radio",{attrs:{"native-value":!1},model:{value:e.sendToAllMembers,callback:function(t){e.sendToAllMembers=t},expression:"sendToAllMembers"}},[e._v(" "+e._s(e.$t("send-to-some-members"))+" ")])],1),e.sendToAllMembers?e._e():t("b-field",{attrs:{type:{"is-danger":e.errors.has("members")},message:e.errors.first("members")}},[t("domain-tag-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{domains:e.members,placeholder:"search-user",name:"members",searchedProperty:"fullName",displayedProperty:"fullName"},model:{value:e.selectedMembers,callback:function(t){e.selectedMembers=t},expression:"selectedMembers"}})],1),t("b-field",{attrs:{type:{"is-danger":e.errors.has("comment")},message:e.errors.first("comment")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"textarea",placeholder:e.$t("enter-comment"),rows:"2",name:"comment"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),t("p",{staticClass:"buttons is-right are-small"},[t("button",{staticClass:"button",attrs:{disabled:e.loading},on:{click:function(t){e.addingComment=!1}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",class:{"is-loading":e.loading},attrs:{disabled:e.loading||0==e.members.length||e.errors.any()},on:{click:function(t){return e.share()}}},[e._v(" "+e._s(e.$t("button-share"))+" ")])])],1)],2)},j=[],k=n("e8eb"),_=n("b286"),x=n("eeaa"),C={name:"annotation-comments-modal",components:{DomainTagInput:k["a"],CytomineModalCard:_["a"]},$_veeValidate:{validator:"new"},props:{annotation:Object,comments:Array},data:function(){return{addingComment:!1,sendToAllMembers:!0,selectedMembers:[],text:"",loading:!1}},computed:{currentUser:Object(s["a"])("currentUser/user"),allMembers:Object(s["a"])("currentProject/members"),members:function(){var e=this;return this.allMembers.filter((function(t){return t.id!==e.currentUser.id}))},annotationURL:function(){var e="project/".concat(this.annotation.project,"/image/").concat(this.annotation.image,"/annotation/").concat(this.annotation.id);return"".concat(window.location.origin,"/#/").concat(e)}},watch:{addingComment:function(){var e=this;this.text="",this.selectedMembers=[],this.$nextTick((function(){e.sendToAllMembers=!0,e.$validator.reset()}))}},methods:{share:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n,a,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return e.loading=!0,t.prev=6,a=Object(x["a"])(e.currentUser),t.next=10,new c["AnnotationComment"]({annotation:e.annotation,subject:"Cytomine: ".concat(a," commented an annotation"),from:a,receivers:(e.sendToAllMembers?e.members:e.selectedMembers).map((function(e){return e.id})),comment:e.text,annotationURL:e.annotationURL,shareAnnotationURL:e.annotationURL+"?action=comments"}).save();case 10:r=t.sent,e.$emit("addComment",r),e.$notify({type:"success",text:e.$t("notif-success-new-comment")}),e.addingComment=!1,t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](6),e.$notify({type:"error",text:e.$t("notif-error-new-comment")});case 19:e.loading=!1;case 20:case"end":return t.stop()}}),t,null,[[6,16]])})))()}}},O=C,$=(n("e415"),n("2877")),T=Object($["a"])(O,w,j,!1,null,"5fbb43ad",null),S=T.exports,P=n("91c9"),A=n("ed42"),I=n("c9d9"),D={name:"annotations-details",components:{ChannelName:A["a"],ImageName:d["a"],CytomineDescription:p["a"],CytomineTerm:h["a"],OntologyTree:v["a"],CytomineTags:f["a"],CytomineProperties:m["a"],AttachedFiles:g["a"],AnnotationCommentsModal:S,TrackTree:b["a"],CytomineTrack:y["a"]},props:{annotation:{type:Object},terms:{type:Array},tracks:{type:Array},users:{type:Array},images:{type:Array},slices:{type:Array,default:function(){return[]}},showImageInfo:{type:Boolean,default:!0},showChannelInfo:{type:Boolean,default:!1},showComments:{type:Boolean,default:!1}},data:function(){return{addTermString:"",addTrackString:"",showTermSelector:!1,showTrackSelector:!1,comments:null,revTerms:0,revTracks:0,properties:[],loadPropertiesError:!1}},computed:{configUI:Object(s["a"])("currentProject/configUI"),ontology:Object(s["a"])("currentProject/ontology"),currentUser:Object(s["a"])("currentUser/user"),shortTermToken:Object(s["a"])("currentUser/shortTermToken"),creator:function(){var e=this;return this.users.find((function(t){return t.id===e.annotation.user}))||{}},isReviewedAnnotation:function(){return this.annotation.type===c["AnnotationType"].REVIEWED},reviewer:function(){var e=this;return this.isReviewedAnnotation?this.users.find((function(t){return t.id===e.annotation.reviewUser}))||{}:null},canEdit:function(){return this.$store.getters["currentProject/canEditAnnot"](this.annotation)},canEditTerms:function(){return this.canEdit&&this.annotation.type===c["AnnotationType"].USER},image:function(){var e=this;return this.images.find((function(t){return t.id===e.annotation.image}))||{id:this.annotation.image,instanceFilename:this.annotation.instanceFilename}},isImageInReviewMode:function(){return this.image.inReview},sliceChannel:function(){var e=this;return this.slices.find((function(t){return t.id===e.annotation.slice}))||{}},maxRank:function(){return this.image.depth*this.image.duration*this.image.channels},annotationURL:function(){return"/project/".concat(this.annotation.project,"/image/").concat(this.annotation.image,"/annotation/").concat(this.annotation.id)},associatedTerms:function(){var e=this;return this.annotation.userByTerm?this.annotation.userByTerm.map((function(t){var n=e.terms.find((function(e){return t.term===e.id})),a=e.users.find((function(e){return e.id===t.user[0]}))||{};return{term:n,user:a}})):[]},associatedTermsIds:function(){return this.revTerms,this.associatedTerms.map((function(e){var t=e.term;return t.id}))},associatedTracks:function(){var e=this;return this.annotation.annotationTrack?this.annotation.annotationTrack.map((function(t){var n=e.tracks.find((function(e){return t.track===e.id}));return{track:n}})):[]},associatedTracksIds:function(){return this.revTracks,this.associatedTracks.map((function(e){var t=e.track;return t.id}))},availableTracks:function(){var e=this;return this.tracks.filter((function(t){return t.image===e.annotation.image}))},isPoint:function(){return this.annotation.location&&this.annotation.location.includes("POINT")},internalUseFilteredProperties:function(){return this.properties.filter((function(e){return!e.key.startsWith(I["a"].PREFIX_HIDDEN_PROPERTY_KEY)}))}},methods:{appendShortTermToken:P["a"],isPropDisplayed:function(e){return this.configUI["project-explore-annotation-".concat(e)]},openCrop:function(e){window.location.assign(Object(P["a"])(e.url+"?draw=true&complete=true&increaseArea=1.25",this.shortTermToken),"_blank")},copyURL:function(){u()(window.location.origin+"/#"+this.annotationURL),this.$notify({type:"success",text:this.$t("notif-success-annot-URL-copied")})},newTerm:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$emit("addTerm",e),t.$store.dispatch("currentProject/fetchOntology"),t.addTerm(e.id);case 3:case"end":return n.stop()}}),n)})))()},addTerm:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=15;break}return n.prev=1,n.next=4,new c["AnnotationTerm"]({annotation:t.annotation.id,term:e}).save();case 4:t.$emit("updateTerms"),t.showTermSelector=!1,n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](1),t.$notify({type:"error",text:t.$t("notif-error-add-term")}),t.revTerms++;case 12:return n.prev=12,t.addTermString="",n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,8,12,15]])})))()},removeTerm:function(e,t){var n=this;return Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=t||n.findUserByTerm(e),t){a.next=3;break}return a.abrupt("return");case 3:return a.prev=3,a.next=6,c["AnnotationTerm"].delete(n.annotation.id,e,Number(t));case 6:n.$emit("updateTerms"),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](3),n.$notify({type:"error",text:n.$t("notif-error-remove-term")}),n.revTerms++;case 13:case"end":return a.stop()}}),a,null,[[3,9]])})))()},findUserByTerm:function(e){if(this.annotation.userByTerm){var t=this.annotation.userByTerm.find((function(t){return t.term===e}));if(t)return t.user[0]}},newTrack:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$emit("addTrack",e),t.addTrack(e.id);case 2:case"end":return n.stop()}}),n)})))()},addTrack:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=15;break}return n.prev=1,n.next=4,new c["AnnotationTrack"]({annotation:t.annotation.id,track:e}).save();case 4:t.$emit("updateTracks"),t.showTrackSelector=!1,n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](1),t.$notify({type:"error",text:t.$t("notif-error-add-track")}),t.revTracks++;case 12:return n.prev=12,t.addTrackString="",n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,8,12,15]])})))()},removeTrack:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=14;break}return n.prev=1,n.next=4,c["AnnotationTrack"].delete(t.annotation.id,e);case 4:t.$emit("updateTracks"),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),t.$notify({type:"error",text:t.$t("notif-error-remove-track")}),t.revTracks++;case 11:return n.prev=11,t.addTrackString="",n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,7,11,14]])})))()},openCommentsModal:function(){this.$buefy.modal.open({parent:this,component:S,props:{annotation:this.annotation,comments:this.comments},hasModalCard:!0,events:{addComment:this.addComment}})},addComment:function(e){this.comments.unshift(e)},confirmDeletion:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-annotation"),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.deleteAnnot()}})},deleteAnnot:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.annotation.delete();case 3:e.$emit("deletion"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-annotation-deletion")});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},removeProp:function(e){this.properties=this.properties.filter((function(t){return t.id!==e.id}))},addProp:function(e){this.properties.push(e)}},created:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isPropDisplayed("comments")||![c["AnnotationType"].ALGO,c["AnnotationType"].USER].includes(e.annotation.type)){t.next=11;break}return t.prev=1,t.next=4,c["AnnotationCommentCollection"].fetchAll({annotation:e.annotation});case 4:e.comments=t.sent.array,e.showComments&&e.openCommentsModal(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$notify({type:"error",text:e.$t("notif-error-fetch-annotation-comments")});case 11:return t.prev=11,t.next=14,c["PropertyCollection"].fetchAll({object:e.annotation});case 14:e.properties=t.sent.array,t.next=20;break;case 17:t.prev=17,t.t1=t["catch"](11),e.loadPropertiesError=!0;case 20:case"end":return t.stop()}}),t,null,[[1,8],[11,17]])})))()}},E=D,N=(n("df26"),Object($["a"])(E,a,r,!1,null,"67b2b09b",null));t["default"]=N.exports},3236:function(e,t,n){},3300:function(e,t,n){"use strict";n("3236")},"33bc":function(e,t,n){},3482:function(e,t,n){"use strict";n("5f37")},"353f":function(e,t,n){},"35ec":function(e,t,n){e.exports=n.p+"img/philips.11891926.svg"},3666:function(e,t,n){"use strict";n("e9cd")},"36b7":function(e,t,n){"use strict";n("841e")},3884:function(e,t,n){},"398f":function(e,t,n){e.exports=n.p+"img/hamamatsu.d2b568a4.jpg"},"3af8":function(e,t,n){},"3bc9":function(e,t,n){"use strict";n("3039")},"3c20":function(e,t,n){},"3c51":function(e,t,n){"use strict";n("9b5b")},"3caf":function(e,t,n){},"3d5b":function(e,t,n){"use strict";n("0bc6")},"40b7":function(e,t,n){"use strict";n("0170")},"414d":function(e,t,n){"use strict";n("27e8")},"41fb":function(e,t,n){},"435d":function(e,t,n){"use strict";n("b0c0");var a=function(){var e=this,t=e._self._c;return e.track?t("span",[e.track.color?t("i",{staticClass:"far fa-square color-preview",style:{color:e.track.color}}):e._e(),e._v(" "+e._s(e.track.name)+" "),e.currentUser.isDeveloper&&e.track.id>0?t("span",[e._v(" ("+e._s(e.$t("id"))+": "+e._s(e.track.id)+")")]):e._e()]):e._e()},r=[],i=n("8b18"),o={name:"cytomine-track",props:{track:Object},computed:{currentUser:Object(i["a"])("currentUser/user")}},s=o,c=(n("58e7"),n("2877")),l=Object(c["a"])(s,a,r,!1,null,"62ec5aa4",null);t["a"]=l.exports},4473:function(e,t,n){"use strict";n("6715")},"44c2":function(e,t,n){},4553:function(e,t,n){},"45d3":function(e,t,n){},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d833","./ar-tn.js":"6d833","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a391","./ne.js":"3a391","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id="4678"},"471b":function(e,t,n){},"47ce":function(e,t,n){"use strict";n("2e1a")},"47ed":function(e,t,n){"use strict";n("07ee")},"47f0":function(e,t,n){"use strict";n("b0c0");var a=function(){var e=this,t=e._self._c;return e.term?t("span",[e.term.color?t("div",{staticClass:"color-preview",style:{background:e.term.color}}):e._e(),e._v(" "+e._s(e.term.name)+" "),e.currentUser.isDeveloper&&e.term.id>0?t("span",[e._v(" ("+e._s(e.$t("id"))+": "+e._s(e.term.id)+")")]):e._e()]):e._e()},r=[],i=n("8b18"),o={name:"cytomine-term",props:{term:Object},computed:{currentUser:Object(i["a"])("currentUser/user")}},s=o,c=(n("208b"),n("2877")),l=Object(c["a"])(s,a,r,!1,null,"23b57a24",null);t["a"]=l.exports},"48c1":function(e,t,n){},"48f4":function(e,t,n){"use strict";n("fbbf")},"4b03":function(e,t,n){"use strict";n("6509")},"4b22":function(e,t,n){},"4b74":function(e,t,n){},"4bdd":function(e,t,n){"use strict";n("4b74")},"500c":function(e,t,n){},"503a":function(e,t,n){"use strict";n("1c7ef")},"513a":function(e,t,n){"use strict";n("ee3e")},5156:function(e,t,n){},5386:function(e,t,n){},"53bb":function(e,t,n){},"54ab":function(e,t,n){"use strict";n("26c8")},"554a":function(e,t,n){"use strict";n("1fae")},"55ab":function(e,t,n){"use strict";n("bf11")},"567a":function(e,t,n){"use strict";n("6fca")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("a9e3");var a=n("2b0e"),r=n("8c4f"),i=(n("b0c0"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading},on:{"update:active":function(t){e.loading=t}}}),e.loading?e._e():[e.welcomeMessage?t("div",{staticClass:"box",domProps:{innerHTML:e._s(e.welcomeMessage)}}):e._e(),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-two-thirds"},[t("div",{staticClass:"box"},[t("h2",[e._v(" "+e._s(e.$t("recently-opened"))+" ")]),e.recentProjects?t("b-table",{attrs:{data:e.recentProjects},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{label:e.$t("project"),width:"100",centered:""}},[t("router-link",{staticClass:"project-name",attrs:{to:"/project/".concat(a.id)}},[e._v(" "+e._s(a.name)+" ")])],1),t("b-table-column",{attrs:{label:e.$t("images"),width:"400"}},[t("list-images-preview",{attrs:{project:a}})],1)]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-recent-project")))])])]},proxy:!0}],null,!1,4264962988)}):t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("failed-fetch-recent-projects"))+" ")]),t("p",{staticClass:"has-text-centered all-projects"},[t("router-link",{staticClass:"button is-link",attrs:{to:"/projects"}},[e._v(e._s(e.$t("view-all-projects")))])],1)],1)]),t("div",{staticClass:"column right-column"},[t("div",{staticClass:"box stats"},[t("h2",[e._v(" "+e._s(e.$t("statistics"))+" ")]),t("table",{staticClass:"table is-fullwidth"},[t("tbody",[t("tr",[t("td",[e._v(e._s(e.projects?e.projects.length:"?"))]),t("td",[e._v(e._s(e.$t("projects")))]),t("td",[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("number-projects-info-message")))])]},proxy:!0}],null,!1,2258136266)},[t("i",{staticClass:"fas fa-info-circle"})])],1)]),t("tr",[t("td",[e._v(e._s(null!=e.nbImages?e.nbImages:"?"))]),t("td",[e._v(e._s(e.$t("images")))]),t("td",[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("number-images-info-message")))])]},proxy:!0}],null,!1,2856895864)},[t("i",{staticClass:"fas fa-info-circle"})])],1)]),t("tr",[t("td",[e._v(e._s(null!=e.nbUserAnnots?e.nbUserAnnots:"?"))]),t("td",[e._v(e._s(e.$t("user-annotations")))]),t("td",[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("number-annotations-info-message")))])]},proxy:!0}],null,!1,3793819640)},[t("i",{staticClass:"fas fa-info-circle"})])],1)]),t("tr",[t("td",[e._v(e._s(null!=e.nbReviewed?e.nbReviewed:"?"))]),t("td",[e._v(e._s(e.$t("reviewed-annotations")))]),t("td",[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("number-reviewed-annotations-info-message")))])]},proxy:!0}],null,!1,4053539854)},[t("i",{staticClass:"fas fa-info-circle"})])],1)])])])]),t("div",{staticClass:"box"},[t("h2",[e._v(" "+e._s(e.$t("last-opened-image"))+" ")]),e.lastOpenedImage?t("image-preview",{attrs:{image:e.lastOpenedImage,fullHeightCard:!1,showProject:!0,blindMode:e.lastOpenedImage.blindMode}}):t("div",{staticClass:"has-text-grey has-text-centered"},[e._v(" "+e._s(e.$t("no-recent-image"))+" ")])],1)])])]],2)}),o=[],s=n("c7eb"),c=n("1da1"),l=(n("7db0"),n("d81d"),n("14d9"),n("13d5"),n("e9f5"),n("f665"),n("7d54"),n("ab43"),n("9485"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("8b18")),u=function(){var e=this,t=e._self._c;return e.images&&e.images.length?t("div",{staticClass:"columns"},[e._l(e.images,(function(n){return t("div",{key:n.image,staticClass:"column"},[t("image-preview",{attrs:{image:n,blindMode:e.project.blindMode}})],1)})),t("div",{staticClass:"column is-narrow vertical-center"},[t("router-link",{staticClass:"button",attrs:{to:"/project/".concat(this.project.id,"/images")}},[e._v(e._s(e.$t("button-view-all")))])],1)],2):t("div",[e._v(" "+e._s(e.$t("no-image-recently-opened"))+" ")])},d=[],p=n("1246"),m=(n("99af"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"card",class:{"full-height-card":e.fullHeightCard}},[t("router-link",{staticClass:"card-image recent-image",attrs:{to:"/project/".concat(e.idProject,"/image/").concat(e.idImage)}},[t("figure",{staticClass:"image is-5by3",style:e.figureStyle})]),t("div",{staticClass:"card-content"},[t("div",{staticClass:"content"},[t("p",[t("router-link",{attrs:{to:"/project/".concat(e.idProject,"/image/").concat(e.idImage)}},[e.isBlindMode?t("span",{staticClass:"blind-indication"},[e._v("["+e._s(this.$t("blinded-name-indication"))+"]")]):e._e(),e._v(" "+e._s(e.image.blindedName||e.image.instanceFilename||e.image.imageName)+" "),e.showProject?t("span",{staticClass:"in-project"},[e._v("("+e._s(e.$t("in-project",{projectName:e.image.projectName}))+")")]):e._e()])],1),e._t("default")],2)])],1)}),f=[],h=n("5530");n("25f0"),n("2b3d"),n("bf19"),n("9861"),n("88a7"),n("271a"),n("5494");function g(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))&&0===e.toDataURL("image/webp").indexOf("data:image/webp")}var v=g(),b=v?"webp":"jpg";function y(e){var t=new URL(e),n=t.pathname.split(".")[0],a=t.searchParams;return{host:"".concat(t.protocol,"//").concat(t.host),pathname:n,params:a}}function w(e){var t=e.host,n=e.pathname,a=e.format,r=e.params;r instanceof URLSearchParams||(r=new URLSearchParams(r));var i=r.toString(),o=i.length>0?"?":"";return"".concat(t).concat(n,".").concat(a).concat(o).concat(i)}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return w(Object(h["a"])({format:t},y(e)))}var k=n("91c9"),_={name:"image-preview",props:{image:{type:Object},project:{type:Object,default:null},fullHeightCard:{type:Boolean,default:!0},showProject:{type:Boolean,default:!1},blindMode:{type:Boolean,default:!1},shortTermToken:{type:String,default:null}},computed:{idImage:function(){return this.image.image||this.image.id},idProject:function(){return this.project?this.project.id:this.image.project},isBlindMode:function(){return this.project?this.project.blindMode:this.blindMode},rawPreviewUrl:function(){return this.image.thumb||this.image.imageThumb},previewUrl:function(){return j(this.rawPreviewUrl)},figureStyle:function(){return{backgroundImage:'url("'.concat(Object(k["a"])(this.previewUrl,this.shortTermToken),'")')}}},created:function(){this.shortTermToken=this.$store.getters["currentUser/currentShortTermToken"]}},x=_,C=(n("8982"),n("2877")),O=Object(C["a"])(x,m,f,!1,null,"1af6021b",null),$=O.exports,T={name:"list-images-preview",components:{ImagePreview:$},props:{project:Object,nbRecent:{type:Number,default:3}},data:function(){return{images:[]}},computed:{currentUser:Object(l["a"])("currentUser/user")},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ImageInstanceCollection"].fetchLastOpened({max:e.nbRecent,project:e.project.id,user:e.currentUser.id});case 2:e.images=t.sent;case 3:case"end":return t.stop()}}),t)})))()}},S=T,P=(n("5c12"),Object(C["a"])(S,u,d,!1,null,"2744f546",null)),A=P.exports,I=n("c9d9"),D={name:"global-dashboard",components:{ListImagesPreview:A,ImagePreview:$},props:{nbRecent:{type:Number,default:3}},data:function(){return{projects:null,recentProjectsId:null,recentImages:[],nbUserAnnots:null,nbReviewed:null,welcomeMessage:null,loading:!0}},computed:{currentUser:Object(l["a"])("currentUser/user"),nbImages:function(){if(this.projects)return this.projects.array.reduce((function(e,t){return e+t.numberOfImages}),0)},recentProjects:function(){var e=this;if(this.recentProjectsId&&this.projects){var t=[];return this.recentProjectsId.forEach((function(n){var a=e.projects.array.find((function(e){return e.id===n}));a&&t.push(a)})),t}},lastOpenedImage:function(){if(this.recentImages&&this.recentImages.length>0&&this.projects){var e=this.recentImages[0],t=this.projects.array.find((function(t){return t.id===e.project}));return t&&(e.projectName=t.name,e.blindMode=t.blindMode),e}return!1}},methods:{fetchProjects:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ProjectCollection"].fetchAll();case 2:e.projects=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchNbAnnots:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.currentUser.fetchNbAnnotations();case 2:e.nbUserAnnots=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchNbReviewedAnnots:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.currentUser.fetchNbAnnotations(!0);case 2:e.nbReviewed=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchRecentProjectsId:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ProjectCollection"].fetchLastOpened(e.nbRecent);case 2:n=t.sent,e.recentProjectsId=n.map((function(e){return e.id}));case 4:case"end":return t.stop()}}),t)})))()},fetchRecentImages:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ImageInstanceCollection"].fetchLastOpened({max:1});case 2:e.recentImages=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchWelcomeMessage:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["Configuration"].fetch(I["a"].CONFIG_KEY_WELCOME);case 3:e.welcomeMessage=t.sent.value,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.fetchProjects(),e.fetchNbAnnots(),e.fetchNbReviewedAnnots(),e.fetchRecentProjectsId(),e.fetchRecentImages(),e.fetchWelcomeMessage()].map((function(e){return e.catch((function(e){}))})));case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()}},E=D,N=(n("7b11"),Object(C["a"])(E,i,o,!1,null,"bbd1f22e",null)),M=N.exports,R=function(){var e=this,t=e._self._c;return t("div",{staticClass:"list-projects-wrapper content-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.error?t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(e._s(e.$t("unexpected-error-info-message")))])]):e.loading?e._e():t("div",{staticClass:"panel"},[t("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("projects"))+" "),e.currentUser.guestByNow?e._e():t("button",{staticClass:"button is-link",on:{click:function(t){e.creationModal=!0}}},[e._v(" "+e._s(e.$t("new-project"))+" ")])]),t("div",{staticClass:"panel-block"},[t("div",{staticClass:"search-block"},[t("b-input",{staticClass:"search-projects",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),t("button",{staticClass:"button",on:{click:function(t){return e.toggleFilterDisplay()}}},[e._m(0),t("span",[e._v(" "+e._s(e.filtersOpened?e.$t("button-hide-filters"):e.$t("button-show-filters"))+" ")]),e.nbActiveFilters?t("span",{staticClass:"nb-active-filters"},[e._v(" "+e._s(e.nbActiveFilters)+" ")]):e._e()])],1),t("b-collapse",{attrs:{open:e.filtersOpened}},[t("div",{staticClass:"filters"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("ontology"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableOntologies,label:"name","track-by":"id",multiple:!0,allPlaceholder:e.$t("all-ontologies")},model:{value:e.selectedOntologies,callback:function(t){e.selectedOntologies=t},expression:"selectedOntologies"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("my-role"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableRoles,multiple:"",searchable:!1},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("tags"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableTags,label:"name","track-by":"id",multiple:!0,allPlaceholder:e.$t("all")},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)])]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("members"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-slider",{attrs:{max:e.maxNbMembers},model:{value:e.boundsMembers,callback:function(t){e.boundsMembers=t},expression:"boundsMembers"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("images"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-slider",{attrs:{max:e.maxNbImages},model:{value:e.boundsImages,callback:function(t){e.boundsImages=t},expression:"boundsImages"}})],1)]),t("div",{staticClass:"column"})]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("user-annotations"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-slider",{attrs:{max:e.maxNbUserAnnotations},model:{value:e.boundsUserAnnotations,callback:function(t){e.boundsUserAnnotations=t},expression:"boundsUserAnnotations"}})],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.algoEnabled,expression:"algoEnabled"}],staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("analysis-annotations"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-slider",{attrs:{max:e.maxNbJobAnnotations},model:{value:e.boundsJobAnnotations,callback:function(t){e.boundsJobAnnotations=t},expression:"boundsJobAnnotations"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("reviewed-annotations"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-slider",{attrs:{max:e.maxNbReviewedAnnotations},model:{value:e.boundsReviewedAnnotations,callback:function(t){e.boundsReviewedAnnotations=t},expression:"boundsReviewedAnnotations"}})],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.algoEnabled,expression:"!algoEnabled"}],staticClass:"column"})])])]),t("cytomine-table",{staticClass:"table-projects",attrs:{collection:e.projectCollection,"is-empty":e.nbEmptyFilters>0,currentPage:e.currentPage,perPage:e.perPage,openedDetailed:e.openedDetails,sort:e.sortField,order:e.sortOrder,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t}},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{field:"currentUserRole",label:"",centered:"",width:"1",sortable:""}},[t("icon-project-member-role",{attrs:{"is-manager":a.currentUserRoles.admin,"is-representative":a.currentUserRoles.representative}})],1),t("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:"",width:"250"}},[t("router-link",{attrs:{to:"/project/".concat(a.id)}},[e._v(" "+e._s(a.name)+" ")])],1),t("b-table-column",{attrs:{field:"membersCount",label:e.$t("members"),centered:"",sortable:"",width:"150"}},[e._v(" "+e._s(a.membersCount)+" ")]),t("b-table-column",{attrs:{field:"numberOfImages",label:e.$t("images"),centered:"",sortable:"",width:"150"}},[t("router-link",{attrs:{to:"/project/".concat(a.id,"/images")}},[e._v(e._s(a.numberOfImages))])],1),t("b-table-column",{attrs:{field:"numberOfAnnotations",label:e.$t("user-annotations"),centered:"",sortable:"",width:"150"}},[t("router-link",{attrs:{to:"/project/".concat(a.id,"/annotations?type=user")}},[e._v(" "+e._s(a.numberOfAnnotations)+" ")])],1),e.algoEnabled?t("b-table-column",{attrs:{field:"numberOfJobAnnotations",label:e.$t("analysis-annotations"),centered:"",sortable:"",width:"150"}},[t("router-link",{attrs:{to:"/project/".concat(a.id,"/annotations?type=algo")}},[e._v(" "+e._s(a.numberOfJobAnnotations)+" ")])],1):e._e(),t("b-table-column",{attrs:{field:"numberOfReviewedAnnotations",label:e.$t("reviewed-annotations"),centered:"",sortable:"",width:"150"}},[t("router-link",{attrs:{to:"/project/".concat(a.id,"/annotations?type=reviewed")}},[e._v(" "+e._s(a.numberOfReviewedAnnotations)+" ")])],1),t("b-table-column",{attrs:{field:"lastActivity",label:e.$t("last-activity"),centered:"",sortable:"",width:"180"}},[e._v(" "+e._s(e._f("moment")(Number(a.lastActivity),"ll"))+" ")]),t("b-table-column",{attrs:{label:" ",centered:"",width:"150"}},[t("router-link",{staticClass:"button is-small is-link",attrs:{to:"/project/".concat(a.id)}},[e._v(" "+e._s(e.$t("button-open"))+" ")])],1)]}},{key:"detail",fn:function(n){var a=n.row;return[t("project-details",{attrs:{project:a,"excluded-properties":e.excludedProperties,editable:""},on:{update:function(t){return e.updateProject()},delete:function(t){return e.deleteProject(a)}}})]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-project")))])])]},proxy:!0}])}),t("div",{staticClass:"legend"},[t("h2",[e._v(e._s(e.$t("legend")))]),t("p",[t("icon-project-member-role"),e._v(" : "+e._s(e.$t("contributor-icon-label")))],1),t("p",[t("icon-project-member-role",{attrs:{"is-manager":!0}}),e._v(" : "+e._s(e.$t("manager-icon-label")))],1),t("p",[t("icon-project-member-role",{attrs:{"is-manager":!0,"is-representative":!0}}),e._v(" : "+e._s(e.$t("representative-icon-label")))],1)])],1)]),t("add-project-modal",{attrs:{active:e.creationModal,ontologies:e.ontologies},on:{"update:active":function(t){e.creationModal=t}}})],1)},U=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-filter"})])}],z=n("b85c"),L=n("2909"),F=(n("4de4"),n("caad"),n("a15b"),n("4e82"),n("910d"),n("2532"),n("fb6a"),function(){var e=this,t=e._self._c;return e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._t("error",(function(){return[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]}))],2):t("div",{staticClass:"cytomine-table-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:!e.data}}),e.data?t("b-table",{attrs:{data:e.data,loading:e.loading,paginated:"","backend-pagination":"",total:e.total,"per-page":e.internalPerPage,"current-page":e.internalCurrentPage,"pagination-size":"is-small",detailed:e.detailed,"detail-key":e.detailKey,"opened-detailed":e.openedDetailed.slice(),"backend-sorting":"","default-sort":e.sort,"default-sort-direction":e.order,checkable:e.checkable,"checked-rows":e.internalCheckedRows,"is-row-checkable":e.isRowCheckable},on:{"update:currentPage":function(t){e.internalCurrentPage=t},"update:current-page":function(t){e.internalCurrentPage=t},"update:openedDetailed":function(t){return e.$emit("update:openedDetailed",t)},"update:checkedRows":function(t){e.internalCheckedRows=t},"update:checked-rows":function(t){e.internalCheckedRows=t},sort:e.updateSort},scopedSlots:e._u([{key:"header",fn:function(t){var n=t.column;return[e._t("header",(function(){return[e._v(" "+e._s(n.label)+" ")]}),{column:n,index:e.index})]}},{key:"default",fn:function(t){var n=t.row,a=t.index;return[e._t("default",null,{row:n,index:a})]}},{key:"detail",fn:function(t){var n=t.row,a=t.index;return[e._t("detail",null,{row:n,index:a})]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[e._t("empty",(function(){return[e._v(" "+e._s(e.$t("no-result"))+" ")]}),{row:e.row,index:e.index})],2)]},proxy:!0},{key:"footer",fn:function(){return[e._t("footer")]},proxy:!0},{key:"bottom-left",fn:function(){return[t("b-select",{attrs:{size:"is-small"},model:{value:e.internalPerPage,callback:function(t){e.internalPerPage=t},expression:"internalPerPage"}},e._l(e.perPageOptions,(function(n){return t("option",{key:n,domProps:{value:n}},[e._v(" "+e._s(e.$t("count-per-page",{count:n}))+" ")])})),0)]},proxy:!0}],null,!0)}):e._e()],1)}),B=[],q={name:"cytomine-table",props:{collection:Object,isEmpty:{type:Boolean,default:!1},perPageOptions:{type:Array,default:function(){return[5,10,25,50,100]}},perPage:{type:Number,default:25},currentPage:{type:Number,default:1},detailed:{type:Boolean,default:!0},detailKey:{type:String,default:"id"},openedDetailed:{type:Array,default:function(){return[]}},sort:{type:String},order:{type:String,default:"asc"},revision:Number,refreshInterval:{type:Number,default:0},checkable:{type:Boolean,default:!1},checkedRows:{type:Array,default:function(){return[]}},isRowCheckable:{type:Function}},data:function(){return{index:0,row:null,data:null,error:!1,loading:!0,total:0,internalCheckedRows:[],internalCurrentPage:null,internalPerPage:null,internalSort:null,internalOrder:null,timeout:null}},computed:{internalCollection:function(){var e=this.collection.clone();return e.max=this.internalPerPage,e.sort=this.internalSort,e.order=this.internalOrder,e}},watch:{internalCollection:function(){this.fetchPage(!0)},internalCurrentPage:function(e,t){t&&(this.$emit("update:currentPage",e),this.fetchPage(!0))},internalCheckedRows:function(e){this.$emit("update:checkedRows",e)},internalPerPage:function(e){this.$emit("update:perPage",e)},revision:function(){this.fetchPage()},refreshInterval:function(e){0===e?(clearTimeout(this.timeout),this.timeout=null):this.timeout||this.fetchPage()}},methods:{updateSort:function(e,t){this.internalSort=e,this.internalOrder=t,this.$emit("update:sort",e),this.$emit("update:order",t)},fetchPage:function(){var e=arguments,t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]&&e[0],a&&(t.loading=!0),n.prev=2,r={array:[],totalNbItems:0},!t.isEmpty){n.next=8;break}t.internalCurrentPage=1,n.next=11;break;case 8:return n.next=10,t.internalCollection.fetchPage(t.internalCurrentPage-1);case 10:r=n.sent;case 11:t.data=r.array,t.total=r.totalNbItems,t.internalCheckedRows=t.data.filter((function(e){return t.internalCheckedRows.map((function(e){return e.id})).includes(e.id)})),t.$emit("update:checkedRows",t.internalCheckedRows),t.$emit("update:data",r),n.next=25;break;case 18:if(n.prev=18,n.t0=n["catch"](2),!(t.internalCurrentPage>1)){n.next=23;break}return t.internalCurrentPage=1,n.abrupt("return");case 23:return t.error=!0,n.abrupt("return");case 25:t.loading=!1,clearTimeout(t.timeout),t.refreshInterval&&(t.timeout=setTimeout(t.fetchPage,t.refreshInterval));case 28:case"end":return n.stop()}}),n,null,[[2,18]])})))()}},created:function(){this.internalCurrentPage=this.currentPage,this.internalPerPage=this.perPage,this.internalSort=this.sort,this.internalOrder=this.order,this.internalCheckedRows=this.checkedRows}},V=q,W=(n("ad1c"),Object(C["a"])(V,F,B,!1,null,"0fa69708",null)),G=W.exports,H=function(){var e=this,t=e._self._c;return t("multiselect",{attrs:{value:e.value,label:e.label,"track-by":e.trackBy,"group-label":e.groupLabel,"group-values":e.groupValues,"group-select":!0,options:e.options,optionHeight:30,showLabels:!1,multiple:e.multiple,"close-on-select":e.internalCloseOnSelect,searchable:e.searchable,"clear-on-select":!e.multiple,showPointer:!1,placeholder:e.$t("select-options"),"allow-empty":e.allowEmpty,disabled:e.disabled},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([e.multiple&&e.options.length>0&&e.selectAllAvailable?{key:"beforeList",fn:function(){return[t("li",{staticClass:"multiselect__element multiselect__select-all",on:{click:function(t){return e.selectAll()}}},[t("span",{class:["multiselect__option",e.allSelected?"multiselect__option--selected":""]},[e._v(" "+e._s(e.$t("select-all"))+" ")])])]},proxy:!0}:null,e.multiple&&e.options.length>0?{key:"selection",fn:function(n){var a=n.isOpen;return[a?t("div"):t("div",{staticClass:"multiselect__tags-wrap"},[e.allSelected?t("strong",[e._v(" "+e._s(e.allPlaceholder||e.$t("all"))+" ")]):[e._l(e.displayedOptions,(function(n,a){return t("span",{key:n[e.trackBy]},[e._v(" "+e._s(e.label?n[e.label]:n)),a<e.displayedOptions.length-1?[e._v(",")]:e._e()],2)})),e.countNotDisplayed>0?t("strong",[e._v(" "+e._s(e.$tc("and-count-others",e.countNotDisplayed,{count:e.countNotDisplayed}))+" ")]):e._e()]],2)]}}:null,{key:"option",fn:function(t){var n=t.option;return[e._t("option",null,{option:n})]}}],null,!0)})},J=[],K=(n("d866"),n("8e5f")),Y=n.n(K),Z={name:"cytomine-multiselect",components:{Multiselect:Y.a},props:{value:{type:null},options:{type:null},label:{type:String},trackBy:{type:String},groupLabel:{type:String},groupValues:{type:String},multiple:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:null},selectAllAvailable:{type:Boolean,default:!0},searchable:{type:Boolean,default:!0},allowEmpty:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},allPlaceholder:{type:String}},data:function(){return{maxNbDisplayed:3}},computed:{allSelected:function(){var e=this;return!!this.multiple&&this.options.every((function(t){return e.value.includes(t)}))},displayedOptions:function(){return this.value.slice(0,this.maxNbDisplayed)},countNotDisplayed:function(){return this.value.length-this.maxNbDisplayed},internalCloseOnSelect:function(){return null===this.closeOnSelect?!this.multiple:this.closeOnSelect}},methods:{selectAll:function(){var e=this.allSelected?[]:this.options;this.$emit("input",e)}}},X=Z,Q=(n("b93a"),Object(C["a"])(X,H,J,!1,null,null,null)),ee=Q.exports,te=function(){var e=this,t=e._self._c;return t("vue-slider",{class:[{"vue-slider-margin-for-tooltip":e.tooltip&&e.isArray&&!e.smartTooltipPosition},e.size],attrs:{value:e.value,min:e.min,max:e.max,tooltip:e.tooltip?"always":"none",interval:e.interval,"tooltip-placement":e.tooltipPlacement,lazy:e.lazy,"dot-size":e.dotSize,contained:e.contained,"enable-cross":!1},on:{change:function(t){return e.$emit("input",t)},dragging:function(t){e.internalValue=t}},scopedSlots:e._u([e.tooltip?{key:"tooltip",fn:function(n){var a=n.value,r=n.index;return[t("div",{class:["vue-slider-dot-tooltip-inner","vue-slider-dot-tooltip-inner-".concat(e.tooltipPlacement[r]),e.size],on:{mousedown:function(e){e.stopPropagation()},click:function(t){return t.stopPropagation(),e.startEdition(r)}}},[e.indexEdited!==r?[e._t("default",(function(){return[e._v(" "+e._s(Math.round(1e3*a)/1e3)+" ")]}),{value:a})]:t("b-input",{ref:"inputSlider",attrs:{type:"text",size:e.size},on:{"hook:mounted":function(t){return e.focus()},blur:function(t){return e.stopEdition(r)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.stopEdition(r)}},model:{value:e.editedValue,callback:function(t){e.editedValue=t},expression:"editedValue"}})],2)]}}:null],null,!0)})},ne=[],ae=n("4971"),re=n.n(ae),ie={name:"cytomine-slider",components:{VueSlider:re.a},props:{value:{type:null},min:{type:Number,default:0},max:{type:Number,default:100},interval:{type:Number},integerOnly:{type:Boolean,default:!0},lazy:{type:Boolean,default:!0},tooltip:{type:Boolean,default:!0},size:{type:String,default:"is-normal"},contained:{type:Boolean,default:!1},smartTooltipPosition:{type:Boolean,default:!1}},data:function(){return{indexEdited:null,editedValue:0,internalValue:0}},computed:{isArray:function(){return Array.isArray(this.value)},range:function(){return this.max-this.min},middle:function(){return this.range/2},tooltipPlacement:function(){var e=this;if(this.isArray){if(this.smartTooltipPosition){var t=this.value.length+1,n=Array.isArray(this.internalValue)?this.internalValue:this.value;return n.map((function(n,a){return n>=e.range*(a+1)/t?"left":"right"}))}return this.value.map((function(e,t){return 0===t?"left":"right"}))}return this.internalValue>=this.middle?["left"]:["right"]},dotSize:function(){switch(this.size){case"is-small":return 10.5;default:return 14}}},watch:{value:function(){this.internalValue=this.value}},methods:{startEdition:function(e){this.indexEdited!==e&&(this.editedValue=this.isArray?this.value[e]:this.value,this.indexEdited=e)},stopEdition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.indexEdited===e){if(this.indexEdited=null,!this.editedValue||isNaN(this.editedValue))return;var t=this.integerOnly?parseInt(this.editedValue):Number(this.editedValue);if(t=Math.min(t,this.max),t=Math.max(t,this.min),this.isArray){var n=this.value.slice();n[e]=t,n[0]>n[1]&&n.reverse(),this.$emit("input",n)}else this.$emit("input",t)}},focus:function(){this.$refs.inputSlider.focus()}},created:function(){this.internalValue=this.value}},oe=ie,se=(n("feba"),Object(C["a"])(oe,te,ne,!1,null,null,null)),ce=se.exports,le=function(){var e=this,t=e._self._c;return e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small",size:"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):t("table",{staticClass:"table"},[t("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():t("tbody",[e.isPropDisplayed("id")&&e.currentUser.isDeveloper?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("id")))]),t("td",{staticClass:"prop-content"},[e._v(e._s(e.project.id))])]):e._e(),e.isPropDisplayed("name")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("name")))]),t("td",{staticClass:"prop-content"},[e._v(" "+e._s(e.project.name)+" ")])]):e._e(),e.isPropDisplayed("numberOfImages")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("images")))]),t("td",{staticClass:"prop-content"},[t("router-link",{attrs:{to:"/project/".concat(e.project.id,"/images")}},[e._v(e._s(e.project.numberOfImages))])],1)]):e._e(),e.isPropDisplayed("membersCount")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("members")))]),t("td",{staticClass:"prop-content"},[e._v(" "+e._s(this.members.length)+" ")])]):e._e(),e.isPropDisplayed("numberOfAnnotations")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("user-annotations")))]),t("td",{staticClass:"prop-content"},[t("router-link",{attrs:{to:"/project/".concat(e.project.id,"/annotations?type=user")}},[e._v(" "+e._s(e.project.numberOfAnnotations)+" ")])],1)]):e._e(),e.isPropDisplayed("numberOfJobAnnotations")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("analysis-annotations")))]),t("td",{staticClass:"prop-content"},[t("router-link",{attrs:{to:"/project/".concat(e.project.id,"/annotations?type=algo")}},[e._v(" "+e._s(e.project.numberOfJobAnnotations)+" ")])],1)]):e._e(),e.isPropDisplayed("numberOfReviewedAnnotations")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("reviewed-annotations")))]),t("td",{staticClass:"prop-content"},[t("router-link",{attrs:{to:"/project/".concat(e.project.id,"/annotations?type=reviewed")}},[e._v(" "+e._s(e.project.numberOfReviewedAnnotations)+" ")])],1)]):e._e(),e.isPropDisplayed("description")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("description")))]),t("td",{staticClass:"prop-content"},[t("cytomine-description",{attrs:{object:e.project,canEdit:e.canManageProject}})],1)]):e._e(),e.isPropDisplayed("tags")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("tags")))]),t("td",{staticClass:"prop-content"},[t("cytomine-tags",{attrs:{object:e.project,canEdit:e.canManageProject}})],1)]):e._e(),e.isPropDisplayed("properties")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("properties")))]),t("td",{staticClass:"prop-content"},[t("cytomine-properties",{attrs:{object:e.project,canEdit:e.canManageProject,properties:e.internalUseFilteredProperties},on:{deleted:e.removeProp,added:e.addProp}})],1)]):e._e(),e.isPropDisplayed("attachedFiles")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("attached-files")))]),t("td",{staticClass:"prop-content"},[t("attached-files",{attrs:{object:e.project,canEdit:e.canManageProject}})],1)]):e._e(),e.isPropDisplayed("ontology")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("ontology")))]),t("td",{staticClass:"prop-content"},[e.project.ontology?t("router-link",{attrs:{to:"/ontology/".concat(e.project.ontology)}},[e._v(" "+e._s(e.project.ontologyName)+" ")]):t("em",[e._v(e._s(e.$t("no-ontology")))])],1)]):e._e(),e.isPropDisplayed("created")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("created-on")))]),t("td",{staticClass:"prop-content"},[e._v(" "+e._s(e._f("moment")(Number(e.project.created),"ll"))+" ")])]):e._e(),e.isPropDisplayed("creator")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("creator")))]),t("td",{staticClass:"prop-content"},[t("list-usernames",{attrs:{users:[e.creator],onlines:e.onlines}})],1)]):e._e(),e.isPropDisplayed("representatives")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("representatives"))+" ("+e._s(e.representatives.length)+")")]),t("td",{staticClass:"prop-content"},[t("list-usernames",{attrs:{users:e.representatives,onlines:e.onlines}})],1)]):e._e(),e.isPropDisplayed("managers")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("managers"))+" ("+e._s(e.managers.length)+")")]),t("td",{staticClass:"prop-content"},[t("list-usernames",{attrs:{users:e.managers,onlines:e.onlines}})],1)]):e._e(),e.isPropDisplayed("contributors")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("contributors"))+" ("+e._s(e.contributors.length)+")")]),t("td",{staticClass:"prop-content"},[t("list-usernames",{attrs:{users:e.contributors,onlines:e.onlines}})],1)]):e._e(),e.isPropDisplayed("imagesPreview")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("images")))]),t("td",{staticClass:"prop-content"},[t("list-images-preview",{attrs:{project:e.project}})],1)]):e._e(),e.canManageProject?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("actions")))]),t("td",{staticClass:"prop-content"},[t("project-actions",{attrs:{project:e.project},on:{update:function(t){return e.$emit("update",t)},delete:function(t){return e.$emit("delete")}}})],1)]):e._e()])],1)},ue=[],de=(n("2ca0"),function(){var e=this,t=e._self._c;return e.filteredUsers.length?t("span",[e._l(e.usersToDisplay,(function(n,a){return t("span",{key:n.id},[t("username",{attrs:{user:n,online:e.isOnline(n.id)}}),a<e.usersToDisplay.length-1?[e._v(", ")]:e._e()],2)})),e.tooManyUsers?t("button",{staticClass:"button is-small",on:{click:function(t){e.expanded=!e.expanded}}},[e._v(" "+e._s(e.expanded?e.$t("button-less"):e.$t("button-more"))+" ")]):e._e()],2):t("span",[e._v(" - ")])}),pe=[],me=(n("a732"),function(){var e=this,t=e._self._c;return e.resolvedUser?t("span",[null!==e.online?t("span",{class:[e.online?"online-dot":"offline-dot"]}):e._e(),e._v(" "+e._s(e.displayFullName?e.fullName:e.resolvedUser.username))]):e._e()}),fe=[],he=n("eeaa"),ge={name:"username",props:{user:Object,id:Number,online:{type:Boolean,default:null},displayFullName:{type:Boolean,default:!0}},data:function(){return{fetchedUser:{}}},computed:{resolvedUser:function(){return this.user||this.fetchedUser},fullName:function(){return Object(he["a"])(this.resolvedUser)}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user||!e.id){t.next=4;break}return t.next=3,p["User"].fetch(e.id);case 3:e.fetchedUser=t.sent;case 4:case"end":return t.stop()}}),t)})))()}},ve=ge,be=(n("bfd1"),Object(C["a"])(ve,me,fe,!1,null,"48b343f5",null)),ye=be.exports,we={name:"list-usernames",components:{Username:ye},props:{users:Array,onlines:Array,nbDisplayed:{type:Number,default:5}},data:function(){return{expanded:!1}},computed:{filteredUsers:function(){return this.users.filter((function(e){return e}))},tooManyUsers:function(){return this.filteredUsers&&this.filteredUsers.length>this.nbDisplayed},usersToDisplay:function(){return!this.tooManyUsers||this.expanded||0===this.nbDisplayed?this.filteredUsers:this.filteredUsers.slice(0,this.nbDisplayed)}},methods:{isOnline:function(e){return this.onlines?this.onlines.some((function(t){return t.id===e})):null}}},je=we,ke=(n("6559"),Object(C["a"])(je,de,pe,!1,null,"2e92ce16",null)),_e=ke.exports,xe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"project-actions-wrapper"},[t("rename-modal",{attrs:{title:e.$t("rename-project"),currentName:e.project.name,active:e.isRenameModalActive},on:{"update:active":function(t){e.isRenameModalActive=t},rename:e.rename}}),t("form",{on:{submit:function(t){return t.preventDefault(),e.saveOntology()}}},[t("cytomine-modal",{attrs:{active:e.isOntologyModalActive,title:e.$t("change-ontology")},on:{close:function(t){e.isOntologyModalActive=!1}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button",disabled:e.savingOntology},on:{click:function(t){e.isOntologyModalActive=!1}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),e.errorOntologies?e._e():t("button",{staticClass:"button is-link",class:{"is-loading":e.savingOntology},attrs:{disabled:e.loadingOntologies||e.savingOntology}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[e.errorOntologies?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[e.project.ontology?t("b-message",{attrs:{type:"is-warning","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("change-ontology-warning-message"))+" ")]):e._e(),t("b-field",{attrs:{label:e.$t("ontology")}},[t("b-select",{attrs:{placeholder:e.$t("no-ontology"),disabled:e.loadingOntologies,loading:e.loadingOntologies},model:{value:e.selectedOntology,callback:function(t){e.selectedOntology=t},expression:"selectedOntology"}},[t("option",{domProps:{value:null}},[e._v(" "+e._s(e.$t("no-ontology"))+" ")]),e._l(e.ontologies,(function(n){return t("option",{key:n.id,domProps:{value:n.id}},[e._v(" "+e._s(n.name)+" ")])}))],2)],1)]],2)],1),t("div",{staticClass:"buttons"},[t("button",{staticClass:"button",class:e.size,on:{click:function(t){e.isRenameModalActive=!0}}},[e._v(" "+e._s(e.$t("button-rename"))+" ")]),t("button",{staticClass:"button",class:e.size,attrs:{disabled:e.cannotDeleteOntology},on:{click:function(t){e.isOntologyModalActive=!0}}},[e._v(" "+e._s(e.$t("button-change-ontology"))+" ")]),t("button",{staticClass:"button is-danger",class:e.size,on:{click:function(t){return e.deleteProject()}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")])])],1)},Ce=[],Oe=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{active:e.active,"has-modal-card":""},on:{close:function(t){return e.close()}}},[t("cytomine-modal-card",{attrs:{title:e.title},on:{close:function(t){return e.close()}},scopedSlots:e._u([{key:"footer",fn:function(){return[e._t("footer")]},proxy:!0}],null,!0)},[e._t("default")],2)],1)},$e=[],Te=n("b286"),Se={name:"cytomine-modal",props:{active:Boolean,title:String},components:{CytomineModalCard:Te["a"]},methods:{close:function(){this.$emit("close"),this.$emit("update:active",!1)}}},Pe=Se,Ae=Object(C["a"])(Pe,Oe,$e,!1,null,null,null),Ie=Ae.exports,De=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.rename()}}},[t("cytomine-modal",{attrs:{title:e.title,active:e.active},on:{close:function(t){return e.close()}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.close()}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[t("b-field",{attrs:{label:e.$t("new-name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name"},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1)],1)],1)},Ee=[],Ne={name:"rename-modal",extends:Ie,props:{currentName:String,title:String},components:{CytomineModal:Ie},$_veeValidate:{validator:"new"},data:function(){return{newName:""}},watch:{active:function(e){e&&(this.newName=this.currentName)}},methods:{rename:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:e.$emit("rename",e.newName),e.$emit("update:active",!1);case 7:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.newName=e.currentName;case 1:case"end":return t.stop()}}),t)})))()}},Me=Ne,Re=(n("9dd3"),Object(C["a"])(Me,De,Ee,!1,null,"7aaff35b",null)),Ue=Re.exports,ze={name:"project-actions",props:{project:{type:Object},size:{type:String,default:"is-small"}},components:{CytomineModal:Ie,RenameModal:Ue},data:function(){return{isRenameModalActive:!1,isOntologyModalActive:!1,loadingOntologies:!0,errorOntologies:!1,ontologies:null,selectedOntology:null,cannotDeleteOntology:!1,savingOntology:!1}},watch:{isOntologyModalActive:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=15;break}if(!t.loadingOntologies){n.next=13;break}return n.prev=2,n.next=5,p["OntologyCollection"].fetchAll({light:!0});case 5:t.ontologies=n.sent.array,t.ontologies.sort((function(e,t){return e.name.localeCompare(t.name)})),t.loadingOntologies=!1,n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](2),t.errorOntologies=!0;case 13:t.selectedOntology=t.project.ontology,t.savingOntology=!1;case 15:case"end":return n.stop()}}),n,null,[[2,10]])})))()}},methods:{rename:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.project.clone(),n.prev=1,a.name=e,n.next=5,a.save();case 5:t.$emit("update",a),t.$notify({type:"success",text:t.$t("notif-success-project-rename",{projectName:a.name})}),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),t.$notify({type:"error",text:t.$t("notif-error-project-rename",{projectName:t.project.name})});case 12:t.isRenameModalActive=!1;case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))()},saveOntology:function(){var e=arguments,t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]&&e[0],t.savingOntology=!0,r=t.project.clone(),n.prev=3,r.ontology=t.selectedOntology,r.forceOntologyUpdate=a,n.next=8,r.save();case 8:t.$emit("update",r),t.$notify({type:"success",text:t.$t("notif-success-project-ontology-change",{projectName:t.project.name})}),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](3),n.t0.response&&n.t0.response.data.errorValues?(i=n.t0.response.data.errorValues,0===i.algoAssociatedTermsCount&&0===i.reviewedAssociatedTermsCount?t.$buefy.dialog.confirm({title:t.$t("confirm-ontology-change"),message:t.$t("confirm-ontology-change-delete-user-terms",{count:i.userAssociatedTermsCount}),type:"is-danger",confirmText:t.$t("button-confirm"),cancelText:t.$t("button-cancel"),onConfirm:function(){return t.saveOntology(!0)}}):(t.cannotDeleteOntology=!0,t.$notify({type:"error",text:t.$t("notif-error-project-ontology-change-"+(i.algoAssociatedTermsCount?"job-terms":"reviewed-terms"))}))):t.$notify({type:"error",text:t.$t("notif-error-project-ontology-change",{projectName:t.project.name})});case 15:t.savingOntology=!1,t.isOntologyModalActive=!1;case 17:case"end":return n.stop()}}),n,null,[[3,12]])})))()},deleteProject:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("delete-project"),message:this.$t("delete-project-confirmation-message",{projectName:this.project.name}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.$emit("delete")}})}}},Le=ze,Fe=Object(C["a"])(Le,xe,Ce,!1,null,null,null),Be=Fe.exports,qe=n("2f66"),Ve=n("f679"),We=n("72d0"),Ge=n("9966"),He={name:"project-details",components:{ListImagesPreview:A,ListUsernames:_e,ProjectActions:Be,CytomineDescription:qe["a"],CytomineProperties:Ve["a"],CytomineTags:We["a"],AttachedFiles:Ge["a"]},props:{project:{type:Object},excludedProperties:{type:Array,default:function(){return[]}},editable:{type:Boolean,default:!1}},data:function(){return{loading:!0,error:!1,creator:null,managers:[],members:[],onlines:[],representatives:[],properties:[],loadPropertiesError:!1}},computed:{currentUser:Object(l["a"])("currentUser/user"),blindMode:function(){return(this.project||{}).blindMode||!1},canManageProject:function(){return this.editable&&(this.currentUser.adminByNow||this.managersIds.includes(this.currentUser.id))},managersIds:function(){return this.managers.map((function(e){return e.id}))},contributors:function(){var e=this;return this.members.filter((function(t){return!e.managersIds.includes(t.id)}))},internalUseFilteredProperties:function(){return this.properties.filter((function(e){return!e.key.startsWith(I["a"].PREFIX_HIDDEN_PROPERTY_KEY)}))}},methods:{fetchCreator:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchCreator();case 2:e.creator=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchManagers:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchAdministrators();case 2:e.managers=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},fetchRepresentatives:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchRepresentatives();case 2:e.representatives=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},fetchMembers:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchUsers();case 2:e.members=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},fetchOnlines:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchConnectedUsers();case 2:e.onlines=t.sent;case 3:case"end":return t.stop()}}),t)})))()},isPropDisplayed:function(e){return!this.excludedProperties.includes(e)},deleteProject:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("delete-project"),message:this.$t("delete-project-confirmation-message",{projectName:this.project.name}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.$emit("delete")}})},removeProp:function(e){this.properties=this.properties.filter((function(t){return t.id!==e.id}))},addProp:function(e){this.properties.push(e)}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.fetchCreator(),e.fetchManagers(),e.fetchRepresentatives(),e.fetchMembers(),e.fetchOnlines()]);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.error=!0;case 8:return t.prev=8,t.next=11,p["PropertyCollection"].fetchAll({object:e.project});case 11:e.properties=t.sent.array,t.next=17;break;case 14:t.prev=14,t.t1=t["catch"](8),e.loadPropertiesError=!0;case 17:e.loading=!1;case 18:case"end":return t.stop()}}),t,null,[[0,5],[8,14]])})))()}},Je=He,Ke=(n("54ab"),Object(C["a"])(Je,le,ue,!1,null,"4c41cfd4",null)),Ye=Ke.exports,Ze=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.createProject()}}},[t("cytomine-modal",{attrs:{active:e.active,title:e.$t("create-project")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[t("b-field",{attrs:{label:e.$t("name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("b-field",{attrs:{label:e.$t("ontology")}},[t("b-radio",{attrs:{"native-value":"NEW"},model:{value:e.ontology,callback:function(t){e.ontology=t},expression:"ontology"}},[e._v(" "+e._s(e.$t("create-ontology-for-project"))+" ")])],1),t("b-field",[t("b-radio",{attrs:{"native-value":"EXISTING"},model:{value:e.ontology,callback:function(t){e.ontology=t},expression:"ontology"}},[e._v(" "+e._s(e.$t("use-existing-ontology"))+" ")])],1),t("b-field",[t("b-radio",{attrs:{"native-value":"NO"},model:{value:e.ontology,callback:function(t){e.ontology=t},expression:"ontology"}},[e._v(" "+e._s(e.$t("no-ontology"))+" ")])],1),"EXISTING"===e.ontology?[t("b-field",{attrs:{type:{"is-danger":e.errors.has("ontology")},message:e.errors.first("ontology")}},[t("b-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{size:"is-small",placeholder:e.$t("select-ontology"),name:"ontology"},model:{value:e.selectedOntology,callback:function(t){e.selectedOntology=t},expression:"selectedOntology"}},e._l(e.ontologies,(function(n){return t("option",{key:n.id,domProps:{value:n.id}},[e._v(" "+e._s(n.name)+" ")])})),0)],1)]:e._e()],2)],1)},Xe=[],Qe={name:"add-project-modal",props:{active:Boolean,ontologies:Array},components:{CytomineModal:Ie},$_veeValidate:{validator:"new"},data:function(){return{name:"",ontology:"NEW",selectedOntology:null}},watch:{active:function(e){e&&(this.name="",this.ontology="NEW",this.selectedOntology=null)}},methods:{createProject:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r,i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:if(t.prev=5,"NEW"!==e.ontology){t.next=13;break}return t.next=9,new p["Ontology"]({name:e.name}).save();case 9:r=t.sent,a=r.id,t.next=14;break;case 13:"EXISTING"===e.ontology&&(a=e.selectedOntology);case 14:return t.next=16,new p["Project"]({name:e.name,ontology:a}).save();case 16:i=t.sent,e.$notify({type:"success",text:e.$t("notif-success-project-creation")}),e.$router.push("/project/".concat(i.id,"/configuration")),t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](5),409==t.t0.response.status?e.$notify({type:"error",text:e.$t("notif-error-project-already-exists")}):e.$notify({type:"error",text:e.$t("notif-error-project-creation")});case 24:case"end":return t.stop()}}),t,null,[[5,21]])})))()}}},et=Qe,tt=Object(C["a"])(et,Ze,Xe,!1,null,null,null),nt=tt.exports,at=function(){var e=this,t=e._self._c;return t("div",[t("i",{staticClass:"fas fa-user-cog",class:{disabled:!e.isManager,editable:e.editable},attrs:{title:e.$t(e.label)},on:{click:function(t){return e.$emit("toggleManager")}}}),!e.editable&&e.isRepresentative?t("i",{staticClass:"superscript fas fa-flag"}):e.editable&&e.isManager?t("i",{staticClass:"superscript fas fa-flag editable",class:{disabled:!e.isRepresentative},on:{click:function(t){return e.$emit("toggleRepresentative")}}}):e._e()])},rt=[],it={name:"IconProjectMemberRole",props:{isManager:{type:Boolean,default:!1},isRepresentative:{type:Boolean,default:!1},editable:{type:Boolean,default:!1}},computed:{label:function(){return this.editable?"":this.isRepresentative?"representative-icon-label":this.isManager?"manager-icon-label":"contributor-icon-label"}}},ot=it,st=(n("9f06"),Object(C["a"])(ot,at,rt,!1,null,"2f080369",null)),ct=st.exports,lt={name:"list-projects",components:{IconProjectMemberRole:ct,CytomineTable:G,ProjectDetails:Ye,AddProjectModal:nt,CytomineMultiselect:ee,CytomineSlider:ce},data:function(){return{loading:!0,error:!1,projects:[],ontologies:[],availableTags:[],contributorLabel:this.$t("contributor"),managerLabel:this.$t("manager"),creationModal:!1,excludedProperties:["name","membersCount","numberOfImages","numberOfAnnotations","numberOfJobAnnotations","numberOfReviewedAnnotations","lastActivity"],algoEnabled:I["a"].ALGORITHMS_ENABLED,maxNbMembers:10,maxNbImages:10,maxNbUserAnnotations:100,maxNbJobAnnotations:100,maxNbReviewedAnnotations:100,revision:0}},computed:{currentUser:Object(l["a"])("currentUser/user"),searchString:Object(l["b"])("listProjects/searchString",{debounce:500}),filtersOpened:Object(l["b"])("listProjects/filtersOpened"),availableRoles:function(){return[this.contributorLabel,this.managerLabel]},availableOntologies:function(){return[{id:"null",name:this.$t("no-ontology")}].concat(Object(L["a"])(this.ontologies))},querySearchTags:function(){return this.$route.query.tags},selectedOntologies:Object(l["e"])("listProjects","selectedOntologies","availableOntologies"),selectedRoles:Object(l["e"])("listProjects","selectedRoles","availableRoles"),selectedTags:Object(l["e"])("listProjects","selectedTags","availableTags"),boundsMembers:Object(l["c"])("listProjects","boundsMembers","maxNbMembers"),boundsImages:Object(l["c"])("listProjects","boundsImages","maxNbImages"),boundsUserAnnotations:Object(l["c"])("listProjects","boundsUserAnnotations","maxNbUserAnnotations"),boundsJobAnnotations:Object(l["c"])("listProjects","boundsJobAnnotations","maxNbJobAnnotations"),boundsReviewedAnnotations:Object(l["c"])("listProjects","boundsReviewedAnnotations","maxNbReviewedAnnotations"),nbActiveFilters:function(){return this.$store.getters["listProjects/nbActiveFilters"]},nbEmptyFilters:function(){return this.$store.getters["listProjects/nbEmptyFilters"]},selectedOntologiesIds:function(){return this.selectedOntologies.map((function(e){return e.id}))},boundsFilters:function(){return[{prop:"numberOfImages",bounds:this.boundsImages,max:this.maxNbImages},{prop:"membersCount",bounds:this.boundsMembers,max:this.maxNbMembers},{prop:"numberOfAnnotations",bounds:this.boundsUserAnnotations,max:this.maxNbUserAnnotations},{prop:"numberOfJobAnnotations",bounds:this.boundsJobAnnotations,max:this.maxNbJobAnnotations},{prop:"numberOfReviewedAnnotations",bounds:this.boundsReviewedAnnotations,max:this.maxNbReviewedAnnotations}]},projectCollection:function(){var e=new p["ProjectCollection"]({withMembersCount:!0,withLastActivity:!0,withCurrentUserRoles:!0});this.selectedOntologiesIds.length>0&&this.selectedOntologiesIds.length<this.availableOntologies.length&&(e["ontology"]={in:this.selectedOntologiesIds.join()}),this.selectedRoles.length>0&&(e["currentUserRole"]={in:this.selectedRoles.join().toLowerCase()}),this.searchString&&(e["name"]={ilike:encodeURIComponent(this.searchString)}),this.selectedTags.length>0&&this.selectedTags.length<this.availableTags.length&&(e["tag"]={in:this.selectedTags.map((function(e){return e.id})).join()});var t,n=Object(z["a"])(this.boundsFilters);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=a.prop,i=a.bounds,o=a.max;e[r]={},i[1]!==o&&(e[r]={lte:i[1]}),i[0]>0&&(e[r]["gte"]=i[0])}}catch(s){n.e(s)}finally{n.f()}return e},currentPage:Object(l["b"])("listProjects/currentPage"),perPage:Object(l["b"])("listProjects/perPage"),sortField:Object(l["b"])("listProjects/sortField"),sortOrder:Object(l["b"])("listProjects/sortOrder"),openedDetails:Object(l["b"])("listProjects/openedDetails")},watch:{revision:function(){this.fetchOntologies(),this.fetchMaxFilters()},querySearchTags:function(e){if(e){this.selectedTags=[];var t=this.availableTags.filter((function(t){return e.split(",").includes(t.name)}));t&&(this.selectedTags=t)}}},methods:{fetchOntologies:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["OntologyCollection"].fetchAll({light:!0});case 2:n=t.sent.array,n.sort((function(e,t){return e.name.localeCompare(t.name)})),e.ontologies=n;case 5:case"end":return t.stop()}}),t)})))()},fetchMaxFilters:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new p["ProjectCollection"].fetchBounds({withMembersCount:!0});case 2:n=t.sent,e.maxNbMembers=Math.max(10,n.members.max),e.maxNbImages=Math.max(10,n.numberOfImages.max),e.maxNbUserAnnotations=Math.max(100,n.numberOfAnnotations.max),e.maxNbJobAnnotations=Math.max(100,n.numberOfJobAnnotations.max),e.maxNbReviewedAnnotations=Math.max(100,n.numberOfReviewedAnnotations.max);case 8:case"end":return t.stop()}}),t)})))()},fetchTags:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=[{id:"null",name:e.$t("no-tag")}],t.t1=L["a"],t.next=4,p["TagCollection"].fetchAll();case 4:t.t2=t.sent.array,t.t3=(0,t.t1)(t.t2),e.availableTags=t.t0.concat.call(t.t0,t.t3);case 7:case"end":return t.stop()}}),t)})))()},toggleFilterDisplay:function(){this.filtersOpened=!this.filtersOpened},updateProject:function(){this.revision++},deleteProject:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.delete();case 3:t.revision++,t.$notify({type:"success",text:t.$t("notif-success-project-deletion",{projectName:e.name})}),n.next=11;break;case 7:return n.prev=7,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-project-deletion",{projectName:e.name})}),n.abrupt("return");case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.fetchOntologies(),e.fetchMaxFilters(),e.fetchTags()]);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.error=!0;case 8:e.$route.query.tags&&(n=e.availableTags.filter((function(t){return e.$route.query.tags.split(",").includes(t.name)})),n&&(e.selectedTags=n)),e.loading=!1;case 10:case"end":return t.stop()}}),t,null,[[0,5]])})))()}},ut=lt,dt=(n("503a"),n("1060"),Object(C["a"])(ut,R,U,!1,null,"719f2815",null)),pt=dt.exports,mt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"storage-wrapper content-wrapper"},[t("div",{staticClass:"panel"},[t("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("upload"))+" ")]),e.newUploadError?t("div",{staticClass:"panel-block"},[t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("error-cannot-upload"))+" ")])],1):t("div",{staticClass:"panel-block"},[t("b-message",{attrs:{type:"is-info","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(e._s(e.$t("important-notes")))]),t("ul",{staticClass:"small-text"},[t("li",[e._v(" "+e._s(e.$t("allowed-formats-upload-info"))+" "),e.formatInfos.length?e._l(e.formatInfos,(function(n,a){return t("span",{key:n.id},[e._v(" "+e._s(n.name)),n.remarks?t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(n.remarks))])]},proxy:!0}],null,!0)},[t("i",{staticClass:"fas fa-info-circle"})]):e._e(),a<e.formatInfos.length-1?[e._v(", ")]:e._e()],2)})):e._e()],2),t("li",[e._v(e._s(e.$t("drag-drop-upload-info",{labelButton:e.$t("add-files")})))]),t("li",[e._v(e._s(e.$t("link-to-project-upload-info")))])])]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter has-text-right"},[t("strong",[e._v(e._s(e.$t("storage")))])]),t("div",{staticClass:"column is-half"},[t("cytomine-multiselect",{attrs:{options:e.storages,label:"extendedName","track-by":"id","allow-empty":!1},scopedSlots:e._u([{key:"option",fn:function(t){var n=t.option;return[e._v(" "+e._s(n.extendedName)+" "),e.currentUser.isDeveloper?[e._v(" ("+e._s(e.$t("id"))+": "+e._s(n.id)+") ")]:e._e()]}}]),model:{value:e.selectedStorage,callback:function(t){e.selectedStorage=t},expression:"selectedStorage"}})],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter has-text-right"},[t("strong",[e._v(e._s(e.$t("link-with-project")))])]),t("div",{staticClass:"column is-half"},[t("cytomine-multiselect",{attrs:{options:e.projects,label:"name","track-by":"id",multiple:!0,"close-on-select":!0},model:{value:e.selectedProjects,callback:function(t){e.selectedProjects=t},expression:"selectedProjects"}})],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter has-text-right"},[t("strong",[e._v(e._s(e.$t("files")))])]),t("div",{staticClass:"column is-half"},[e.dropFiles.length>0?t("table",{staticClass:"table is-fullwidth upload-table"},[t("tbody",e._l(e.dropFiles,(function(n,a){return t("tr",{key:a},[t("td",[e._v(e._s(n.file.name))]),t("td",[e._v(e._s(e.filesize(n.file.size)))]),null===n.uploadedFile?[t("td",[t("progress",{staticClass:"progress is-info",attrs:{max:"100"},domProps:{value:n.progress}},[e._v(" "+e._s(n.progress)+"% ")])]),t("td",[t("div",{staticClass:"field is-grouped"},[t("p",{staticClass:"control"},[t("button",{staticClass:"button is-link",on:{click:function(t){return e.startUpload(n)}}},[e._v(" "+e._s(e.$t("button-start"))+" ")])]),t("p",{staticClass:"control"},[t("button",{staticClass:"button",on:{click:function(t){return e.cancelUpload(a)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")])])])])]:[t("td",[n.uploadedFile?t("uploaded-file-status",{attrs:{file:n.uploadedFile}}):t("span",{staticClass:"tag is-danger"},[e._v(" "+e._s(e.$t("upload-error"))+" ")])],1),t("td",[t("p",{staticClass:"control"},[t("button",{staticClass:"button",on:{click:function(t){return e.cancelUpload(a)}}},[e._v(e._s(e.$t("button-hide")))])])])]],2)})),0)]):t("em",{staticClass:"first-child-like has-text-grey"},[e._v(e._s(e.$t("no-file")))])])]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-half flex-column is-offset-one-quarter"},[e.ongoingUpload?t("progress",{staticClass:"progress is-success",attrs:{max:"100"},domProps:{value:e.overallProgress}},[e._v(" "+e._s(e.overallProgress)+"% ")]):e._e(),t("div",{staticClass:"buttons"},[t("b-upload",{attrs:{value:e.plainFiles,type:"is-link",multiple:"","drag-drop":""},on:{input:e.filesChange}},[t("a",{staticClass:"button is-success"},[e._v(e._s(e.$t("add-files")))])]),t("button",{staticClass:"button is-link",attrs:{disabled:!e.filesPendingUpload},on:{click:function(t){return e.startAll()}}},[e._v(" "+e._s(e.$t("start-upload"))+" ")]),t("button",{staticClass:"button",attrs:{disabled:!e.filesPendingUpload&&!e.ongoingUpload},on:{click:function(t){return e.cancelAll()}}},[e._v(" "+e._s(e.$t("cancel-upload"))+" ")]),e.filesFinishedUpload?t("button",{staticClass:"button",on:{click:function(t){return e.hideFinished()}}},[e._v(" "+e._s(e.$t("hide-successful-upload"))+" ")]):e._e()],1)])])],1)]),t("div",{staticClass:"panel"},[t("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("storage"))+" ")]),t("div",{staticClass:"panel-block storage"},[t("b-input",{staticClass:"search-uploaded-file",attrs:{value:e.searchString,placeholder:e.$t("search-placeholder"),icon:"search"},on:{input:e.debounceSearchString}}),t("cytomine-table",{attrs:{collection:e.uploadedFileCollection,sort:"created",order:"desc",revision:e.revision,refreshInterval:e.tableRefreshInterval,openedDetailed:e.openedDetails},on:{"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t}},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{staticClass:"image-overview",attrs:{label:e.$t("preview"),width:"80"}},[a.thumbURL?t("image-thumbnail",{key:a.thumbURL,attrs:{url:a.thumbURL,size:128,"extra-parameters":{Authorization:"Bearer "+e.shortTermToken}}}):t("div",{staticClass:"is-size-7 has-text-grey"},[e._v(e._s(e.$t("no-preview-available")))])],1),t("b-table-column",{attrs:{field:"originalFilename",label:e.$t("filename"),sortable:"",width:"200"}},[e._v(" "+e._s(a.originalFilename)+" ")]),t("b-table-column",{attrs:{field:"created",label:e.$t("created"),sortable:"",width:"150"}},[e._v(" "+e._s(e._f("moment")(Number(a.created),"lll"))+" ")]),t("b-table-column",{attrs:{field:"size",label:e.$t("size"),sortable:"",width:"80"}},[e._v(" "+e._s(e.filesize(a.size))+" ")]),t("b-table-column",{attrs:{field:"status",label:e.$t("status"),sortable:"",width:"80"}},[t("uploaded-file-status",{attrs:{file:a}})],1)]}},{key:"detail",fn:function(n){var a=n.row;return[t("uploaded-file-details",{key:a.id,attrs:{file:a},on:{update:function(t){return e.updatedTree()}}})]}},{key:"empty",fn:function(){return[t("p",[e._v(e._s(e.$t("no-uploaded-file")))])]},proxy:!0}])})],1)])])},ft=[],ht=(n("a434"),n("bc3a")),gt=n.n(ht),vt=n("49d5"),bt=n.n(vt),yt=n("2ef0"),wt=n.n(yt),jt=function(){var e=this,t=e._self._c;return e.iconOnly?t("span",{class:["icon",e.textClass]},[t("i",{class:["fas",e.iconClass],attrs:{title:e.$t(e.labels[e.file.status])}})]):t("div",[e.isSuccessful&&void 0!==e.file.nbChildren?t("div",{staticClass:"tags has-addons"},[t("span",{staticClass:"tag",class:e.tagClass},[e._v(e._s(e.$t(e.labels[e.file.status])))]),t("span",{staticClass:"tag is-light"},[e._v(e._s(e.$tc("count-files",e.file.nbChildren+1,{count:e.file.nbChildren+1})))])]):t("span",{staticClass:"tag",class:e.tagClass},[e._v(" "+e._s(e.$t(e.labels[e.file.status]))+" ")])])},kt=[],_t=n("ade3"),xt={name:"uploaded-file-status",props:{file:Object,iconOnly:{type:Boolean,default:!1}},computed:{isSuccessful:function(){return this.file.status===p["UploadedFileStatus"].CONVERTED||this.file.status===p["UploadedFileStatus"].DEPLOYED},labels:function(){var e;return e={},Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(e,p["UploadedFileStatus"].UPLOADED,"uploaded"),p["UploadedFileStatus"].CONVERTED,"converted"),p["UploadedFileStatus"].DEPLOYED,"deployed"),p["UploadedFileStatus"].ERROR_FORMAT,"error-format"),p["UploadedFileStatus"].ERROR_CONVERSION,"error-convert"),p["UploadedFileStatus"].EXTRACTED,"uncompressed"),p["UploadedFileStatus"].ERROR_DEPLOYMENT,"error-deployment"),p["UploadedFileStatus"].DETECTING_FORMAT,"detecting-format"),p["UploadedFileStatus"].EXTRACTING_DATA,"extracting-data"),p["UploadedFileStatus"].ERROR_EXTRACTION,"error-extraction"),Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(e,p["UploadedFileStatus"].CONVERTING,"converting"),p["UploadedFileStatus"].DEPLOYING,"deploying"),50,"unpacking"),51,"error-unpacking"),60,"checking-integrity"),61,"error-integrity"),106,"unpacked")},result:function(){switch(this.file.status){case p["UploadedFileStatus"].UPLOADED:case p["UploadedFileStatus"].DETECTING_FORMAT:case p["UploadedFileStatus"].EXTRACTING_DATA:case p["UploadedFileStatus"].CONVERTING:case p["UploadedFileStatus"].DEPLOYING:case p["UploadedFileStatus"].EXTRACTED:case 50:case 60:return"info";case p["UploadedFileStatus"].CONVERTED:case p["UploadedFileStatus"].DEPLOYED:case 106:return"success";case p["UploadedFileStatus"].ERROR_FORMAT:case p["UploadedFileStatus"].ERROR_CONVERSION:case p["UploadedFileStatus"].ERROR_DEPLOYMENT:case p["UploadedFileStatus"].ERROR_EXTRACTION:case 51:case 61:return"danger";default:return null}},tagClass:function(){return"is-"+this.result},textClass:function(){return"has-text-"+this.result},iconClass:function(){switch(this.result){case"info":return"fa-spinner";case"success":return"fa-check-square";case"danger":return"fa-times-circle"}}}},Ct=xt,Ot=(n("27a4"),Object(C["a"])(Ct,jt,kt,!1,null,"3b65473a",null)),$t=Ot.exports,Tt=function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v(" "+e._s(e.$t("file-tree"))+" ")]),e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small",size:"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):t("sl-vue-tree",{attrs:{allowMultiselect:!1},scopedSlots:e._u([{key:"toggle",fn:function(n){var a=n.node;return[a.isLeaf?e._e():[t("i",{class:["tree-toggle","fas",a.isExpanded?"fa-angle-down":"fa-angle-right"]})]]}},{key:"title",fn:function(n){var a=n.node;return[t("p",{class:{"target-element":a.data.id===e.file.id}},[e._v(e._s(a.title))])]}},{key:"sidebar",fn:function(n){var a=n.node;return[t("div",{staticClass:"filesize"},[e._v(" "+e._s(e.filesize(a.data.size))+" ")]),t("div",{staticClass:"status"},[t("uploaded-file-status",{attrs:{file:a.data,iconOnly:!0}})],1),t("div",{staticClass:"buttons"},[t("a",{staticClass:"button is-small is-link",on:{click:function(t){return e.download(a.data)}}},[e._v(" "+e._s(e.$t("button-download"))+" ")]),t("button",{staticClass:"button is-small is-danger",on:{click:function(t){return e.confirmDeletion(a.data)}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")])]),t("p",{staticClass:"preview"},[a.data.thumbURL?t("a",{on:{click:function(t){e.samplePreview=a.data}}},[e._v(" "+e._s(e.$t("sample-preview"))+" ")]):e._e(),a.data.thumbURL&&a.data.macroURL?t("span",[e._v("/")]):e._e(),a.data.macroURL?t("a",{on:{click:function(t){e.slidePreview=a.data}}},[e._v(" "+e._s(e.$t("slide-preview"))+" ")]):e._e()])]}}]),model:{value:e.nodes,callback:function(t){e.nodes=t},expression:"nodes"}}),e.nbUploadedFiles>10?[t("div",{staticClass:"level"},[t("b-select",{staticClass:"level-left",attrs:{size:"is-small"},model:{value:e.nbPerPage,callback:function(t){e.nbPerPage=t},expression:"nbPerPage"}},[t("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),t("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),t("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),t("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])]),t("b-pagination",{staticClass:"level-right",attrs:{total:e.nbUploadedFiles,current:e.currentPage,size:"is-small","per-page":e.nbPerPage},on:{"update:current":function(t){e.currentPage=t}}})],1)]:e._e(),e.samplePreview?[t("h2",[e._v(" "+e._s(e.$t("sample-preview-of",{filename:e.samplePreview.originalFilename}))+" "),t("button",{staticClass:"button is-small",on:{click:function(t){e.samplePreview=null}}},[e._v(e._s(e.$t("button-hide")))])]),t("image-thumbnail",{key:e.samplePreview.thumbURL,attrs:{url:e.samplePreview.thumbURL,size:512,"extra-parameters":{Authorization:"Bearer "+e.shortTermToken}}})]:e.slidePreview?[t("h2",[e._v(" "+e._s(e.$t("slide-preview-of",{filename:e.slidePreview.originalFilename}))+" "),t("button",{staticClass:"button is-small",on:{click:function(t){e.slidePreview=null}}},[e._v(e._s(e.$t("button-hide")))])]),t("image-thumbnail",{key:e.slidePreview.macroURL,attrs:{url:e.slidePreview.macroURL,size:512,macro:!0,"extra-parameters":{Authorization:"Bearer "+e.shortTermToken}}})]:e._e()],2)},St=[],Pt=n("c536"),At=n.n(Pt),It=function(){var e=this,t=e._self._c;return t("picture",[t("source",{attrs:{srcset:e.webpSrc,type:"image/webp"}}),t("source",{attrs:{srcset:e.jpegSrc,type:"image/jpeg"}}),t("img",{staticClass:"image-thumbnail",attrs:{src:e.jpegSrc,alt:""}})])},Dt=[],Et=n("3835"),Nt=(n("4fad"),{name:"ImageThumbnail",props:{image:{type:Object,default:function(){}},macro:{type:Boolean,default:!1},url:{type:String,default:null},size:{type:Number},extraParameters:{type:Object,default:function(){}}},computed:{jpegSrc:function(){return this.formatSrc("jpg")},webpSrc:function(){return this.formatSrc("webp")},splitURL:function(){if(null===this.url)return[];var e=y(this.url);if(e.params.set("maxSize",this.size.toString()),this.extraParameters)for(var t=0,n=Object.entries(this.extraParameters);t<n.length;t++){var a=Object(Et["a"])(n[t],2),r=a[0],i=a[1];e.params.set(r,i.toString())}return e}},methods:{combineURL:function(e){var t=e.host,n=e.pathname,a=e.format,r=e.params;return w({host:t,pathname:n,format:a,params:r})},formatSrc:function(e){return null!==this.url?this.combineURL(Object(h["a"])({format:e},this.splitURL)):this.macro?this.image.associatedImageURL("macro",this.size,e,this.extraParameters):this.image.thumbURL(this.size,e,this.extraParameters)}}}),Mt=Nt,Rt=Object(C["a"])(Mt,It,Dt,!1,null,"bcf10388",null),Ut=Rt.exports,zt={name:"uploaded-file-details",components:{ImageThumbnail:Ut,SlVueTree:At.a,UploadedFileStatus:$t},props:{file:Object},data:function(){return{rootId:null,uploadedFiles:[],nodes:[],image:null,slidePreview:null,samplePreview:null,error:!1,nbUploadedFiles:0,currentPage:1,nbPerPage:10}},computed:{shortTermToken:Object(l["a"])("currentUser/shortTermToken"),collection:function(){return new p["UploadedFileCollection"]({root:this.rootId,max:this.nbPerPage})}},watch:{file:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.findRoot(),t.next=3,Promise.all([e.fetchAbstractImage(),e.makeTree()]);case 3:case"end":return t.stop()}}),t)})))()},currentPage:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.findRoot(),t.next=3,e.makeTree();case 3:case"end":return t.stop()}}),t)})))()},collection:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.makeTree();case 2:case"end":return t.stop()}}),t)})))()},slidePreview:function(e){e&&(this.samplePreview=null)},samplePreview:function(e){e&&(this.slidePreview=null)}},methods:{appendShortTermToken:k["a"],findRoot:function(){this.rootId=this.file.root||this.file.id},fetchAbstractImage:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.file.image||e.file.status!==p["UploadedFileStatus"].CONVERTED&&e.file.status!==p["UploadedFileStatus"].DEPLOYED){t.next=10;break}return t.prev=1,t.next=4,p["AbstractImage"].fetch(e.file.image);case 4:e.image=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.error=!0;case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()},makeTree:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.collection.fetchPage(e.currentPage-1);case 3:return n=t.sent,e.uploadedFiles=n.array,e.nbUploadedFiles=n.totalNbItems,t.next=8,e.createNodes(null);case 8:e.nodes=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.error=!0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},createNodes:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.uploadedFiles.filter((function(t){return t.parent===e})),0!==a.length||null!==e){n.next=6;break}return r=t.uploadedFiles[0].lTree.split("."),n.next=5,Promise.all(r.slice(0,r.length-1).map(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(n){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t.uploadedFiles,e.next=3,p["UploadedFile"].fetch(n);case 3:e.t1=e.sent,e.t0.unshift.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return n.abrupt("return",t.createNodes(null));case 6:return n.next=8,Promise.all(a.map(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(n){var a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.createNodes(n.id);case 2:return a=e.sent,e.abrupt("return",{title:n.originalFilename,isLeaf:0===a.length,isDraggable:!1,isExpanded:!0,data:Object(h["a"])({downloadURL:n.downloadURL},n),children:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}}),n)})))()},filesize:function(e){return bt()(e,{base:10})},confirmDeletion:function(e){var t=this;this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-file"),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.deleteFile(e)}})},deleteFile:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p["UploadedFile"].delete(e.id);case 3:t.$emit("update"),n.next=11;break;case 6:n.prev=6,n.t0=n["catch"](0),a=n.t0.response.data.errorValues,r=a&&a.projectNames&&a.imageNames?t.$t("notif-error-delete-used-uploaded-file",{projects:a.projectNames.join(", "),names:a.imageNames.join(", ")}):t.$t("notif-error-delete-uploaded-file"),t.$notify({type:"error",text:r});case 11:case"end":return n.stop()}}),n,null,[[0,6]])})))()},download:function(e){window.location.assign(Object(k["a"])(e.downloadURL,this.shortTermToken))}},created:function(){this.findRoot(),this.fetchAbstractImage()}},Lt=zt,Ft=(n("de23"),Object(C["a"])(Lt,Tt,St,!1,null,"030ffa62",null)),Bt=Ft.exports,qt={name:"cytomine-storage",components:{ImageThumbnail:Ut,CytomineMultiselect:ee,"uploaded-file-status":$t,UploadedFileDetails:Bt,CytomineTable:G},data:function(){return{loading:!0,newUploadError:!1,timeoutRefreshSessionUploads:null,tableRefreshInterval:I["a"].STORAGE_REFRESH_INTERVAL,storages:[],selectedStorage:null,projects:[],selectedProjects:[],formatInfos:[],searchString:"",openedDetails:[],dropFiles:[],signature:"",signatureDate:"",revision:0}},computed:{currentUser:Object(l["a"])("currentUser/user"),shortTermToken:Object(l["a"])("currentUser/shortTermToken"),finishedStatus:function(){return[p["UploadedFileStatus"].CONVERTED,p["UploadedFileStatus"].DEPLOYED]},ongoingUpload:function(){return this.dropFiles.some((function(e){return e.uploading}))},filesPendingUpload:function(){return this.dropFiles.some((function(e){return!e.uploading&&null===e.uploadedFile}))},filesFinishedUpload:function(){var e=this;return this.dropFiles.some((function(t){return!t.uploading&&null!==t.uploadedFile&&e.finishedStatus.includes(t.uploadedFile.status)}))},overallProgress:function(){var e=0,t=0;return this.dropFiles.forEach((function(n){n.uploading&&(e++,t+=n.progress)})),Math.floor(t/e)},uri:function(){return"/upload"},queryString:function(){var e="cytomine=".concat(I["a"].CYTOMINE_CORE_HOST);return this.selectedStorage&&(e+="&idStorage=".concat(this.selectedStorage.id)),this.selectedProjects&&(e+="&idProject=".concat(this.selectedProjects.map((function(e){return e.id})).join(","))),e},plainFiles:function(){return this.dropFiles.map((function(e){return e.file}))},uploadedFileCollection:function(){return new p["UploadedFileCollection"]({onlyRootsWithDetails:!0,originalFilename:{ilike:encodeURIComponent(this.searchString)}})}},watch:{queryString:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.signatureDate=(new Date).toISOString(),t.prev=1,t.next=4,p["Cytomine"].instance.fetchSignature({uri:e.uri,queryString:e.queryString,method:"POST",date:e.signatureDate});case 4:e.signature=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.newUploadError=!0;case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()}},methods:{fetchStorages:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["StorageCollection"].fetchAll();case 3:e.storages=t.sent.array,e.storages.forEach((function(t){t.extendedName=t.name,e.currentUser.isDeveloper&&(t.extendedName+=" "+e.$t("id")+": "+t.id)})),e.selectedStorage=e.storages.find((function(t){return t.user===e.currentUser.id})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.newUploadError=!0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},fetchProjects:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["ProjectCollection"].fetchAll();case 3:e.projects=t.sent.array,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()},fetchFormatInfos:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["Cytomine"].instance.api.get("imageserver/format.json");case 3:e.formatInfos=t.sent.data.collection,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()},refreshStatusSessionUploads:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[p["UploadedFileStatus"].UPLOADED,p["UploadedFileStatus"].DETECTING_FORMAT,p["UploadedFileStatus"].EXTRACTING_DATA,p["UploadedFileStatus"].CONVERTING,p["UploadedFileStatus"].DEPLOYING,50,60],a=!1,r=!1,t.prev=3,t.next=6,Promise.all(e.dropFiles.map(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){var i,o;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.uploadedFile){e.next=9;break}if(i=t.uploadedFile.status,n.includes(i)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.uploadedFile.fetch();case 6:o=t.uploadedFile.status,o!==i&&(r=!0),n.includes(o)&&(a=!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t["catch"](3),t.abrupt("return");case 11:r&&e.revision++,a&&(clearTimeout(e.timeoutRefreshSessionUploads),e.timeoutRefreshSessionUploads=setTimeout(e.refreshStatusSessionUploads,I["a"].ONGOING_UPLOAD_REFRESH_INTERVAL));case 13:case"end":return t.stop()}}),t,null,[[3,8]])})))()},filesChange:function(e){var t=this;e.forEach((function(e){e.processed||(e.processed=!0,t.dropFiles.push({file:e,uploading:!1,progress:0,uploadedFile:null,cancelToken:null}))}))},filesize:function(e){return e?bt()(e,{base:10}):null},startUpload:function(e){var t=this;if(!e.uploading&&null===e.uploadedFile){var n=new FormData;n.append("files[]",e.file),e.cancelToken=gt.a.CancelToken.source(),e.uploading=!0,gt.a.post(I["a"].CYTOMINE_UPLOAD_HOST+this.uri+"?"+this.queryString,n,{headers:{authorization:"CYTOMINE ".concat(this.currentUser.publicKey,":").concat(this.signature),dateFull:this.signatureDate,"content-type-full":"null"},onUploadProgress:function(t){e.progress=Math.floor(100*t.loaded/t.total)},cancelToken:e.cancelToken.token}).then((function(n){e.uploadedFile=new p["UploadedFile"](n.data[0].uploadedFile),t.refreshStatusSessionUploads(),t.revision++})).catch((function(t){gt.a.isCancel(t)||(e.uploadedFile=!1)})).finally((function(){return e.uploading=!1}))}},startAll:function(){var e=this;this.dropFiles.forEach((function(t){return e.startUpload(t)}))},cancelUpload:function(e){var t=this.dropFiles[e];t.cancelToken&&t.cancelToken.cancel(),this.dropFiles.splice(e,1)},cancelAll:function(){for(var e=this.dropFiles.length,t=0,n=0;n<e;n++)null!==this.dropFiles[t].uploadedFile?t++:this.cancelUpload(t)},hideFinished:function(){for(var e=this.dropFiles.length,t=0,n=0;n<e;n++){var a=this.dropFiles[t].uploadedFile;null!==a&&this.finishedStatus.includes(a.status)?this.cancelUpload(t):t++}},updatedTree:function(){this.revision++},debounceSearchString:wt.a.debounce(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.searchString=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),500)},activated:function(){this.fetchStorages(),this.fetchProjects(),this.fetchFormatInfos(),this.refreshStatusSessionUploads(),this.tableRefreshInterval=I["a"].STORAGE_REFRESH_INTERVAL},deactivated:function(){clearTimeout(this.timeoutRefreshSessionUploads),this.tableRefreshInterval=0}},Vt=qt,Wt=(n("40b7"),n("3666"),Object(C["a"])(Vt,mt,ft,!1,null,"ffdbda6e",null)),Gt=Wt.exports,Ht=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[e.ontologies?e.ontologies.length>0?t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("div",{staticClass:"panel"},[t("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("ontologies"))+" "),e.currentUser.guestByNow?e._e():t("button",{staticClass:"button is-link",on:{click:function(t){e.creationModal=!0}}},[e._v(" "+e._s(e.$t("new-ontology"))+" ")])]),t("div",{staticClass:"panel-block"},[t("b-input",{attrs:{size:"is-small",type:"search",icon:"search",placeholder:e.$t("search-placeholder")},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),t("div",{staticClass:"panel-main-content"},e._l(e.filteredOntologies,(function(n){return t("a",{key:n.id,staticClass:"panel-block",class:{"is-active":e.isSelected(n)},on:{click:function(t){return e.selectOntology(n)}}},[t("span",{staticClass:"panel-icon"},[e.isSelected(n)?t("i",{staticClass:"fas fa-caret-right",attrs:{"aria-hidden":"true"}}):e._e()]),e._v(" "+e._s(n.name)+" ")])})),0)])]),t("div",{staticClass:"column"},[t("div",{staticClass:"panel"},[t("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.selectedOntology?e.selectedOntology.name:e.$t("not-found"))+" ")]),t("div",{staticClass:"panel-block panel-main-content"},[e.selectedOntology?t("ontology-details",{attrs:{ontology:e.selectedOntology},on:{delete:function(t){return e.deleteOntology()},rename:e.renameOntology}}):t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("not-found-error"))+" ")])],1)])])]):t("div",{staticClass:"box error"},[t("div",{staticClass:"columns"},[t("p",{staticClass:"column"},[e._v(e._s(e.$t("dont-have-access-to-any-ontology")))]),t("p",{staticClass:"column has-text-right"},[e.currentUser.guestByNow?e._e():t("button",{staticClass:"button is-link",on:{click:function(t){e.creationModal=!0}}},[e._v(" "+e._s(e.$t("new-ontology"))+" ")])])])]):t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(e._s(e.$t("unexpected-error-info-message")))])])],t("add-ontology-modal",{attrs:{active:e.creationModal},on:{"update:active":function(t){e.creationModal=t},newOntology:e.addOntology}})],2)},Jt=[],Kt=(n("c740"),n("ac1f"),n("00b4"),n("b910")),Yt=function(){var e=this,t=e._self._c;return t("div",[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")]):e.loading?e._e():t("div",{staticClass:"ontology-details-wrapper"},[t("table",{staticClass:"table is-fullwidth"},[t("tbody",[t("tr",[t("td",{attrs:{colspan:"2"}},[t("strong",[e._v(e._s(e.$t("terms")))]),t("b-message",{attrs:{type:"is-info","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("hierarchical-drag-drop-term"))+" ")]),t("ontology-tree",{attrs:{ontology:e.fullOntology,allowSelection:!1,allowDrag:e.canEdit,allowEdition:e.canEdit},scopedSlots:e._u([{key:"no-result",fn:function(){return[t("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("no-term")))])]},proxy:!0}])})],1)]),e.currentUser.isDeveloper?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("id")))])]),t("td",[e._v(e._s(e.ontology.id))])]):e._e(),t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("projects")))])]),t("td",[e.projects.length?e._l(e.projects,(function(n,a){return t("span",{key:n.id},[t("router-link",{attrs:{to:"/project/".concat(n.id)}},[e._v(e._s(n.name))]),a<e.projects.length-1?t("span",[e._v(", ")]):e._e()],1)})):e.nbProjects>0?t("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("used-in-project-no-access"))+" ")]):t("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("not-used-in-any-project"))+" ")])],2)]),t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("creator")))])]),t("td",[e._v(" "+e._s(e.creatorFullname||e.$t("unknown"))+" ")])]),e.canEdit?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("actions")))])]),t("td",[t("div",{staticClass:"buttons"},[t("button",{staticClass:"button",on:{click:function(t){e.isRenameModalActive=!0}}},[e._v(" "+e._s(e.$t("button-rename"))+" ")]),t("button",{staticClass:"button is-danger",attrs:{disabled:e.nbProjects>0,title:e.nbProjects?e.$t("cannot-delete-ontology-with-projects"):""},on:{click:function(t){return e.confirmDeletion()}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")])])])]):e._e()])]),t("rename-modal",{attrs:{title:e.$t("rename-ontology"),currentName:e.ontology.name,active:e.isRenameModalActive},on:{"update:active":function(t){e.isRenameModalActive=t},rename:e.rename}})],1)],1)},Zt=[],Xt=n("11da"),Qt={name:"ontology-details",props:{ontology:Object},components:{OntologyTree:Xt["a"],RenameModal:Ue},data:function(){return{loading:!0,error:!1,fullOntology:{},projects:[],managedProjects:[],creatorFullname:null,isRenameModalActive:!1}},computed:{currentUser:Object(l["a"])("currentUser/user"),canEdit:function(){return!this.currentUser.guestByNow&&(this.currentUser.adminByNow||this.currentUser.id===this.fullOntology.user||this.hasAccessToAllProjects&&(this.allProjectsAreCollaborative||this.manageAllProjects))},nbProjects:function(){return this.fullOntology.projects.length},hasAccessToAllProjects:function(){return this.nbProjects===this.projects.length},allProjectsAreCollaborative:function(){return!this.projects.some((function(e){return e.isRestricted||e.isReadOnly}))},manageAllProjects:function(){var e=this;return!this.projects.some((function(t){return!e.managedProjects.find((function(e){return e.id===t.id}))}))}},watch:{ontology:function(){this.fetchOntology()}},methods:{fetchOntology:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.error=!1,t.prev=2,t.next=5,p["Ontology"].fetch(e.ontology.id);case 5:return e.fullOntology=t.sent,t.next=8,p["ProjectCollection"].fetchAll({filterKey:"ontology",filterValue:e.ontology.id});case 8:e.projects=t.sent.array,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),e.error=!0;case 14:return e.fetchManagedProjects(),t.prev=15,t.next=18,p["User"].fetch(e.fullOntology.user);case 18:n=t.sent,e.creatorFullname=Object(he["a"])(n),t.next=24;break;case 22:t.prev=22,t.t1=t["catch"](15);case 24:e.loading=!1;case 25:case"end":return t.stop()}}),t,null,[[2,11],[15,22]])})))()},fetchManagedProjects:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ProjectCollection"].fetchAll({filterKey:"user",filterValue:e.currentUser.id,light:!0,admin:!0});case 2:e.managedProjects=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},rename:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.ontology.name,n.prev=1,t.fullOntology.name=e,n.next=5,t.fullOntology.save();case 5:t.$notify({type:"success",text:t.$t("notif-success-ontology-rename",{name:t.fullOntology.name})}),t.$emit("rename",e),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),t.$notify({type:"error",text:t.$t("notif-error-ontology-rename",{name:a})});case 12:t.isRenameModalActive=!1;case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))()},confirmDeletion:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-ontology",{name:this.ontology.name}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.$emit("delete")}})}},created:function(){this.fetchOntology()}},en=Qt,tn=(n("4473"),Object(C["a"])(en,Yt,Zt,!1,null,null,null)),nn=tn.exports,an=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.createOntology()}}},[t("cytomine-modal",{attrs:{active:e.active,title:e.$t("create-ontology")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[t("b-field",{attrs:{label:e.$t("name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1)],1)},rn=[],on={name:"add-ontology-modal",props:{active:Boolean},components:{CytomineModal:Ie},$_veeValidate:{validator:"new"},data:function(){return{name:""}},watch:{active:function(e){e&&(this.name="")}},methods:{createOntology:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,new p["Ontology"]({name:e.name}).save();case 8:a=t.sent,e.$notify({type:"success",text:e.$t("notif-success-ontology-creation")}),e.$emit("newOntology",a),e.$emit("update:active",!1),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](5),e.$notify({type:"error",text:e.$t("notif-error-ontology-creation")});case 17:case"end":return t.stop()}}),t,null,[[5,14]])})))()}}},sn=on,cn=Object(C["a"])(sn,an,rn,!1,null,null,null),ln=cn.exports,un={name:"list-ontologies",components:{OntologyDetails:nn,AddOntologyModal:ln},data:function(){return{loading:!0,ontologies:null,selectedOntology:null,creationModal:!1}},computed:{currentUser:Object(l["a"])("currentUser/user"),idTargetOntology:function(){return Number(this.$route.params.idOntology)||this.$store.state.ontologies.selectedOntology},filteredOntologies:function(){if(this.searchString.length>0){var e=Object(Kt["a"])(this.searchString);return this.ontologies.filter((function(t){return e.test(t.name)}))}return this.ontologies},searchString:Object(l["b"])("ontologies/searchString")},watch:{idTargetOntology:function(){this.idTargetOntology?this.selectedOntology&&this.selectedOntology.id===this.idTargetOntology||this.selectTargetOntology():this.selectedOntology=this.ontologies[0]},selectedOntology:function(e){e&&this.$store.commit("ontologies/setSelectedOntology",e.id)}},methods:{selectOntology:function(e){this.selectedOntology=e,this.$router.push("/ontology/".concat(this.selectedOntology.id))},selectTargetOntology:function(){var e=this;this.selectedOntology=this.ontologies.find((function(t){return t.id===e.idTargetOntology}))},isSelected:function(e){return this.selectedOntology&&this.selectedOntology.id===e.id},sortOntologies:function(){this.ontologies.sort((function(e,t){return e.name.localeCompare(t.name)}))},addOntology:function(e){this.ontologies.push(e),this.sortOntologies(),this.selectedOntology=e},renameOntology:function(e){this.selectedOntology.name=e,this.sortOntologies()},deleteOntology:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.ontologies.findIndex((function(t){return t.id===e.selectedOntology.id})),t.prev=1,t.next=4,e.selectedOntology.delete();case 4:e.ontologies.splice(n,1),e.$notify({type:"success",text:e.$t("notif-success-ontology-deletion",{name:e.selectedOntology.name})}),e.selectedOntology=e.ontologies[0],t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$notify({type:"error",text:e.$t("notif-error-ontology-deletion")});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["OntologyCollection"].fetchAll({light:!0});case 3:e.ontologies=t.sent.array,t.next=10;break;case 6:return t.prev=6,t.t0=t["catch"](0),e.loading=!1,t.abrupt("return");case 10:e.sortOntologies(),e.idTargetOntology?e.selectTargetOntology():e.selectedOntology=e.ontologies[0],e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},dn=un,pn=(n("6ed3"),Object(C["a"])(dn,Ht,Jt,!1,null,"efcc5a5e",null)),mn=pn.exports,fn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"list-software-wrapper content-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.error?t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(e._s(e.$t("unexpected-error-info-message")))])]):e.loading?e._e():t("div",{staticClass:"panel"},[t("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("algorithms"))+" ")]),t("div",{staticClass:"panel-block"},[t("div",{staticClass:"search-block"},[t("b-input",{staticClass:"search-softwares",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),t("button",{staticClass:"button",on:{click:function(t){return e.toggleFilterDisplay()}}},[e._m(0),t("span",[e._v(" "+e._s(e.filtersOpened?e.$t("button-hide-filters"):e.$t("button-show-filters"))+" ")]),e.nbActiveFilters?t("span",{staticClass:"nb-active-filters"},[e._v(" "+e._s(e.nbActiveFilters)+" ")]):e._e()])],1),t("b-collapse",{attrs:{open:e.filtersOpened}},[t("div",{staticClass:"filters"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("nb-jobs"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-slider",{attrs:{max:e.maxNbJobs},model:{value:e.boundsJobs,callback:function(t){e.boundsJobs=t},expression:"boundsJobs"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("nb-success-jobs"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-slider",{attrs:{max:e.maxNbSuccessJobs},model:{value:e.boundsSuccessJobs,callback:function(t){e.boundsSuccessJobs=t},expression:"boundsSuccessJobs"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("only-last-release"))+" ")]),t("div",{staticClass:"filter-body"},[t("b-switch",{staticClass:"switch",model:{value:e.onlyLastReleases,callback:function(t){e.onlyLastReleases=t},expression:"onlyLastReleases"}},[e.onlyLastReleases?[e._v(e._s(e.$t("yes")))]:[e._v(e._s(e.$t("no")))]],2)],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("only-UI-runnable"))+" ")]),t("div",{staticClass:"filter-body"},[t("b-switch",{staticClass:"switch",model:{value:e.onlyExecutables,callback:function(t){e.onlyExecutables=t},expression:"onlyExecutables"}},[e.onlyExecutables?[e._v(e._s(e.$t("yes")))]:[e._v(e._s(e.$t("no")))]],2)],1)])])])]),t("b-table",{staticClass:"table-softwares",attrs:{data:e.filteredSoftwares,paginated:!0,"current-page":e.currentPage,"per-page":e.perPage,"pagination-size":"is-small",detailed:"","detail-key":"id","opened-detailed":e.openedDetails,"default-sort":e.sort.field,"default-sort-direction":e.sort.order},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t},sort:e.updateSort},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:"",width:"250"}},[t("router-link",{attrs:{to:"/algorithm/".concat(a.id)}},[e._v(" "+e._s(a.fullName)+" ")])],1),t("b-table-column",{attrs:{field:"softwareStatus",label:e.$t("version"),centered:"",sortable:"",width:"150","custom-sort":e.sortBySoftwareStatus}},[t("software-status",{attrs:{software:a}})],1),t("b-table-column",{attrs:{field:"executable",label:e.$t("ui-runnable"),centered:"",sortable:"",width:"150"}},[t("boolean-item",{attrs:{value:a.executable}})],1),t("b-table-column",{attrs:{field:"numberOfJob",label:e.$t("number-jobs"),centered:"",sortable:"",width:"150"}},[e._v(" "+e._s(a.numberOfJob)+" ")]),t("b-table-column",{attrs:{field:"numberOfSuccess",label:e.$t("number-success"),centered:"",sortable:"",width:"150"}},[e._v(" "+e._s(a.numberOfSuccess)+" ")]),t("b-table-column",{attrs:{field:"created",label:e.$t("creation-date"),centered:"",sortable:"",width:"180"}},[e._v(" "+e._s(e._f("moment")(Number(a.created),"ll"))+" ")]),t("b-table-column",{attrs:{label:" ",centered:"",width:"150"}},[t("router-link",{staticClass:"button is-small is-link",attrs:{to:"/algorithm/".concat(a.id)}},[e._v(" "+e._s(e.$t("button-open"))+" ")])],1)]}},{key:"detail",fn:function(n){var a=n.row;return[t("software-details",{attrs:{software:a,"excluded-properties":e.excludedProperties},on:{update:e.updateSoftware,delete:function(t){return e.deleteSoftware(a)}}})]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-software")))])])]},proxy:!0},{key:"bottom-left",fn:function(){return[t("b-select",{attrs:{size:"is-small"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[t("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),t("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),t("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),t("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}])})],1)])],1)},hn=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-filter"})])}],gn=function(){var e=this,t=e._self._c;return t("span",{staticClass:"tag",class:e.tagClass},[e._v(" "+e._s(e.$t(e.label))+" ")])},vn=[],bn={name:"software-status",props:{software:Object},computed:{tagClass:function(){return this.software.softwareVersion?this.software.deprecated?"is-dark":"is-info":"is-white"},label:function(){return this.software.softwareVersion?this.software.deprecated?"deprecated":"last-release":"no-info"}}},yn=bn,wn=Object(C["a"])(yn,gn,vn,!1,null,"c02fdad2",null),jn=wn.exports,kn=function(){var e=this,t=e._self._c;return e.value?t("span",{staticClass:"tag is-success"},[t("i",{staticClass:"fas fa-check"}),e._v(" "+e._s(e.$t("yes"))+" ")]):t("span",{staticClass:"tag is-danger"},[t("i",{staticClass:"fas fa-times"}),e._v(" "+e._s(e.$t("no"))+" ")])},_n=[],xn={name:"boolean-item",props:{value:Boolean}},Cn=xn,On=Object(C["a"])(Cn,kn,_n,!1,null,"00684474",null),$n=On.exports,Tn=function(){var e=this,t=e._self._c;return e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small",size:"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):t("table",{staticClass:"table"},[t("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():t("tbody",[e.isPropDisplayed("id")&&e.currentUser.isDeveloper?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("id")))]),t("td",{staticClass:"prop-content"},[e._v(e._s(e.software.id))])]):e._e(),e.isPropDisplayed("name")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("name")))]),t("td",{staticClass:"prop-content"},[e._v(" "+e._s(e.software.fullName)+" ")])]):e._e(),e.isPropDisplayed("projects")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("projects")))]),t("td",{staticClass:"prop-content"},[e.projects.length?e._l(e.projects,(function(n,a){return t("span",{key:n.id},[t("router-link",{attrs:{to:"/project/".concat(n.id)}},[e._v(e._s(n.name))]),a<e.projects.length-1?t("span",[e._v(", ")]):e._e()],1)})):e.nbProjects>0?t("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("used-in-project-no-access"))+" ")]):t("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("not-used-in-any-project"))+" ")])],2)]):e._e(),e.isPropDisplayed("trustedSource")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("trusted-source")))]),t("td",{staticClass:"prop-content"},[t("software-source",{attrs:{source:e.source}})],1)]):e._e(),e.isPropDisplayed("description")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("description")))]),t("td",{staticClass:"prop-content"},[t("cytomine-description",{attrs:{object:e.software,canEdit:e.canManageSoftware}})],1)]):e._e(),e.isPropDisplayed("attachedFiles")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("attached-files")))]),t("td",{staticClass:"prop-content"},[t("attached-files",{attrs:{object:e.software,canEdit:e.canManageSoftware}})],1)]):e._e(),e.isPropDisplayed("status")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("status")))]),t("td",{staticClass:"prop-content"},[t("software-status",{attrs:{software:e.software}})],1)]):e._e(),e.isPropDisplayed("executable")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("ui-runnable")))]),t("td",{staticClass:"prop-content"},[t("boolean-item",{attrs:{value:e.software.executable}})],1)]):e._e(),e.isPropDisplayed("created")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("created-on")))]),t("td",{staticClass:"prop-content"},[e._v(" "+e._s(e._f("moment")(Number(e.software.created),"ll"))+" ")])]):e._e(),e.isPropDisplayed("executeCommand")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("execute-command")))]),t("td",{staticClass:"prop-content"},[t("code",[e._v(e._s(e.software.executeCommand))])])]):e._e(),e.isPropDisplayed("pullingCommand")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("pulling-command")))]),t("td",{staticClass:"prop-content"},[t("code",[e._v(e._s(e.software.pullingCommand))])])]):e._e(),e.source?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("actions")))]),t("td",{staticClass:"prop-content"},[t("software-source-buttons",{attrs:{source:e.source,software:e.software}})],1)]):e._e()])],1)},Sn=[],Pn=function(){var e=this,t=e._self._c;return t("span",[this.source?[e.sourceCodeProviderIcon?t("i",{class:e.sourceCodeProviderIcon}):e._e(),e._v(" "),t("span",{staticClass:"is-capitalized"},[e._v(" "+e._s(e.sourceCodeProvider))]),e._v(" ["+e._s(e.source.username)+"] "),e.source.prefix?[e._v(' (with prefix "'+e._s(e.source.prefix)+'") ')]:e._e(),t("br"),e.environmentProviderIcon?t("i",{class:e.environmentProviderIcon}):e._e(),e._v(" "),t("span",{staticClass:"is-capitalized"},[e._v(" "+e._s(e.environmentProvider))]),e._v(" ["+e._s(e.source.dockerUsername)+"] ")]:[t("em",[e._v(e._s(e.$t("no-trusted-source")))])]],2)},An=[],In={name:"software-source",props:{source:{type:Object,default:null}},data:function(){return{supportedProviders:["github","bitbucket","gitlab","docker"]}},computed:{sourceCodeProvider:function(){var e=this.source?this.formatProvider(this.source.provider):null;return e||this.$t("unknown")},sourceCodeProviderIcon:function(){var e=this.source?this.formatProvider(this.source.provider):null;return e?"fab fa-".concat(e," fa-fw"):null},environmentProvider:function(){var e=this.source?this.formatProvider(this.source.environmentProvider||"docker"):null;return e||this.$t("unknown")},environmentProviderIcon:function(){var e=this.source?this.formatProvider(this.source.environmentProvider||"docker"):null;return e?"fab fa-".concat(e," fa-fw"):null}},methods:{formatProvider:function(e){return e=e.toLowerCase(),this.supportedProviders.includes(e)?e:null}}},Dn=In,En=Object(C["a"])(Dn,Pn,An,!1,null,"d9624584",null),Nn=En.exports,Mn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"buttons are-small"},[t("a",{staticClass:"button",attrs:{href:e.sourceCodeProviderLink,target:"_blank"}},[t("i",{staticClass:"fas fa-external-link-alt fa-fw"}),e._v(" "+e._s(e.$t("see-source-code-on"))+" "),t("span",{staticClass:"is-capitalized"},[e._v(" "+e._s(e.sourceCodeProvider))])]),t("a",{staticClass:"button",attrs:{href:e.environmentProviderLink,target:"_blank"}},[t("i",{staticClass:"fas fa-external-link-alt fa-fw"}),e._v(" "+e._s(e.$t("see-environment-on"))+" "),t("span",{staticClass:"is-capitalized"},[e._v(" "+e._s(e.environmentProvider))])])])},Rn=[],Un={name:"software-source-buttons",props:{source:Object,software:Object},data:function(){return{supportedProviders:["github","bitbucket","gitlab","docker"]}},computed:{sourceCodeProvider:function(){var e=this.formatProvider(this.source.provider);return e||this.$t("unknown")},sourceCodeProviderIcon:function(){var e=this.formatProvider(this.source.provider);return e?"fab fa-".concat(e," fa-fw"):null},sourceCodeProviderLink:function(){var e=this.formatProvider(this.source.provider);return"https://".concat(e,".com/").concat(this.source.username,"/").concat(this.source.prefix).concat(this.software.name,"/tree/").concat(this.software.softwareVersion)},environmentProvider:function(){var e=this.formatProvider(this.source.environmentProvider||"docker");return e||this.$t("unknown")},environmentProviderIcon:function(){var e=this.formatProvider(this.source.environmentProvider||"docker");return e?"fab fa-".concat(e," fa-fw"):null},environmentProviderLink:function(){var e=this.formatProvider(this.source.environmentProvider||"docker");return"docker"===e?"https://hub.docker.com/r/".concat(this.source.dockerUsername,"/").concat(this.source.prefix.toLowerCase()).concat(this.software.name.toLowerCase()):""}},methods:{formatProvider:function(e){return e=e.toLowerCase(),this.supportedProviders.includes(e)?e:null}}},zn=Un,Ln=(n("55ab"),Object(C["a"])(zn,Mn,Rn,!1,null,"470ead4b",null)),Fn=Ln.exports,Bn={name:"software-details",props:{software:Object,excludedProperties:{type:Array,default:function(){return[]}}},components:{SoftwareSourceButtons:Fn,SoftwareSource:Nn,BooleanItem:$n,SoftwareStatus:jn,CytomineDescription:qe["a"],CytomineProperties:Ve["a"],AttachedFiles:Ge["a"]},data:function(){return{loading:!0,error:!1,projects:[],source:null}},computed:{currentUser:Object(l["a"])("currentUser/user"),canManageSoftware:function(){return this.currentUser.adminByNow},nbProjects:function(){return this.projects.length}},watch:{excludedProperties:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:case"end":return t.stop()}}),t)})))()}},methods:{isPropDisplayed:function(e){return!this.excludedProperties.includes(e)},fetchData:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],e.isPropDisplayed("projects")&&n.push(e.fetchProjects()),e.isPropDisplayed("trustedSource")&&n.push(e.fetchSource()),e.loading=!0,e.error=!1,t.prev=5,t.next=8,Promise.all(n);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](5),e.error=!0;case 13:e.loading=!1;case 14:case"end":return t.stop()}}),t,null,[[5,10]])})))()},fetchProjects:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ProjectCollection"].fetchAll({filterKey:"software",filterValue:e.software.id});case 2:e.projects=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},fetchSource:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.software.softwareUserRepository){t.next=6;break}return t.next=3,p["TrustedSource"].fetch(e.software.softwareUserRepository);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=null;case 7:e.source=t.t0;case 8:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchData()}},qn=Bn,Vn=(n("78ff"),Object(C["a"])(qn,Tn,Sn,!1,null,"14cd0d56",null)),Wn=Vn.exports;function Gn(e,t){return e>=t[0]&&e<=t[1]}var Hn={name:"list-software",components:{BooleanItem:$n,SoftwareStatus:jn,CytomineSlider:ce,SoftwareDetails:Wn},data:function(){return{loading:!0,error:!1,creationModal:!1,softwares:[],excludedProperties:["name","created","executable","status","pullingCommand","executeCommand"]}},computed:{currentUser:Object(l["a"])("currentUser/user"),searchString:Object(l["b"])("listSoftware/searchString"),filtersOpened:Object(l["b"])("listSoftware/filtersOpened"),maxNbJobs:function(){return Math.max.apply(Math,[10].concat(Object(L["a"])(this.softwares.map((function(e){return e.numberOfJob})))))},maxNbSuccessJobs:function(){return Math.max.apply(Math,[10].concat(Object(L["a"])(this.softwares.map((function(e){return e.numberOfSuccess})))))},boundsJobs:Object(l["c"])("listSoftware","boundsJobs","maxNbJobs"),boundsSuccessJobs:Object(l["c"])("listSoftware","boundsSuccessJobs","maxNbSuccessJobs"),onlyLastReleases:Object(l["d"])("listSoftware","onlyLastReleases"),onlyExecutables:Object(l["d"])("listSoftware","onlyExecutables"),nbActiveFilters:function(){return this.$store.getters["listSoftware/nbActiveFilters"]},regexp:function(){return Object(Kt["a"])(this.searchString)},filteredSoftwares:function(){var e=this,t=this.softwares;return this.searchString&&(t=t.filter((function(t){return e.regexp.test(t.name)}))),t=t.filter((function(t){return Gn(t.numberOfJob,e.boundsJobs)&&Gn(t.numberOfSuccess,e.boundsSuccessJobs)&&(e.onlyLastReleases&&t.softwareVersion&&!t.deprecated||!e.onlyLastReleases)&&(e.onlyExecutables&&t.executable||!e.onlyExecutables)})),t},currentPage:Object(l["b"])("listSoftware/currentPage"),perPage:Object(l["b"])("listSoftware/perPage"),sort:Object(l["b"])("listSoftware/sort"),openedDetails:{get:function(){return this.$store.state.listSoftware.openedDetails.slice()},set:function(e){this.$store.commit("listSoftware/setOpenedDetails",e)}}},methods:{toggleFilterDisplay:function(){this.filtersOpened=!this.filtersOpened},updateSort:function(e,t){this.sort={field:e,order:t}},sortBySoftwareStatus:function(e,t,n){return(n?1:-1)*(this.getSoftwareStatusValue(e)-this.getSoftwareStatusValue(t))},getSoftwareStatusValue:function(e){return e.softwareVersion?e.deprecated?1:2:0},updateSoftware:function(e){var t=this.softwares.find((function(t){return t.id===e.id}));t&&t.populate(Object(h["a"])({},e))},deleteSoftware:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.delete();case 3:t.softwares=t.softwares.filter((function(t){return t.id!==e.id})),t.$notify({type:"success",text:t.$t("notif-success-algorithm-deletion",{softwareName:e.name})}),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-algorithm-deletion",{softwareName:e.name})});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["SoftwareCollection"].fetchAll();case 3:n=t.sent,e.softwares=n.array,(e.currentPage-1)*e.perPage>=e.filteredSoftwares.length&&(e.currentPage=1),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.error=!0;case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},Jn=Hn,Kn=(n("e6d1"),n("b2fd"),Object(C["a"])(Jn,fn,hn,!1,null,"3fd487a5",null)),Yn=Kn.exports,Zn=function(){var e=this,t=e._self._c;return e.configUI["project-images-tab"]?e.error?t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(e._s(e.$t("unexpected-error-info-message")))])]):t("div",{staticClass:"content-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():t("div",{staticClass:"panel"},[t("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("images"))+" "),e.canAddImage?t("button",{staticClass:"button is-link",on:{click:function(t){e.addImageModal=!0}}},[e._v(" "+e._s(e.$t("button-add-image"))+" ")]):e._e()]),t("div",{staticClass:"panel-block"},[t("div",{staticClass:"search-block"},[t("b-input",{staticClass:"search-images",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),t("button",{staticClass:"button",on:{click:function(t){return e.toggleFilterDisplay()}}},[e._m(0),t("span",[e._v(" "+e._s(e.filtersOpened?e.$t("button-hide-filters"):e.$t("button-show-filters"))+" ")]),e.nbActiveFilters?t("span",{staticClass:"nb-active-filters"},[e._v(" "+e._s(e.nbActiveFilters)+" ")]):e._e()])],1),t("b-collapse",{attrs:{open:e.filtersOpened}},[t("div",{staticClass:"filters"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column filter is-one-quarter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("format"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableFormats,multiple:""},model:{value:e.selectedFormats,callback:function(t){e.selectedFormats=t},expression:"selectedFormats"}})],1)]),t("div",{staticClass:"column filter is-one-quarter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("vendor"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableVendors,multiple:!0,label:"label","track-by":"value"},model:{value:e.selectedVendors,callback:function(t){e.selectedVendors=t},expression:"selectedVendors"}})],1)]),t("div",{staticClass:"column filter is-one-quarter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("tags"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableTags,label:"name","track-by":"id",multiple:!0,allPlaceholder:e.$t("all")},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)])]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("magnification"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableMagnifications,multiple:!0,searchable:!1,label:"label","track-by":"value"},model:{value:e.selectedMagnifications,callback:function(t){e.selectedMagnifications=t},expression:"selectedMagnifications"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("resolution"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableResolutions,multiple:!0,searchable:!1,label:"label","track-by":"value"},model:{value:e.selectedResolutions,callback:function(t){e.selectedResolutions=t},expression:"selectedResolutions"}})],1)]),t("div",{staticClass:"column"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("width"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-slider",{attrs:{max:e.maxWidth},model:{value:e.boundsWidth,callback:function(t){e.boundsWidth=t},expression:"boundsWidth"}})],1)]),t("div",{staticClass:"column"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("height"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-slider",{attrs:{max:e.maxHeight},model:{value:e.boundsHeight,callback:function(t){e.boundsHeight=t},expression:"boundsHeight"}})],1)])]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("user-annotations"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-slider",{attrs:{max:e.maxNbUserAnnotations},model:{value:e.boundsUserAnnotations,callback:function(t){e.boundsUserAnnotations=t},expression:"boundsUserAnnotations"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("analysis-annotations"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-slider",{attrs:{max:e.maxNbJobAnnotations},model:{value:e.boundsJobAnnotations,callback:function(t){e.boundsJobAnnotations=t},expression:"boundsJobAnnotations"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("reviewed-annotations"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-slider",{attrs:{max:e.maxNbReviewedAnnotations},model:{value:e.boundsReviewedAnnotations,callback:function(t){e.boundsReviewedAnnotations=t},expression:"boundsReviewedAnnotations"}})],1)]),t("div",{staticClass:"column filter"})])])]),t("cytomine-table",{attrs:{collection:e.imageCollection,"is-empty":e.nbEmptyFilters>0,currentPage:e.currentPage,perPage:e.perPage,openedDetailed:e.openedDetails,sort:e.sortField,order:e.sortOrder,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t}},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{label:e.$t("overview"),width:"100",visible:e.isPropDisplayed("overview")}},[t("router-link",{attrs:{to:"/project/".concat(a.project,"/image/").concat(a.id)}},[t("image-thumbnail",{key:"".concat(a.id,"-thumb-128"),attrs:{image:a,size:128,"extra-parameters":{Authorization:"Bearer "+e.shortTermToken}}})],1)],1),t("b-table-column",{attrs:{field:e.blindMode?"blindedName":"instanceFilename",label:e.$t("name"),sortable:"",width:"400"}},[t("router-link",{attrs:{to:"/project/".concat(a.project,"/image/").concat(a.id)}},[t("image-name",{attrs:{image:a,showBothNames:""}})],1)],1),t("b-table-column",{attrs:{field:"magnification",label:e.$t("magnification"),centered:"",sortable:"",width:"100"}},[e._v(" "+e._s(a.magnification||e.$t("unknown"))+" ")]),t("b-table-column",{attrs:{field:"numberOfAnnotations",label:e.$t("user-annotations"),centered:"",sortable:"",width:"100"}},[t("router-link",{attrs:{to:"/project/".concat(a.project,"/annotations?image=").concat(a.id,"&type=user")}},[e._v(" "+e._s(a.numberOfAnnotations)+" ")])],1),t("b-table-column",{attrs:{field:"numberOfJobAnnotations",label:e.$t("analysis-annotations"),centered:"",sortable:"",width:"100"}},[t("router-link",{attrs:{to:"/project/".concat(a.project,"/annotations?image=").concat(a.id,"&type=algo")}},[e._v(" "+e._s(a.numberOfJobAnnotations)+" ")])],1),t("b-table-column",{attrs:{field:"numberOfReviewedAnnotations",label:e.$t("reviewed-annotations"),centered:"",sortable:"",width:"100"}},[t("router-link",{attrs:{to:"/project/".concat(a.project,"/annotations?image=").concat(a.id,"&type=reviewed")}},[e._v(" "+e._s(a.numberOfReviewedAnnotations)+" ")])],1),t("b-table-column",{attrs:{label:" ",centered:"",width:"150"}},[t("router-link",{staticClass:"button is-small is-link",attrs:{to:"/project/".concat(a.project,"/image/").concat(a.id)}},[e._v(" "+e._s(e.$t("button-open"))+" ")])],1)]}},{key:"detail",fn:function(n){var a=n.row;return[t("image-details",{attrs:{image:a,excludedProperties:e.excludedProperties,editable:""},on:{delete:e.refreshData,setResolution:e.refreshData,setMagnification:e.refreshData}})]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-image")))])])]},proxy:!0}],null,!1,274706155)})],1),t("add-image-modal",{attrs:{active:e.addImageModal},on:{"update:active":function(t){e.addImageModal=t},addImage:e.refreshData}})],1)],1):t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),t("p",[e._v(e._s(e.$t("insufficient-permission")))])])},Xn=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-filter"})])}],Qn=n("9f17"),ea=(n("b680"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"image-details-wrapper"},[t("table",{staticClass:"table"},[t("tbody",[e.isPropDisplayed("overview")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("overview")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[t("router-link",{attrs:{to:"/project/".concat(e.image.project,"/image/").concat(e.image.id)}},[t("image-thumbnail",{key:"".concat(e.image.id,"-thumb-256"),attrs:{image:e.image,size:256,"extra-parameters":{Authorization:"Bearer "+e.shortTermToken}}})],1)],1)]):e._e(),e.isPropDisplayed("id")&&e.currentUser.isDeveloper?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("id")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[e._v(e._s(e.image.id))])]):e._e(),e.isPropDisplayed("status")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("status")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[t("image-status",{attrs:{image:e.image}})],1)]):e._e(),e.isPropDisplayed("numberOfAnnotations")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("user-annotations")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[t("router-link",{attrs:{to:"/project/".concat(e.image.project,"/annotations?image=").concat(e.image.id,"&type=user")}},[e._v(" "+e._s(e.image.numberOfAnnotations)+" ")])],1)]):e._e(),e.isPropDisplayed("numberOfJobAnnotations")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("analysis-annotations")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[t("router-link",{attrs:{to:"/project/".concat(e.image.project,"/annotations?image=").concat(e.image.id,"&type=algo")}},[e._v(" "+e._s(e.image.numberOfJobAnnotations)+" ")])],1)]):e._e(),e.isPropDisplayed("numberOfReviewedAnnotations")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("reviewed-annotations")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[t("router-link",{attrs:{to:"/project/".concat(e.image.project,"/annotations?image=").concat(e.image.id,"&type=reviewed")}},[e._v(" "+e._s(e.image.numberOfReviewedAnnotations)+" ")])],1)]):e._e(),e.isPropDisplayed("description")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("description")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[t("cytomine-description",{attrs:{object:e.image,canEdit:e.canEdit}})],1)]):e._e(),e.isPropDisplayed("tags")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("tags")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[t("cytomine-tags",{attrs:{object:e.image,canEdit:e.canEdit}})],1)]):e._e(),e.isPropDisplayed("properties")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("properties")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[t("cytomine-properties",{attrs:{object:e.image,error:e.loadPropertiesError,canEdit:e.canEdit,properties:e.metadataFilteredProperties},on:{deleted:e.removeProp,added:e.addProp}})],1)]):e._e(),e.isPropDisplayed("attached-files")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("attached-files")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[t("attached-files",{attrs:{object:e.image,canEdit:e.canEdit}})],1)]):e._e(),e.isPropDisplayed("slide-preview")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("slide-preview")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[e.image.macroURL&&!e.isBlindModeAndContributor?t("a",{on:{click:function(t){e.isMetadataModalActive=!0}}},[t("image-thumbnail",{key:"".concat(e.image.id,"-macro-256"),attrs:{image:e.image,macro:!0,size:256,"extra-parameters":{Authorization:"Bearer "+e.shortTermToken}}})],1):t("em",[e._v(" "+e._s(e.$t("slide-preview-not-available"))+" ")])])]):e._e(),!e.isPropDisplayed("original-filename")||e.blindMode&&!e.canManageProject?e._e():t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("originalFilename")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[e._v(" "+e._s(e.image.originalFilename)+" ")])]),e.isPropDisplayed("format")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("format")))]),t("td",{staticClass:"prop-content format",attrs:{colspan:"3"}},[e._v(" "+e._s(e.image.contentType)+" ")])]):e._e(),e.isPropDisplayed("vendor")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("vendor")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[e.vendor?t("img",{staticClass:"vendor-img",attrs:{src:e.vendor.imgPath,alt:e.vendor.name,title:e.vendor.name}}):[e._v(e._s(e.$t("unknown")))]],2)]):e._e(),e.isPropDisplayed("width")||e.isPropDisplayed("physicalSizeX")?t("tr",[e.isPropDisplayed("width")?[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("image-width")))]),t("td",{staticClass:"prop-content-half",attrs:{colspan:e.isPropDisplayed("physicalSizeX")?1:3}},[e._v(" "+e._s(e.image.width)+" "+e._s(e.$t("pixels"))+" "),e.image.physicalSizeX?[e._v("("+e._s((e.image.width*e.image.physicalSizeX).toFixed(3))+" "+e._s(e.$t("um"))+")")]:e._e()],2)]:e._e(),e.isPropDisplayed("physicalSizeX")?[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("x-y-resolution")))]),t("td",{staticClass:"prop-content-half",attrs:{colspan:e.isPropDisplayed("width")?1:3}},[e.image.physicalSizeX?[e._v(e._s(e.image.physicalSizeX.toFixed(3))+" "+e._s(e.$t("um-per-pixel")))]:[e._v(e._s(e.$t("unknown")))]],2)]:e._e()],2):e._e(),e.isPropDisplayed("height")||e.isPropDisplayed("physicalSizeY")?t("tr",[e.isPropDisplayed("height")?[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("image-height")))]),t("td",{staticClass:"prop-content-half",attrs:{colspan:e.isPropDisplayed("physicalSizeY")?1:3}},[e._v(" "+e._s(e.image.height)+" "+e._s(e.$t("pixels"))+" "),e.image.physicalSizeY?[e._v("("+e._s((e.image.height*e.image.physicalSizeY).toFixed(3))+" "+e._s(e.$t("um"))+")")]:e._e()],2)]:e._e(),e.isPropDisplayed("physicalSizeY")?[t("td",{staticClass:"prop-label"}),t("td",{staticClass:"prop-content-half",attrs:{colspan:e.isPropDisplayed("height")?1:3}})]:e._e()],2):e._e(),e.isPropDisplayed("depth")||e.isPropDisplayed("physicalSizeZ")?t("tr",[e.isPropDisplayed("depth")?[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("image-depth")))]),t("td",{staticClass:"prop-content-half",attrs:{colspan:e.isPropDisplayed("physicalSizeZ")?1:3}},[e._v(" "+e._s(e.$tc("count-slices",e.image.depth,{count:e.image.depth}))+" "),e.image.physicalSizeZ?[e._v("("+e._s((e.image.depth*e.image.physicalSizeZ).toFixed(3))+" "+e._s(e.$t("um"))+")")]:e._e()],2)]:e._e(),e.isPropDisplayed("physicalSizeZ")?[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("z-resolution")))]),t("td",{staticClass:"prop-content-half",attrs:{colspan:e.isPropDisplayed("depth")?1:3}},[e.image.physicalSizeZ?[e._v(e._s(e.image.physicalSizeZ.toFixed(3))+" "+e._s(e.$t("um-per-slice")))]:e.image.depth<2?[e._v("-")]:[e._v(e._s(e.$t("unknown")))]],2)]:e._e()],2):e._e(),e.isPropDisplayed("time")||e.isPropDisplayed("fps")?t("tr",[e.isPropDisplayed("time")?[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("image-time")))]),t("td",{staticClass:"prop-content-half",attrs:{colspan:e.isPropDisplayed("fps")?1:3}},[e._v(" "+e._s(e.$tc("count-frames",e.image.duration,{count:e.image.duration}))+" "),e.image.fps&&e.image.duration>0?[e._v(" ("+e._s(e.formatMinutesSeconds(e.image.duration/e.image.fps))+") ")]:e._e()],2)]:e._e(),e.isPropDisplayed("fps")?[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("frame-rate")))]),t("td",{staticClass:"prop-content-half",attrs:{colspan:e.isPropDisplayed("time")?1:3}},[e.image.fps?[e._v(e._s(e.image.fps.toFixed(3))+" "+e._s(e.$t("frame-per-second")))]:e.image.time<2?[e._v("-")]:[e._v(e._s(e.$t("unknown")))]],2)]:e._e()],2):e._e(),e.isPropDisplayed("channels")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("image-channels")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[e._v(" "+e._s(e.$tc("count-bands",e.image.apparentChannels,{count:e.image.apparentChannels}))+" ("+e._s(e.image.channels)+" x "+e._s(e.image.samplePerPixel)+") ")])]):e._e(),e.isPropDisplayed("size")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("image-size")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[e._v(" "+e._s("".concat(e.image.width," x ").concat(e.image.height," ").concat(e.$t("pixels")))+" ")])]):e._e(),e.isPropDisplayed("magnification")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("magnification")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[e.image.magnification?[e._v(e._s(e.image.magnification))]:[e._v(e._s(e.$t("unknown")))]],2)]):e._e(),t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("actions")))]),t("td",{staticClass:"prop-content",attrs:{colspan:"3"}},[t("div",{staticClass:"buttons are-small"},[e.isPropDisplayed("metadata")&&!e.isBlindModeAndContributor?t("button",{staticClass:"button",on:{click:function(t){e.isMetadataModalActive=!0}}},[e._v(" "+e._s(e.$t("button-metadata"))+" ")]):e._e(),e.canEdit?[e.image.reviewed||e.image.inReview?e.image.reviewUser===e.currentUser.id?[e.image.reviewed?t("button",{staticClass:"button",on:{click:function(t){return e.cancelReview()}}},[e._v(" "+e._s(e.$t("button-unvalidate-review"))+" ")]):[t("router-link",{staticClass:"button",attrs:{to:"/project/".concat(e.image.project,"/image/").concat(e.image.id,"?action=review")}},[e._v(" "+e._s(e.$t("button-continue-review"))+" ")]),t("button",{staticClass:"button",on:{click:function(t){return e.cancelReview()}}},[e._v(" "+e._s(e.$t("button-cancel-review"))+" ")])]]:e._e():t("router-link",{staticClass:"button",attrs:{to:"/project/".concat(e.image.project,"/image/").concat(e.image.id,"?action=review")}},[e._v(" "+e._s(e.$t("button-start-review"))+" ")]),!e.blindMode||e.canManageProject?t("button",{staticClass:"button",on:{click:function(t){e.isRenameModalActive=!0}}},[e._v(" "+e._s(e.$t("button-rename"))+" ")]):e._e(),t("button",{staticClass:"button",on:{click:function(t){e.isCalibrationModalActive=!0}}},[e._v(" "+e._s(e.$t("button-set-calibration"))+" ")]),t("button",{staticClass:"button",on:{click:function(t){e.isMagnificationModalActive=!0}}},[e._v(" "+e._s(e.$t("button-set-magnification"))+" ")])]:e._e(),e.canDownloadImages||e.canManageProject?t("a",{staticClass:"button",on:{click:function(t){return e.download(e.image)}}},[e._v(" "+e._s(e.$t("button-download"))+" ")]):e._e(),e.canEdit?[t("button",{staticClass:"button is-danger",on:{click:function(t){return e.confirmDeletion()}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")])]:e._e()],2)])])])]),t("rename-modal",{attrs:{title:e.$t("rename-image"),currentName:e.image.instanceFilename,active:e.isRenameModalActive},on:{"update:active":function(t){e.isRenameModalActive=t},rename:e.rename}}),t("magnification-modal",{attrs:{image:e.image,active:e.isMagnificationModalActive},on:{"update:active":function(t){e.isMagnificationModalActive=t},setMagnification:function(t){return e.$emit("setMagnification",t)}}}),t("calibration-modal",{attrs:{image:e.image,active:e.isCalibrationModalActive},on:{"update:active":function(t){e.isCalibrationModalActive=t},setResolution:function(t){return e.$emit("setResolution",t)}}}),t("image-metadata-modal",{attrs:{active:e.isMetadataModalActive,image:e.image,properties:e.onlyMetadataProperties,error:e.loadPropertiesError},on:{"update:active":function(t){e.isMetadataModalActive=t}}})],1)}),ta=[],na=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.setMagnification()}}},[t("cytomine-modal",{attrs:{active:e.active,title:e.$t("set-magnification")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[t("b-message",{attrs:{type:"is-warning","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("warning-change-applies-in-project-only"))+" ")]),t("b-field",{attrs:{label:e.$t("magnification"),type:e.fieldType,message:e.errors.first("magnification")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal|positive",expression:"'decimal|positive'"}],attrs:{name:"magnification"},model:{value:e.newMagnification,callback:function(t){e.newMagnification=t},expression:"newMagnification"}})],1)],1)],1)},aa=[],ra={name:"magnification-modal",props:{active:{type:Boolean},image:{type:Object}},components:{CytomineModal:Ie},$_veeValidate:{validator:"new"},data:function(){return{newMagnification:""}},computed:{blindMode:function(){return this.$store.state.currentProject.project.blindMode},fieldType:function(){return{"is-danger":this.errors.has("magnification")}}},watch:{active:function(e){e&&(this.newMagnification=this.image.magnification)}},methods:{setMagnification:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return a=e.blindMode?e.image.blindedName:e.image.instanceFilename,t.prev=6,r=e.image.clone(),r.magnification=e.newMagnification,t.next=11,r.save();case 11:e.$emit("setMagnification",r.magnification),e.$notify({type:"success",text:e.$t("notif-success-magnification-update",{imageName:a})}),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](6),e.$notify({type:"error",text:e.$t("notif-error-magnification-update",{imageName:a})});case 18:e.$emit("update:active",!1);case 19:case"end":return t.stop()}}),t,null,[[6,15]])})))()}}},ia=ra,oa=Object(C["a"])(ia,na,aa,!1,null,null,null),sa=oa.exports,ca=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.setResolution()}}},[t("cytomine-modal",{attrs:{active:e.active,title:e.$t("calibrate-image")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[t("b-message",{attrs:{type:"is-warning","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("warning-change-applies-in-project-only"))+" ")]),t("b-field",{attrs:{label:e.$t("resolution"),type:{"is-danger":this.errors.has("resolution")},message:e.errors.first("resolution")}},[t("b-field",{attrs:{type:{"is-danger":this.errors.has("resolution")}}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal|positive",expression:"'required|decimal|positive'"}],attrs:{name:"resolution",expanded:""},model:{value:e.calibrationFieldX,callback:function(t){e.calibrationFieldX=t},expression:"calibrationFieldX"}}),t("b-select",{model:{value:e.calibrationFactorX,callback:function(t){e.calibrationFactorX=t},expression:"calibrationFactorX"}},[t("option",{domProps:{value:.001}},[e._v(" "+e._s(e.$t("nm-per-pixel")))]),t("option",{domProps:{value:1}},[e._v(e._s(e.$t("um-per-pixel")))]),t("option",{domProps:{value:1e3}},[e._v(e._s(e.$t("mm-per-pixel")))])])],1)],1),this.image.depth>1?t("b-field",{attrs:{label:e.$t("z-resolution"),type:{"is-danger":this.errors.has("resolution-z")},message:e.errors.first("resolution-z")}},[t("b-field",{attrs:{type:{"is-danger":this.errors.has("resolution-z")}}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal|positive",expression:"'required|decimal|positive'"}],attrs:{name:"resolution-z",expanded:""},model:{value:e.calibrationFieldZ,callback:function(t){e.calibrationFieldZ=t},expression:"calibrationFieldZ"}}),t("b-select",{model:{value:e.calibrationFactorZ,callback:function(t){e.calibrationFactorZ=t},expression:"calibrationFactorZ"}},[t("option",{domProps:{value:.001}},[e._v(" "+e._s(e.$t("nm-per-slice")))]),t("option",{domProps:{value:1}},[e._v(e._s(e.$t("um-per-slice")))]),t("option",{domProps:{value:1e3}},[e._v(e._s(e.$t("mm-per-slice")))])])],1)],1):e._e(),this.image.duration>1?t("b-field",{attrs:{label:e.$t("frame-rate"),type:{"is-danger":this.errors.has("resolution-t")},message:e.errors.first("resolution-t")}},[t("b-field",{attrs:{type:{"is-danger":this.errors.has("resolution-t")}}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal|positive",expression:"'required|decimal|positive'"}],attrs:{name:"resolution-t",expanded:""},model:{value:e.calibrationFieldT,callback:function(t){e.calibrationFieldT=t},expression:"calibrationFieldT"}}),t("p",{staticClass:"control"},[t("span",{staticClass:"button is-static"},[e._v(e._s(e.$t("frame-per-second")))])])],1)],1):e._e()],1)],1)},la=[],ua={name:"calibration-modal",props:{active:{type:Boolean},image:{type:Object}},components:{CytomineModal:Ie},$_veeValidate:{validator:"new"},data:function(){return{calibrationFieldX:"",calibrationFactorX:1,calibrationFieldZ:"",calibrationFactorZ:1,calibrationFieldT:""}},computed:{blindMode:function(){return this.$store.state.currentProject.project.blindMode}},watch:{active:function(e){e&&(this.calibrationFieldX=this.image.physicalSizeX,this.calibrationFieldZ=this.image.physicalSizeZ,this.calibrationFieldT=this.image.fps)}},methods:{setResolution:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return a=e.blindMode?e.image.blindedName:e.image.instanceFilename,t.prev=6,r=e.image.clone(),r.physicalSizeX=Number(e.calibrationFieldX)*e.calibrationFactorX,r.physicalSizeY=Number(e.calibrationFieldX)*e.calibrationFactorX,e.image.depth>1&&(r.physicalSizeZ=Number(e.calibrationFieldZ)*e.calibrationFactorZ),e.image.duration>1&&(r.fps=Number(e.calibrationFieldT)),t.next=14,r.save();case 14:e.$emit("setResolution",{x:r.physicalSizeX,y:r.physicalSizeY,z:r.physicalSizeZ,t:r.fps}),e.$notify({type:"success",text:e.$t("notif-success-image-calibration",{imageName:a})}),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](6),e.$notify({type:"error",text:e.$t("notif-error-image-calibration",{imageName:a})});case 21:e.$emit("update:active",!1);case 22:case"end":return t.stop()}}),t,null,[[6,18]])})))()}}},da=ua,pa=Object(C["a"])(da,ca,la,!1,null,null,null),ma=pa.exports,fa=function(){var e=this,t=e._self._c;return t("cytomine-modal",{attrs:{active:e.active,title:e.$t("image-metadata")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-close"))+" ")])]},proxy:!0}])},[e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[e.image&&e.image.macroURL?[t("p",{staticClass:"image-preview",style:e.styleImagePreview},[t("img",{ref:"image",class:"rotate-"+e.rotationAngle,attrs:{src:e.appendShortTermToken(e.image.associatedImageURL("macro",256,"jpg"),e.shortTermToken)}})]),t("div",{staticClass:"buttons is-centered are-small"},[t("button",{staticClass:"button",on:{click:function(t){return e.rotate(-90)}}},[t("i",{staticClass:"fas fa-undo"})]),t("button",{staticClass:"button",on:{click:function(t){return e.rotate(90)}}},[t("i",{staticClass:"fas fa-undo mirror"})])])]:e._e(),t("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search",size:"is-small"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),t("ul",e._l(e.filteredProps,(function(n){return t("li",{key:n.id},[t("strong",[e._v(e._s(n.key))]),e._v(": "+e._s(n.value)+" ")])})),0)]],2)},ha=[],ga={name:"image-metadata-modal",props:{active:Boolean,image:Object,properties:{type:Array},error:{type:Boolean,default:!1}},components:{CytomineModal:Ie},data:function(){return{searchString:"",rotationAngle:0}},computed:{shortTermToken:Object(l["a"])("currentUser/shortTermToken"),filteredProps:function(){if(!this.searchString)return this.properties;var e=Object(Kt["a"])(this.searchString);return this.properties.filter((function(t){return e.test(t.key)||e.test(t.value)}))},styleImagePreview:function(){if(this.rotationAngle,this.$refs.image){var e=90===this.rotationAngle||270===this.rotationAngle,t=this.$refs.image.clientWidth+"px",n=this.$refs.image.clientHeight+"px";return{width:e?n:t,height:e?t:n}}}},methods:{appendShortTermToken:k["a"],rotate:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.rotationAngle=(t.rotationAngle+e+360)%360;case 1:case"end":return n.stop()}}),n)})))()}}},va=ga,ba=(n("a486"),Object(C["a"])(va,fa,ha,!1,null,"3735e86c",null)),ya=ba.exports,wa=function(){var e=this,t=e._self._c;return t("span",{staticClass:"tag",class:e.tagClass},[e._v(" "+e._s(e.$t(e.label))+" ")])},ja=[],ka={props:{image:Object},computed:{tagClass:function(){return this.image.reviewed?"is-success":this.image.inReview?"is-info":"is-light"},label:function(){return this.image.reviewed?"reviewed":this.image.inReview?"in-review":"none"}}},_a=ka,xa=Object(C["a"])(_a,wa,ja,!1,null,null,null),Ca=xa.exports;n("4d90");function Oa(e){var t=Math.floor(e/60),n=e-60*t,a=Math.floor(n),r=Math.floor(1e3*(n-a));return[t.toString().padStart(2,"0"),a.toString().padStart(2,"0"),r.toString().padStart(3,"0")].join(":")}function $a(e,t){var n=e.channel,a=e.zStack,r=e.time;return n+t.channels*(a+t.depth*r)}var Ta={hamamatsu:{imgPath:n("398f"),name:"Hamamatsu Photonics"},"3dh":{imgPath:n("b83e"),name:"3DHISTECH Ltd."},aperio:{imgPath:n("6284"),name:"Aperio"},leica:{imgPath:n("68c7"),name:"Leica Biosystems"},roche:{imgPath:n("99fb"),name:"La Roche Ltd."},philips:{imgPath:n("35ec"),name:"Philips"}};function Sa(e){switch(e){case"NDPI":case"VMS":return Ta["hamamatsu"];case"MRXS":return Ta["3dh"];case"SVS":return Ta["aperio"];case"SCN":return Ta["leica"];case"VENTANA":case"BIF":return Ta["roche"];case"PHILIPS":return Ta["philips"];default:return null}}var Pa={name:"image-details",components:{ImageThumbnail:Ut,CytomineDescription:qe["a"],CytomineTags:We["a"],CytomineProperties:Ve["a"],AttachedFiles:Ge["a"],MagnificationModal:sa,CalibrationModal:ma,ImageMetadataModal:ya,ImageStatus:Ca,RenameModal:Ue},props:{image:{type:Object},excludedProperties:{type:Array,default:function(){return[]}},editable:{type:Boolean,default:!1}},data:function(){return{isRenameModalActive:!1,isCalibrationModalActive:!1,isMagnificationModalActive:!1,isMetadataModalActive:!1,properties:[],loadPropertiesError:!1}},computed:{currentUser:Object(l["a"])("currentUser/user"),configUI:Object(l["a"])("currentProject/configUI"),project:Object(l["a"])("currentProject/project"),shortTermToken:Object(l["a"])("currentUser/shortTermToken"),blindMode:function(){return(this.project||{}).blindMode||!1},canDownloadImages:function(){return null!==this.image.path&&(this.canManageProject||(this.project||{}).areImagesDownloadable||!1)},canManageProject:function(){return this.$store.getters["currentProject/canManageProject"]},canEdit:function(){return this.editable&&this.$store.getters["currentProject/canEditImage"](this.image)},imageNameNotif:function(){return this.blindMode?this.image.blindedName:this.image.instanceFilename},vendor:function(){return Sa(this.image.contentType)},internalUseFilteredProperties:function(){return this.properties.filter((function(e){return!e.key.startsWith(I["a"].PREFIX_HIDDEN_PROPERTY_KEY)}))},metadataFilteredProperties:function(){var e=this.internalUseFilteredProperties.filter((function(e){for(var t in I["a"].METADATA_PREFIXES)if(e.key.startsWith(I["a"].METADATA_PREFIXES[t]))return!1;return!0}));return e},onlyMetadataProperties:function(){var e=this.internalUseFilteredProperties.filter((function(e){for(var t in I["a"].METADATA_PREFIXES)if(e.key.startsWith(I["a"].METADATA_PREFIXES[t]))return!0;return!1}));return e.sort((function(e,t){return e.key.localeCompare(t.key)}))},isBlindModeAndContributor:function(){return this.blindMode&&!this.canManageProject}},methods:{appendShortTermToken:k["a"],isPropDisplayed:function(e){return!this.excludedProperties.includes(e)&&(null==this.configUI["project-explore-image-".concat(e)]||this.configUI["project-explore-image-".concat(e)])},download:function(e){window.location.assign(Object(k["a"])(e.downloadURL,this.shortTermToken),"_blank")},cancelReview:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.image.reviewed?"notif-error-unvalidate-review":"notif-error-cancel-review",t.prev=1,t.next=4,e.image.stopReview(!0);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),e.$notify({type:"error",text:e.$t(n)});case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()},rename:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.image.instanceFilename,n.prev=1,t.image.instanceFilename=e,n.next=5,t.image.save();case 5:t.$notify({type:"success",text:t.$t("notif-success-image-rename",{imageName:t.image.instanceFilename})}),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),t.$notify({type:"error",text:t.$t("notif-error-image-rename",{imageName:a})});case 11:t.isRenameModalActive=!1;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},confirmDeletion:function(){this.$buefy.dialog.confirm({title:this.$t("delete-image"),message:this.$t("delete-image-confirmation-message",{imageName:this.imageNameNotif}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:this.deleteImage})},deleteImage:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["ImageInstance"].delete(e.image.id);case 3:e.$notify({type:"success",text:e.$t("notif-success-image-deletion",{imageName:e.imageNameNotif})}),e.$emit("delete"),n=e.project.clone(),n.numberOfImages--,e.$store.dispatch("currentProject/updateProject",n),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-image-deletion",{imageName:e.imageNameNotif})});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},formatMinutesSeconds:function(e){return Oa(e)},removeProp:function(e){this.properties=this.properties.filter((function(t){return t.id!==e.id}))},addProp:function(e){this.properties.push(e)}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["PropertyCollection"].fetchAll({object:e.image});case 3:e.properties=t.sent.array,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.loadPropertiesError=!0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},Aa=Pa,Ia=(n("48f4"),Object(C["a"])(Aa,ea,ta,!1,null,"6cc541f6",null)),Da=Ia.exports,Ea=function(){var e=this,t=e._self._c;return t("cytomine-modal",{attrs:{active:e.active,title:e.$t("add-images")},on:{close:function(t){return e.$emit("update:active",!1)}}},[t("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[[t("b-input",{staticClass:"search-images",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),t("cytomine-table",{attrs:{collection:e.imageCollection,currentPage:e.currentPage,perPage:e.perPage,sort:e.sortField,order:e.sortOrder,detailed:!1},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t}},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{label:e.$t("overview")}},[t("image-thumbnail",{key:"".concat(a.id,"-thumb-128"),attrs:{image:a,size:128,"extra-parameters":{Authorization:"Bearer "+e.shortTermToken}}})],1),t("b-table-column",{attrs:{field:"originalFilename",label:e.$t("name"),sortable:""}},[e._v(" "+e._s(a.originalFilename)+" ")]),t("b-table-column",{attrs:{field:"created",label:e.$t("created-on"),sortable:""}},[e._v(" "+e._s(e._f("moment")(Number(a.created),"ll LT"))+" ")]),t("b-table-column",{attrs:{label:" ",centered:""}},[e.wasAdded(a)?t("button",{staticClass:"button is-small is-link",attrs:{disabled:""}},[e._v(" "+e._s(e.$t("button-added"))+" ")]):e.isInProject(a)?t("span",[e._v(" "+e._s(e.$t("already-in-project"))+" ")]):t("button",{staticClass:"button is-small is-link",on:{click:function(t){return e.addImage(a)}}},[e._v(" "+e._s(e.$t("button-add"))+" ")])])]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-image")))])])]},proxy:!0}],null,!1,936165728)})]]],2)},Na=[],Ma={name:"add-image-modal",props:{active:Boolean},components:{ImageThumbnail:Ut,CytomineTable:G,CytomineModal:Ie},data:function(){return{loading:!0,perPage:10,searchString:"",idsAddedImages:[],currentPage:1,sortField:"created",sortOrder:"desc"}},computed:{project:Object(l["a"])("currentProject/project"),shortTermToken:Object(l["a"])("currentUser/shortTermToken"),imageCollection:function(){var e=new p["AbstractImageCollection"]({project:this.project.id});return this.searchString&&(e["originalFilename"]={ilike:encodeURIComponent(this.searchString)}),e}},watch:{active:function(e){e&&(this.idsAddedImages=[])}},methods:{addImage:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={imageName:e.originalFilename,projectName:t.project.name},n.prev=1,n.next=4,new p["ImageInstance"]({baseImage:e.id,project:t.project.id}).save();case 4:r=n.sent,t.idsAddedImages.push(e.id),t.$emit("addImage",r),t.$notify({type:"success",text:t.$t("notif-success-add-image",a)}),i=t.project.clone(),i.numberOfImages++,t.$store.dispatch("currentProject/updateProject",i),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](1),t.$notify({type:"error",text:t.$t("notif-error-add-image",a)});case 16:case"end":return n.stop()}}),n,null,[[1,13]])})))()},isInProject:function(e){return e.inProject},wasAdded:function(e){return this.idsAddedImages.includes(e.id)}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!1;case 1:case"end":return t.stop()}}),t)})))()}},Ra=Ma,Ua=(n("3d5b"),Object(C["a"])(Ra,Ea,Na,!1,null,"48f99de6",null)),za=Ua.exports,La={rootModuleProp:"storeModule"},Fa=function(e,t){return Object(l["e"])(null,e,t,La)},Ba=function(e,t){return Object(l["c"])(null,e,t,La)},qa={name:"list-images",components:{ImageThumbnail:Ut,ImageName:Qn["a"],ImageDetails:Da,CytomineTable:G,CytomineMultiselect:ee,CytomineSlider:ce,AddImageModal:za},data:function(){return{loading:!0,error:!1,images:[],addImageModal:!1,excludedProperties:["overview","instanceFilename","magnification","numberOfAnnotations","numberOfJobAnnotations","numberOfReviewedAnnotations","size"],availableFormats:[],availableVendors:[],availableMagnifications:[],availableResolutions:[],availableTags:[],maxWidth:100,maxHeight:100,maxNbUserAnnotations:100,maxNbJobAnnotations:100,maxNbReviewedAnnotations:100,revision:0}},computed:{currentUser:Object(l["a"])("currentUser/user"),configUI:Object(l["a"])("currentProject/configUI"),project:Object(l["a"])("currentProject/project"),shortTermToken:Object(l["a"])("currentUser/shortTermToken"),blindMode:function(){return this.project.blindMode},canManageProject:function(){return this.$store.getters["currentProject/canManageProject"]},canAddImage:function(){return!this.currentUser.guestByNow&&(this.canManageProject||!this.project.isReadOnly)},storeModule:function(){return this.$store.getters["currentProject/currentProjectModule"]+"listImages"},searchString:Object(l["b"])("searchString",Object(h["a"])(Object(h["a"])({},La),{},{debounce:500})),filtersOpened:Object(l["b"])("filtersOpened",La),querySearchTags:function(){return this.$route.query.tags},selectedFormats:Fa("formats","availableFormats"),selectedVendors:Fa("vendors","availableVendors"),selectedTags:Fa("selectedTags","availableTags"),selectedMagnifications:Fa("magnifications","availableMagnifications"),selectedResolutions:Fa("resolutions","availableResolutions"),boundsWidth:Ba("boundsWidth","maxWidth"),boundsHeight:Ba("boundsHeight","maxHeight"),boundsUserAnnotations:Ba("boundsUserAnnotations","maxNbUserAnnotations"),boundsJobAnnotations:Ba("boundsJobAnnotations","maxNbJobAnnotations"),boundsReviewedAnnotations:Ba("boundsReviewedAnnotations","maxNbReviewedAnnotations"),multiSelectFilters:function(){return[{prop:"contentType",selected:this.selectedContentTypes,total:this.availableFormats.length},{prop:"magnification",selected:this.selectedMagnifications.map((function(e){return e.value})),total:this.availableMagnifications.length},{prop:"physicalSizeX",selected:this.selectedResolutions.map((function(e){return e.value})),total:this.availableResolutions.length},{prop:"tag",selected:this.selectedTags.map((function(e){return e.id})),total:this.availableTags.length}]},selectedContentTypes:function(){var e=this.selectedVendors.map((function(e){return e.value})),t=this.availableVendors.map((function(e){return e.value})),n=e.includes("null");return this.selectedFormats.filter((function(a){return t.includes(a)?e.includes(a):n}))},boundsFilters:function(){return[{prop:"width",bounds:this.boundsWidth,max:this.maxWidth},{prop:"height",bounds:this.boundsHeight,max:this.maxHeight},{prop:"numberOfAnnotations",bounds:this.boundsUserAnnotations,max:this.maxNbUserAnnotations},{prop:"numberOfJobAnnotations",bounds:this.boundsJobAnnotations,max:this.maxNbJobAnnotations},{prop:"numberOfReviewedAnnotations",bounds:this.boundsReviewedAnnotations,max:this.maxNbReviewedAnnotations}]},imageCollection:function(){var e=new p["ImageInstanceCollection"]({filterKey:"project",filterValue:this.project.id});this.searchString&&(e["name"]={ilike:encodeURIComponent(this.searchString)});var t,n=Object(z["a"])(this.boundsFilters);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=a.prop,i=a.bounds,o=a.max;e[r]={},i[1]!==o&&(e[r]={lte:i[1]}),i[0]>0&&(e[r]["gte"]=i[0])}}catch(f){n.e(f)}finally{n.f()}var s,c=Object(z["a"])(this.multiSelectFilters);try{for(c.s();!(s=c.n()).done;){var l=s.value,u=l.prop,d=l.selected,m=l.total;d.length>0&&d.length<m&&(e[u]={in:d.join()})}}catch(f){c.e(f)}finally{c.f()}return e},nbActiveFilters:function(){return this.$store.getters[this.storeModule+"/nbActiveFilters"]},nbEmptyFilters:function(){return this.$store.getters[this.storeModule+"/nbEmptyFilters"]+(this.selectedContentTypes.length>0?0:1)},currentPage:Object(l["b"])("currentPage",La),perPage:Object(l["b"])("perPage",La),sortField:Object(l["b"])("sortField",La),sortOrder:Object(l["b"])("sortOrder",La),openedDetails:Object(l["b"])("openedDetails",La)},methods:{fetchFilters:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new p["ImageInstanceCollection"].fetchBounds({project:e.project.id});case 2:n=t.sent,e.maxWidth=Math.max(100,n.width.max),e.maxHeight=Math.max(100,n.height.max),e.maxNbUserAnnotations=Math.max(100,n.countImageAnnotations.max),e.maxNbJobAnnotations=Math.max(100,n.countImageJobAnnotations.max),e.maxNbReviewedAnnotations=Math.max(100,n.countImageReviewedAnnotations.max),e.availableFormats=n.format.list,n.format.list.forEach((function(t){var n=Sa(t),a={value:n?t:"null",label:n?n.name:e.$t("unknown")};e.availableVendors.find((function(e){return e.value===a.value}))||e.availableVendors.push(a)})),e.availableMagnifications=n.magnification.list.map((function(t){return{value:t||"null",label:t||e.$t("unknown")}}));case 11:case"end":return t.stop()}}),t)})))()},fetchTags:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=[{id:"null",name:e.$t("no-tag")}],t.t1=L["a"],t.next=4,p["TagCollection"].fetchAll();case 4:t.t2=t.sent.array,t.t3=(0,t.t1)(t.t2),e.availableTags=t.t0.concat.call(t.t0,t.t3);case 7:case"end":return t.stop()}}),t)})))()},refreshData:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.fetchFilters()]);case 3:e.revision++,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.error=!0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},toggleFilterDisplay:function(){this.filtersOpened=!this.filtersOpened},isPropDisplayed:function(e){return this.excludedProperties.includes(e)&&(null==this.configUI["project-explore-image-".concat(e)]||this.configUI["project-explore-image-".concat(e)])}},watch:{querySearchTags:function(e){if(e){this.selectedTags=[];var t=this.availableTags.filter((function(t){return e.split(",").includes(t.name)}));t&&(this.selectedTags=t)}}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.fetchFilters(),e.fetchTags()]);case 3:e.loading=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.error=!0;case 9:e.$route.query.tags&&(n=e.availableTags.filter((function(t){return e.$route.query.tags.split(",").includes(t.name)})),n&&(e.selectedTags=n));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},Va=qa,Wa=(n("b88c"),Object(C["a"])(Va,Zn,Xn,!1,null,"793e07ba",null)),Ga=Wa.exports,Ha=function(){var e=this,t=e._self._c;return e.permissionError||e.notFoundError?t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t(e.permissionError?"access-denied":"not-found"))+" ")]),t("p",[e._v(" "+e._s(e.$t(e.permissionError?"insufficient-permission":"not-found-error"))+" ")])]):t("div",{staticClass:"content-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading},on:{"update:active":function(t){e.loading=t}}}),e.loading?e._e():t("div",{staticClass:"box"},[t("div",{staticClass:"box-title"},[t("i18n",{attrs:{path:"detailed-image-information",tag:"h1"}},[t("router-link",{attrs:{place:"imageName",to:"/project/".concat(e.image.project,"/image/").concat(e.image.id)}},[t("image-name",{attrs:{image:e.image}})],1)],1),t("router-link",{attrs:{place:"imageName",to:"/project/".concat(e.image.project,"/image/").concat(e.image.id)}},[t("button",{staticClass:"button is-link"},[t("span",{staticClass:"icon-text"},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-image"})]),t("span",{staticClass:"is-align-content-baseline"}),e._v(" "+e._s(e.$t("open-in-viewer"))+" ")])])]),t("router-link",{attrs:{place:"imageName",to:e.prevRoute}},[t("button",{staticClass:"button is-link"},[t("span",{staticClass:"icon-text"},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-arrow-left"})]),t("span",{staticClass:"is-align-content-baseline"},[e._v(" "+e._s(e.$t("go-back"))+" ")])])])])],1),e.image?t("image-details",{attrs:{image:e.image,editable:""},on:{setResolution:function(t){return e.setResolution(t)},setMagnification:function(t){return e.image.magnification=t},delete:function(t){return e.deleteImage()}}}):e._e()],1)],1)},Ja=[],Ka={name:"image-information",components:{ImageName:Qn["a"],ImageDetails:Da},data:function(){return{loading:!0,image:null,permissionError:!1,notFoundError:!1,prevRoute:null}},beforeRouteEnter:function(e,t,n){n((function(e){e.prevRoute=t}))},computed:{idImage:function(){return this.$route.params.idImage}},watch:{idImage:function(){this.loadImage()}},methods:{loadImage:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.permissionError=!1,e.notFoundError=!1,t.prev=3,t.next=6,p["ImageInstance"].fetch(e.idImage);case 6:n=t.sent,n.vendor=Sa(n.contentType),e.image=n,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),403===t.t0.response.status?e.permissionError=!0:e.notFoundError=!0;case 14:e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},deleteImage:function(){this.$router.push("/project/".concat(this.image.project))},setResolution:function(e){this.image.physicalSizeX=e.x,this.image.physicalSizeY=e.y,this.image.physicalSizeZ=e.z,this.image.fps=e.t}},created:function(){this.loadImage()}},Ya=Ka,Za=(n("a702"),Object(C["a"])(Ya,Ha,Ja,!1,null,"2ffeee81",null)),Xa=Za.exports,Qa=function(){var e=this,t=e._self._c;return e.configUI["project-annotations-tab"]?e.error?t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(e._s(e.$t("error-load-annotations-filters")))])]):t("div",{staticClass:"content-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():t("div",[t("div",{staticClass:"box"},[t("h2",[e._v(" "+e._s(e.$t("display"))+" ")]),t("div",{staticClass:"filters"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("categorization"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.allowedCategorizations,label:"label","track-by":"categorization","allow-empty":!1,searchable:!1},model:{value:e.selectedCategorization,callback:function(t){e.selectedCategorization=t},expression:"selectedCategorization"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("preview-size"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.allowedSizes,label:"label","track-by":"size","allow-empty":!1,searchable:!1},model:{value:e.selectedSize,callback:function(t){e.selectedSize=t},expression:"selectedSize"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("number-per-category"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:[10,25,50,100],"allow-empty":!1,searchable:!1},model:{value:e.nbPerPage,callback:function(t){e.nbPerPage=t},expression:"nbPerPage"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("outline-color"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.colors,label:"label","track-by":"name","allow-empty":!1,searchable:!1},model:{value:e.selectedColor,callback:function(t){e.selectedColor=t},expression:"selectedColor"}})],1)])])]),t("h2",[e._v(" "+e._s(e.$t("filters"))+" ")]),t("div",{staticClass:"filters"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("annotation-type"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.annotationTypes,"allow-empty":!1,searchable:!1},model:{value:e.selectedAnnotationType,callback:function(t){e.selectedAnnotationType=t},expression:"selectedAnnotationType"}})],1)]),e.ontology?t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("terms"))+" ")]),t("div",{staticClass:"filter-body"},[t("ontology-tree-multiselect",{attrs:{ontology:e.ontology,additionalNodes:e.additionalTermNodes},model:{value:e.selectedTermsIds,callback:function(t){e.selectedTermsIds=t},expression:"selectedTermsIds"}})],1)]):e._e(),e.tracks?t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("tracks"))+" ")]),t("div",{staticClass:"filter-body"},[t("track-tree-multiselect",{attrs:{tracks:e.filteredTracks,"additional-nodes":e.additionalTrackNodes},model:{value:e.selectedTracksIds,callback:function(t){e.selectedTracksIds=t},expression:"selectedTracksIds"}})],1)]):e._e(),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("tags"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.tagsOptions,label:"name","track-by":"id",multiple:!0,allPlaceholder:e.$t("all")},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)])]),t("div",{staticClass:"columns"},[e.selectedAnnotationType===e.jobAnnotationOption?t("div",{staticClass:"column filter is-one-third"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("analyses"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.userJobs,label:"fullName","track-by":"id",multiple:"",allPlaceholder:e.$t("all-analyses")},model:{value:e.selectedUserJobs,callback:function(t){e.selectedUserJobs=t},expression:"selectedUserJobs"}})],1)]):e.selectedAnnotationType===e.userAnnotationOption?t("div",{staticClass:"column filter is-one-third"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("members"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.filteredMembers,label:"fullName","track-by":"id",multiple:""},model:{value:e.selectedMembers,callback:function(t){e.selectedMembers=t},expression:"selectedMembers"}})],1)]):t("div",{staticClass:"column filter is-one-third"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("reviewers"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.members,label:"fullName","track-by":"id",multiple:""},model:{value:e.selectedReviewers,callback:function(t){e.selectedReviewers=t},expression:"selectedReviewers"}})],1)]),t("div",{staticClass:"column filter is-one-third"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("images"))+" ")]),t("div",{staticClass:"filter-body"},[e.tooManyImages&&0===e.selectedImages.length?t("b-input",{attrs:{placeholder:e.$t("all-images"),disabled:""}}):t("cytomine-multiselect",{attrs:{options:e.images,label:e.blindMode?"blindedName":"instanceFilename","track-by":"id",multiple:"",allPlaceholder:e.$t("all-images")},model:{value:e.selectedImages,callback:function(t){e.selectedImages=t},expression:"selectedImages"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("from"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-datepicker",{attrs:{styles:["multiselect"],maxDate:e.toDate||new Date},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("to"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-datepicker",{attrs:{styles:["multiselect"],minDate:e.fromDate,position:"is-bottom-left"},model:{value:e.toDate,callback:function(t){e.toDate=t},expression:"toDate"}})],1)])])])]),t("div",{ref:"listAnnots",staticClass:"list-annots",on:{scroll:e.scrollHandler}},[e._l(e.limitedCategoryOptions,(function(n){return t("list-annotations-by",{directives:[{name:"show",rawName:"v-show",value:e.showList(n),expression:"showList(prop)"}],key:"".concat(e.selectedCategorization.categorization).concat(n.id),attrs:{categorization:e.selectedCategorization.categorization,size:e.selectedSize.size,color:e.selectedColor.hexaCode,nbPerPage:e.nbPerPage,allTerms:e.terms,allUsers:e.allUsers,allImages:e.images,allTracks:e.tracks,allTags:e.tags,prop:n,"multiple-terms":e.isByTerm&&n.id===e.multipleTermsOption.id,"no-term":e.isByTerm&&n.id===e.noTermOption.id||!e.isByTerm&&e.noTerm,"multiple-tracks":e.isByTrack&&n.id===e.multipleTracksOption.id,"no-track":e.isByTrack&&n.id===e.noTrackOption.id||!e.isByTrack&&e.noTrack,"terms-ids":e.selectedTermsIds,"tracks-ids":e.selectedTracksIds,"tags-ids":e.selectedTagsIds,"no-tag":e.isByTag&&n.id===e.noTagOption.id||!e.isByTag&&e.noTag,imagesIds:e.selectedImagesIds,usersIds:e.selectedUsersIds,reviewed:e.reviewed,reviewUsersIds:e.reviewUsersIds,afterThan:e.afterThan,beforeThan:e.beforeThan,revision:e.revision,visible:e.showList(n)},on:{addTerm:e.addTerm,addTrack:e.addTrack,updateTermsOrTracks:function(t){e.revision++},delete:function(t){e.revision++},update:function(t){e.revision++},select:function(t){return e.viewAnnot(t)}}})})),e.areAllOptionsLoaded?e._e():t("button",{staticClass:"button",on:{click:function(t){return e.loadCategories()}}},[e._m(0),t("span",[e._v(e._s(e.$t("button-load-more")))])])],2),t("div",{staticClass:"box"},[t("h2",{staticClass:"has-text-centered"},[e._v(" "+e._s(e.$t("download-results"))+" ")]),t("div",{staticClass:"buttons is-centered"},[t("a",{staticClass:"button is-link",attrs:{href:e.downloadURL("pdf")}},[e._v(e._s(e.$t("download-PDF")))]),t("a",{staticClass:"button is-link",attrs:{href:e.downloadURL("csv")}},[e._v(e._s(e.$t("download-CSV")))]),t("a",{staticClass:"button is-link",attrs:{href:e.downloadURL("xls")}},[e._v(e._s(e.$t("download-excel")))])])])])],1):t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),t("p",[e._v(e._s(e.$t("insufficient-permission")))])])},er=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-sync"})])}],tr=function(){var e=this,t=e._self._c;return t("b-datepicker",{class:e.styles,attrs:{value:e.value,placeholder:e.placeholder||this.$t("select-date"),"min-date":e.minDate,"max-date":e.maxDate,"month-names":e.moment.months(),"day-names":e.moment.weekdaysMin(),"date-formatter":function(t){return e.moment(t).format("ll")},size:"is-small",position:e.position},on:{input:function(t){return e.$emit("input",t)}}},[e.resetButton?t("div",{staticClass:"has-text-centered"},[t("button",{staticClass:"button is-small is-link",attrs:{disabled:!e.value},on:{click:function(t){return e.$emit("input",null)}}},[e._v(" "+e._s(e.$t("button-reset"))+" ")])]):e._e()])},nr=[],ar=n("c1df"),rr=n.n(ar),ir={name:"cytomine-date-picker",props:{value:Date,resetButton:{type:Boolean,default:!0},maxDate:Date,minDate:Date,placeholder:String,styles:{type:Array,default:function(){return[]}},position:{type:String,default:null}},computed:{moment:function(){return rr.a}}},or=ir,sr=(n("f24c"),Object(C["a"])(or,tr,nr,!1,null,null,null)),cr=sr.exports,lr=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.activeSelector=!1},expression:"() => activeSelector = false"}],staticClass:"multiselect",class:{"multiselect--active":e.activeSelector}},[t("div",{staticClass:"multiselect__select",on:{click:function(t){e.activeSelector=!e.activeSelector}}}),t("div",{staticClass:"multiselect__tags",on:{click:function(t){e.activeSelector=!0}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.activeSelector,expression:"!activeSelector"}],staticClass:"multiselect__tags-wrap"},[e.allSelected?t("strong",[e._v(" "+e._s(e.$t("all"))+" ")]):[e._l(e.displayedSelectedTerms,(function(n,a){return t("span",{key:n.id},[t("cytomine-term",{attrs:{term:n}}),a<e.displayedSelectedTerms.length-1?t("span",{staticClass:"comma"},[e._v(",")]):e._e()],1)})),e.countNotDisplayed>0?t("strong",[e._v(" "+e._s(e.$tc("and-count-others",e.countNotDisplayed,{count:e.countNotDisplayed}))+" ")]):e._e()]],2),t("input",{directives:[{name:"show",rawName:"v-show",value:e.activeSelector,expression:"activeSelector"},{name:"model",rawName:"v-model",value:e.searchString,expression:"searchString"}],ref:"input",staticClass:"multiselect__input",attrs:{type:"text",placeholder:e.$t("select-options")},domProps:{value:e.searchString},on:{input:function(t){t.target.composing||(e.searchString=t.target.value)}}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.activeSelector,expression:"activeSelector"}],staticClass:"multiselect__content-wrapper"},[e.multiple?t("ul",[t("li",{staticClass:"multiselect__element multiselect__select-all",on:{click:function(t){return e.selectAll()}}},[t("span",{class:["multiselect__option",e.allSelected?"multiselect__option--selected":""]},[e._v(" "+e._s(e.$t("select-all"))+" ")])])]):e._e(),t("ontology-tree",{attrs:{ontology:e.ontology,additionalNodes:e.additionalNodes,startWithAdditionalNodes:e.startWithAdditionalNodes,selectedNodes:e.selectedNodes,searchString:e.searchString,multipleSelection:e.multiple},on:{select:function(t){return e.handleSelection()},setSelectedNodes:function(t){return e.$emit("setSelectedNodes",t)}},scopedSlots:e._u([{key:"no-result",fn:function(){return[t("ul",{staticClass:"multiselect__content"},[t("li",{on:{click:function(t){return e.selectAll()}}},[t("span",{staticClass:"multiselect__option"},[e._v(" "+e._s(e.$t("no-result"))+" ")])])])]},proxy:!0}])})],1)])},ur=[],dr=n("47f0");function pr(e){return mr(e.children.array)}function mr(e){var t=[];return e.forEach((function(e){t.push(e),e.children&&t.push.apply(t,Object(L["a"])(mr(e.children)))})),t}var fr={name:"ontology-tree-multiselect",components:{OntologyTree:Xt["a"],CytomineTerm:dr["a"]},model:{prop:"selectedNodes",event:"setSelectedNodes"},props:{ontology:{type:Object},additionalNodes:{type:Array,default:function(){return[]}},startWithAdditionalNodes:{type:Boolean,default:!1},selectedNodes:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!0}},data:function(){return{activeSelector:!1,searchString:"",maxNbDisplayed:3}},computed:{allTerms:function(){if(!this.ontology)return[];var e=this.additionalNodes.map((function(e){return e}));return e.push.apply(e,Object(L["a"])(pr(this.ontology))),e},allSelected:function(){return this.allTerms.length===this.selectedNodes.length},displayedSelectedTerms:function(){var e=this,t=this.selectedNodes.slice(0,this.maxNbDisplayed);return t.map((function(t){return e.allTerms.find((function(e){return e.id===t}))}))},countNotDisplayed:function(){return this.selectedNodes.length-this.maxNbDisplayed}},watch:{activeSelector:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return n.next=3,t.$nextTick();case 3:t.$refs.input.focus();case 4:case"end":return n.stop()}}),n)})))()}},methods:{selectAll:function(){this.$emit("setSelectedNodes",this.allSelected?[]:this.allTerms.map((function(e){return e.id})))},handleSelection:function(){this.multiple||(this.activeSelector=!1)}}},hr=fr,gr=Object(C["a"])(hr,lr,ur,!1,null,null,null),vr=gr.exports,br=function(){var e=this,t=e._self._c;return t("div",{staticClass:"box"},[t("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),!e.isInViewer||e.isInViewer&&!e.loading?t("div",[t("h2",[e.titlePrefix?[e._v(e._s(e.titlePrefix)+" ")]:e._e(),t("span",{class:{"has-text-weight-bold":e.titlePrefix||e.titleSuffix}},[e._v(e._s(e.title))]),e.titleSuffix?[e._v(" "+e._s(e.titleSuffix))]:e._e(),e._v(" ("+e._s(e.nbAnnotations)+") ")],2),e.error?[t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("failed-fetch-annots"))+" ")])]:e.annotations.length?[e._l(e.annotations,(function(n){return t("annotation-preview",{key:(e.isInViewer?e.index:"")+e.title+n.id,class:{active:e.isInViewer&&e.activeSlicesIds.includes(n.slice)},attrs:{annot:n,size:e.size,color:e.color,terms:e.allTerms,users:e.allUsers,images:e.allImages,tracks:e.allTracks,"show-image-info":!e.isInViewer,"show-slice-info":e.isByTrack&&!e.noTrack},on:{addTerm:function(t){return e.$emit("addTerm",t)},addTrack:function(t){return e.$emit("addTrack",t)},updateTermsOrTracks:function(t){return e.$emit("updateTermsOrTracks",n)},updateProperties:function(t){return e.$emit("updateProperties")},centerView:function(t){return e.$emit("centerView",n)},deletion:function(t){return e.$emit("delete",n)},select:function(t){return e.$emit("select",t)}}})})),t("b-pagination",{attrs:{total:e.nbAnnotations,current:e.currentPage,size:"is-small","per-page":e.nbPerPage},on:{"update:current":function(t){e.currentPage=t}}})]:[t("em",{staticClass:"no-result"},[e._v(e._s(e.$t("no-annotation")))])]],2):e._e()],1)},yr=[],wr=function(){var e=this,t=e._self._c;return t("v-popover",{attrs:{placement:"right",trigger:"manual",open:e.opened,"auto-hide":!1},scopedSlots:e._u([{key:"popover",fn:function(){return[e.opened?t("annotation-details",{directives:[{name:"click-outside",rawName:"v-click-outside.capture",value:function(t){return e.close(t)},expression:"(event) => close(event)",modifiers:{capture:!0}}],attrs:{annotation:e.annot,terms:e.terms,users:e.users,images:e.images,tracks:e.tracks,"show-image-info":e.showImageInfo},on:{addTerm:function(t){return e.$emit("addTerm",t)},addTrack:function(t){return e.$emit("addTrack",t)},updateTerms:function(t){return e.$emit("updateTermsOrTracks")},updateTracks:function(t){return e.$emit("updateTermsOrTracks")},updateProperties:function(t){return e.$emit("updateProperties")},select:function(t){return e.$emit("select",t)},centerView:function(t){return e.$emit("centerView")},deletion:function(t){return e.$emit("deletion")}}}):e._e()]},proxy:!0}])},[t("div",{staticClass:"annot-preview",class:{clickable:e.clickable}},[t("div",{style:e.styleAnnotDetails,on:{click:function(t){return t.target!==t.currentTarget?null:e.viewAnnot(e.sameViewOnClick)}}},[e.showDetails?t("button",{ref:"previewButton",staticClass:"button is-small",on:{click:function(t){e.opened=!e.opened}}},[t("i",{class:["fas",e.opened?"fa-minus":"fa-plus"]})]):e.clickable&&e.sameViewOnClick?t("button",{staticClass:"button is-small",on:{click:function(t){return e.viewAnnot()}}},[t("i",{staticClass:"fas fa-external-link-alt"})]):e._e()]),e.showSliceInfo?[e.image.channels>1||null==e.image.channels?t("div",[e._v("C: "+e._s(e.annot.channel))]):e._e(),e.image.depth>1||null==e.image.depth?t("div",[e._v("Z: "+e._s(e.annot.zStack))]):e._e(),e.image.duration>1||null==e.image.duration?t("div",[e._v("T: "+e._s(e.annot.time))]):e._e()]:e._e()],2)])},jr=[],kr={name:"annotation-preview",props:{annot:Object,size:Number,color:String,terms:Array,users:Array,images:Array,tracks:Array,showDetails:{type:Boolean,default:!0},showImageInfo:{type:Boolean,default:!0},showSliceInfo:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},sameViewOnClick:{type:Boolean,default:!1}},components:{AnnotationDetails:function(){return Promise.resolve().then(n.bind(null,"305f"))}},data:function(){return{opened:!1,revisionCrop:0}},computed:{shortTermToken:Object(l["a"])("currentUser/shortTermToken"),cropParameters:function(){var e={square:!0,complete:!0,thickness:2,increaseArea:1.25,rev:this.revisionCrop};return(this.color||""===this.color)&&(e.draw=!0),this.color&&(e.color="0x".concat(this.color)),this.annot.updated&&(e.updated=this.annot.updated),e},cropUrl:function(){return this.annot.annotationCropURL(this.size,"jpg",this.cropParameters)},styleAnnotDetails:function(){var e=Object(k["a"])("".concat(this.cropUrl),this.shortTermToken);return{backgroundImage:"url(".concat(e,")"),backgroundRepeat:"no-repeat",width:this.size+"px",height:this.size+"px"}},image:function(){var e=this;return this.images.find((function(t){return t.id===e.annot.image}))}},methods:{viewAnnot:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.clickable&&this.$emit("select",{annot:this.annot,options:{trySameView:e}})},close:function(e){if(this.opened){var t=e.target;while(t){if(t.classList.contains("modal")||t.classList.contains("notifications")||t.isSameNode(this.$refs.previewButton))return;t=t.parentElement}this.opened=!1}},reloadAnnotationCropHandler:function(e){e.id===this.annot.id&&this.revisionCrop++}},mounted:function(){this.$eventBus.$on("reloadAnnotationCrop",this.reloadAnnotationCropHandler)},beforeDestroy:function(){this.$eventBus.$off("reloadAnnotationCrop",this.reloadAnnotationCropHandler)}},_r=kr,xr=(n("2eef"),Object(C["a"])(_r,wr,jr,!1,null,"a37d5e4e",null)),Cr=xr.exports,Or={name:"list-annotations-by",props:{categorization:String,nbPerPage:Number,size:Number,color:String,prop:Object,multipleTerms:Boolean,noTerm:Boolean,multipleTracks:Boolean,noTrack:Boolean,noTag:Boolean,termsIds:Array,tracksIds:Array,tagsIds:Array,imagesIds:Array,usersIds:Array,reviewed:Boolean,reviewUsersIds:{type:Array,default:null},afterThan:{type:Number,default:null},beforeThan:{type:Number,default:null},slicesIds:{type:Array,default:null},allTerms:Array,allUsers:Array,allImages:Array,allTracks:Array,allTags:Array,revision:Number,visible:{type:Boolean,default:!0},index:String},components:{AnnotationPreview:Cr},data:function(){return{loading:!0,error:!1,annotations:[],nbAnnotations:0,pendingReload:!0,savedSlice:null}},computed:{project:Object(l["a"])("currentProject/project"),isByTerm:function(){return"TERM"===this.categorization},isByTrack:function(){return"TRACK"===this.categorization},isByUser:function(){return"USER"===this.categorization},isByImage:function(){return"IMAGE"===this.categorization},isByTag:function(){return"TAG"===this.categorization},isUncategorized:function(){return"UNCATEGORIZED"===this.categorization},filteredTermsIds:function(){return this.termsIds.filter((function(e){return e>0}))},filteredTracksIds:function(){return this.tracksIds.filter((function(e){return e>0}))},tooManyImages:function(){return this.project.numberOfImages>I["a"].MAX_IMAGES_FOR_FILTER},collection:function(){return this.revision,new p["AnnotationCollection"]({slices:this.isByTerm&&this.isInViewer?this.slicesIds:null,term:!this.isByTerm||this.multipleTerms||this.noTerm?null:this.prop.id,track:!this.isByTrack||this.multipleTracks||this.noTrack?null:this.prop.id,tag:this.isByTag&&!this.noTag?this.prop.id:null,user:this.isByUser?this.prop.id:null,image:this.isByImage?this.prop.id:null,noTerm:this.noTerm,multipleTerm:this.multipleTerms,noTrack:this.noTrack,multipleTrack:this.multipleTracks,noTag:this.noTag,terms:!this.isByTerm&&(this.noTerm||this.multipleTerm||this.filteredTermsIds.length<this.allTerms.length)?this.filteredTermsIds.filter((function(e){return e>0})):null,users:!this.isByUser&&this.usersIds?this.usersIds:null,images:!this.isByImage&&(this.tooManyImages&&this.imagesIds.length>0||!this.tooManyImages&&this.imagesIds.length<this.allImages.length)?this.imagesIds:null,tracks:!this.isByTrack&&(this.noTrack||this.multipleTrack||this.filteredTracksIds.length<this.allTracks.length)?this.filteredTracksIds.filter((function(e){return e>0})):null,tags:!this.isByTag&&this.tagsIds?this.tagsIds.filter((function(e){return e>0})):null,reviewed:this.reviewed,reviewUsers:this.isByUser?null:this.reviewUsersIds,showTerm:!0,showGIS:!0,showTrack:!0,showWKT:this.isInViewer,showImage:this.tooManyImages,showSlice:!0,afterThan:this.afterThan,beforeThan:this.beforeThan,max:this.nbPerPage,project:this.currentProject.id})},title:function(){return this.isByUser?Object(he["a"])(this.prop):this.isByImage?this.prop.blindedName?this.prop.blindedName:this.prop.instanceFilename:this.isByTerm&&this.multipleTerms?this.$t("multiple-terms"):this.isByTerm&&this.noTerm?this.$t("no-term"):this.isByTrack&&this.multipleTracks?this.$t("multiple-tracks"):this.isByTrack&&this.noTrack?this.$t("no-track"):this.isByTag&&this.noTag?this.$t("no-tag"):this.isUncategorized?this.$t("all-annotations-uncategorized"):this.prop.name},titlePrefix:function(){if(!this.isInViewer)return"";var e="";return this.isByTerm?(e+=this.$t("currently-visible-annotations-with"),this.noTerm||(e+=" ".concat(this.$t("the-term")))):this.isByTrack&&(e+=this.$t("currently-visible-annotations-for-track")),e},titleSuffix:function(){return this.isInViewer?this.isByTerm?this.$t("in-this-slice"):this.$t("in-this-image"):void 0},isInViewer:function(){return void 0!==this.index},currentProject:Object(l["a"])("currentProject/project"),projectModule:function(){return this.$store.getters["currentProject/currentProjectModule"]},imageModule:function(){return this.isInViewer?this.$store.getters["currentProject/imageModule"](this.index):null},imageWrapper:function(){return this.isInViewer?this.$store.getters["currentProject/currentViewer"].images[this.index]:null},currentPage:{get:function(){return this.isInViewer?this.imageWrapper.annotationsList.currentPages[this.prop.id]||1:this.$store.state.projects[this.currentProject.id].listAnnotations.currentPages[this.prop.id]||1},set:function(e){this.isInViewer&&this.$store.commit(this.imageModule+"setCurrentPage",{prop:this.prop.id,page:e}),this.$store.commit(this.projectModule+"listAnnotations/setCurrentPage",{prop:this.prop.id,page:e})}},activeSlices:function(){return this.imageWrapper?this.imageWrapper.activeSlices:null},activeSlicesIds:function(){return this.activeSlices?this.activeSlices.map((function(e){return e.id})):[]},activeSliceWithSmallestRank:function(){return this.activeSlices?wt.a.orderBy(this.activeSlices,["rank"])[0]:null}},watch:{currentPage:function(){this.fetchPage()},collection:function(e,t){t&&e.track!==t.track?this.initialize():this.fetchPage()},visible:function(){this.pendingReload&&this.fetchPage()},activeSlices:function(){this.findPage()}},methods:{initialize:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.findPage();case 2:return t.next=4,e.fetchPage(!0);case 4:case"end":return t.stop()}}),t)})))()},findPage:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isInViewer){t.next=12;break}return n=e.collection.clone(),n.beforeSlice=e.activeSliceWithSmallestRank,n.max=1,t.t0=Math,t.next=7,n.fetchPage();case 7:t.t1=t.sent.totalNbItems,t.t2=t.t1+1,t.t3=e.nbPerPage,t.t4=t.t2/t.t3,e.currentPage=t.t0.ceil.call(t.t0,t.t4);case 12:case"end":return t.stop()}}),t)})))()},fetchPage:function(){var e=arguments,t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]&&e[0],t.visible){n.next=4;break}return t.pendingReload=!0,n.abrupt("return");case 4:if(t.pendingReload=!1,(t.tooManyImages||t.imagesIds.length)&&(t.reviewed||t.usersIds.length)&&(!t.reviewed||t.reviewUsersIds.length)&&t.termsIds.length&&t.tracksIds.length&&(!t.tagsIds||t.tagsIds.length)){n.next=9;break}return t.annotations=[],t.nbAnnotations=0,n.abrupt("return");case 9:return a&&(t.loading=!0),n.prev=10,n.next=13,t.collection.fetchPage(t.currentPage-1);case 13:r=n.sent,t.annotations=r.array,t.nbAnnotations=r.totalNbItems,n.next=25;break;case 18:if(n.prev=18,n.t0=n["catch"](10),!(t.currentPage>1)){n.next=23;break}return t.currentPage=1,n.abrupt("return");case 23:t.nbAnnotations=0,t.error=!0;case 25:t.loading=!1;case 26:case"end":return n.stop()}}),n,null,[[10,18]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.initialize();case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()}},$r=Or,Tr=(n("a38b"),Object(C["a"])($r,br,yr,!1,null,"357d368c",null)),Sr=Tr.exports,Pr=(n("dca8"),n("8682")),Ar=n("6c77"),Ir=n("ce2c"),Dr=n("83a6"),Er=n("8295"),Nr=n("9a44"),Mr=n("5c38");function Rr(e){var t=e.get("annot");if(t)return null!=t.count}function Ur(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=Object(Mr["a"])(e),a=n.slice();a[3]=t;var r=new Pr["a"]({color:a,width:2});return new Ar["c"]({stroke:r,image:new Ir["a"]({radius:5,stroke:r})})}function zr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=Object(Mr["a"])(e),a=n.slice();return a[3]=t,new Ar["c"]({stroke:new Pr["a"]({color:a,width:5})})}function Lr(e,t){var n=e.slice();return n[3]=t,n}function Fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=I["a"].ANNOTATION_STROKE_COLOR?I["a"].ANNOTATION_STROKE_COLOR:ei;return new Pr["a"]({color:Lr(t,e),width:2})}function Br(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=Object(Mr["a"])(e),a=n.slice();a[3]=t;var r=new Dr["a"]({color:a}),i=new Ir["a"]({radius:5,fill:new Dr["a"]({color:n}),stroke:Fr(1)});return i.setOpacity(t),new Ar["c"]({fill:r,stroke:Fr(t),image:i})}function qr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=Object(Mr["a"])(e),a=n.slice();return a[3]=t,new Ar["c"]({stroke:new Pr["a"]({color:a,width:3})})}var Vr=new Dr["a"]({color:"#fff"}),Wr=new Pr["a"]({color:"#000",width:3});function Gr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"22px",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vr,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wr;return new Ar["c"]({text:new Er["a"]({text:e,font:"".concat(t," Arial, sans-serif"),overflow:!0,fill:n,stroke:a})})}var Hr=2,Jr=[0,153,255,1],Kr=[51,160,79,1],Yr=[17,214,76,1],Zr=[200,40,40,1],Xr=[255,56,56,1],Qr=[255,255,255,1],ei=[0,0,0,1],ti=new Pr["a"]({color:Jr,width:Hr}),ni=new Pr["a"]({color:Kr,width:Hr+1}),ai=new Pr["a"]({color:Yr,width:Hr}),ri=new Pr["a"]({color:Zr,width:Hr+1}),ii=new Pr["a"]({color:Xr,width:Hr}),oi=new Pr["a"]({color:Qr,width:Hr+2}),si=ti;if(I["a"].ANNOTATION_STROKE_SELECT_COLOR){var ci=Lr(I["a"].ANNOTATION_STROKE_SELECT_COLOR,1);si=new Pr["a"]({color:ci,width:Hr})}var li=[new Ar["c"]({stroke:oi}),new Ar["c"]({image:new Ir["a"]({radius:6,stroke:oi})})],ui=[new Ar["c"]({stroke:oi}),new Ar["c"]({stroke:si}),new Ar["c"]({image:new Ir["a"]({radius:6,stroke:si})})],di=new Ar["c"]({image:new Ir["a"]({radius:Hr+1,fill:new Dr["a"]({color:Jr})}),geometry:function(e){var t=e.getGeometry().getCoordinates()[0];return new Nr["a"](t)}}),pi=[new Ar["c"]({stroke:ni}),new Ar["c"]({image:new Ir["a"]({radius:6,stroke:ni})})],mi=[new Ar["c"]({stroke:oi}),new Ar["c"]({stroke:ai}),new Ar["c"]({image:new Ir["a"]({radius:6,stroke:ai})})],fi=[new Ar["c"]({stroke:ri}),new Ar["c"]({image:new Ir["a"]({radius:6,stroke:ri})})],hi=[new Ar["c"]({stroke:oi}),new Ar["c"]({stroke:ii}),new Ar["c"]({image:new Ir["a"]({radius:6,stroke:ii})})];function gi(e,t){var n=e.getStroke();n&&(n.getColor()[3]=t);var a=e.getFill();a&&(a.getColor()[3]=t);var r=e.getImage();r&&r.setOpacity(t)}function vi(e,t){return{name:e,fill:new Dr["a"]({color:"#"+t}),hexaCode:t}}var bi=Object.freeze([vi("black","000000"),vi("white","ffffff"),vi("red","ff0000"),vi("orange","ff6600"),vi("yellow","ffff00"),vi("green","008000"),vi("blue","0000ff"),vi("purple","800080")]),yi=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.activeSelector=!1},expression:"() => activeSelector = false"}],staticClass:"multiselect",class:{"multiselect--active":e.activeSelector}},[t("div",{staticClass:"multiselect__select",on:{click:function(t){e.activeSelector=!e.activeSelector}}}),t("div",{staticClass:"multiselect__tags",on:{click:function(t){e.activeSelector=!0}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.activeSelector,expression:"!activeSelector"}],staticClass:"multiselect__tags-wrap"},[e.allSelected?t("strong",[e._v(" "+e._s(e.$t("all"))+" ")]):[e._l(e.displayedSelectedTracks,(function(n,a){return t("span",{key:n.id},[t("cytomine-track",{attrs:{track:n}}),a<e.displayedSelectedTracks.length-1?t("span",{staticClass:"comma"},[e._v(",")]):e._e()],1)})),e.countNotDisplayed>0?t("strong",[e._v(" "+e._s(e.$tc("and-count-others",e.countNotDisplayed,{count:e.countNotDisplayed}))+" ")]):e._e()]],2),t("input",{directives:[{name:"show",rawName:"v-show",value:e.activeSelector,expression:"activeSelector"},{name:"model",rawName:"v-model",value:e.searchString,expression:"searchString"}],ref:"input",staticClass:"multiselect__input",attrs:{type:"text",placeholder:e.$t("select-options")},domProps:{value:e.searchString},on:{input:function(t){t.target.composing||(e.searchString=t.target.value)}}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.activeSelector,expression:"activeSelector"}],staticClass:"multiselect__content-wrapper"},[e.multiple?t("ul",[t("li",{staticClass:"multiselect__element multiselect__select-all",on:{click:function(t){return e.selectAll()}}},[t("span",{class:["multiselect__option",e.allSelected?"multiselect__option--selected":""]},[e._v(" "+e._s(e.$t("select-all"))+" ")])])]):e._e(),t("track-tree",{attrs:{tracks:e.tracks,additionalNodes:e.additionalNodes,startWithAdditionalNodes:e.startWithAdditionalNodes,selectedNodes:e.selectedNodes,searchString:e.searchString,multipleSelection:e.multiple},on:{select:function(t){return e.handleSelection()},setSelectedNodes:function(t){return e.$emit("setSelectedNodes",t)}},scopedSlots:e._u([{key:"no-result",fn:function(){return[t("ul",{staticClass:"multiselect__content"},[t("li",{on:{click:function(t){return e.selectAll()}}},[t("span",{staticClass:"multiselect__option"},[e._v(" "+e._s(e.$t("no-result"))+" ")])])])]},proxy:!0}])})],1)])},wi=[],ji=n("d3f2"),ki=n("435d"),_i={name:"track-tree-multiselect",components:{TrackTree:ji["a"],CytomineTrack:ki["a"]},model:{prop:"selectedNodes",event:"setSelectedNodes"},props:{tracks:{type:Array},additionalNodes:{type:Array,default:function(){return[]}},startWithAdditionalNodes:{type:Boolean,default:!1},selectedNodes:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!0}},data:function(){return{activeSelector:!1,searchString:"",maxNbDisplayed:3}},computed:{allTracks:function(){if(!this.tracks)return[];var e=this.additionalNodes.map((function(e){return e}));return e.push.apply(e,Object(L["a"])(this.tracks)),e},allSelected:function(){return this.allTracks.length===this.selectedNodes.length},displayedSelectedTracks:function(){var e=this,t=this.selectedNodes.slice(0,this.maxNbDisplayed);return t.map((function(t){return e.allTracks.find((function(e){return e.id===t}))}))},countNotDisplayed:function(){return this.selectedNodes.length-this.maxNbDisplayed}},watch:{activeSelector:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return n.next=3,t.$nextTick();case 3:t.$refs.input.focus();case 4:case"end":return n.stop()}}),n)})))()}},methods:{selectAll:function(){this.$emit("setSelectedNodes",this.allSelected?[]:this.allTracks.map((function(e){return e.id})))},handleSelection:function(){this.multiple||(this.activeSelector=!1)}}},xi=_i,Ci=Object(C["a"])(xi,yi,wi,!1,null,null,null),Oi=Ci.exports,$i={rootModuleProp:"storeModule"},Ti=function(e,t){return Object(l["e"])(null,e,t,$i)},Si=I["a"].CATEGORY_ITEMS_PER_BATCH,Pi={name:"list-annotations",components:{TrackTreeMultiselect:Oi,CytomineMultiselect:ee,CytomineDatepicker:cr,OntologyTreeMultiselect:vr,ListAnnotationsBy:Sr},data:function(){return{algoEnabled:I["a"].ALGORITHMS_ENABLED,loading:!0,error:!1,revision:0,projectUsers:[],userJobs:[],tracks:[],allowedSizes:[{label:this.$t("small"),size:85},{label:this.$t("medium"),size:125},{label:this.$t("large"),size:200},{label:this.$t("huge"),size:400}],userAnnotationOption:this.$t("user-annotations"),jobAnnotationOption:this.$t("analysis-annotations"),reviewedAnnotationOption:this.$t("reviewed-annotations"),annotationTypes:[],images:[],tags:[],noTermOption:{id:0,name:this.$t("no-term")},multipleTermsOption:{id:-1,name:this.$t("multiple-terms")},noTrackOption:{id:0,name:this.$t("no-track")},multipleTracksOption:{id:-1,name:this.$t("multiple-tracks")},noTagOption:{id:0,name:this.$t("no-tag")},uncategorizedOption:{id:0,name:this.$t("uncategorized")},nLoadedOptionsPerCategory:{TERM:I["a"].ANNOTATIONS_MAX_ITEMS_PER_CATEGORY,IMAGE:I["a"].ANNOTATIONS_MAX_ITEMS_PER_CATEGORY,USER:I["a"].ANNOTATIONS_MAX_ITEMS_PER_CATEGORY,TRACK:I["a"].ANNOTATIONS_MAX_ITEMS_PER_CATEGORY,UNCATEGORIZED:I["a"].ANNOTATIONS_MAX_ITEMS_PER_CATEGORY}}},computed:{allowedCategorizations:function(){var e=[{label:this.$t("per-term"),categorization:"TERM"},{label:this.$t("per-track"),categorization:"TRACK"},{label:this.$t("per-user"),categorization:"USER"}];return this.tooManyImages||e.push({label:this.$t("per-image"),categorization:"IMAGE"}),e.push({label:this.$t("uncategorized"),categorization:"UNCATEGORIZED"}),e},currentUser:Object(l["a"])("currentUser/user"),project:Object(l["a"])("currentProject/project"),shortTermToken:Object(l["a"])("currentUser/shortTermToken"),blindMode:function(){return this.project.blindMode},canManageProject:function(){return this.$store.getters["currentProject/canManageProject"]},ontology:Object(l["a"])("currentProject/ontology"),configUI:Object(l["a"])("currentProject/configUI"),storeModule:function(){return this.$store.getters["currentProject/currentProjectModule"]+"listAnnotations"},colors:function(){var e=this,t=bi.map((function(t){return Object(h["a"])({label:e.$t(t.name)},t)}));return t.push({label:this.$t("no-outline"),hexaCode:""}),t},selectedSize:Object(l["b"])("previewSize",$i),selectedCategorization:Object(l["b"])("categorization",$i),nbPerPage:Object(l["b"])("perPage",$i),selectedColor:Object(l["b"])("outlineColor",$i),targetAnnotationType:function(){switch(this.$route.query.type){case"user":return this.userAnnotationOption;case"algo":return this.jobAnnotationOption;case"reviewed":return this.reviewedAnnotationOption}},allUsers:function(){return this.projectUsers.concat(this.userJobs)},members:Object(l["a"])("currentProject/members"),managers:Object(l["a"])("currentProject/managers"),filteredMembers:function(){var e=this;if(this.canManageProject||!this.project.hideUsersLayers&&!this.project.hideAdminsLayers)return this.members;var t=this.managers.map((function(e){return e.id}));return this.members.filter((function(n){if(e.currentUser.id===n.id)return!0;var a=t.includes(n.id);return a?!e.project.hideAdminsLayers:!e.project.hideUsersLayers}))},terms:function(){return this.$store.getters["currentProject/terms"]||[]},additionalTermNodes:function(){var e=[this.noTermOption];return this.terms.length>1&&this.isByTerm&&e.push(this.multipleTermsOption),e},termsOptions:function(){return this.terms.concat(this.additionalTermNodes)},termOptionsIds:function(){return this.termsOptions.map((function(e){return e.id}))},filteredTracks:function(){var e=this;return this.tracks.filter((function(t){return e.selectedImagesIds.includes(t.image)}))},filteredTracksIds:function(){return this.filteredTracks.map((function(e){return e.id}))},additionalTrackNodes:function(){var e=[this.noTrackOption];return this.tracks.length>1&&this.isByTrack&&e.push(this.multipleTracksOption),e},tracksOptions:function(){return this.filteredTracks.concat(this.additionalTrackNodes)},trackOptionsIds:function(){return this.tracksOptions.map((function(e){return e.id}))},tagsOptions:function(){return[].concat(Object(L["a"])(this.tags),[this.noTagOption])},selectedAnnotationType:Object(l["b"])("annotationType",$i),selectedMembers:Ti("members","filteredMembers"),selectedReviewers:Ti("reviewers","members"),selectedUserJobs:Ti("userJobs","userJobs"),selectedImages:Ti("images","images"),selectedTags:Ti("tags","tagsOptions"),selectedTracksIds:Ti("tracksIds","trackOptionsIds"),selectedTermsIds:Ti("termsIds","termOptionsIds"),fromDate:Object(l["b"])("fromDate",$i),toDate:Object(l["b"])("toDate",$i),afterThan:function(){return this.fromDate?this.fromDate.getTime():null},beforeThan:function(){return this.toDate?this.toDate.setHours(23,59,59,999):null},reviewed:function(){return this.selectedAnnotationType===this.reviewedAnnotationOption},selectedUsersIds:function(){if(this.reviewed)return null;var e=this.selectedAnnotationType===this.jobAnnotationOption?this.selectedUserJobs:this.selectedMembers;return e.map((function(e){return e.id}))},reviewUsersIds:function(){return this.reviewed?this.selectedReviewers.map((function(e){return e.id})):null},querySearchImage:function(){return this.$route.query.image},querySearchTags:function(){return this.$route.query.tags},selectedImagesIds:function(){return this.selectedImages.map((function(e){return e.id}))},categoryOptions:function(){switch(this.selectedCategorization.categorization){case"TERM":return this.termsOptions;case"IMAGE":return this.images;case"USER":return this.selectedAnnotationType===this.jobAnnotationOption?this.selectedUserJobs:this.reviewed?this.selectedReviewers:this.selectedMembers;case"TRACK":return this.tracksOptions;case"UNCATEGORIZED":return[this.uncategorizedOption];default:return[]}},limitedCategoryOptions:function(){return this.categoryOptions.slice(0,this.nLoadedOptionsPerCategory[this.selectedCategorization.categorization])},areAllOptionsLoaded:function(){return this.categoryOptions.length===this.limitedCategoryOptions.length},isByTerm:function(){return"TERM"===this.selectedCategorization.categorization},isByTrack:function(){return"TRACK"===this.selectedCategorization.categorization},isByTag:function(){return"TAG"===this.selectedCategorization.categorization},noTerm:function(){return this.selectedTermsIds.includes(this.noTermOption.id)},noTrack:function(){return this.selectedTracksIds.includes(this.noTrackOption.id)},noTag:function(){return this.selectedTagsIds.includes(this.noTagOption.id)},selectedTagsIds:function(){return this.selectedTags.map((function(e){return e.id}))},collection:function(){this.selectedAnnotationType===this.jobAnnotationOption?this.userJobs:this.projectUsers;var e=new p["AnnotationCollection"]({project:this.project.id,terms:this.selectedTermsIds.length===this.termsOptions.length?null:this.selectedTermsIds,images:this.tooManyImages&&0===this.selectedImages.length?null:this.selectedImagesIds,users:this.selectedUsersIds,reviewed:this.reviewed,reviewUsers:this.reviewUsersIds,noTerm:this.noTerm,multipleTerms:this.selectedTermsIds.includes(this.multipleTermsOption.id),afterThan:this.afterThan,beforeThan:this.beforeThan});return this.selectedTagsIds.length>0&&this.selectedTagsIds.length<this.tags.length&&(e["tags"]=this.selectedTagsIds,e["noTag"]=this.noTag),e},tooManyImages:function(){return this.project.numberOfImages>I["a"].MAX_IMAGES_FOR_FILTER}},methods:{scrollHandler:wt.a.debounce((function(){var e=this.$refs.listAnnots,t=e.scrollTop+e.clientHeight;t!==e.scrollHeight||this.areAllOptionsLoaded||this.loadCategories()}),100),loadCategories:function(){var e=this.limitedCategoryOptions.length+Si;e>=this.categoryOptions.length?this.nLoadedOptionsPerCategory[this.selectedCategorization.categorization]=this.categoryOptions.length:this.nLoadedOptionsPerCategory[this.selectedCategorization.categorization]=e},appendShortTermToken:k["a"],viewAnnot:function(e){this.$router.push("/project/".concat(this.project.id,"/image/").concat(e.annot.image,"/annotation/").concat(e.annot.id))},fetchImages:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.tooManyImages){t.next=4;break}return t.next=3,p["ImageInstanceCollection"].fetchAll({filterKey:"project",filterValue:e.project.id,light:!0});case 3:e.images=t.sent.array;case 4:case"end":return t.stop()}}),t)})))()},fetchUsers:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new p["UserCollection"]({filterKey:"project",filterValue:e.project.id}),t.next=3,n.fetchAll();case 3:e.projectUsers=t.sent.array,e.projectUsers.forEach((function(e){e.fullName=Object(he["a"])(e)}));case 5:case"end":return t.stop()}}),t)})))()},fetchUserJobs:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["UserJobCollection"].fetchAll({filterKey:"project",filterValue:e.project.id});case 2:e.userJobs=t.sent.array,e.userJobs.forEach((function(e){e.fullName=Object(he["a"])(e)}));case 4:case"end":return t.stop()}}),t)})))()},fetchTracks:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["TrackCollection"].fetchAll({filterKey:"project",filterValue:e.project.id});case 2:e.tracks=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},fetchTags:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["TagCollection"].fetchAll();case 2:e.tags=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},downloadURL:function(e){return Object(k["a"])(this.collection.getDownloadURL(e),this.shortTermToken)},addTerm:function(e){this.terms.push(e),this.selectedTermsIds.push(e.id)},addTrack:function(e){this.tracks.push(e)},resetPagesAndFilters:function(){this.$store.commit(this.storeModule+"/resetPagesAndFilters")},showList:function(e){switch(this.selectedCategorization.categorization){case"TERM":return this.selectedTermsIds.includes(e.id);case"IMAGE":return this.selectedImagesIds.includes(e.id);case"USER":return this.reviewed?this.reviewUsersIds.includes(e.id):this.selectedUsersIds.includes(e.id);case"TRACK":return this.selectedTracksIds.includes(e.id);case"UNCATEGORIZED":return!0}}},watch:{querySearchTags:function(e){if(e){this.selectedTags=[];var t=this.availableTags.filter((function(t){return e.split(",").includes(t.name)}));t&&(this.resetPagesAndFilters(),this.selectedTags=t)}},querySearchImage:function(e){if(e){this.selectedImages=[];var t=this.images.find((function(t){return t.id===Number(e)}));t&&(this.resetPagesAndFilters(),this.selectedImages=[t])}}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.annotationTypes=[e.userAnnotationOption,e.reviewedAnnotationOption],e.algoEnabled&&e.annotationTypes.splice(1,0,e.jobAnnotationOption),e.selectedSize||(e.selectedSize=e.allowedSizes[0]),e.selectedCategorization||(e.selectedCategorization=e.allowedCategorizations[0]),e.selectedColor||(e.selectedColor=e.colors[0]),e.selectedAnnotationType||(e.selectedAnnotationType=e.userAnnotationOption),t.prev=6,t.next=9,Promise.all([e.fetchImages(),e.fetchUsers(),e.fetchUserJobs(),e.fetchTracks(),e.fetchTags()]);case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t["catch"](6),e.error=!0,t.abrupt("return");case 15:if(e.targetAnnotationType&&(e.resetPagesAndFilters(),e.selectedAnnotationType=e.targetAnnotationType),!e.$route.query.image){t.next=23;break}if(n=e.images.find((function(t){return t.id===Number(e.$route.query.image)})),!e.tooManyImages){t.next=22;break}return t.next=21,p["ImageInstance"].fetch(Number(e.$route.query.image));case 21:n=t.sent;case 22:n&&(e.resetPagesAndFilters(),e.selectedImages=[n]);case 23:e.$route.query.userJob&&(a=e.userJobs.find((function(t){return t.id===Number(e.$route.query.userJob)})),a&&(e.resetPagesAndFilters(),e.selectedAnnotationType=e.jobAnnotationOption,e.selectedUserJobs=[a])),e.$route.query.tags&&(r=e.availableTags.filter((function(t){return e.$route.query.tags.split(",").includes(t.name)})),r&&(e.resetPagesAndFilters(),e.selectedTags=r)),e.loading=!1;case 26:case"end":return t.stop()}}),t,null,[[6,11]])})))()}},Ai=Pi,Ii=(n("96e5"),Object(C["a"])(Ai,Qa,er,!1,null,"8e411a6c",null)),Di=Ii.exports,Ei=function(){var e=this,t=e._self._c;return e.configUI["project-activities-tab"]?t("div",{staticClass:"project-activity-wrapper content-wrapper"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[e.canManageProject?t("b-field",{staticClass:"radio-buttons-fullwidth is-hovered"},[t("b-radio-button",{attrs:{"native-value":"charts",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("activity-charts"))+" ")]),t("b-radio-button",{attrs:{"native-value":"members",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("members-activity"))+" ")]),t("b-radio-button",{attrs:{"native-value":"logs",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("activity-logs"))+" ")])],1):e._e()],1),t("div",{staticClass:"column is-narrow"},[t("b-dropdown",{staticClass:"date-picker-dropdown",attrs:{position:"is-bottom-left",disabled:"members"===e.activeTab},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("button",{staticClass:"button is-hovered"},[t("i",{staticClass:"far fa-calendar"})])]},proxy:!0}])},[t("b-dropdown-item",{attrs:{custom:""}},[t("b-field",{attrs:{label:e.$t("from"),horizontal:""}},[t("cytomine-datepicker",{attrs:{maxDate:e.endDate||new Date},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),t("b-field",{attrs:{label:e.$t("to"),horizontal:""}},[t("cytomine-datepicker",{attrs:{minDate:e.startDate,maxDate:new Date},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)],1)],1)],1)]),t("div",{staticClass:"component-wrapper"},[t("keep-alive",[t(e.activeComponent,{tag:"component",attrs:{startDate:e.startDate?e.startDate.getTime():null,endDate:e.endDate?e.endDate.setHours(23,59,59,999):null}})],1)],1)]):t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),t("p",[e._v(e._s(e.$t("insufficient-permission")))])])},Ni=[],Mi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tile is-ancestor is-vertical project-activity-charts-wrapper"},[t("div",{staticClass:"tile"},[t("div",{staticClass:"tile is-parent"},[t("div",{staticClass:"tile is-child box chart-box"},[t("div",{staticClass:"columns"},[t("h2",{staticClass:"column"},[e._v(e._s(e.$t("activity")))]),t("div",{staticClass:"column is-narrow is-info-circle"},[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("activity-chart-info-message")))]),t("p",[e._v(e._s(e.$t("barchart-hover-mouse-for-details")))]),t("p",[e._v(e._s(e.$t("barchart-click-label-to-toggle-visibility")))])]},proxy:!0}])},[t("i",{staticClass:"fas fa-info-circle"})])],1)]),t("div",{staticClass:"chart-container big"},[t("activity-overview-chart",{attrs:{"css-classes":"chart",project:e.project,startDate:e.startDate,endDate:e.endDate,daysRange:e.daysRange}})],1)])]),t("div",{staticClass:"tile is-vertical single-metrics"},[t("div",{staticClass:"tile is-parent"},[t("div",{staticClass:"tile is-child box single-metric"},[t("div",{staticClass:"absolute-info-circle"},[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("project-connections-info-message")))])]},proxy:!0}])},[t("i",{staticClass:"fas fa-info-circle"})])],1),t("strong",{staticClass:"metric"},[e._v(e._s(null!=e.nbProjectVisits?e.nbProjectVisits:"?"))]),t("strong",[e._v(e._s(e.$t("project-connections")))])])]),t("div",{staticClass:"tile is-parent"},[t("div",{staticClass:"tile is-child box single-metric"},[t("div",{staticClass:"absolute-info-circle"},[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("image-consultations-info-message")))])]},proxy:!0}])},[t("i",{staticClass:"fas fa-info-circle"})])],1),t("strong",{staticClass:"metric"},[e._v(e._s(null!=e.nbImageConsultations?e.nbImageConsultations:"?"))]),t("strong",[e._v(e._s(e.$t("image-consultations")))])])]),t("div",{staticClass:"tile is-parent"},[t("div",{staticClass:"tile is-child box single-metric"},[t("div",{staticClass:"absolute-info-circle"},[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("annotation-selections-info-message")))])]},proxy:!0}])},[t("i",{staticClass:"fas fa-info-circle"})])],1),t("strong",{staticClass:"metric"},[e._v(e._s(null!=e.nbAnnotationSelections?e.nbAnnotationSelections:"?"))]),t("strong",[e._v(e._s(e.$t("annotation-selections")))])])])])]),t("div",{staticClass:"tile"},[t("div",{staticClass:"tile is-vertical single-metrics"},[t("div",{staticClass:"tile is-parent"},[t("div",{staticClass:"tile is-child box single-metric"},[t("div",{staticClass:"absolute-info-circle"},[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("manual-annotations-info-message")))])]},proxy:!0}])},[t("i",{staticClass:"fas fa-info-circle"})])],1),t("strong",{staticClass:"metric"},[e._v(" "+e._s(null!=e.nbAnnotations[e.annotationTypes.USER]?e.nbAnnotations[e.annotationTypes.USER]:"?")+" ")]),t("strong",[e._v(e._s(e.$t("user-annotations")))])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.algoEnabled,expression:"algoEnabled"}],staticClass:"tile is-parent"},[t("div",{staticClass:"tile is-child box single-metric"},[t("div",{staticClass:"absolute-info-circle"},[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("analysis-annotations-info-message")))])]},proxy:!0}])},[t("i",{staticClass:"fas fa-info-circle"})])],1),t("strong",{staticClass:"metric"},[e._v(" "+e._s(null!=e.nbAnnotations[e.annotationTypes.ALGO]?e.nbAnnotations[e.annotationTypes.ALGO]:"?")+" ")]),t("strong",[e._v(e._s(e.$t("analysis-annotations")))])])]),t("div",{staticClass:"tile is-parent"},[t("div",{staticClass:"tile is-child box single-metric"},[t("div",{staticClass:"absolute-info-circle"},[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("reviewed-annotations-info-message")))])]},proxy:!0}])},[t("i",{staticClass:"fas fa-info-circle"})])],1),t("strong",{staticClass:"metric"},[e._v(" "+e._s(null!=e.nbAnnotations[e.annotationTypes.REVIEWED]?e.nbAnnotations[e.annotationTypes.REVIEWED]:"?")+" ")]),t("strong",[e._v(e._s(e.$t("reviewed-annotations")))])])])]),t("div",{staticClass:"tile is-parent"},[t("div",{staticClass:"tile is-child box chart-box"},[t("div",{staticClass:"columns"},[t("h2",{staticClass:"column"},[e._v(e._s(e.$t("number-annotations")))]),e.ontology?[t("div",{staticClass:"column is-narrow has-text-right"},[t("div",{staticClass:"filter-label"},[e._v(e._s(e.$t("term")))])]),t("div",{staticClass:"column is-one-third"},[t("ontology-tree-multiselect",{attrs:{ontology:e.ontology,additionalNodes:[{id:0,name:this.$t("all")}],startWithAdditionalNodes:!0,multiple:!1},model:{value:e.selectedTerms,callback:function(t){e.selectedTerms=t},expression:"selectedTerms"}})],1)]:e._e(),t("div",{staticClass:"column is-narrow is-info-circle"},[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("number-annotations-chart-info-message")))]),t("p",[e._v(e._s(e.$t("barchart-hover-mouse-for-details")))]),t("p",[e._v(e._s(e.$t("barchart-click-label-to-toggle-visibility")))])]},proxy:!0}])},[t("i",{staticClass:"fas fa-info-circle"})])],1)],2),t("div",{staticClass:"chart-container big"},[t("number-annotations-chart",{attrs:{"css-classes":"chart",project:e.project,startDate:e.startDate,endDate:e.endDate,daysRange:e.daysRange,term:e.selectedTerms[0]||null}})],1)])])]),e.ontology?t("div",{staticClass:"tile"},[t("div",{staticClass:"tile is-6 is-parent is-vertical"},[t("div",{staticClass:"tile is-child box chart-box no-grow"},[t("div",{staticClass:"columns"},[t("h2",{staticClass:"column"},[e._v(e._s(e.$t("manual-annotations-vs-term")))]),t("div",{staticClass:"column is-narrow is-info-circle"},[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("annotations-vs-terms-chart-info-message")))])]},proxy:!0}],null,!1,1450839247)},[t("i",{staticClass:"fas fa-info-circle"})])],1)]),t("div",{staticClass:"chart-container",style:e.styleAnnotationTermChart},[t("annotation-term-chart",{attrs:{"css-classes":"chart",project:e.project,startDate:e.startDate,endDate:e.endDate},on:{nbElems:function(t){return e.nbElemsAnnotationTermChart=t}}})],1)])]),t("div",{staticClass:"tile is-6 is-parent is-vertical"},[t("div",{staticClass:"tile is-child box chart-box no-grow"},[t("div",{staticClass:"columns"},[t("h2",{staticClass:"column"},[e._v(e._s(e.$t("annotated-images-vs-term")))]),t("div",{staticClass:"column is-narrow is-info-circle"},[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("annotated-images-vs-terms-chart-info-message")))])]},proxy:!0}],null,!1,1273985580)},[t("i",{staticClass:"fas fa-info-circle"})])],1)]),t("div",{staticClass:"chart-container",style:e.styleAnnotationTermChart},[t("annotated-images-by-term-chart",{attrs:{"css-classes":"chart",project:e.project,startDate:e.startDate,endDate:e.endDate}})],1)])])]):e._e(),t("div",{staticClass:"tile"},[t("div",{staticClass:"tile is-6 is-parent is-vertical"},[t("div",{staticClass:"tile is-child box chart-box no-grow"},[t("div",{staticClass:"columns"},[t("h2",{staticClass:"column"},[e._v(e._s(e.$t("manual-annotations-vs-contributor")))]),t("div",{staticClass:"column is-narrow is-info-circle"},[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("annotations-vs-contributors-chart-info-message")))])]},proxy:!0}])},[t("i",{staticClass:"fas fa-info-circle"})])],1)]),t("div",{staticClass:"chart-container",style:e.styleAnnotationContributorChart},[t("annotation-contributor-chart",{attrs:{"css-classes":"chart",project:e.project,startDate:e.startDate,endDate:e.endDate},on:{nbElems:function(t){return e.nbElemsAnnotationContributorChart=t}}})],1)])]),t("div",{staticClass:"tile is-6 is-parent is-vertical"},[t("div",{staticClass:"tile is-child box chart-box no-grow"},[t("div",{staticClass:"columns"},[t("h2",{staticClass:"column"},[e._v(e._s(e.$t("annotated-images-vs-contributor")))]),t("div",{staticClass:"column is-narrow is-info-circle"},[t("v-popover",{scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",[e._v(e._s(e.$t("annotated-images-vs-contributors-chart-info-message")))])]},proxy:!0}])},[t("i",{staticClass:"fas fa-info-circle"})])],1)]),t("div",{staticClass:"chart-container",style:e.styleAnnotationContributorChart},[t("annotated-images-by-contributor-chart",{attrs:{"css-classes":"chart",project:e.project,startDate:e.startDate,endDate:e.endDate}})],1)])])])])},Ri=[],Ui=n("1fca"),zi={name:"number-annotations-chart",extends:Ui["a"],props:{project:Object,term:Number,startDate:Number,endDate:Number,daysRange:Number},data:function(){return{algoEnabled:I["a"].ALGORITHMS_ENABLED,annotationsEvolution:Object(_t["a"])(Object(_t["a"])(Object(_t["a"])({},p["AnnotationType"].USER,[]),p["AnnotationType"].ALGO,[]),p["AnnotationType"].REVIEWED,[]),chartData:null}},computed:{locale:function(){return this.$i18n.locale},queryParams:function(){return{daysRange:this.daysRange,startDate:this.startDate,endDate:this.endDate,accumulate:!1,reverseOrder:!1,term:this.term}}},watch:{queryParams:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.updateChart();case 3:case"end":return t.stop()}}),t)})))()},locale:function(){this.updateLabels(),this.updateChart()}},methods:{fetchAnnotationsEvolution:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.project.fetchAnnotationsEvolution(Object(h["a"])({annotationType:e},t.queryParams));case 2:t.annotationsEvolution[e]=n.sent;case 3:case"end":return n.stop()}}),n)})))()},fetchData:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.fetchAnnotationsEvolution(p["AnnotationType"].USER),e.fetchAnnotationsEvolution(p["AnnotationType"].ALGO),e.fetchAnnotationsEvolution(p["AnnotationType"].REVIEWED)]);case 2:e.chartData.datasets[0].data=e.annotationsEvolution[p["AnnotationType"].USER].map((function(e){return e.size})),e.algoEnabled?(e.chartData.datasets[1].data=e.annotationsEvolution[p["AnnotationType"].ALGO].map((function(e){return e.size})),e.chartData.datasets[2].data=e.annotationsEvolution[p["AnnotationType"].REVIEWED].map((function(e){return e.size}))):e.chartData.datasets[1].data=e.annotationsEvolution[p["AnnotationType"].REVIEWED].map((function(e){return e.size})),e.updateLabels();case 5:case"end":return t.stop()}}),t)})))()},updateLabels:function(){var e=this;this.chartData.labels=this.annotationsEvolution[p["AnnotationType"].USER].map((function(t){var n=e.$options.filters.moment;return 1===e.daysRange?n(Number(t.date),"ll"):[n(Number(t.date),"ll")+" - ",n(Number(t.endDate),"ll")]}))},updateChart:function(){this.$data._chart.update()}},mounted:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.chartData={labels:[],datasets:[{label:e.$t("user-annotations"),data:[],backgroundColor:"#4480c4",borderWidth:0},{label:e.$t("reviewed-annotations"),data:[],backgroundColor:"#42ce77",borderWidth:0}]},e.algoEnabled&&e.chartData.datasets.splice(1,0,{label:e.$t("analysis-annotations"),data:[],backgroundColor:"#aaa",borderWidth:0}),t.next=4,e.fetchData();case 4:e.renderChart(e.chartData,{maintainAspectRatio:!1,scales:{yAxes:[{ticks:{min:0}}],xAxes:[{categoryPercentage:.6,gridLines:{display:!1}}]}});case 5:case"end":return t.stop()}}),t)})))()}},Li=n("a9be"),Fi=n.n(Li),Bi="#eee",qi={name:"annotation-term-chart",extends:Ui["b"],props:{project:Object,startDate:Number,endDate:Number},data:function(){return{chartData:null}},computed:{queryParams:function(){return{startDate:this.startDate,endDate:this.endDate,leafsOnly:!1}}},watch:{queryParams:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.doRenderChart();case 1:case"end":return t.stop()}}),t)})))()}},methods:{doRenderChart:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchStatsTerms(e.queryParams);case 2:n=t.sent,a=n.map((function(e){return e.value})),r=n.map((function(e){var t=Object(Mr["a"])(e.color||Bi),n=Object(Et["a"])(t,3),a=n[0],r=n[1],i=n[2],o=.8;return"rgba(".concat(a*o,", ").concat(r*o,", ").concat(i*o,", 1)")})),e.$emit("nbElems",a.length),e.renderChart({labels:n.map((function(t){return t.key||e.$t("no-term")})),datasets:[{data:a,backgroundColor:n.map((function(e){return e.color||Bi})),borderColor:r,borderWidth:1,hoverBorderColor:r}]},{maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{ticks:{min:0,suggestedMax:Math.round(1.2*Math.max.apply(Math,Object(L["a"])(a)))+1}}],yAxes:[{gridLines:{display:!1},categoryPercentage:.6}]}});case 7:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addPlugin(Fi.a),e.doRenderChart();case 2:case"end":return t.stop()}}),t)})))()}},Vi="#eee",Wi={name:"annotated-images-by-term-chart",extends:Ui["b"],props:{project:Object,startDate:Number,endDate:Number},data:function(){return{chartData:null}},computed:{queryParams:function(){return{startDate:this.startDate,endDate:this.endDate}}},watch:{queryParams:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.doRenderChart();case 1:case"end":return t.stop()}}),t)})))()}},methods:{doRenderChart:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchStatsAnnotatedImagesByTerm(e.queryParams);case 2:n=t.sent,a=n.map((function(e){return e.value})),r=n.map((function(e){var t=Object(Mr["a"])(e.color||Vi),n=Object(Et["a"])(t,3),a=n[0],r=n[1],i=n[2],o=.8;return"rgba(".concat(a*o,", ").concat(r*o,", ").concat(i*o,", 1)")})),e.$emit("nbElems",a.length),e.renderChart({labels:n.map((function(t){return t.key||e.$t("no-term")})),datasets:[{data:a,backgroundColor:n.map((function(e){return e.color||Vi})),borderColor:r,borderWidth:1,hoverBorderColor:r}]},{maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{ticks:{min:0,suggestedMax:Math.round(1.2*Math.max.apply(Math,Object(L["a"])(a)))+1}}],yAxes:[{gridLines:{display:!1},categoryPercentage:.6}]}});case 7:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addPlugin(Fi.a),e.doRenderChart();case 2:case"end":return t.stop()}}),t)})))()}},Gi={name:"annotation-contributor-chart",extends:Ui["b"],props:{project:Object,startDate:Number,endDate:Number},data:function(){return{chartData:null}},computed:{queryParams:function(){return{startDate:this.startDate,endDate:this.endDate}}},watch:{queryParams:function(){this.doRenderChart()}},methods:{doRenderChart:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchStatsAnnotationCreators(e.queryParams);case 2:n=t.sent,a=n.map((function(e){return e.value})),e.$emit("nbElems",a.length),e.renderChart({labels:n.map((function(e){return e.key})),datasets:[{data:a,backgroundColor:"#4480c4",borderWidth:0}]},{maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{ticks:{min:0,suggestedMax:Math.round(1.2*Math.max.apply(Math,Object(L["a"])(a)))+1}}],yAxes:[{gridLines:{display:!1},categoryPercentage:.6}]}});case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addPlugin(Fi.a),e.doRenderChart();case 2:case"end":return t.stop()}}),t)})))()}},Hi={name:"annotated-images-by-contributor-chart",extends:Ui["b"],props:{project:Object,startDate:Number,endDate:Number},data:function(){return{chartData:null}},computed:{queryParams:function(){return{startDate:this.startDate,endDate:this.endDate}}},watch:{queryParams:function(){this.doRenderChart()}},methods:{doRenderChart:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchStatsAnnotatedImagesByCreator(e.queryParams);case 2:n=t.sent,a=n.map((function(e){return e.value})),e.$emit("nbElems",a.length),e.renderChart({labels:n.map((function(e){return e.key})),datasets:[{data:a,backgroundColor:"#4480c4",borderWidth:0}]},{maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{ticks:{min:0,suggestedMax:Math.round(1.2*Math.max.apply(Math,Object(L["a"])(a)))+1}}],yAxes:[{gridLines:{display:!1},categoryPercentage:.6}]}});case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addPlugin(Fi.a),e.doRenderChart();case 2:case"end":return t.stop()}}),t)})))()}},Ji={name:"activity-overview-chart",extends:Ui["a"],props:{project:Object,startDate:Number,endDate:Number,daysRange:Number},data:function(){return{projectConnections:[],imageConsultations:[],annotationSelections:[],chartData:null}},computed:{locale:function(){return this.$i18n.locale},queryParams:function(){return{daysRange:this.daysRange,startDate:this.startDate,endDate:this.endDate,accumulate:!1}}},watch:{queryParams:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.updateChart();case 3:case"end":return t.stop()}}),t)})))()},locale:function(){this.updateLabels(),this.updateChart()}},methods:{fetchProjectConnections:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchConnectionsEvolution(e.queryParams);case 2:e.projectConnections=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchImageConsultations:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchImageConsultationsEvolution(e.queryParams);case 2:e.imageConsultations=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchAnnotationSelections:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchAnnotationActionsEvolution(Object(h["a"])({action:"select"},e.queryParams));case 2:e.annotationSelections=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.fetchProjectConnections(),e.fetchImageConsultations(),e.fetchAnnotationSelections()]);case 2:e.chartData.datasets[0].data=e.projectConnections.map((function(e){return e.size})),e.chartData.datasets[1].data=e.imageConsultations.map((function(e){return e.size})),e.chartData.datasets[2].data=e.annotationSelections.map((function(e){return e.size})),e.updateLabels();case 6:case"end":return t.stop()}}),t)})))()},updateLabels:function(){var e=this;this.chartData.labels=this.projectConnections.map((function(t){var n=e.$options.filters.moment;return 1===e.daysRange?n(Number(t.date),"ll"):[n(Number(t.date),"ll")+" - ",n(Number(t.endDate),"ll")]}))},updateChart:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$data._chart.update();case 1:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.chartData={labels:[],datasets:[{label:e.$t("project-connections"),data:[],backgroundColor:"#4480c4",borderWidth:0},{label:e.$t("image-consultations"),data:[],backgroundColor:"#f2418e",borderWidth:0},{label:e.$t("annotation-selections"),data:[],backgroundColor:"#ffa500",borderWidth:0}]},t.next=3,e.fetchData();case 3:e.renderChart(e.chartData,{maintainAspectRatio:!1,scales:{yAxes:[{ticks:{min:0}}],xAxes:[{categoryPercentage:.6,gridLines:{display:!1}}]}});case 4:case"end":return t.stop()}}),t)})))()}},Ki={name:"project-activity-charts",props:{startDate:Number,endDate:Number},components:{NumberAnnotationsChart:zi,AnnotationTermChart:qi,AnnotatedImagesByTermChart:Wi,AnnotationContributorChart:Gi,AnnotatedImagesByContributorChart:Hi,ActivityOverviewChart:Ji,OntologyTreeMultiselect:vr},data:function(){return{algoEnabled:I["a"].ALGORITHMS_ENABLED,loading:!0,nbProjectVisits:null,nbImageConsultations:null,nbAnnotationSelections:null,nbAnnotations:Object(_t["a"])(Object(_t["a"])(Object(_t["a"])({},p["AnnotationType"].USER,null),p["AnnotationType"].ALGO,null),p["AnnotationType"].REVIEWED,null),selectedTerms:[0],nbElemsAnnotationTermChart:0,nbElemsAnnotationContributorChart:0}},computed:{project:Object(l["a"])("currentProject/project"),ontology:Object(l["a"])("currentProject/ontology"),queryParams:function(){return{startDate:this.startDate,endDate:this.endDate}},annotationTypes:function(){return p["AnnotationType"]},daysRange:function(){var e=864e5,t=(this.endDate||(new Date).getTime())-(this.startDate||this.project.created);return t>730*e?Math.round(t/e/30):t>365*e?28:t>186*e?14:t>31*e?7:1},styleAnnotationTermChart:function(){return{height:30+25*this.nbElemsAnnotationTermChart+"px"}},styleAnnotationContributorChart:function(){return{height:30+25*this.nbElemsAnnotationContributorChart+"px"}}},watch:{startDate:function(){this.loadData()},endDate:function(){this.loadData()}},methods:{fetchNbConnections:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.nbProjectVisits=null,t.next=3,e.project.fetchNbConnections(e.queryParams);case 3:e.nbProjectVisits=t.sent;case 4:case"end":return t.stop()}}),t)})))()},fetchNbImageConsultations:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.nbImageConsultations=null,t.next=3,e.project.fetchNbImageConsultations(e.queryParams);case 3:e.nbImageConsultations=t.sent;case 4:case"end":return t.stop()}}),t)})))()},fetchNbAnnotationSelections:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.nbAnnotationSelections=null,t.next=3,e.project.fetchNbAnnotationActions(Object(h["a"])({type:"select"},e.queryParams));case 3:e.nbAnnotationSelections=t.sent;case 4:case"end":return t.stop()}}),t)})))()},fetchNbAnnotations:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.nbAnnotations[e]=null,n.next=3,t.project.fetchNbAnnotations(Object(h["a"])({annotationType:e},t.queryParams));case 3:t.nbAnnotations[e]=n.sent;case 4:case"end":return n.stop()}}),n)})))()},loadData:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.fetchNbConnections(),e.fetchNbImageConsultations(),e.fetchNbAnnotationSelections(),e.fetchNbAnnotations(p["AnnotationType"].USER),e.fetchNbAnnotations(p["AnnotationType"].ALGO),e.fetchNbAnnotations(p["AnnotationType"].REVIEWED)].map((function(e){return e.catch((function(e){}))})));case 2:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadData();case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()}},Yi=Ki,Zi=(n("47ce"),n("c286"),Object(C["a"])(Yi,Mi,Ri,!1,null,"a5f175d8",null)),Xi=Zi.exports,Qi=function(){var e=this,t=e._self._c;return e.loading?e._e():t("div",{staticClass:"box"},[e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[t("div",{staticClass:"columns"},[t("h2",{staticClass:"column is-marginless"},[e._v(e._s(e.$t("members-activity")))]),t("p",{staticClass:"column has-text-right is-size-7 has-text-grey"},[e._v(" "+e._s(e.$t("data-last-updated-on",{time:e.$options.filters.moment(e.lastUpdate,"LTS")}))+" ")])]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),t("div",{staticClass:"column"},[t("button",{staticClass:"button",on:{click:function(t){e.filtersOpened=!e.filtersOpened}}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-filter"})]),t("span",[e._v(e._s(e.filtersOpened?e.$t("button-hide-filters"):e.$t("button-show-filters")))])])])]),t("b-collapse",{attrs:{open:e.filtersOpened}},[t("div",{staticClass:"filters columns"},[t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("status"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableStatus,multiple:"",searchable:!1},model:{value:e.selectedStatus,callback:function(t){e.selectedStatus=t},expression:"selectedStatus"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("role"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableRoles,multiple:"",searchable:!1},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1)])])]),t("b-table",{attrs:{data:e.filteredMembers,"default-sort":"username",paginated:!0,"per-page":e.perPage,"pagination-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{field:"username",label:e.$t("username"),sortable:"",width:"100"}},[t("username",{attrs:{user:a,online:e.onlineIds?e.onlineIds.includes(a.id):null,displayFullName:!1}})],1),t("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:"",width:"150"}},[e._v(" "+e._s(a.name)+" ")]),t("b-table-column",{attrs:{field:"role",label:e.$t("role"),centered:"",sortable:"",width:"20"}},[t("icon-project-member-role",{attrs:{"is-manager":a.role===e.managerRole}})],1),t("b-table-column",{attrs:{field:"lastImageName",label:e.$t("last-image"),sortable:"",width:"100"}},[a.lastImageId?[t("router-link",{attrs:{to:"/project/".concat(e.project.id,"/image/").concat(a.lastImageId)}},[e._v(" "+e._s(a.lastImageName)+" ")])]:t("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("no-record")))])],2),t("b-table-column",{attrs:{field:"lastConnection",label:e.$t("last-connection"),sortable:"",width:"100"}},[a.lastConnection?[e._v(" "+e._s(e._f("moment")(Number(a.lastConnection),"ll LT"))+" ")]:t("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("no-record")))])],2),t("b-table-column",{attrs:{field:"frequency",label:e.$t("number-connections"),sortable:"",width:"100"}},[e._v(" "+e._s(a.frequency)+" ")]),t("b-table-column",{attrs:{label:"",centered:"",width:"50"}},[t("router-link",{staticClass:"button is-small is-link",attrs:{to:"/project/".concat(e.project.id,"/activity/user/").concat(a.id)}},[e._v(" "+e._s(e.$t("button-details"))+" ")])],1)]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-member-fitting-criteria")))])])]},proxy:!0},e.isManager?{key:"footer",fn:function(){return[t("p",{staticClass:"has-text-centered"},[t("router-link",{staticClass:"button is-link add-member",attrs:{to:"/project/".concat(e.project.id,"/configuration?tab=members")}},[e._v(" "+e._s(e.$t("button-manage-members"))+" ")])],1)]},proxy:!0}:null,{key:"bottom-left",fn:function(){return[t("b-select",{attrs:{size:"is-small"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[t("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),t("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),t("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),t("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}],null,!0)}),t("div",{staticClass:"legend"},[t("h2",[e._v(e._s(e.$t("legend")))]),t("p",[t("icon-project-member-role"),e._v(" : "+e._s(e.$t("project-contributor")))],1),t("p",[t("icon-project-member-role",{attrs:{"is-manager":!0}}),e._v(" : "+e._s(e.$t("project-manager")))],1)])]],2)},eo=[],to={name:"members-activity",components:{IconProjectMemberRole:ct,CytomineMultiselect:ee,Username:ye},data:function(){return{loading:!0,error:!1,searchString:"",filtersOpened:!1,perPage:25,members:[],onlineIds:null,contributorRole:this.$t("contributor"),managerRole:this.$t("manager"),availableRoles:[],selectedRoles:[],onlineStatus:this.$t("online"),offlineStatus:this.$t("offline"),availableStatus:[],selectedStatus:[],lastUpdate:null,timeout:null}},computed:{project:Object(l["a"])("currentProject/project"),isManager:function(){return this.$store.getters["currentProject/canManageProject"]},idManagers:function(){return this.$store.state.currentProject.managers.map((function(e){return e.id}))},regexp:function(){return Object(Kt["a"])(this.searchString)},filteredMembers:function(){var e=this,t=Boolean(this.onlineIds),n=this.selectedStatus.includes(this.onlineStatus),a=this.selectedStatus.includes(this.offlineStatus);return this.members.filter((function(r){var i=t?e.onlineIds.includes(r.id):null;return(e.regexp.test(r.name)||e.regexp.test(r.username))&&(!t||n&&i||a&&!i)&&e.selectedRoles.includes(r.role)}))}},methods:{fetchData:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.fetchMembers(),e.fetchOnlines()]);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t["catch"](0),e.error=!0,t.abrupt("return");case 9:e.lastUpdate=new Date,clearTimeout(e.timeout),e.timeout=setTimeout(e.fetchData,I["a"].MEMBERS_ACTIVITY_REFRESH_INTERVAL);case 12:case"end":return t.stop()}}),t,null,[[0,5]])})))()},fetchMembers:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchUsersActivity();case 2:n=t.sent.array,n.forEach((function(t){t.name="".concat(t.firstname," ").concat(t.lastname),t.role=e.idManagers.includes(t.id)?e.managerRole:e.contributorRole})),e.members=n;case 5:case"end":return t.stop()}}),t)})))()},fetchOnlines:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.project.fetchConnectedUsers();case 3:n=t.sent,e.onlineIds=n.map((function(e){return e.id})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.onlineIds=null;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.availableRoles=[e.contributorRole,e.managerRole],e.selectedRoles=e.availableRoles,e.availableStatus=[e.onlineStatus,e.offlineStatus],e.selectedStatus=e.availableStatus;case 4:case"end":return t.stop()}}),t)})))()},activated:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()},deactivated:function(){clearTimeout(this.timeout)}},no=to,ao=(n("072d"),Object(C["a"])(no,Qi,eo,!1,null,"63399df4",null)),ro=ao.exports,io=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tile is-child box last-actions"},[t("h2",[e._v(e._s(e.$t("activity-logs")))]),t("b-select",{model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}},[t("option",{domProps:{value:null}},[e._v(e._s(e.$t("all-users-analyses")))]),t("optgroup",{attrs:{label:e.$t("members")}},e._l(e.members,(function(n){return t("option",{key:n.id,domProps:{value:n.id}},[e._v(e._s(n.fullName))])})),0),t("optgroup",{attrs:{label:e.$t("analyses")}},e._l(e.userJobs,(function(n){return t("option",{key:n.id,domProps:{value:n.id}},[e._v(e._s(n.fullName))])})),0)]),t("activity-logs",{attrs:{idUser:e.selectedUser,startDate:e.startDate,endDate:e.endDate,project:e.project}})],1)},oo=[],so=function(){var e=this,t=e._self._c;return e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):e.actions.length>0?t("div",{ref:"listActions",staticClass:"list-actions",on:{scroll:e.scrollHandler}},[e._l(e.formattedActions,(function(n,a){return t("div",{key:a},[t("h3",[e._v(e._s(e._f("moment")(n.refDate,"MMMM YYYY")))]),e._l(n.days,(function(n,a){return t("div",{key:a},[t("h4",[e._v(e._s(e._f("moment")(n.refDate,"ll")))]),t("ul",e._l(n.actions,(function(e){return t("activity-logs-item",{key:e.id,attrs:{action:e}})})),1)])}))],2)})),e.loadedAllActions?e._e():t("button",{staticClass:"button",class:{"is-loading":e.loading},on:{click:function(t){return e.loadActions()}}},[e._v(" "+e._s(e.$t("button-load-more"))+" ")])],2):t("div",{staticClass:"no-result"},[t("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("no-log-to-display")))])])},co=[],lo=function(){var e=this,t=e._self._c;return t("li",{key:e.action.id},[t("strong",[e._v(e._s(e._f("moment")(Number(e.action.created),"l LTS"))+":")]),t("span",{staticClass:"content",on:{mouseenter:e.enter,mouseleave:e.leave}},[e.route?t("router-link",{attrs:{to:e.route}},[e._v(" "+e._s(e.action.message)+" ")]):[e._v(e._s(e.action.message))]],2),e.previewUrl?t("div",{staticClass:"preview",class:{visible:e.showPreview}},[t("div",{staticClass:"box"},[t("img",{attrs:{src:e.appendShortTermToken(e.previewUrl,e.shortTermToken)}})])]):e._e()])},uo=[],po=(n("b64b"),1),mo=2,fo=3,ho={name:"activity-logs-item",props:{action:Object},data:function(){return{showPreview:!1,previewUrl:null,route:null}},computed:{shortTermToken:Object(l["a"])("currentUser/shortTermToken"),actionData:function(){return JSON.parse(this.action.data)},type:function(){switch(this.action.serviceName){case"userAnnotationService":case"reviewedAnnotationService":case"algoAnnotationService":return po;case"imageInstanceService":return mo;case"projectService":return fo;default:return null}}},methods:{appendShortTermToken:k["a"],enter:function(){this.showPreview=!0},leave:function(){this.showPreview=!1},annotationHandler:function(e){this.previewUrl="".concat(e.url,"?maxSize=125&complete=true&thickness=2&increaseArea=1.25&draw=true"),this.route="/project/".concat(e.project,"/image/").concat(e.image,"/annotation/").concat(e.id)},imageHandler:function(e){e.deleted||(this.previewUrl=e.thumb,this.route="/project/".concat(e.project,"/image/").concat(e.id))},projectHandler:function(e){this.route="/project/".concat(e.id)},addCommandHandler:function(){switch(this.type){case po:this.annotationHandler(this.actionData);break;case mo:this.imageHandler(this.actionData);break;case fo:this.projectHandler(this.actionData);break}},editCommandHandler:function(){switch(this.type){case po:this.annotationHandler(this.actionData.newUserAnnotation||this.actionData.newReviewedAnnotation||this.actionData.newAlgoAnnotation||this.actionData.newAnnotation);break;case mo:this.imageHandler(this.actionData.newImageInstance);break}}},created:function(){switch(this.action.className){case"be.cytomine.command.AddCommand":this.addCommandHandler();break;case"be.cytomine.command.EditCommand":this.editCommandHandler();break;case"be.cytomine.command.DeleteCommand":break;default:}}},go=ho,vo=(n("949d"),Object(C["a"])(go,lo,uo,!1,null,"10699078",null)),bo=vo.exports,yo={name:"activity-logs",props:{startDate:Number,endDate:Number,idUser:Number,project:Object},components:{ActivityLogsItem:bo},data:function(){return{loading:!0,error:!1,offset:0,nbActionsPerPage:50,loadedAllActions:!1,actions:[]}},computed:{params:function(){return{user:this.idUser,startDate:this.startDate,endDate:this.endDate,project:this.project?this.project.id:null,fullData:!0}},formattedActions:function(){for(var e=[],t=null,n=-1,a=-1,r=0;r<this.actions.length;r++){var i=this.actions[r],o=rr()(Number(i.created));t&&o.isSame(t,"day")?e[n].days[a].actions.push(i):(t&&o.isSame(t,"month")||(e.push({refDate:Number(i.created),days:[]}),n++,a=-1),e[n].days.push({refDate:Number(i.created),actions:[i]}),a++),t=o}return e}},watch:{params:function(){this.loadActions(!1)}},methods:{scrollHandler:wt.a.debounce((function(){var e=this.$refs.listActions,t=e.scrollTop+e.clientHeight===e.scrollHeight;t&&!this.loadedAllActions&&this.loadActions()}),100),loadActions:function(){var e=arguments,t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=!(e.length>0&&void 0!==e[0])||e[0],t.loading=!0,a||(t.actions=[],t.offset=0,t.loadedAllActions=!1),n.prev=3,n.next=6,p["Project"].fetchCommandHistory(Object(h["a"])({max:t.nbActionsPerPage,offset:t.offset},t.params));case 6:i=n.sent,(r=t.actions).push.apply(r,Object(L["a"])(i)),t.offset+=t.nbActionsPerPage,i.length<t.nbActionsPerPage&&(t.loadedAllActions=!0),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](3),t.error=!0;case 15:t.loading=!1;case 16:case"end":return n.stop()}}),n,null,[[3,12]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadActions();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.error=!0;case 8:e.loading=!1;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))()}},wo=yo,jo=(n("bad9"),Object(C["a"])(wo,so,co,!1,null,"511a34d2",null)),ko=jo.exports,_o={name:"project-activity-logs",props:{startDate:Number,endDate:Number},components:{ActivityLogs:ko},data:function(){return{userJobs:[],selectedUser:null}},computed:{project:Object(l["a"])("currentProject/project"),members:Object(l["a"])("currentProject/members")},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["UserJobCollection"].fetchAll({filterKey:"project",filterValue:e.project.id});case 3:n=t.sent.array,n.forEach((function(e){return e.fullName=Object(he["a"])(e)})),e.userJobs=n,t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},xo=_o,Co=(n("567a"),Object(C["a"])(xo,io,oo,!1,null,"37261b9d",null)),Oo=Co.exports,$o="charts",To={name:"project-activity",components:{CytomineDatepicker:cr},data:function(){return{activeTab:$o,startDate:null,endDate:null}},computed:{configUI:Object(l["a"])("currentProject/configUI"),canManageProject:function(){return this.$store.getters["currentProject/canManageProject"]},moment:function(){return rr.a},queriedTab:function(){return this.$route.query.tab},activeComponent:function(){if(!this.canManageProject)return Xi;switch(this.activeTab){case"charts":return Xi;case"members":return ro;case"logs":return Oo}}},watch:{queriedTab:function(){this.changeTab()},activeTab:function(){(this.activeTab!==$o||this.queriedTab)&&this.$router.push("?tab=".concat(this.activeTab))}},methods:{changeTab:function(){this.activeTab=this.queriedTab||$o,this.activeComponent||(this.activeTab=$o)}},created:function(){this.changeTab()}},So=To,Po=(n("3c51"),n("c51a"),Object(C["a"])(So,Ei,Ni,!1,null,"77d5a06f",null)),Ao=Po.exports,Io=function(){var e=this,t=e._self._c;return e.configUI["project-jobs-tab"]?e.error?t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(e._s(e.$t("unexpected-error-info-message")))])]):t("div",{staticClass:"list-jobs-wrapper content-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():t("div",{staticClass:"panel"},[t("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("analysis"))+" "),e.canAddJob?t("button",{staticClass:"button is-link",on:{click:function(t){e.launchModal=!0}}},[e._v(" "+e._s(e.$t("button-launch-new-analysis"))+" ")]):e._e()]),t("div",{staticClass:"panel-block"},[t("div",{staticClass:"filters"},[t("h2",[e._v(e._s(e.$t("filters")))]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column filter is-one-third"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("algorithm"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableSoftwares,multiple:"","track-by":"id",label:"fullName"},model:{value:e.selectedSoftwares,callback:function(t){e.selectedSoftwares=t},expression:"selectedSoftwares"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("launcher"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableLaunchers,multiple:""},model:{value:e.selectedLaunchers,callback:function(t){e.selectedLaunchers=t},expression:"selectedLaunchers"}})],1)]),t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("execution-date"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-datepicker",{attrs:{styles:["multiselect","bold-placeholder"],placeholder:e.$t("all-dates"),maxDate:new Date},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1)]),t("div",{staticClass:"column"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("status"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableStatus,label:"label","track-by":"status",multiple:""},model:{value:e.selectedStatus,callback:function(t){e.selectedStatus=t},expression:"selectedStatus"}})],1)])])]),t("cytomine-table",{attrs:{collection:e.jobCollection,"is-empty":e.nbEmptyFilters>0,currentPage:e.currentPage,perPage:e.perPage,openedDetailed:e.openedDetails,sort:e.sortField,order:e.sortOrder,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t}},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{field:"softwareName",label:e.$t("algorithm"),sortable:"",width:"1000"}},[t("router-link",{attrs:{to:"/algorithm/".concat(a.software)}},[e._v(" "+e._s(a.softwareName)+" ")])],1),t("b-table-column",{attrs:{label:e.$t("run-number"),width:"500",centered:""}},[e._v(" "+e._s(a.number)+" ")]),t("b-table-column",{attrs:{field:"username",label:e.$t("launched-by"),sortable:"",width:"600"}},[e._v(" "+e._s(a.username)+" ")]),t("b-table-column",{attrs:{field:"created",label:e.$t("execution-date"),sortable:"",width:"600"}},[e._v(" "+e._s(e._f("moment")(Number(a.created),"ll LT"))+" ")]),t("b-table-column",{attrs:{field:"status",label:e.$t("status"),sortable:"",centered:"",width:"600"}},[t("job-status",{attrs:{status:a.status}})],1)]}},{key:"detail",fn:function(n){var a=n.row;return[t("job-details",{key:a.id,attrs:{job:a},on:{update:function(t){e.revision++},delete:function(t){return e.deleteJob(a)},relaunch:e.addJob}})]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-analysis-run")))])])]},proxy:!0}],null,!1,1526954539)})],1)]),t("add-job-modal",{attrs:{active:e.launchModal},on:{"update:active":function(t){e.launchModal=t},add:e.addJob}})],1):t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),t("p",[e._v(e._s(e.$t("insufficient-permission")))])])},Do=[],Eo=function(){var e=this,t=e._self._c;return t("span",{staticClass:"tag",class:e.tagClass},[e._v(" "+e._s(e.$t(e.labels[e.status].label))+" ")])},No=[],Mo=Object.freeze(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])(Object(_t["a"])({},p["JobStatus"].RUNNING,{label:"running",statLabel:"numberOfRunning",color:"#209CEE"}),p["JobStatus"].SUCCESS,{label:"success",statLabel:"numberOfSuccess",color:"#23D160"}),p["JobStatus"].FAILED,{label:"failed",statLabel:"numberOfFailed",color:"#FF3860"}),p["JobStatus"].NOTLAUNCH,{label:"not-launch",statLabel:"numberOfNotLaunch",color:"#F5F5F5"}),p["JobStatus"].WAIT,{label:"wait",statLabel:"numberOfWait",color:"#F5F5F5"}),p["JobStatus"].INQUEUE,{label:"in-queue",statLabel:"numberOfInQueue",color:"#F5F5F5"}),p["JobStatus"].INDETERMINATE,{label:"indeterminate",statLabel:"numberOfIndeterminate",color:"#F5F5F5"}),p["JobStatus"].KILLED,{label:"killed",statLabel:"numberOfKilled",color:"#363636"})),Ro=Mo,Uo={name:"job-status",props:{status:Number},computed:{labels:function(){return Ro},result:function(){switch(this.status){case p["JobStatus"].KILLED:return"dark";case p["JobStatus"].NOTLAUNCH:case p["JobStatus"].INQUEUE:case p["JobStatus"].WAIT:case p["JobStatus"].INDETERMINATE:case p["JobStatus"].PREVIEWED:return"light";case p["JobStatus"].RUNNING:return"info";case p["JobStatus"].SUCCESS:return"success";case p["JobStatus"].FAILED:return"danger"}},tagClass:function(){return"is-"+this.result}}},zo=Uo,Lo=Object(C["a"])(zo,Eo,No,!1,null,null,null),Fo=Lo.exports,Bo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"job-details-wrapper"},[t("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading},on:{"update:active":function(t){e.loading=t}}}),e.loading?e._e():[t("table",{staticClass:"table"},[t("tbody",[e.isRunning?t("tr",[t("td",[e._v(e._s(e.$t("progress")))]),t("td",[t("progress",{staticClass:"progress is-info",attrs:{max:"100"},domProps:{value:e.job.progress}},[e._v(" "+e._s(e.job.progress)+"% ")])])]):e._e(),t("tr",[t("td",[e._v(e._s(e.$t("status-comment")))]),t("td",[e._v(e._s(e.job.statusComment||"-"))])]),e.isSuccessful?t("tr",[t("td",[e._v(e._s(e.$t("execution-duration")))]),t("td",[e._v(e._s(e._f("duration")(Number(e.job.updated)-Number(e.job.created),"humanize")))])]):e._e(),e.currentUser.isDeveloper?t("tr",[t("td",[e._v(e._s(e.$t("job-id")))]),t("td",[e._v(e._s(e.job.id))])]):e._e(),e.currentUser.isDeveloper?t("tr",[t("td",[e._v(e._s(e.$t("userjob-id")))]),t("td",[e._v(e._s(e.job.userJob))])]):e._e(),t("tr",[t("td",[e._v(e._s(e.$t("parameters")))]),t("td",[t("button",{staticClass:"button is-small",on:{click:function(t){e.showParameters=!e.showParameters}}},[t("span",[e._v(e._s(e.showParameters?e.$t("button-hide"):e.$t("button-show")))])]),t("b-collapse",{attrs:{open:e.showParameters}},[t("table",{staticClass:"table is-narrow inline-table is-fullwidth"},[t("thead",[t("tr",[e.currentUser.isDeveloper?t("th",[e._v(e._s(e.$t("id")))]):e._e(),t("th",[e._v(e._s(e.$t("name")))]),t("th",[e._v(e._s(e.$t("value")))]),t("th",[e._v(e._s(e.$t("type")))])])]),t("tbody",e._l(e.job.jobParameters.array,(function(n){return t("tr",{key:n.id},[e.currentUser.isDeveloper?t("td",[e._v(e._s(n.id))]):e._e(),t("td",[e._v(e._s(n.humanName))]),t("td",[e._v(e._s(n.value))]),t("td",[e._v(e._s(e.$t(n.type.toLowerCase())))])])})),0)])])],1)]),e.isFinished?t("tr",[t("td",[e._v(e._s(e.$t("execution-log")))]),e.isJustFinished&&!e.log?t("td",[t("div",{staticClass:"loading"},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("  "),t("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("log-being-collected")))])])]):e.log?t("td",[t("button",{staticClass:"button is-small",on:{click:function(t){e.showLog=!e.showLog}}},[t("span",[e._v(e._s(e.showLog?e.$t("button-hide"):e.$t("button-show")))])]),t("b-collapse",{attrs:{open:e.showLog}},[t("pre",[e._v(e._s(e.log.data))])])],1):t("td",[t("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("not-found")))])])]):e._e(),t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("tags")))]),t("td",{staticClass:"prop-content"},[t("cytomine-tags",{attrs:{object:e.job,canEdit:e.canManageJob}})],1)]),e.hasAnnotationResult?t("tr",[t("td",[e._v(e._s(e.$t("data")))]),e.hasAnnotationResult?t("td",[t("router-link",{attrs:{to:"/project/".concat(e.project.id,"/annotations?userJob=").concat(e.job.userJob)}},[e._v(" "+e._s(e.$tc("count-annotations",e.allData.annotations,{count:e.allData.annotations}))+" ")])],1):e._e()]):e._e(),e.hasFileResult?t("tr",[t("td",[e._v(e._s(e.$t("files")))]),t("td",[e.jobData.length>0?t("table",{staticClass:"table inline-table is-fullwidth is-narrow"},[t("thead",[t("tr",[t("th",[e._v(e._s(e.$t("filename")))]),t("th",[e._v(e._s(e.$t("comment")))]),t("th",[e._v(e._s(e.$t("size")))]),t("th")])]),t("tbody",e._l(e.jobData,(function(n){return t("tr",{key:n.id},[t("td",[e._v(e._s(n.filename))]),t("td",[e._v(e._s(n.key))]),t("td",[e._v(e._s(e.filesize(n.size)))]),t("td",[t("div",{staticClass:"buttons"},[t("a",{staticClass:"button is-small",on:{click:function(t){return e.viewData(n)}}},[e._v(e._s(e.$t("button-view")))]),t("a",{staticClass:"button is-small",on:{click:function(t){return e.downloadData(n)}}},[e._v(e._s(e.$t("button-download")))])])])])})),0)]):t("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("no-result-file")))])])]):e._e(),e.job.dataDeleted?t("tr",[t("td",[e._v(e._s(e.$t("data")))]),t("td",[e._v(" "+e._s(e.$t("deleted-analysis-data"))+" ")])]):e._e(),e.canManageJob?t("tr",[t("td",[e._v(e._s(e.$t("actions")))]),t("td",[t("div",{staticClass:"buttons are-small"},[t("button",{staticClass:"button",on:{click:function(t){return e.relaunchJob()}}},[e._v(" "+e._s(e.$t("relaunch"))+" ")]),!e.job.dataDeleted&&e.isFinished?t("button",{staticClass:"button",on:{click:function(t){e.deletionModal=!0}}},[e._v(" "+e._s(e.$t("delete-data"))+" ")]):e._e(),e.isFinished?t("button",{staticClass:"button is-danger",on:{click:function(t){return e.confirmJobDeletion()}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")]):t("button",{staticClass:"button is-danger",on:{click:function(t){return e.confirmJobKilling()}}},[e._v(" "+e._s(e.$t("button-kill"))+" ")])])])]):e._e()])]),t("cytomine-modal",{attrs:{active:e.deletionModal,title:e.$t("delete-analysis-data")},on:{close:function(t){e.deletionModal=!1}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){e.deletionModal=!1}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-danger",on:{click:function(t){return e.deleteData()}}},[e._v(" "+e._s(e.$t("button-confirm"))+" ")])]},proxy:!0}],null,!1,617667549)},[t("p",[e._v(e._s(e.$t("confirm-deletion-analysis-data")))]),t("ul",[t("li",[e._v(e._s(e.$tc("count-annotations",e.allData.annotations,{count:e.allData.annotations})))]),t("li",[e._v(e._s(e.$tc("count-reviewed-annotations",e.allData.reviewed,{count:e.allData.reviewed})))]),t("li",[e._v(e._s(e.$tc("count-annotation-terms",e.allData.annotationsTerm,{count:e.allData.annotationsTerm})))]),t("li",[e._v(e._s(e.$tc("count-files",e.allData.jobDatas,{count:e.allData.jobDatas})))])]),t("p",{staticClass:"has-margin-top"},[e._v(e._s(e.$t("remark-long-operation")))]),e.deletionTask?[t("hr"),t("cytomine-task",{attrs:{task:e.deletionTask},on:{"update:task":function(t){e.deletionTask=t}}})]:e._e()],2)]],2)},qo=[],Vo=function(){var e=this,t=e._self._c;return e.task?t("div",[t("progress",{staticClass:"progress is-info",attrs:{max:"100"},domProps:{value:e.task.progress}},[e._v(" "+e._s(e.task.progress)+"% ")]),e.lastComment?t("p",[e._v(e._s(e.lastComment))]):e._e()]):e._e()},Wo=[],Go={name:"cytomine-task",props:{task:Object,refreshInterval:{type:Number,default:I["a"].TASK_REFRESH_INTERVAL}},data:function(){return{timeout:null}},computed:{lastComment:function(){return this.task&&this.task.comments&&this.task.comments.length>0?this.task.comments[0]:""}},watch:{task:function(){this.refresh()}},methods:{refresh:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.task){t.next=7;break}return t.next=3,p["Task"].fetch(e.task.id);case 3:n=t.sent,e.$emit("update:task",n),clearTimeout(e.timeout),n.progress<100&&(e.timeout=setTimeout(e.refresh,e.refreshInterval));case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.refresh()}},Ho=Go,Jo=(n("c80a"),Object(C["a"])(Ho,Vo,Wo,!1,null,"6d0d3d7d",null)),Ko=Jo.exports,Yo=I["a"].JOB_DETAILS_REFRESH_INTERVAL,Zo=I["a"].JOB_LOGS_REFRESH_INTERVAL,Xo={name:"job-details",props:{job:Object},components:{CytomineModal:Ie,CytomineTask:Ko,CytomineTags:We["a"]},data:function(){return{loading:!0,justFinishedInterval:6e4,showParameters:!1,showLog:!1,allData:null,jobData:[],log:null,timeoutRefresh:null,deletionModal:!1,deletionTask:null}},computed:{project:Object(l["a"])("currentProject/project"),currentUser:Object(l["a"])("currentUser/user"),shortTermToken:Object(l["a"])("currentUser/shortTermToken"),canManageJob:function(){return this.$store.getters["currentProject/canManageJob"](this.job)},isRunning:function(){return this.job.status===p["JobStatus"].RUNNING},isSuccessful:function(){return this.job.status===p["JobStatus"].SUCCESS},isFinished:function(){return this.isSuccessful||this.job.status===p["JobStatus"].FAILED||this.job.status===p["JobStatus"].KILLED},isJustFinished:function(){return this.isFinished&&Date.now()-Number(this.job.created)<this.justFinishedInterval},hasAnnotationResult:function(){return this.allData.annotations>0},hasFileResult:function(){return this.allData.jobDatas>0}},methods:{appendShortTermToken:k["a"],refresh:function(){var e=arguments,t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]&&e[0],!t.isFinished||a){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,p["Job"].fetch(t.job.id);case 5:return r=n.sent,t.$emit("update",r),n.next=9,t.fetchData();case 9:t.job.status=r.status,t.fetchLog(),clearTimeout(t.timeoutRefresh),t.timeoutRefresh=setTimeout(t.refresh,Yo);case 13:case"end":return n.stop()}}),n)})))()},filesize:function(e){return bt()(e,{base:10})},viewData:function(e){window.location.assign(Object(k["a"])(e.viewURL,this.shortTermToken),"_blank")},downloadData:function(e){window.location.assign(Object(k["a"])(e.downloadURL,this.shortTermToken),"_blank")},fetchLog:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isFinished){t.next=16;break}n=e.isJustFinished?Math.round(e.justFinishedInterval/Zo):1;case 2:if(e.log||!(n>0)){t.next=16;break}return t.prev=3,t.next=6,e.job.fetchLog();case 6:e.log=t.sent,t.next=14;break;case 9:return t.prev=9,t.t0=t["catch"](3),t.next=13,new Promise((function(e){return setTimeout(e,Zo)}));case 13:n--;case 14:t.next=2;break;case 16:case"end":return t.stop()}}),t,null,[[3,9]])})))()},fetchData:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.job.fetchAllData();case 2:if(e.allData=t.sent,!e.hasFileResult){t.next=7;break}return t.next=6,p["JobDataCollection"].fetchAll({filterKey:"job",filterValue:e.job.id});case 6:e.jobData=t.sent.array;case 7:case"end":return t.stop()}}),t)})))()},deleteData:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.job.clone(),t.prev=1,t.next=4,new p["Task"]({project:e.project.id}).save();case 4:return e.deletionTask=t.sent,t.next=7,n.deleteAllData(e.deletionTask.id);case 7:e.refresh(!0),e.deletionTask=null,e.deletionModal=!1,e.$notify({type:"success",text:e.$t("notif-success-analysis-data-deletion")}),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](1),e.deletionTask=null,e.$notify({type:"error",text:e.$t("notif-error-analysis-data-deletion")});case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))()},killJob:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.job.clone(),t.prev=1,t.next=4,n.kill();case 4:e.$emit("update",n),e.$notify({type:"success",text:e.$t("notif-success-analysis-kill")}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$notify({type:"error",text:e.$t("notif-error-analysis-data-kill")});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},confirmJobDeletion:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("delete-analysis"),message:this.$t("delete-analysis-confirmation-message"),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.$emit("delete")}})},confirmJobKilling:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("kill-analysis"),message:this.$t("kill-analysis-confirmation-message"),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.killJob()}})},relaunchJob:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.job.copy();case 3:return n=t.sent,e.$emit("relaunch",n),t.next=7,n.execute();case 7:e.$notify({type:"success",text:e.$t("notif-success-analysis-launch")}),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-analysis-launch")});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.fetchLog(),e.loading=!1,e.timeoutRefresh=setTimeout(e.refresh,Yo);case 5:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){clearTimeout(this.timeoutRefresh)}},Qo=Xo,es=(n("7f4f"),n("0809"),Object(C["a"])(Qo,Bo,qo,!1,null,"4eb4085b",null)),ts=es.exports,ns=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.createJob()}}},[t("cytomine-modal",{attrs:{active:e.active,title:e.$t("launch-new-analysis")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-launch-new-analysis"))+" ")])]},proxy:!0}])},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-narrow"},[t("strong",[e._v(e._s(e.$t("algorithm")))])]),t("div",{staticClass:"column"},[t("cytomine-multiselect",{attrs:{options:e.executableSoftwares,"track-by":"id",label:"fullName"},model:{value:e.selectedSoftware,callback:function(t){e.selectedSoftware=t},expression:"selectedSoftware"}})],1)]),e.selectedSoftware?[e.selectedSoftware.deprecated?t("b-message",{attrs:{type:"is-warning","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("notif-deprecated-software"))+" ")]):e._e(),t("table",{staticClass:"table is-fullwidth"},[t("thead",[t("tr",[t("th"),t("th",[e._v(e._s(e.$t("name")))]),t("th",[e._v(e._s(e.$t("value")))])])]),t("tbody",[e._l(e.paramsMandatoryNoDefault,(function(n){return t("job-parameter-row",{key:n.id,attrs:{param:n},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"param.value"}})})),t("tr",{directives:[{name:"show",rawName:"v-show",value:e.optionalParams.length>0,expression:"optionalParams.length > 0"}],staticClass:"row-separator"},[t("td",{attrs:{colspan:"3"}},[e._v(" "+e._s(e.$t("optional-parameters"))+" "),t("button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:function(t){e.showOptional=!e.showOptional}}},[e._v(" "+e._s(e.$t(e.showOptional?"button-hide":"button-show"))+" ")])])]),e.showOptional?e._l(e.optionalParams,(function(n){return t("job-parameter-row",{key:n.id,attrs:{param:n},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"param.value"}})})):e._e(),t("tr",{directives:[{name:"show",rawName:"v-show",value:e.prefilledParams.length>0,expression:"prefilledParams.length > 0"}],staticClass:"row-separator"},[t("td",{attrs:{colspan:"3"}},[e._v(" "+e._s(e.$t("prefilled-parameters"))+" "),t("button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:function(t){e.showPrefilled=!e.showPrefilled}}},[e._v(" "+e._s(e.$t(e.showPrefilled?"button-hide":"button-show"))+" ")])])]),e.showPrefilled?e._l(e.prefilledParams,(function(n){return t("job-parameter-row",{key:n.id,attrs:{param:n},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"param.value"}})})):e._e()],2)])]:e._e()],2)],1)},as=[],rs=(n("a4d3"),n("e01a"),function(){var e=this,t=e._self._c;return t("tr",{staticClass:"job-param-row-wrapper"},[t("td",[e.description?t("div",[t("v-popover",{attrs:{"popover-base-class":"tooltip popover job-description-popover"},scopedSlots:e._u([{key:"popover",fn:function(){return[t("p",{domProps:{innerHTML:e._s(e.description.data)}})]},proxy:!0}],null,!1,5788555)},[t("i",{staticClass:"fas fa-info-circle"})])],1):e._e()]),t("td",[e._v(e._s(e.param.humanName))]),t("td",[t("b-field",{attrs:{type:{"is-danger":e.errors.has(e.validationName)},message:e.errors.first(e.validationName)}},[e.loading?t("b-input",{attrs:{loading:"",disabled:""}}):e.options?t("cytomine-multiselect",{directives:[{name:"validate",rawName:"v-validate",value:e.validationRules,expression:"validationRules"}],class:{"is-danger":e.errors.has(e.validationName)},attrs:{options:e.options,"track-by":"id",label:e.param.uriPrintAttribut,multiple:"ListDomain"===e.param.type,name:e.validationName},scopedSlots:e._u([{key:"option",fn:function(n){var a=n.option;return[e.areAnnotationObjects?t("div",{staticClass:"is-flex"},[t("div",{staticClass:"thumb-wrapper"},[t("img",{staticClass:"thumb",attrs:{src:e.appendShortTermToken(a.smallCropURL+"&draw=true&complete=true&increaseArea=1.25",e.shortTermToken)}})]),t("span",{staticClass:"option__title"},[e._v(" "+e._s(a[e.param.uriPrintAttribut])+" ")])]):a.thumb?t("div",{staticClass:"is-flex"},[t("div",{staticClass:"thumb-wrapper"},[t("img",{staticClass:"thumb",attrs:{src:e.appendShortTermToken(a.thumb,e.shortTermToken)}})]),t("span",{staticClass:"option__title"},[e._v(" "+e._s(a[e.param.uriPrintAttribut])+" ")])]):e.areTermObjects?t("div",{staticClass:"is-flex"},[t("cytomine-term",{attrs:{term:a}})],1):e.areJobObjects?t("div",{staticClass:"is-flex"},[t("span",{staticClass:"option__title"},[e._v(" "+e._s(e.formatJob(a,e.param.uriPrintAttribut))+" ")])]):e._e()]}}]),model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}}):"Boolean"===e.param.type?t("b-checkbox",{model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}}):t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:e.validationRules,expression:"validationRules"}],attrs:{name:e.validationName},model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})],1)],1)])}),is=[],os=(n("4d63"),n("c607"),n("2c3e"),n("5319"),{name:"job-parameter-row",inject:["$validator"],components:{CytomineTerm:dr["a"],CytomineMultiselect:ee},props:{param:Object,value:null},data:function(){return{internalValue:null,options:null,description:null,loading:!0}},computed:{project:Object(l["a"])("currentProject/project"),ontology:Object(l["a"])("currentProject/ontology"),shortTermToken:Object(l["a"])("currentUser/shortTermToken"),processedUri:function(){if(this.param.uri_){var e=this.param.uri_.replace(new RegExp("^"+p["Cytomine"].instance.basePath),"");return e=e.replace("$currentProjectCreationDate$",this.project.created),e=e.replace("$currentProject$",this.project.id),e=e.replace("$cytomineHost$",p["Cytomine"].instance.host),e=e.replace("$currentDate$",(new Date).getTime()),e=e.replace("$currentOntology$",this.ontology?this.ontology.id:null),e}return null},validationName:function(){return String(this.param.id)},validationRules:function(){return{required:this.param.required,decimal:"Number"===this.param.type}},objectsClass:function(){return this.options&&this.options.length>0?this.options[0].class:null},areAnnotationObjects:function(){return this.objectsClass?["be.cytomine.ontology.AlgoAnnotation","be.cytomine.ontology.UserAnnotation","be.cytomine.ontology.ReviewedAnnotation"].includes(this.objectsClass):null},areTermObjects:function(){return"be.cytomine.ontology.Term"===this.objectsClass},areJobObjects:function(){return"be.cytomine.processing.Job"===this.objectsClass}},watch:{internalValue:function(e){e!==this.value&&this.$emit("input",e)},"param.value":function(){this.internalValue=this.param.value}},methods:{appendShortTermToken:k["a"],getInitialValue:function(){if(this.param.defaultParamValue)return"Boolean"===this.param.type?"true"===this.param.defaultParamValue.toLowerCase():this.param.defaultParamValue;switch(this.param.type){case"ListDomain":return[];case"Domain":return null;case"Boolean":return!1;default:return""}},formatJob:function(e,t){if(["softwareName","created","fullName","number"].includes(t)){var n=rr()(Number(e.created)).format("L LTS");return"".concat(e["softwareName"]," - ").concat(n," (#").concat(e["number"],")")}return e[t]}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.internalValue=e.getInitialValue(),t.prev=1,t.next=4,p["Description"].fetch(e.param);case 4:e.description=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](1);case 9:if(!e.processedUri){t.next=23;break}return t.prev=10,t.next=13,p["Cytomine"].instance.api.get(e.processedUri);case 13:n=t.sent,a=n.data,r=a.collection,e.param.uriSortAttribut&&r.sort((function(t,n){return t[e.param.uriSortAttribut]<n[e.param.uriSortAttribut]?-1:1})),e.options=r,t.next=23;break;case 20:t.prev=20,t.t1=t["catch"](10),e.$notify({type:"error",text:e.$t("notif-error-analysis-parameters-options",{paramName:e.param.name})});case 23:e.loading=!1;case 24:case"end":return t.stop()}}),t,null,[[1,7],[10,20]])})))()}}),ss=os,cs=(n("7ea1"),Object(C["a"])(ss,rs,is,!1,null,null,null)),ls=cs.exports,us={name:"add-job-modal",props:{active:Boolean},components:{CytomineModal:Ie,CytomineMultiselect:ee,JobParameterRow:ls},$_veeValidate:{validator:"new"},data:function(){return{softwares:[],selectedSoftware:null,showPrefilled:!1,showOptional:!1}},computed:{project:Object(l["a"])("currentProject/project"),params:function(){return this.selectedSoftware?this.selectedSoftware.parameters.array:[]},optionalParams:function(){return this.params.filter((function(e){return!e.required&&null===e.defaultParamValue}))},prefilledParams:function(){return this.params.filter((function(e){return null!==e.defaultParamValue}))},paramsMandatoryNoDefault:function(){return this.params.filter((function(e){return e.required&&null===e.defaultParamValue}))},jobParameters:function(){return this.params.filter((function(e){return Array.isArray(e.value)?e.value.length:null!==e.value})).map((function(e){var t=e.value;return t.id&&(t=t.id),Array.isArray(t)&&(t.length?t[0].id&&(t=t.map((function(e){return e.id})).join()):t=""),new p["JobParameter"]({softwareParameter:e.id,value:t})}))},executableSoftwares:function(){return this.softwares.filter((function(e){return e.executable}))}},watch:{active:function(e){e&&(this.selectedSoftware=null,this.showOptional=!1,this.showPrefilled=!1)},selectedSoftware:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectedSoftware){t.next=2;break}return t.abrupt("return");case 2:n=Object(z["a"])(e.selectedSoftware.parameters);try{for(n.s();!(a=n.n()).done;)r=a.value,e.$set(r,"value",r.defaultParamValue)}catch(i){n.e(i)}finally{n.f()}case 4:case"end":return t.stop()}}),t)})))()}},methods:{createJob:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,a=new p["Job"]({software:e.selectedSoftware.id,project:e.project.id,jobParameters:e.jobParameters}),t.next=9,a.save();case 9:return e.$emit("add",a),e.$emit("update:active",!1),t.next=13,a.execute();case 13:e.$notify({type:"success",text:e.$t("notif-success-analysis-launch")}),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](5),e.$notify({type:"error",text:e.$t("notif-error-analysis-launch")});case 19:case"end":return t.stop()}}),t,null,[[5,16]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["SoftwareCollection"].fetchAll({filterKey:"project",filterValue:e.project.id});case 2:e.softwares=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()}},ds=us,ps=(n("bc67"),Object(C["a"])(ds,ns,as,!1,null,"8e5202c0",null)),ms=ps.exports,fs={rootModuleProp:"storeModule"},hs=function(e,t){return Object(l["e"])(null,e,t,fs)},gs={name:"list-jobs",components:{JobStatus:Fo,JobDetails:ts,AddJobModal:ms,CytomineTable:G,CytomineMultiselect:ee,CytomineDatepicker:cr},data:function(){return{loading:!0,error:!1,launchModal:!1,availableSoftwares:[],availableLaunchers:[],revision:0}},computed:{currentUser:Object(l["a"])("currentUser/user"),project:Object(l["a"])("currentProject/project"),configUI:Object(l["a"])("currentProject/configUI"),canManageProject:function(){return this.$store.getters["currentProject/canManageProject"]},canAddJob:function(){return!this.currentUser.guestByNow&&(this.canManageProject||!this.project.isReadOnly)},availableStatus:function(){var e=this;return Object.keys(Ro).map((function(t){return{label:e.$t(Ro[t].label),status:t}}))},availableFavorites:function(){return[{label:this.$t("yes"),value:!0},{label:this.$t("no"),value:!1}]},storeModule:function(){return this.$store.getters["currentProject/currentProjectModule"]+"listJobs"},selectedSoftwares:hs("softwares","availableSoftwares"),selectedLaunchers:hs("launchers","availableLaunchers"),selectedDate:Object(l["b"])("executionDate",fs),selectedStatus:hs("statuses","availableStatus"),selectedFavorites:hs("favorites","availableFavorites"),nbEmptyFilters:function(){return this.$store.getters[this.storeModule+"/nbEmptyFilters"]},jobCollection:function(){var e=new p["JobCollection"]({project:this.project.id,software:this.selectedSoftwares.length>0&&this.selectedSoftwares.length<this.availableSoftwares.length?this.selectedSoftwares.map((function(e){return e.id})).join(","):null});return this.selectedLaunchers.length>0&&(e["username"]={in:this.selectedLaunchers.join()}),this.selectedStatus.length>0&&(e["status"]={in:this.selectedStatus.map((function(e){return e.status})).join()}),this.selectedFavorites.length>0&&(e["favorite"]={in:this.selectedFavorites.map((function(e){return e.value})).join()}),this.selectedDate&&(e.created={gte:this.selectedDate.getTime(),lte:new Date(this.selectedDate).setHours(15,15,59,999)}),e},currentPage:Object(l["b"])("currentPage",fs),perPage:Object(l["b"])("perPage",fs),sortField:Object(l["b"])("sortField",fs),sortOrder:Object(l["b"])("sortOrder",fs),openedDetails:Object(l["b"])("openedDetails",fs)},methods:{canEdit:function(e){return this.$store.getters["currentProject/canManageJob"](e)},fetchMultiselectOptions:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["JobCollection"].fetchBounds({project:e.project.id});case 2:n=t.sent,e.availableSoftwares=n.software.list,e.availableLaunchers=n.username.list;case 5:case"end":return t.stop()}}),t)})))()},addJob:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.openedDetails=[e.id].concat(Object(L["a"])(t.openedDetails)),n.next=3,t.fetchMultiselectOptions();case 3:t.revision++;case 4:case"end":return n.stop()}}),n)})))()},deleteJob:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.delete();case 3:t.$notify({type:"success",text:t.$t("notif-success-analysis-deletion")}),t.fetchMultiselectOptions(),t.revision++,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-analysis-deletion")});case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},refreshJobs:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.fetchMultiselectOptions();case 3:e.loading=!1,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.error=!0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshJobs();case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()}},vs=gs,bs=(n("64b1"),Object(C["a"])(vs,Io,Do,!1,null,"44623caa",null)),ys=bs.exports,ws=function(){var e=this,t=e._self._c;return e.configUI["project-information-tab"]?t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"box"},[t("project-details",{attrs:{project:e.project,"excluded-properties":e.excludedProperties,editable:""},on:{update:e.updateProject,delete:function(t){return e.deleteProject()}}})],1)]):t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),t("p",[e._v(e._s(e.$t("insufficient-permission")))])])},js=[],ks={name:"project-information",components:{ProjectDetails:Ye},data:function(){return{algoEnabled:I["a"].ALGORITHMS_ENABLED,excludedProperties:["imagesPreview"]}},computed:{project:Object(l["a"])("currentProject/project"),configUI:Object(l["a"])("currentProject/configUI")},methods:{updateProject:function(e){this.$store.dispatch("currentProject/updateProject",e)},deleteProject:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["Project"].delete(e.project.id);case 3:e.$notify({type:"success",text:e.$t("notif-success-project-deletion",{projectName:e.project.name})}),e.$router.push("/projects"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-project-deletion",{projectName:e.project.name})});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},created:function(){this.algoEnabled||this.excludedProperties.push("numberOfJobAnnotations"),this.$store.dispatch("currentProject/reloadProject")}},_s=ks,xs=Object(C["a"])(_s,ws,js,!1,null,null,null),Cs=xs.exports,Os=function(){var e=this,t=e._self._c;return e.configUI["project-configuration-tab"]?t("div",{staticClass:"content-wrapper"},[t("b-field",{staticClass:"radio-buttons-fullwidth"},[t("b-radio-button",{attrs:{"native-value":"general",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("general"))+" ")]),t("b-radio-button",{attrs:{"native-value":"members",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("members"))+" ")]),t("b-radio-button",{attrs:{"native-value":"customUI",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("custom-ui"))+" ")]),t("b-radio-button",{directives:[{name:"show",rawName:"v-show",value:e.algoEnabled,expression:"algoEnabled"}],attrs:{"native-value":"algorithms",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("algorithms"))+" ")]),t("b-radio-button",{attrs:{"native-value":"imageFilters",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("image-filters"))+" ")])],1),t("div",{staticClass:"box tab-content"},[t("keep-alive",[t(e.activeComponent,{tag:"component"})],1)],1)],1):t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),t("p",[e._v(e._s(e.$t("insufficient-permission")))])])},$s=[],Ts=(n("d9e2"),function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v(e._s(e.$t("editing-mode")))]),t("p",{staticClass:"explanation"},[e._v(e._s(e.$t("editing-mode-explanation")))]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("b-radio",{attrs:{"native-value":"CLASSIC"},model:{value:e.editingMode,callback:function(t){e.editingMode=t},expression:"editingMode"}},[e._v(" "+e._s(e.$t("classic"))+" ")])],1),t("div",{staticClass:"column"},[t("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("classic-mode-explanation"))+" ")])],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("b-radio",{attrs:{"native-value":"RESTRICTED"},model:{value:e.editingMode,callback:function(t){e.editingMode=t},expression:"editingMode"}},[e._v(" "+e._s(e.$t("restricted"))+" ")])],1),t("div",{staticClass:"column"},[t("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("restricted-mode-explanation"))+" ")])],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("b-radio",{attrs:{"native-value":"READ-ONLY"},model:{value:e.editingMode,callback:function(t){e.editingMode=t},expression:"editingMode"}},[e._v(" "+e._s(e.$t("read-only"))+" ")])],1),t("div",{staticClass:"column"},[t("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("read-only-mode-explanation"))+" ")])],1)]),t("h2",[e._v(e._s(e.$t("blind-mode")))]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("b-checkbox",{model:{value:e.blindMode,callback:function(t){e.blindMode=t},expression:"blindMode"}},[e._v(" "+e._s(e.$t("blind-mode"))+" ")])],1),t("div",{staticClass:"column"},[t("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("blind-mode-explanation"))+" ")])],1)]),t("h2",[e._v(e._s(e.$t("annotation-layers")))]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("b-checkbox",{model:{value:e.hideManagersLayers,callback:function(t){e.hideManagersLayers=t},expression:"hideManagersLayers"}},[e._v(" "+e._s(e.$t("hide-managers-layers"))+" ")])],1),t("div",{staticClass:"column"},[t("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("hide-managers-layers-explanation"))+" ")])],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("b-checkbox",{model:{value:e.hideContributorsLayers,callback:function(t){e.hideContributorsLayers=t},expression:"hideContributorsLayers"}},[e._v(" "+e._s(e.$t("hide-contributors-layers"))+" ")])],1),t("div",{staticClass:"column"},[t("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("hide-contributors-layers-explanation"))+" ")])],1)]),t("h2",[e._v(e._s(e.$t("default-annotation-layers")))]),t("b-field",{attrs:{grouped:""}},[t("b-select",{attrs:{size:"is-small",placeholder:e.$t("select-layer-placeholder")},model:{value:e.layerToAdd,callback:function(t){e.layerToAdd=t},expression:"layerToAdd"}},e._l(e.unselectedLayers,(function(n){return t("option",{key:n.id,domProps:{value:n}},[e._v(" "+e._s(e.fullName(n))+" ")])})),0),t("button",{staticClass:"button is-small",attrs:{disabled:!e.layerToAdd},on:{click:function(t){return e.addDefaultLayer()}}},[e._v(" "+e._s(e.$t("button-add"))+" ")])],1),e.selectedLayers.length>0?t("table",{staticClass:"table"},[t("tbody",[t("tr",[t("th",[e._v(e._s(e.$t("layer")))]),t("th",[e._v(e._s(e.$t("hide-by-default")))]),t("th")]),e._l(e.selectedLayers,(function(n,a){return t("tr",{key:n.id},[t("td",[e._v(e._s(e.fullName(n)))]),t("td",{staticClass:"is-centered"},[t("b-checkbox",{attrs:{size:"is-small"},on:{input:function(t){return e.saveDefaultLayer(a)}},model:{value:e.defaultLayers[a].hideByDefault,callback:function(t){e.$set(e.defaultLayers[a],"hideByDefault",t)},expression:"defaultLayers[idx].hideByDefault"}})],1),t("td",[t("button",{staticClass:"button is-small",on:{click:function(t){return e.deleteDefaultLayer(a)}}},[e._v(" "+e._s(e.$t("button-remove")))])])])}))],2)]):e._e(),t("h2",[e._v(e._s(e.$t("default-property")))]),t("default-property"),t("h2",[e._v(e._s(e.$t("download-permission")))]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("b-checkbox",{model:{value:e.imagesDownloadable,callback:function(t){e.imagesDownloadable=t},expression:"imagesDownloadable"}},[e._v(" "+e._s(e.$t("images_downloadable_by_contributor"))+" ")])],1),t("div",{staticClass:"column"},[t("b-message",{attrs:{type:"is-info","has-icon":"",size:"is-small"}},[e._v(" "+e._s(e.$t("images_downloadable_by_contributor-explanation"))+" ")])],1)]),t("h2",[e._v("Actions")]),t("project-actions",{attrs:{project:e.project,size:"is-normal"},on:{update:e.externalProjectUpdate,delete:function(t){return e.deleteProject()}}})],1)}),Ss=[],Ps=function(){var e=this,t=e._self._c;return e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):t("b-field",{attrs:{grouped:""}},[t("b-autocomplete",{attrs:{data:e.filteredKeys,placeholder:e.$t("no-default-property"),loading:e.loading,disabled:e.loading,size:"is-small"},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v(e._s(e.$t("no-property-matching-search-string",{searchString:e.searchString})))]},proxy:!0}]),model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),t("button",{staticClass:"button is-small",attrs:{disabled:e.defaultPropertyProp&&e.searchString===e.defaultPropertyProp.value},on:{click:function(t){return e.confirm()}}},[e._v(" "+e._s(e.$t("button-save"))+" ")])],1)},As=[],Is={data:function(){return{loading:!0,error:!1,searchString:"",defaultPropertyProp:null,keysAnnotationProps:[]}},computed:{project:Object(l["a"])("currentProject/project"),filteredKeys:function(){if(!this.searchString.length)return this.keysAnnotationProps;var e=Object(Kt["a"])(this.searchString);return this.keysAnnotationProps.filter((function(t){return e.test(t)}))}},methods:{fetchKeysAnnotationProperties:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["PropertyCollection"].fetchKeysAnnotationProperties(e.project.id);case 2:e.keysAnnotationProps=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchDefaultPropertyProp:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["PropertyCollection"].fetchAll({object:e.project});case 3:n=t.sent.array,e.defaultPropertyProp=n.find((function(e){return e.key===I["a"].DEFAULT_PROPERTY_KEY})),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:e.defaultPropertyProp||(e.defaultPropertyProp=new p["Property"]({key:I["a"].DEFAULT_PROPERTY_KEY,value:""},e.project)),e.searchString=e.defaultPropertyProp.value;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},confirm:function(){var e=this;!this.keysAnnotationProps.includes(this.searchString)&&this.searchString.length?this.$buefy.dialog.confirm({title:this.$t("confirm-default-property"),message:this.$t("confirm-default-property-not-used-in-project",{key:this.searchString}),type:"is-info",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.save()},onCancel:function(){return e.searchString=e.defaultPropertyProp.value}}):this.save()},save:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.defaultPropertyProp.value=e.searchString,t.prev=1,e.defaultPropertyProp.value.length){t.next=9;break}if(e.defaultPropertyProp.isNew()){t.next=7;break}return t.next=6,e.defaultPropertyProp.delete();case 6:e.defaultPropertyProp=new p["Property"]({key:I["a"].DEFAULT_PROPERTY_KEY,value:""},e.project);case 7:t.next=11;break;case 9:return t.next=11,e.defaultPropertyProp.save();case 11:e.$notify({type:"success",text:e.$t("notif-success-default-property-update")}),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),e.$notify({type:"error",text:e.$t("notif-error-default-property-update")});case 17:case"end":return t.stop()}}),t,null,[[1,14]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.fetchKeysAnnotationProperties(),e.fetchDefaultPropertyProp()]);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.error=!0;case 8:e.loading=!1;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))()}},Ds=Is,Es=Object(C["a"])(Ds,Ps,As,!1,null,null,null),Ns=Es.exports,Ms={name:"general-configuration",components:{ProjectActions:Be,DefaultProperty:Ns},data:function(){return{editingMode:"",blindMode:null,hideManagersLayers:null,hideContributorsLayers:null,imagesDownloadable:null,layerToAdd:null,defaultLayers:[]}},computed:{project:Object(l["a"])("currentProject/project"),layers:Object(l["a"])("currentProject/members"),currentEditingMode:function(){return this.project.isReadOnly?"READ-ONLY":this.project.isRestricted?"RESTRICTED":"CLASSIC"},selectedLayers:function(){var e=this;return this.defaultLayers.map((function(t){var n=e.layers.find((function(e){return e.id===t.user}));return Object(h["a"])(Object(h["a"])({},t),n)}))},unselectedLayers:function(){var e=this.defaultLayers.map((function(e){return e.user}));return this.layers.filter((function(t){return!e.includes(t.id)})).sort((function(e,t){return e.lastname<t.lastname?-1:1}))}},watch:{editingMode:function(e){e!==this.currentEditingMode&&this.updateProject({isReadOnly:"READ-ONLY"===e,isRestricted:"RESTRICTED"===e})},blindMode:function(){this.blindMode!==this.project.blindMode&&this.updateProject({blindMode:this.blindMode})},hideManagersLayers:function(){this.hideManagersLayers!==this.project.hideAdminsLayers&&this.updateProject({hideAdminsLayers:this.hideManagersLayers})},hideContributorsLayers:function(){this.hideContributorsLayers!==this.project.hideUsersLayers&&this.updateProject({hideUsersLayers:this.hideContributorsLayers})},imagesDownloadable:function(){this.imagesDownloadable!==this.project.areImagesDownloadable&&this.updateProject({areImagesDownloadable:this.imagesDownloadable})}},methods:{fullName:function(e){return Object(he["a"])(e)},initData:function(){this.editingMode=this.currentEditingMode,this.blindMode=this.project.blindMode,this.hideManagersLayers=this.project.hideAdminsLayers,this.hideContributorsLayers=this.project.hideUsersLayers,this.imagesDownloadable=this.project.areImagesDownloadable},fetchDefaultLayers:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ProjectDefaultLayerCollection"].fetchAll({filterKey:"project",filterValue:e.project.id});case 2:e.defaultLayers=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},updateProject:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.project.clone(),a.populate(e),n.prev=2,n.next=5,a.save();case 5:t.$store.commit("currentProject/setProject",a),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](2),t.initData(),t.$notify({type:"error",text:t.$t("notif-error-general-config-update")});case 12:case"end":return n.stop()}}),n,null,[[2,8]])})))()},addDefaultLayer:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.layerToAdd){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,n=new p["ProjectDefaultLayer"]({project:e.project.id,user:e.layerToAdd.id}),t.next=6,n.save();case 6:e.defaultLayers.push(n),e.layerToAdd=null,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),e.$notify({type:"error",text:e.$t("notif-error-default-layer-add")});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))()},saveDefaultLayer:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.defaultLayers[e].save();case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-default-layer-update")});case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},deleteDefaultLayer:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.defaultLayers[e].delete();case 3:t.defaultLayers.splice(e,1),n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-default-layer-delete")});case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()},externalProjectUpdate:function(e){this.$store.dispatch("currentProject/updateProject",e)},deleteProject:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["Project"].delete(e.project.id);case 3:e.$notify({type:"success",text:e.$t("notif-success-project-deletion",{projectName:e.project.name})}),e.$router.push("/projects"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-project-deletion",{projectName:e.project.name})});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.initData(),e.fetchDefaultLayers();case 2:case"end":return t.stop()}}),t)})))()}},Rs=Ms,Us=(n("d1bf"),Object(C["a"])(Rs,Ts,Ss,!1,null,"3cd00c07",null)),zs=Us.exports,Ls=function(){var e=this,t=e._self._c;return t("div",{staticClass:"list-members-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):e.loading?e._e():[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),t("div",{staticClass:"column filter is-one-quarter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("role"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableRoles,multiple:"",searchable:!1,label:"label","track-by":"value"},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1)]),t("div",{staticClass:"column is-one-half has-text-right-desktop buttons"},[t("button",{staticClass:"button is-link add-member",on:{click:function(t){e.addMemberModal=!0}}},[e._v(" "+e._s(e.$t("button-add-members"))+" ")]),t("button",{staticClass:"button is-danger",attrs:{disabled:0===e.selectedMembers.length},on:{click:function(t){return e.confirmMembersRemoval()}}},[e._v(" "+e._s(e.$t("button-remove-selected-members"))+" ")])])]),t("cytomine-table",{attrs:{collection:e.MemberCollection,"is-empty":0===this.selectedRoles.length,currentPage:e.currentPage,perPage:e.perPage,sort:e.sortField,order:e.sortOrder,detailed:!1,checkable:!0,isRowCheckable:function(t){return t.id!==e.currentUser.id},checkedRows:e.selectedMembers,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t},"update:checkedRows":function(t){e.selectedMembers=t},"update:checked-rows":function(t){e.selectedMembers=t}},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{field:"username",label:e.$t("username"),sortable:"",width:"100"}},[e._v(" "+e._s(a.username)+" ")]),t("b-table-column",{attrs:{field:"fullName",label:e.$t("name"),sortable:"",width:"150"}},[e._v(" "+e._s(a.firstname)+" "+e._s(a.lastname)+" ")]),t("b-table-column",{attrs:{field:"projectRole",label:e.$t("role"),sortable:"",width:"50"}},[t("icon-project-member-role",{attrs:{"is-manager":a.role!==e.contributorRole.value,"is-representative":a.role===e.representativeRole.value,editable:""},on:{toggleManager:function(t){return e.confirmToggleManager(a)},toggleRepresentative:function(t){return e.toggleRepresentative(a)}}})],1),t("b-table-column",{attrs:{field:"origin",label:e.$t("source"),centered:"",sortable:"",width:"50"}},[t("span",{staticClass:"tag ldap is-rounded is-info",class:{ldap:a.LDAP}},[e._v(" "+e._s(e.displayMemberOrigin(a))+" ")])]),t("b-table-column",{attrs:{label:"",centered:"",width:"50"}},[t("router-link",{staticClass:"button is-small is-link",attrs:{to:"/project/".concat(e.project.id,"/activity/user/").concat(a.id)}},[e._v(" "+e._s(e.$t("button-view-activity"))+" ")])],1)]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-member-fitting-criteria")))])])]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"has-text-centered"},[t("a",{staticClass:"button is-link",on:{click:function(t){return e.download(e.exportURL)}}},[e._v(e._s(e.$t("button-export-as-csv")))])])]},proxy:!0}])}),t("div",{staticClass:"legend"},[t("h2",[e._v(e._s(e.$t("legend")))]),t("p",[t("icon-project-member-role"),e._v(" : "+e._s(e.$t("project-contributor")))],1),t("p",[t("icon-project-member-role",{attrs:{"is-manager":!0}}),e._v(" : "+e._s(e.$t("project-manager")))],1),t("p",[t("icon-project-member-role",{attrs:{"is-manager":!0,"is-representative":!0}}),e._v(" : "+e._s(e.$t("project-representative")))],1)]),t("add-member-modal",{attrs:{active:e.addMemberModal},on:{"update:active":function(t){e.addMemberModal=t},addMembers:function(t){return e.refreshMembers()}}})]],2)},Fs=[],Bs=function(){var e=this,t=e._self._c;return t("cytomine-modal",{attrs:{active:e.active,title:e.$t("add-members-to-project")},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",on:{click:e.addMembers}},[e._v(" "+e._s(e.$t("button-add"))+" ")])]},proxy:!0}])},[t("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[t("b-field",[t("domain-tag-input",{attrs:{domains:e.notMemberUsers,placeholder:"search-user",displayedProperty:"fullName",searchedProperty:"fullName"},model:{value:e.selectedMembers,callback:function(t){e.selectedMembers=t},expression:"selectedMembers"}})],1)]],2)},qs=[],Vs=n("e8eb"),Ws={name:"add-member-modal",props:{active:Boolean},components:{CytomineModal:Ie,DomainTagInput:Vs["a"]},data:function(){return{loading:!0,users:[],selectedMembers:[]}},computed:{project:Object(l["a"])("currentProject/project"),projectMembersIds:function(){var e=this.$store.state.currentProject.members,t=e.concat(this.selectedMembers);return t.map((function(e){return e.id}))},notMemberUsers:function(){var e=this;return this.users.filter((function(t){return!e.projectMembersIds.includes(t.id)}))}},watch:{active:function(){this.selectedMembers=[]}},methods:{addMembers:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.project.addUsers(e.selectedMembers.map((function(e){return e.id})));case 3:e.$emit("addMembers"),e.$notify({type:"success",text:e.$t("notif-success-add-project-members")}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-add-project-members")});case 10:e.$emit("update:active",!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["UserCollection"].fetchAll();case 2:n=t.sent.array,n.forEach((function(e){return e.fullName=Object(he["a"])(e)})),e.users=n,e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()}},Gs=Ws,Hs=(n("7625"),Object(C["a"])(Gs,Bs,qs,!1,null,"085e2b90",null)),Js=Hs.exports,Ks={name:"projet-members",components:{IconProjectMemberRole:ct,CytomineTable:G,CytomineMultiselect:ee,AddMemberModal:Js},data:function(){return{loading:!0,error:!1,addMemberModal:!1,currentPage:1,perPage:25,sortField:"",sortOrder:"",searchString:"",contributorRole:{label:this.$t("contributor"),value:"contributor"},managerRole:{label:this.$t("manager"),value:"manager"},representativeRole:{label:this.$t("representative"),value:"representative"},availableRoles:[],selectedRoles:[],selectedMembers:[],revision:0}},computed:{currentUser:Object(l["a"])("currentUser/user"),project:Object(l["a"])("currentProject/project"),shortTermToken:Object(l["a"])("currentUser/shortTermToken"),MemberCollection:function(){var e=new p["UserCollection"]({filterKey:"project",filterValue:this.project.id});return this.selectedRoles.length>0&&(e["projectRole"]={in:this.selectedRoles.map((function(e){return e.value})).join()}),this.searchString&&(e["fullName"]={ilike:encodeURIComponent(this.searchString)}),e},exportURL:function(){return p["Cytomine"].instance.host+p["Cytomine"].instance.basePath+"project/".concat(this.project.id,"/user/download?format=csv")}},methods:{appendShortTermToken:k["a"],displayMemberOrigin:function(e){var t;return"LDAP"===e.origin&&(t="LDAP"),t="BOOTSTRAP"===e.origin?"system":"manual",this.$t(t)},refreshMembers:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.revision++,t.next=4,e.$store.dispatch("currentProject/fetchProjectMembers");case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.error=!0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},download:function(e){window.open(Object(k["a"])(e,this.shortTermToken))},confirmMembersRemoval:function(){var e=this;this.$buefy.dialog.confirm({title:this.$t("remove-members"),message:this.$tc("remove-members-confirmation-message",this.selectedMembers.length,{count:this.selectedMembers.length,username:Object(he["a"])(this.selectedMembers[0])}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.removeSelectedMembers()}})},removeSelectedMembers:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.project.deleteUsers(e.selectedMembers.map((function(e){return e.id})));case 3:return t.next=5,e.refreshMembers();case 5:e.$notify({type:"success",text:e.$t("notif-success-remove-project-members")}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-remove-project-members")});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},confirmToggleManager:function(e){var t=this;e.id===this.currentUser.id&&e.role!==this.contributorRole.value?this.$buefy.dialog.confirm({title:this.$t("remove-yourself-from-manager"),message:this.$tc("remove-yourself-from-manager-confirmation-message"),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.toggleManager(e)}}):this.toggleManager(e)},toggleManager:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,e.role===t.contributorRole.value){n.next=9;break}if(e.role!=t.representativeRole.value){n.next=5;break}return n.next=5,p["ProjectRepresentative"].delete(0,t.project.id,e.id);case 5:return n.next=7,t.project.deleteAdmin(e.id);case 7:n.next=11;break;case 9:return n.next=11,t.project.addAdmin(e.id);case 11:if(t.revision++,e.id!==t.currentUser.id){n.next=16;break}return n.next=15,t.$store.dispatch("currentProject/fetchUIConfig");case 15:t.$store.state.currentProject.configUI["project-configuration-tab"]||t.$router.push("/project/".concat(t.project.id));case 16:n.next=21;break;case 18:n.prev=18,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-change-role",{username:Object(he["a"])(e)})});case 21:case"end":return n.stop()}}),n,null,[[0,18]])})))()},toggleRepresentative:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,e.role!==t.representativeRole.value){n.next=13;break}return n.next=4,t.project.fetchRepresentatives();case 4:if(n.t0=n.sent.array.length,!(n.t0<2)){n.next=9;break}t.$notify({type:"error",text:t.$t("notif-error-not-enough-representative")}),n.next=11;break;case 9:return n.next=11,p["ProjectRepresentative"].delete(0,t.project.id,e.id);case 11:n.next=15;break;case 13:return n.next=15,new p["ProjectRepresentative"]({user:e.id,project:t.project.id}).save();case 15:t.revision++,n.next=21;break;case 18:n.prev=18,n.t1=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-change-role",{username:Object(he["a"])(e)})});case 21:case"end":return n.stop()}}),n,null,[[0,18]])})))()}},mounted:function(){Object(k["a"])()},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.availableRoles=[e.contributorRole,e.managerRole,e.representativeRole],e.selectedRoles=e.availableRoles,e.revision++,e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()}},Ys=Ks,Zs=(n("47ed"),n("414d"),Object(C["a"])(Ys,Ls,Fs,!1,null,"6e85a606",null)),Xs=Zs.exports,Qs=function(){var e=this,t=e._self._c;return e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):e.loading?e._e():t("table",{staticClass:"table custom-ui"},e._l(e.customUITree,(function(n){return t("tbody",{key:n.label},[t("tr",[t("th",{attrs:{colspan:"3"}},[e._v(e._s(e.$t(n.label)))])]),e._l(n.props,(function(n){return t("tr",{key:n.key},[t("td",[n.superscript?t("i",{staticClass:"superscript",class:n.superscript}):e._e(),n.icon||n.iconComponent?t("span",{staticClass:"icon"},[n.icon?t("i",{class:n.icon}):t(n.iconComponent,{tag:"component"})],1):e._e(),e._v(" "+e._s(e.$t(n.label))+" ")]),t("td",[t("button",{class:["button",e.customUI[n.key]&&e.customUI[n.key].ADMIN_PROJECT&&!e.isParentDisabled(n,"ADMIN_PROJECT")?"is-success":"is-danger"],attrs:{disabled:e.isParentDisabled(n,"ADMIN_PROJECT")||"project-configuration-tab"===n.key},on:{click:function(t){return e.toggleProp(n.key,"ADMIN_PROJECT")}}},[e._v(" "+e._s(e.$t("manager"))+" ")])]),t("td",[t("button",{class:["button",e.customUI[n.key]&&e.customUI[n.key].CONTRIBUTOR_PROJECT&&!e.isParentDisabled(n,"CONTRIBUTOR_PROJECT")?"is-success":"is-danger"],attrs:{disabled:e.isParentDisabled(n,"CONTRIBUTOR_PROJECT")||"project-configuration-tab"===n.key},on:{click:function(t){return e.toggleProp(n.key,"CONTRIBUTOR_PROJECT")}}},[e._v(" "+e._s(e.$t("contributor"))+" ")])])])}))],2)})),0)},ec=[],tc=function(){var e=this,t=e._self._c;return t("svg",{attrs:{"xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:cc":"http://creativecommons.org/ns#","xmlns:rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape",width:"4mm",height:"4mm",viewBox:"0 0 14.173228 14.173229",id:"svg2",version:"1.1","inkscape:version":"0.91 r13725","sodipodi:docname":"free-polygon.svg"}},[t("defs",{attrs:{id:"defs4"}}),t("sodipodi:namedview",{attrs:{id:"base",pagecolor:"#ffffff",bordercolor:"#666666",borderopacity:"1.0","inkscape:pageopacity":"0.0","inkscape:pageshadow":"2","inkscape:zoom":"52.572505","inkscape:cx":"9.7957273","inkscape:cy":"6.9348154","inkscape:document-units":"px","inkscape:current-layer":"layer1",showgrid:"false","inkscape:window-width":"1855","inkscape:window-height":"1056","inkscape:window-x":"65","inkscape:window-y":"24","inkscape:window-maximized":"1","fit-margin-top":"0","fit-margin-left":"0","fit-margin-right":"0","fit-margin-bottom":"0"}}),t("metadata",{attrs:{id:"metadata7"}},[t("rdf:RDF",[t("cc:Work",{attrs:{"rdf:about":""}},[t("dc:format",[e._v("image/svg+xml")]),t("dc:type",{attrs:{"rdf:resource":"http://purl.org/dc/dcmitype/StillImage"}}),t("dc:title")],1)],1)],1),t("g",{attrs:{"inkscape:label":"Layer 1","inkscape:groupmode":"layer",id:"layer1",transform:"translate(-27.016003,-31.914518)"}},[t("path",{staticStyle:{fill:"none","fill-rule":"evenodd","stroke-width":"1.30416775","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"},attrs:{stroke:"#000000",d:"m 38.949622,43.986228 c 1.403938,-1.500316 -3.266544,-2.492688 0.146877,-5.771595 2.156977,-2.071976 -2.231271,-4.068703 -4.032879,-3.734999 -1.435084,0.265814 0.161219,2.123932 -1.933719,3.928337 -2.094933,1.804405 -4.714354,-0.508566 -4.747541,2.161303 -0.03833,3.084086 9.163323,4.917269 10.567262,3.416954 z",id:"path4186","inkscape:connector-curvature":"0","sodipodi:nodetypes":"zsazsz"}})])],1)},nc=[],ac={name:"icon-polygon-free-hand"},rc=ac,ic=Object(C["a"])(rc,tc,nc,!1,null,null,null),oc=ic.exports,sc=function(){var e=this,t=e._self._c;return t("svg",{attrs:{"xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:cc":"http://creativecommons.org/ns#","xmlns:rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape",width:"4mm",height:"4mm",viewBox:"0 0 14.173228 14.173229",id:"svg2",version:"1.1","inkscape:version":"0.91 r13725","sodipodi:docname":"free-line.svg"}},[t("defs",{attrs:{id:"defs4"}}),t("sodipodi:namedview",{attrs:{id:"base",pagecolor:"#ffffff",bordercolor:"#666666",borderopacity:"1.0","inkscape:pageopacity":"0.0","inkscape:pageshadow":"2","inkscape:zoom":"52.572505","inkscape:cx":"1.7591916","inkscape:cy":"6.9664237","inkscape:document-units":"px","inkscape:current-layer":"layer1",showgrid:"false","inkscape:window-width":"1855","inkscape:window-height":"1056","inkscape:window-x":"65","inkscape:window-y":"24","inkscape:window-maximized":"1","fit-margin-top":"0","fit-margin-left":"0","fit-margin-right":"0","fit-margin-bottom":"0"}}),t("metadata",{attrs:{id:"metadata7"}},[t("rdf:RDF",[t("cc:Work",{attrs:{"rdf:about":""}},[t("dc:format",[e._v("image/svg+xml")]),t("dc:type",{attrs:{"rdf:resource":"http://purl.org/dc/dcmitype/StillImage"}}),t("dc:title")],1)],1)],1),t("g",{attrs:{"inkscape:label":"Layer 1","inkscape:groupmode":"layer",id:"layer1",transform:"translate(-27.016003,-31.914518)"}},[t("path",{staticStyle:{fill:"none","fill-rule":"evenodd","stroke-width":"1.36583543","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"},attrs:{stroke:"#000000",d:"m 28.507424,40.008532 c 0,0 2.07514,5.220154 3.70608,4.821065 2.487226,-0.608621 1.213333,-9.083876 3.706081,-9.642132 1.676478,-0.375451 3.706081,5.096557 3.706081,5.096557",id:"path4148","inkscape:connector-curvature":"0","sodipodi:nodetypes":"cssc"}})])],1)},cc=[],lc={name:"icon-line-free-hand"},uc=lc,dc=Object(C["a"])(uc,sc,cc,!1,null,null,null),pc=dc.exports,mc={name:"custom-ui-project",data:function(){return{algoEnabled:I["a"].ALGORITHMS_ENABLED,loading:!0,error:!1,customUI:{},customUITree:[{label:"project-side-bar",props:[{key:"project-images-tab",label:"images",icon:"far fa-images"},{key:"project-annotations-tab",label:"annotations",icon:"far fa-edit"},{key:"project-jobs-tab",label:"analysis",icon:"fas fa-tasks"},{key:"project-activities-tab",label:"activity",icon:"fas fa-tachometer-alt"},{key:"project-information-tab",label:"information",icon:"fas fa-info-circle"},{key:"project-configuration-tab",label:"configuration",icon:"fas fa-cogs"}]},{label:"image-details",props:[{key:"project-explore-image-overview",label:"overview",icon:"fas fa-image"},{key:"project-explore-image-description",label:"description",icon:"far fa-file-alt"},{key:"project-explore-image-tags",label:"tags",icon:"fas fa-bookmark"},{key:"project-explore-image-tracks",label:"tracks",icon:"fas fa-route"},{key:"project-explore-image-properties",label:"properties",icon:"fas fa-tag"},{key:"project-explore-image-attached-files",label:"attached-files",icon:"fas fa-paperclip"},{key:"project-explore-image-slide-preview",label:"slide-preview",icon:"fas fa-image"},{key:"project-explore-image-original-filename",label:"originalFilename",icon:"fas fa-info"},{key:"project-explore-image-metadata",label:"image-metadata",icon:"fas fa-asterisk"}]},{label:"viewer-panels",props:[{key:"project-explore-hide-tools",label:"all-panels"},{key:"project-explore-overview",label:"overview",icon:"fas fa-image",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-info",label:"information",icon:"fas fa-info",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-digital-zoom",label:"digital-zoom",icon:"fas fa-search",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-link",label:"link-images",icon:"fas fa-link",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-color-manipulation",label:"colors",icon:"fas fa-adjust",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-image-layers",label:"annotation-layers",icon:"fas fa-copy",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-ontology",label:"ontology",icon:"fas fa-hashtag",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-property",label:"properties",icon:"fas fa-tag",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-follow",label:"broadcast",icon:"fas fa-street-view",parentConfiguration:"project-explore-hide-tools"},{key:"project-explore-review",label:"review",icon:"fas fa-check-circle",parentConfiguration:"project-explore-hide-tools"}]},{label:"annotation-details",props:[{key:"project-explore-annotation-main",label:"annotation-details-box"},{key:"project-explore-annotation-geometry-info",label:"geometry-info",icon:"fas fa-ruler-combined",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-description",label:"description",icon:"far fa-file-alt",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-terms",label:"terms",icon:"fas fa-hashtag",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-tags",label:"tags",icon:"fas fa-bookmark",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-properties",label:"properties",icon:"fas fa-tag",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-attached-files",label:"attached-files",icon:"fas fa-paperclip",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-creation-info",label:"creation-info",icon:"fas fa-info",parentConfiguration:"project-explore-annotation-main"},{key:"project-explore-annotation-comments",label:"comments",icon:"fas fa-comment",parentConfiguration:"project-explore-annotation-main"}]},{label:"draw-tools",props:[{key:"project-tools-main",label:"all-draw-tools"},{key:"project-tools-select",label:"select",icon:"fas fa-mouse-pointer",parentConfiguration:"project-tools-main"},{key:"project-tools-point",label:"point",icon:"fas fa-map-pin",parentConfiguration:"project-tools-main"},{key:"project-tools-line",label:"line",icon:"fas fa-minus",parentConfiguration:"project-tools-main"},{key:"project-tools-freehand-line",label:"freehand-line",iconComponent:pc,parentConfiguration:"project-tools-main"},{key:"project-tools-rectangle",label:"rectangle",icon:"far fa-square",parentConfiguration:"project-tools-main"},{key:"project-tools-circle",label:"circle",icon:"far fa-circle",parentConfiguration:"project-tools-main"},{key:"project-tools-polygon",label:"polygon",icon:"fas fa-draw-polygon",parentConfiguration:"project-tools-main"},{key:"project-tools-freehand-polygon",label:"freehand-polygon",iconComponent:oc,parentConfiguration:"project-tools-main"},{key:"project-tools-screenshot",label:"screenshot",icon:"fas fa-camera",parentConfiguration:"project-tools-main"},{key:"project-tools-union",label:"freehand-correct-add",icon:"fas fa-pencil-alt",superscript:"fas fa-plus",parentConfiguration:"project-tools-main"},{key:"project-tools-diff",label:"freehand-correct-remove",icon:"fas fa-pencil-alt",superscript:"fas fa-minus",parentConfiguration:"project-tools-main"},{key:"project-tools-fill",label:"fill",icon:"fas fa-fill",parentConfiguration:"project-tools-main"},{key:"project-tools-edit",label:"modify",icon:"fas fa-edit",parentConfiguration:"project-tools-main"},{key:"project-tools-move",label:"move",icon:"fas fa-arrows-alt",parentConfiguration:"project-tools-main"},{key:"project-tools-resize",label:"rescale",icon:"fas fa-expand",parentConfiguration:"project-tools-main"},{key:"project-tools-rotate",label:"rotate",icon:"fas fa-sync-alt",parentConfiguration:"project-tools-main"},{key:"project-tools-delete",label:"delete",icon:"fas fa-trash-alt",parentConfiguration:"project-tools-main"},{key:"project-tools-copy-paste",label:"copy-paste",icon:"fas fa-copy",parentConfiguration:"project-tools-main"},{key:"project-tools-undo-redo",label:"undo-redo",icon:"fas fa-undo",parentConfiguration:"project-tools-main"}]}]}},computed:{project:Object(l["a"])("currentProject/project")},methods:{toggleProp:function(e,t){var n=this;return Object(c["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n.customUI[e][t]=!n.customUI[e][t],a.next=4,n.project.saveUIConfig(n.customUI);case 4:n.customUI=a.sent,n.$store.dispatch("currentProject/fetchUIConfig"),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](0),n.customUI[e][t]=!n.customUI[e][t],n.$notify({type:"error",text:n.$t("notif-error-custom-ui-change")});case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))()},isParentDisabled:function(e,t){return e.parentConfiguration&&!1===this.customUI[e.parentConfiguration][t]}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.algoEnabled||e.customUITree[0].props.splice(2,1),t.next=4,e.project.fetchUIConfig();case 4:e.customUI=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=!0;case 10:e.loading=!1;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},fc=mc,hc=(n("29fe"),n("9d5f"),Object(C["a"])(fc,Qs,ec,!1,null,"740dcc38",null)),gc=hc.exports,vc=function(){var e=this,t=e._self._c;return t("div",{staticClass:"project-softwares-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):e.loading?e._e():[t("b-input",{staticClass:"search-field",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),t("b-table",{attrs:{data:e.filteredSoftwares,"default-sort":"selected","default-sort-direction":"desc",paginated:!0,"per-page":e.perPage,"pagination-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:"",width:"100"}},[t("router-link",{attrs:{to:"/algorithm/".concat(a.id)}},[e._v(" "+e._s(a.fullName)+" ")])],1),t("b-table-column",{attrs:{field:"softwareStatus",label:e.$t("version"),centered:"",sortable:"",width:"100","custom-sort":e.sortBySoftwareStatus}},[t("software-status",{attrs:{software:a}})],1),t("b-table-column",{attrs:{field:"executable",label:e.$t("ui-runnable"),centered:"",sortable:"",width:"100"}},[t("boolean-item",{attrs:{value:a.executable}})],1),t("b-table-column",{attrs:{field:"selected",label:e.$t("status"),sortable:"",width:"100"}},[t("button",{class:["button",a.selected?"is-success":"is-danger"],attrs:{disabled:e.loadingToggleSoftware[a.id]},on:{click:function(t){return e.toggleSoftware(a)}}},[e._v(" "+e._s(e.$t(a.selected?"enabled":"disabled"))+" ")])])]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-algorithm")))])])]},proxy:!0},{key:"bottom-left",fn:function(){return[t("b-select",{attrs:{size:"is-small"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[t("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),t("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),t("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),t("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}])})]],2)},bc=[],yc={name:"project-softwares",components:{BooleanItem:$n,SoftwareStatus:jn},data:function(){return{loading:!0,error:!1,searchString:"",perPage:10,softwares:[],loadingToggleSoftware:{}}},computed:{project:Object(l["a"])("currentProject/project"),filteredSoftwares:function(){var e=Object(Kt["a"])(this.searchString);return this.softwares.filter((function(t){return e.test(t.name)}))}},methods:{toggleSoftware:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,t.$set(t.loadingToggleSoftware,e.id,!0),!e.selected){n.next=8;break}return n.next=5,e.softwareProject.delete();case 5:e.selected=!1,n.next=13;break;case 8:return n.next=10,new p["SoftwareProject"]({software:e.id,project:t.project.id}).save();case 10:a=n.sent,e.softwareProject=a,e.selected=!0;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-change-status-algorithm-project",{softwareName:e.name})});case 18:t.$set(t.loadingToggleSoftware,e.id,!1);case 19:case"end":return n.stop()}}),n,null,[[0,15]])})))()},sortBySoftwareStatus:function(e,t,n){return(n?1:-1)*(this.getSoftwareStatusValue(e)-this.getSoftwareStatusValue(t))},getSoftwareStatusValue:function(e){return e.softwareVersion?e.deprecated?1:2:0}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r,i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=p["SoftwareCollection"].fetchAll(),a=p["SoftwareProjectCollection"].fetchAll({filterKey:"project",filterValue:e.project.id}),t.next=5,n;case 5:return r=t.sent.array,t.next=8,a;case 8:i=t.sent.array,r.forEach((function(e){e.softwareProject=i.find((function(t){return t.software===e.id})),e.selected=void 0!==e.softwareProject})),e.softwares=r,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),e.error=!0;case 16:e.loading=!1;case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}},wc=yc,jc=(n("79b9"),n("b3fc"),Object(C["a"])(wc,vc,bc,!1,null,"50b0beee",null)),kc=jc.exports,_c=function(){var e=this,t=e._self._c;return t("div",{staticClass:"project-image-filters-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):e.loading?e._e():[t("b-input",{staticClass:"search-field",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),t("b-table",{attrs:{data:e.filteredImageFilters,"default-sort":"selected","default-sort-direction":"desc",paginated:!0,"per-page":e.perPage,"pagination-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:""}},[e._v(" "+e._s(a.name)+" ")]),t("b-table-column",{attrs:{field:"selected",label:e.$t("status"),sortable:""}},[t("button",{class:["button",a.selected?"is-success":"is-danger"],on:{click:function(t){return e.toggleFilter(a)}}},[e._v(" "+e._s(e.$t(a.selected?"enabled":"disabled"))+" ")])])]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-image-filter")))])])]},proxy:!0},{key:"bottom-left",fn:function(){return[t("b-select",{attrs:{size:"is-small"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[t("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),t("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),t("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),t("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}])})]],2)},xc=[],Cc={name:"project-image-filters",data:function(){return{loading:!0,error:!1,searchString:"",perPage:10,imageFilters:[]}},computed:{project:Object(l["a"])("currentProject/project"),filteredImageFilters:function(){var e=Object(Kt["a"])(this.searchString);return this.imageFilters.filter((function(t){return e.test(t.name)}))}},methods:{toggleFilter:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,!e.selected){n.next=7;break}return n.next=4,e.imageFilterProject.delete();case 4:e.selected=!1,n.next=12;break;case 7:return n.next=9,new p["ImageFilterProject"]({imageFilter:e.id,project:t.project.id}).save();case 9:a=n.sent,e.imageFilterProject=a,e.selected=!0;case 12:n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-change-status-image-filter-project",{filterName:e.name})});case 17:case"end":return n.stop()}}),n,null,[[0,14]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r,i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=p["ImageFilterCollection"].fetchAll(),a=p["ImageFilterProjectCollection"].fetchAll({filterKey:"project",filterValue:e.project.id}),t.next=5,n;case 5:return r=t.sent.array.filter((function(e){return e.available})),t.next=8,a;case 8:i=t.sent.array,r.forEach((function(e){e.imageFilterProject=i.find((function(t){return t.imageFilter===e.id})),e.selected=void 0!==e.imageFilterProject})),e.imageFilters=r,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),e.error=!0;case 16:e.loading=!1;case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}},Oc=Cc,$c=(n("7265"),n("d1fa"),Object(C["a"])(Oc,_c,xc,!1,null,"646ef45a",null)),Tc=$c.exports,Sc="general",Pc={name:"project-configuration",data:function(){return{algoEnabled:I["a"].ALGORITHMS_ENABLED,activeTab:Sc}},computed:{configUI:Object(l["a"])("currentProject/configUI"),queriedTab:function(){return this.$route.query.tab},activeComponent:function(){switch(this.activeTab){case"general":return zs;case"members":return Xs;case"customUI":return gc;case"algorithms":return kc;case"imageFilters":return Tc}throw new Error("Cannot load active tabs "+this.activeTab)}},watch:{queriedTab:function(){this.changeTab()},activeTab:function(){(this.activeTab!==Sc||this.queriedTab)&&this.$router.push("?tab=".concat(this.activeTab))}},methods:{changeTab:function(){this.activeTab=this.$route.query.tab||Sc,this.activeComponent||(this.activeTab=Sc)}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.changeTab();case 1:case"end":return t.stop()}}),t)})))()}},Ac=Pc,Ic=(n("aaa1"),Object(C["a"])(Ac,Os,$s,!1,null,"b2c4095a",null)),Dc=Ic.exports,Ec=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"panel"},[t("p",{staticClass:"panel-heading"},[t("i",{staticClass:"fas fa-user",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("profile"))+" ")]),t("div",{staticClass:"panel-block"},[t("form",{attrs:{"data-vv-scope":"profile"},on:{submit:function(t){return t.preventDefault(),e.editDetails()}}},[e.currentUser.isDeveloper?t("b-field",{attrs:{label:e.$t("id"),horizontal:""}},[e._v(" "+e._s(e.currentUser.id)+" ")]):e._e(),t("b-field",{attrs:{label:e.$t("username"),horizontal:""}},[t("b-input",{attrs:{value:e.currentUser.username,disabled:""}})],1),t("b-field",{attrs:{label:e.$t("role"),horizontal:""}},[t("span",{staticClass:"tag",class:e.role.class},[e._v(e._s(e.$t(e.role.label)))])]),t("b-field",{attrs:{label:e.$t("lastname"),horizontal:"",type:{"is-danger":e.errors.has("profile.lastname")},message:e.errors.first("profile.lastname")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"lastname"},model:{value:e.updatedUser.lastname,callback:function(t){e.$set(e.updatedUser,"lastname",t)},expression:"updatedUser.lastname"}})],1),t("b-field",{attrs:{label:e.$t("firstname"),horizontal:"",type:{"is-danger":e.errors.has("profile.firstname")},message:e.errors.first("profile.firstname")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"firstname"},model:{value:e.updatedUser.firstname,callback:function(t){e.$set(e.updatedUser,"firstname",t)},expression:"updatedUser.firstname"}})],1),t("b-field",{attrs:{label:e.$t("email"),horizontal:"",type:{"is-danger":e.errors.has("profile.email")},message:e.errors.first("profile.email")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{name:"email"},model:{value:e.updatedUser.email,callback:function(t){e.$set(e.updatedUser,"email",t)},expression:"updatedUser.email"}})],1),t("b-field",{attrs:{label:e.$t("language"),horizontal:""}},[t("b-select",{model:{value:e.updatedUser.language,callback:function(t){e.$set(e.updatedUser,"language",t)},expression:"updatedUser.language"}},e._l(e.languages,(function(n){var a=n.value,r=n.name;return t("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(r)+" ")])})),0)],1),t("b-field",{attrs:{grouped:"",position:"is-right"}},[t("div",{staticClass:"control"},[t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any("profile")}},[e._v(" "+e._s(e.$t("button-save")))])])])],1)])]),t("div",{staticClass:"panel"},[t("p",{staticClass:"panel-heading"},[t("i",{staticClass:"fas fa-briefcase",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("password"))+" ")]),t("div",{staticClass:"panel-block"},[t("form",{attrs:{"data-vv-scope":"password"},on:{submit:function(t){return t.preventDefault(),e.savePassword()}}},[t("input",{staticClass:"hidden",attrs:{id:"password",type:"password"}}),e._v(" "),e.currentUser.passwordExpired?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("password-expired-info-message"))+" ")]):t("b-field",{attrs:{label:e.$t("password-current"),horizontal:"",type:e.typeCurrentPassword,message:e.messageCurrentPassword}},[t("b-input",{attrs:{type:"password",loading:e.isCheckingPassword},model:{value:e.currentPassword,callback:function(t){e.currentPassword=t},expression:"currentPassword"}})],1),t("b-field",{attrs:{label:e.$t("password-new"),horizontal:"",type:{"is-danger":e.errors.has("password.newPassword")},message:e.errors.first("password.newPassword")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:8",expression:"'required|min:8'"}],attrs:{type:"password",name:"newPassword",disabled:e.newPasswordDisabled},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1),t("b-field",{attrs:{label:e.$t("password-confirm"),horizontal:"",type:{"is-danger":e.errors.has("password.confirmPassword")},message:e.errors.first("password.confirmPassword")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,is:e.newPassword},expression:"{required: true, is: newPassword}"}],attrs:{type:"password",name:"confirmPassword",disabled:e.newPasswordDisabled},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1),t("b-field",{attrs:{grouped:"",position:"is-right"}},[t("div",{staticClass:"control"},[t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any("password")||e.newPasswordDisabled}},[e._v(" "+e._s(e.$t("button-save"))+" ")])])])],1)])]),t("div",{staticClass:"panel"},[t("p",{staticClass:"panel-heading"},[t("i",{staticClass:"fas fa-exchange-alt",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("api-keys"))+" ")]),t("div",{staticClass:"panel-block"},[t("b-field",{attrs:{label:e.$t("public-key"),horizontal:""}},[t("b-field",[t("b-input",{attrs:{value:e.currentUser.publicKey,readonly:"",expanded:""}}),t("p",{staticClass:"control"},[t("button",{staticClass:"button",on:{click:function(t){return e.copy(e.currentUser.publicKey)}}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"far fa-clipboard"})]),t("span",[e._v(e._s(e.$t("button-copy")))])])])],1)],1),t("b-field",{attrs:{label:e.$t("private-key"),horizontal:""}},[t("b-field",[t("b-input",{attrs:{value:e.currentUser.privateKey,readonly:"",expanded:""}}),t("p",{staticClass:"control"},[t("button",{staticClass:"button",on:{click:function(t){return e.copy(e.currentUser.privateKey)}}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"far fa-clipboard"})]),t("span",[e._v(e._s(e.$t("button-copy")))])])])],1)],1),t("b-field",{attrs:{grouped:"",position:"is-right"}},[t("div",{staticClass:"control"},[t("button",{staticClass:"button is-link",on:{click:function(t){return e.regenerateKeys()}}},[e._v(e._s(e.$t("regenerate-api-keys")))])])])],1)])])},Nc=[],Mc=n("a925");a["default"].use(Mc["a"]);var Rc=new Mc["a"]({locale:"en",fallbackLocale:"en",messages:{en:n("9ae5"),es:n("bed4"),fr:n("1c71"),nl:n("6d72")}}),Uc={methods:{changeLanguage:function(e){e=e||this.$i18n.fallbackLocale;var t=e.toLowerCase();this.$i18n.locale=t,this.$moment.locale(t)}}},zc=Object.freeze({ROLE_GUEST:{label:"guest",index:0,class:"is-light"},ROLE_USER:{label:"user",index:1,class:"is-link"},ROLE_ADMIN:{label:"admin",index:2,class:"is-success"},ROLE_SUPER_ADMIN:{label:"super-admin",index:3,class:"is-success"}}),Lc=n("f904"),Fc=n.n(Lc),Bc={name:"Account",$_veeValidate:{validator:"new"},mixins:[Uc],data:function(){return{updatedUser:this.$store.state.currentUser.user.clone(),currentPassword:"",isCheckingPassword:!1,correctPassword:!1,newPassword:"",confirmPassword:"",languages:[{value:"EN",name:"English"},{value:"FR",name:"Français"},{value:"ES",name:"Español"},{value:"NL",name:"Nederlands"}]}},computed:{currentUser:Object(l["a"])("currentUser/user"),role:function(){var e=this.currentUser.guestByNow?"ROLE_GUEST":this.currentUser.adminByNow?"ROLE_ADMIN":"ROLE_USER";return zc[e]},newPasswordDisabled:function(){return!this.correctPassword&&!this.currentUser.passwordExpired},messageCurrentPassword:function(){if(this.currentPassword&&!this.isCheckingPassword)return this.correctPassword?"":this.$t("invalid-password")},typeCurrentPassword:function(){if(this.currentPassword&&!this.isCheckingPassword)return this.correctPassword?"is-success":"is-danger"}},watch:{currentPassword:function(){this.isCheckingPassword=!0,this.checkPassword()}},methods:{editDetails:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll("profile");case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,e.$store.dispatch("currentUser/updateUser",e.updatedUser);case 8:e.changeLanguage(e.currentUser.language),e.$notify({type:"success",text:e.$t("notif-success-user-details-saved")}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5),e.$notify({type:"error",text:e.$t("notif-error-user-details-not-saved")});case 15:case"end":return t.stop()}}),t,null,[[5,12]])})))()},savePassword:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll("password");case 2:if(n=t.sent,n&&(e.correctPassword||e.currentUser.passwordExpired)){t.next=5;break}return t.abrupt("return");case 5:return a=e.currentUser.clone(),a.password=e.newPassword,t.prev=7,t.next=10,e.$store.dispatch("currentUser/updateUser",a);case 10:e.$notify({type:"success",text:e.$t("notif-success-password-saved")}),e.currentPassword="",e.newPassword="",e.confirmPassword="",e.$validator.reset({scope:"password"}),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](7),e.$notify({type:"error",text:e.$t("notif-error-password-not-saved")});case 20:case"end":return t.stop()}}),t,null,[[7,17]])})))()},checkPassword:wt.a.debounce(Object(c["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["User"].checkCurrentPassword(this.currentPassword);case 2:this.correctPassword=e.sent,this.correctPassword||(this.newPassword="",this.confirmPassword="",this.$validator.reset({scope:"password"})),this.isCheckingPassword=!1;case 5:case"end":return e.stop()}}),e,this)}))),500),copy:function(e){Fc()(e),this.$notify({type:"success",text:this.$t("notif-success-key-copied")})},regenerateKeys:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("currentUser/regenerateKeys");case 3:e.$notify({type:"success",text:e.$t("notif-success-keys-regenerated")}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-keys-not-regenerated")});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}},qc=Bc,Vc=(n("b2db"),Object(C["a"])(qc,Ec,Nc,!1,null,"31271cb5",null)),Wc=Vc.exports,Gc=function(){var e=this,t=e._self._c;return e.error?t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(e._s(e.$t("unexpected-error-info-message")))])]):t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"panel"},[t("p",{staticClass:"panel-heading"},[e._v(" "+e._s(e.$t("advanced-search"))+" ")]),t("div",{staticClass:"panel-block"},[t("div",{staticClass:"search-block"},[t("b-input",{staticClass:"search-projects",attrs:{value:e.searchString,placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},on:{input:e.debounceSearchString}})],1),t("b-collapse",{attrs:{open:""}},[t("div",{staticClass:"filters"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column filter"},[t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("tags"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableTags,label:"name","track-by":"id",multiple:!0,allPlaceholder:e.$t("all")},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)]),t("div",{staticClass:"column filter"}),t("div",{staticClass:"column filter"})])])])],1),t("p",{staticClass:"panel-tabs"},[t("a",{class:{"is-active":"projects"===e.activeTab},on:{click:function(t){e.activeTab="projects"}}},[e._v(" "+e._s(e.$t("projects"))+" ("+e._s(this.projects.totalNbItems)+") ")]),t("a",{class:{"is-active":"images"===e.activeTab},on:{click:function(t){e.activeTab="images"}}},[e._v(" "+e._s(e.$t("images"))+" ("+e._s(this.images.totalNbItems)+") ")])]),t("div",{staticClass:"panel-block"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),t("div",{directives:[{name:"show",rawName:"v-show",value:"projects"===e.activeTab,expression:"activeTab === 'projects'"}],key:"projects"},[t("cytomine-table",{staticClass:"table-projects",attrs:{collection:e.projectCollection,currentPage:e.currentPage,perPage:e.perPage,openedDetailed:e.openedDetails,sort:e.sortField,order:e.sortOrder,data:e.projects,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t},"update:data":function(t){e.projects=t}},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{field:"currentUserRole",label:"",centered:"",width:"1",sortable:""}},[t("icon-project-member-role",{attrs:{"is-manager":a.currentUserRoles.admin,"is-representative":a.currentUserRoles.representative}})],1),t("b-table-column",{attrs:{label:e.$t("id"),width:"20",visible:e.currentUser.isDeveloper}},[e._v(" "+e._s(a.id)+" ")]),t("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:"",width:"250"}},[t("router-link",{attrs:{to:"/project/".concat(a.id)}},[e._v(" "+e._s(a.name)+" ")])],1),t("b-table-column",{attrs:{field:"membersCount",label:e.$t("members"),centered:"",sortable:"",width:"150"}},[e._v(" "+e._s(a.membersCount)+" ")]),t("b-table-column",{attrs:{field:"numberOfImages",label:e.$t("images"),centered:"",sortable:"",width:"150"}},[t("router-link",{attrs:{to:"/project/".concat(a.id,"/images")}},[e._v(e._s(a.numberOfImages))])],1),t("b-table-column",{attrs:{field:"numberOfAnnotations",label:e.$t("user-annotations"),centered:"",sortable:"",width:"150"}},[t("router-link",{attrs:{to:"/project/".concat(a.id,"/annotations?type=user")}},[e._v(" "+e._s(a.numberOfAnnotations)+" ")])],1),e.algoEnabled?t("b-table-column",{attrs:{field:"numberOfJobAnnotations",label:e.$t("analysis-annotations"),centered:"",sortable:"",width:"150"}},[t("router-link",{attrs:{to:"/project/".concat(a.id,"/annotations?type=algo")}},[e._v(" "+e._s(a.numberOfJobAnnotations)+" ")])],1):e._e(),t("b-table-column",{attrs:{field:"numberOfReviewedAnnotations",label:e.$t("reviewed-annotations"),centered:"",sortable:"",width:"150"}},[t("router-link",{attrs:{to:"/project/".concat(a.id,"/annotations?type=reviewed")}},[e._v(" "+e._s(a.numberOfReviewedAnnotations)+" ")])],1),t("b-table-column",{attrs:{field:"lastActivity",label:e.$t("last-activity"),centered:"",sortable:"",width:"180"}},[e._v(" "+e._s(e._f("moment")(Number(a.lastActivity),"ll"))+" ")]),t("b-table-column",{attrs:{label:" ",centered:"",width:"150"}},[t("router-link",{staticClass:"button is-small is-link",attrs:{to:"/project/".concat(a.id)}},[e._v(" "+e._s(e.$t("button-open"))+" ")])],1)]}},{key:"detail",fn:function(n){var a=n.row;return[t("project-details",{attrs:{project:a,"excluded-properties":e.excludedProperties},on:{update:function(t){return e.updateProject()},delete:function(t){return e.deleteProject(a)}}})]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-project")))])])]},proxy:!0}])}),t("div",{staticClass:"legend"},[t("h2",[e._v(e._s(e.$t("legend")))]),t("p",[t("icon-project-member-role"),e._v(" : "+e._s(e.$t("contributor-icon-label")))],1),t("p",[t("icon-project-member-role",{attrs:{"is-manager":!0}}),e._v(" : "+e._s(e.$t("manager-icon-label")))],1),t("p",[t("icon-project-member-role",{attrs:{"is-manager":!0,"is-representative":!0}}),e._v(" : "+e._s(e.$t("representative-icon-label")))],1)])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"images"===e.activeTab,expression:"activeTab === 'images'"}],key:"images"},[t("cytomine-table",{attrs:{collection:e.imageCollection,currentPage:e.currentPage,perPage:e.perPage,openedDetailed:e.openedDetails,sort:e.sortField,order:e.sortOrder,data:e.images,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:openedDetailed":function(t){e.openedDetails=t},"update:opened-detailed":function(t){e.openedDetails=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t},"update:data":function(t){e.images=t}},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{label:e.$t("id"),width:"20",visible:e.currentUser.isDeveloper}},[e._v(" "+e._s(a.id)+" ")]),t("b-table-column",{attrs:{label:e.$t("overview"),width:"100"}},[t("router-link",{attrs:{to:"/project/".concat(a.project,"/image/").concat(a.id)}},[t("image-thumbnail",{key:"".concat(a.id,"-thumb-128"),attrs:{image:a,size:128,"extra-parameters":{Authorization:"Bearer "+e.shortTermToken}}})],1)],1),t("b-table-column",{attrs:{field:a.projectBlind?"blindedName":"instanceFilename",label:e.$t("name"),sortable:"",width:"400"}},[t("router-link",{attrs:{to:"/project/".concat(a.project,"/image/").concat(a.id)}},[t("image-name",{attrs:{image:a,showBothNames:""}})],1)],1),t("b-table-column",{attrs:{field:"projectName",label:e.$t("project"),width:"200"}},[t("router-link",{attrs:{to:"/project/".concat(a.project)}},[e._v(" "+e._s(a.projectName)+" ")])],1),t("b-table-column",{attrs:{field:"magnification",label:e.$t("magnification"),centered:"",sortable:"",width:"100"}},[e._v(" "+e._s(a.magnification||e.$t("unknown"))+" ")]),t("b-table-column",{attrs:{field:"numberOfAnnotations",label:e.$t("user-annotations"),centered:"",sortable:"",width:"100"}},[t("router-link",{attrs:{to:"/project/".concat(a.project,"/annotations?image=").concat(a.id,"&type=user")}},[e._v(" "+e._s(a.numberOfAnnotations)+" ")])],1),e.algoEnabled?t("b-table-column",{attrs:{field:"numberOfJobAnnotations",label:e.$t("analysis-annotations"),centered:"",sortable:"",width:"100"}},[t("router-link",{attrs:{to:"/project/".concat(a.project,"/annotations?image=").concat(a.id,"&type=algo")}},[e._v(" "+e._s(a.numberOfJobAnnotations)+" ")])],1):e._e(),t("b-table-column",{attrs:{field:"numberOfReviewedAnnotations",label:e.$t("reviewed-annotations"),centered:"",sortable:"",width:"100"}},[t("router-link",{attrs:{to:"/project/".concat(a.project,"/annotations?image=").concat(a.id,"&type=reviewed")}},[e._v(" "+e._s(a.numberOfReviewedAnnotations)+" ")])],1),t("b-table-column",{attrs:{label:" ",centered:"",width:"150"}},[t("router-link",{staticClass:"button is-small is-link",attrs:{to:"/project/".concat(a.project,"/image/").concat(a.id)}},[e._v(" "+e._s(e.$t("button-open"))+" ")])],1)]}},{key:"detail",fn:function(n){var a=n.row;return[t("image-details",{attrs:{image:a,excludedProperties:e.excludedProperties}})]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-image")))])])]},proxy:!0}])})],1)],1)])])},Hc=[],Jc={name:"advanced-search",components:{ImageThumbnail:Ut,IconProjectMemberRole:ct,ImageName:Qn["a"],CytomineTable:G,ProjectDetails:Ye,ImageDetails:Da,CytomineMultiselect:ee},data:function(){return{loading:!0,error:!1,searchString:"",projects:[],images:[],activeTab:"projects",perPage:10,selectedTags:[],availableTags:[],currentPage:1,sortField:"created",sortOrder:"desc",openedDetails:[],revision:0,algoEnabled:I["a"].ALGORITHMS_ENABLED,excludedProperties:["name","imagesPreview","lastActivity"]}},methods:{appendShortTermToken:k["a"],debounceSearchString:wt.a.debounce(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.searchString=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),500)},computed:{currentUser:Object(l["a"])("currentUser/user"),shortTermToken:Object(l["a"])("currentUser/shortTermToken"),pathSearchString:function(){return this.$route.params.searchString},querySearchString:function(){return this.$route.query.searchString},querySearchTags:function(){return this.$route.query.tags},regexp:function(){return Object(Kt["a"])(this.searchString)},lowCaseSearchString:function(){return this.searchString.toLowerCase()},projectCollection:function(){var e=new p["ProjectCollection"]({withMembersCount:!0,withLastActivity:!0,withCurrentUserRoles:!0});return this.searchString&&(e["name"]={ilike:encodeURIComponent(this.searchString)}),this.selectedTags.length>0&&this.selectedTags.length<this.availableTags.length&&(e["tag"]={in:this.selectedTags.map((function(e){return e.id})).join()}),e},imageCollection:function(){var e=new p["ImageInstanceCollection"]({filterKey:"user",filterValue:this.currentUser.id});return this.searchString&&(e["name"]={ilike:encodeURIComponent(this.searchString)}),this.selectedTags.length>0&&this.selectedTags.length<this.availableTags.length&&(e["tag"]={in:this.selectedTags.map((function(e){return e.id})).join()}),e}},watch:{pathSearchString:function(e){e&&(this.searchString=e)},querySearchString:function(e){e&&!this.pathSearchString&&(this.searchString=e)},querySearchTags:function(e){if(e){this.selectedTags=[];var t=this.availableTags.filter((function(t){return e.split(",").includes(t.name)}));t&&(this.selectedTags=t)}}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.searchString=e.pathSearchString||e.querySearchString||"",t.prev=1,t.t0=[{id:"null",name:e.$t("no-tag")}],t.t1=L["a"],t.next=6,p["TagCollection"].fetchAll();case 6:t.t2=t.sent.array,t.t3=(0,t.t1)(t.t2),e.availableTags=t.t0.concat.call(t.t0,t.t3),t.next=14;break;case 11:t.prev=11,t.t4=t["catch"](1),e.error=!0;case 14:e.algoEnabled||e.excludedProperties.push("numberOfJobAnnotations"),e.$route.query.tags&&(n=e.availableTags.filter((function(t){return e.$route.query.tags.split(",").includes(t.name)})),n&&(e.selectedTags=n)),e.loading=!1;case 17:case"end":return t.stop()}}),t,null,[[1,11]])})))()}},Kc=Jc,Yc=(n("5cf5"),Object(C["a"])(Kc,Gc,Hc,!1,null,"729a7712",null)),Zc=Yc.exports,Xc=function(){var e=this,t=e._self._c;return e.error?t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(e._s(e.$t("error-loading-image")))]),e.errorBadImageProject?t("p",[e._v(e._s(e.$t("error-loading-image-bad-project")))]):e._e()]):t("div",{staticClass:"cytomine-viewer"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():t("div",{staticClass:"maps-wrapper"},[e._l(e.cells,(function(n,a){return t("div",{key:a,staticClass:"map-cell",style:"height:".concat(e.elementHeight,"%; width:").concat(e.elementWidth,"%;")},[n&&n.image&&n.slices?t("cytomine-image",{key:"".concat(n.index,"-").concat(n.image.id),attrs:{index:n.index},on:{close:function(t){return e.closeMap(n.index)}}}):e._e()],1)})),t("image-selector"),t("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:e.shortkeysMapping,expression:"shortkeysMapping",modifiers:{once:!0}}],staticClass:"hidden",on:{shortkey:e.shortkeyEvent}})],2)],1)},Qc=[],el=(n("07ac"),n("6062"),n("1e70"),n("79a4"),n("c1a1"),n("8b00"),n("a4e7"),n("1e5a"),n("72c3"),function(){var e=this,t=e._self._c;return t("div",{ref:"container",staticClass:"map-container",on:{click:function(t){e.isActiveImage=!0}}},[e.loading||null===e.zoom?e._e():[t("vl-map",{ref:"map",attrs:{"data-projection":e.projectionName,"load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,"keyboard-event-target":e.document},on:{pointermove:function(t){e.projectedMousePosition=t.coordinate},mounted:e.updateKeyboardInteractions}},[t("vl-view",{ref:"view",attrs:{center:e.center,zoom:e.zoom,rotation:e.rotation,"max-zoom":e.maxZoom,"max-resolution":Math.pow(2,e.image.zoom),extent:e.extent,projection:e.projectionName},on:{"update:center":function(t){e.center=t},"update:zoom":function(t){e.zoom=t},"update:rotation":function(t){e.rotation=t},mounted:function(t){return e.viewMounted()}}}),t("vl-layer-tile",{ref:"baseLayer",attrs:{extent:e.extent},on:{mounted:e.addOverviewMap}},[t("vl-source-zoomify",{ref:"baseSource",attrs:{projection:e.projectionName,urls:e.baseLayerURLs,size:e.imageSize,extent:e.extent,crossOrigin:e.slices[0].imageServerUrl,transition:0,"tile-size":e.tileSize},on:{mounted:function(t){return e.setBaseSource()}}})],1),e._l(e.selectedLayers,(function(n){return t("annotation-layer",{key:"layer-"+n.id,attrs:{index:e.index,layer:n}})})),e.activeSelectInteraction?t("select-interaction",{attrs:{index:e.index}}):e._e(),e.activeDrawInteraction?t("draw-interaction",{attrs:{index:e.index}}):e._e(),e.activeModifyInteraction?t("modify-interaction",{attrs:{index:e.index}}):e._e()],2),e.configUI["project-tools-main"]?t("div",{staticClass:"draw-tools"},[t("draw-tools",{attrs:{index:e.index},on:{screenshot:function(t){return e.takeScreenshot()}}})],1):e._e(),t("div",{staticClass:"panels"},[t("ul",[t("li",[t("a",{staticClass:"close",on:{click:function(t){return e.$emit("close")}}},[t("i",{staticClass:"fas fa-times-circle"})])]),e.isPanelDisplayed("hide-tools")?[e.isPanelDisplayed("info")?t("li",[t("a",{class:{active:"info"===e.activePanel},on:{click:function(t){return e.togglePanel("info")}}},[t("i",{staticClass:"fas fa-info"})]),t("information-panel",{directives:[{name:"show",rawName:"v-show",value:"info"===e.activePanel,expression:"activePanel === 'info'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e(),e.isPanelDisplayed("digital-zoom")?t("li",[t("a",{class:{active:"digital-zoom"===e.activePanel},on:{click:function(t){return e.togglePanel("digital-zoom")}}},[t("i",{staticClass:"fas fa-search"})]),t("digital-zoom",{directives:[{name:"show",rawName:"v-show",value:"digital-zoom"===e.activePanel,expression:"activePanel === 'digital-zoom'"}],staticClass:"panel-options",attrs:{index:e.index},on:{resetZoom:function(t){return e.$refs.view.animate({zoom:e.image.zoom})},fitZoom:e.fitZoom}})],1):e._e(),e.isPanelDisplayed("link")&&e.nbImages>1?t("li",[t("a",{class:{active:"link"===e.activePanel},on:{click:function(t){return e.togglePanel("link")}}},[t("i",{staticClass:"fas fa-link"})]),t("link-panel",{directives:[{name:"show",rawName:"v-show",value:"link"===e.activePanel,expression:"activePanel === 'link'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e(),e.isPanelDisplayed("color-manipulation")?t("li",[t("a",{class:{active:"colors"===e.activePanel},on:{click:function(t){return e.togglePanel("colors")}}},[t("i",{staticClass:"fas fa-adjust"})]),t("color-manipulation",{directives:[{name:"show",rawName:"v-show",value:"colors"===e.activePanel,expression:"activePanel === 'colors'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e(),e.isPanelDisplayed("image-layers")?t("li",[t("a",{class:{active:"layers"===e.activePanel},on:{click:function(t){return e.togglePanel("layers")}}},[t("i",{staticClass:"fas fa-copy"})]),t("layers-panel",{directives:[{name:"show",rawName:"v-show",value:"layers"===e.activePanel,expression:"activePanel === 'layers'"}],staticClass:"panel-options",attrs:{index:e.index,"layers-to-preload":e.layersToPreload}})],1):e._e(),e.isPanelDisplayed("ontology")&&e.terms&&e.terms.length>0?t("li",[t("a",{class:{active:"ontology"===e.activePanel},on:{click:function(t){return e.togglePanel("ontology")}}},[t("i",{staticClass:"fas fa-hashtag"})]),t("ontology-panel",{directives:[{name:"show",rawName:"v-show",value:"ontology"===e.activePanel,expression:"activePanel === 'ontology'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e(),e.isPanelDisplayed("property")?t("li",[t("a",{class:{active:"properties"===e.activePanel},on:{click:function(t){return e.togglePanel("properties")}}},[t("i",{staticClass:"fas fa-tag"})]),t("properties-panel",{directives:[{name:"show",rawName:"v-show",value:"properties"===e.activePanel,expression:"activePanel === 'properties'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e(),e.isPanelDisplayed("follow")?t("li",[t("a",{class:{active:"follow"===e.activePanel},on:{click:function(t){return e.togglePanel("follow")}}},[t("i",{staticClass:"fas fa-street-view"})]),t("follow-panel",{directives:[{name:"show",rawName:"v-show",value:"follow"===e.activePanel,expression:"activePanel === 'follow'"}],staticClass:"panel-options",attrs:{index:e.index,view:e.$refs.view}})],1):e._e(),e.isPanelDisplayed("review")&&e.canEdit?t("li",[t("a",{class:{active:"review"===e.activePanel},on:{click:function(t){return e.togglePanel("review")}}},[t("i",{staticClass:"fas fa-check-circle"})]),t("review-panel",{directives:[{name:"show",rawName:"v-show",value:"review"===e.activePanel,expression:"activePanel === 'review'"}],staticClass:"panel-options",attrs:{index:e.index}})],1):e._e()]:e._e()],2)]),t("image-controls",{staticClass:"image-controls-wrapper",attrs:{index:e.index}}),e.imageWrapper.tracking.broadcast?t("div",{staticClass:"broadcast"},[t("i",{staticClass:"fas fa-circle"}),e._v(" "+e._s(e.$t("live"))+" ")]):e._e(),t("rotation-selector",{staticClass:"rotation-selector-wrapper",attrs:{index:e.index}}),t("scale-line",{attrs:{image:e.image,zoom:e.zoom,mousePosition:e.projectedMousePosition}}),t("annotations-container",{attrs:{index:e.index},on:{centerView:e.centerViewOnAnnot}}),t("div",{ref:"overview",staticClass:"custom-overview"},[t("p",{staticClass:"image-name",class:{hidden:e.overviewCollapsed}},[t("image-name",{attrs:{image:e.image}})],1)])]],2)}),tl=[],nl=function(){var e=this,t=e._self._c;return t("vl-layer-vector",{attrs:{visible:e.layer.visible,extent:e.imageExtent,"update-while-interacting":!1}},[t("vl-source-vector",{ref:"olSource",attrs:{"loader-factory":e.loaderFactory,"strategy-factory":e.strategyFactory,url:"-"}},[t("vl-style-func",{attrs:{factory:e.styleFunctionFactory}})],1)],1)},al=[],rl=n("64d9"),il=Object.freeze({SELECT:"select",CREATE:"create",UPDATE:"update",DELETE:"delete"});function ol(e){return sl.apply(this,arguments)}function sl(){return sl=Object(c["a"])(Object(s["a"])().mark((function e(t){var n,a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["AnnotationTermCollection"].fetchAll({filterKey:"annotation",filterValue:t.id});case 2:n=e.sent,t.term=[],t.userByTerm=[],a={},n.array.forEach((function(e){var n=e.term,r=e.user;t.term.includes(n)?t.userByTerm[a[n]].user.push(r):(a[n]=t.term.length,t.term.push(n),t.userByTerm.push({term:n,user:[r]}))}));case 7:case"end":return e.stop()}}),e)}))),sl.apply(this,arguments)}function cl(e){return ll.apply(this,arguments)}function ll(){return ll=Object(c["a"])(Object(s["a"])().mark((function e(t){var n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["AnnotationTrackCollection"].fetchAll({filterKey:"annotation",filterValue:t.id});case 2:n=e.sent,t.track=n.array.map((function(e){return e.track})),t.annotationTrack=n.array;case 5:case"end":return e.stop()}}),e)}))),ll.apply(this,arguments)}function ul(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n&&!n.includes(e.slice))return!1;var a=e.type===p["AnnotationType"].REVIEWED;return t.isReview?a:!a&&e.user===t.id}var dl={name:"annotation-layer",props:{index:String,layer:Object},data:function(){return{format:new rl["a"],resolution:null,lastExtent:null,clustered:null,maxResolutionNoClusters:null}},computed:{imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},image:function(){return this.imageWrapper.imageInstance},slices:function(){return this.imageWrapper.activeSlices},sliceIds:function(){return this.slices.map((function(e){return e.id}))},annotsIdsToSelect:function(){return this.imageWrapper.selectedFeatures.annotsToSelect.map((function(e){return e.id}))},imageExtent:function(){return[0,0,this.image.width,this.image.height]},selectedFeatures:function(){return this.imageWrapper.selectedFeatures.selectedFeatures},ongoingEdit:function(){return this.imageWrapper.draw.ongoingEdit},terms:function(){return this.imageWrapper.style.terms||[]},styleFunctionFactory:function(){var e=this;return this.imageWrapper.selectedFeatures.selectedFeatures,this.imageWrapper.style.layersOpacity,this.terms.forEach((function(e){e.visible,e.color,e.opacity})),this.imageWrapper.style.displayNoTerm,this.imageWrapper.style.noTermOpacity,this.imageWrapper.properties.selectedPropertyKey,this.imageWrapper.properties.selectedPropertyColor,this.imageWrapper.review.reviewMode,this.imageWrapper.style.wrappedTracks.forEach((function(e){e.color})),function(){return e.$store.getters[e.imageModule+"genStyleFunction"]}},reviewMode:function(){return this.imageWrapper.review.reviewMode}},watch:{reviewMode:function(){this.clearFeatures()}},methods:{clearFeatures:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs.olSource&&(this.$store.commit(this.imageModule+"removeLayerFromSelectedFeatures",{layer:this.layer,cache:e}),this.$refs.olSource.clearFeatures())},annotBelongsToLayer:function(e){return ul(e,this.layer,this.sliceIds)},addAnnotationHandler:function(e){this.annotBelongsToLayer(e)&&this.$refs.olSource&&this.$refs.olSource.addFeature(this.createFeature(e))},selectAnnotationHandler:function(e){var t=e.annot,n=e.index;if(n===this.index&&this.annotBelongsToLayer(t)&&this.$refs.olSource){var a=this.$refs.olSource.getFeatureById(t.id);a?this.$store.dispatch(this.imageModule+"selectFeature",a):this.$store.commit(this.imageModule+"setAnnotToSelect",t)}},reloadAnnotationsHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.idImage,n=e.clear,a=void 0!==n&&n,r=e.hard,i=void 0!==r&&r;t&&t!==this.image.id||(a?this.clearFeatures():i?(this.clearFeatures(!1),this.loader()):this.loader())},reviewAnnotationHandler:function(e){this.reviewMode&&this.deleteAnnotationHandler(e)},editAnnotationHandler:function(e){if(this.annotBelongsToLayer(e)&&this.$refs.olSource){var t=this.$refs.olSource.getFeatureById(e.id);if(!t)return;t.setGeometry(this.format.readGeometry(e.location)),t.set("annot",e);var n=this.selectedFeatures.findIndex((function(t){return t.id===e.id}));n>=0&&this.$store.commit(this.imageModule+"changeAnnotSelectedFeature",{indexFeature:n,annot:e})}},deleteAnnotationHandler:function(e){if(this.annotBelongsToLayer(e)&&this.$refs.olSource){var t=this.$refs.olSource.getFeatureById(e.id);if(!t)return;this.$refs.olSource.removeFeature(t),this.selectedFeatures.some((function(t){return t.id===e.id}))&&this.$store.commit(this.imageModule+"clearSelectedFeatures")}},strategyFactory:function(){var e=this;return function(t,n){return e.lastExtent=t,e.$refs.olSource&&e.resolution&&null!=e.clustered&&(!e.clustered&&n>e.maxResolutionNoClusters||n!==e.resolution&&e.clustered)&&e.$refs.olSource.$source.loadedExtentsRtree_.clear(),[t]}},fetchAnnots:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return[0,1].forEach((function(t){e[t]<0&&(e[t]=0)})),[2,3].forEach((function(n){t.imageExtent[n]<e[n]&&(e[n]=t.imageExtent[n])})),n.next=4,new p["AnnotationCollection"]({user:t.layer.isReview?null:t.layer.id,image:t.image.id,slices:t.sliceIds,reviewed:t.layer.isReview,notReviewedOnly:!t.layer.isReview&&t.reviewMode,bbox:e.join(),showWKT:!0,showTerm:!0,showGIS:!0,showTrack:!0,kmeans:!0}).fetchAll();case 4:return a=n.sent,n.abrupt("return",a.array);case 6:case"end":return n.stop()}}),n)})))()},updateFeature:function(e,t){var n=this.selectedFeatures.findIndex((function(t){return t.id===e.getId()})),a=-1!==n;if(!t)return this.$refs.olSource.removeFeature(e),void(a&&this.$store.commit(this.imageModule+"clearSelectedFeatures"));var r=e.get("annot");if(this.clustered||t.updated!==r.updated||!this.sameTerms(t.term,r.term)){if(a){if(this.ongoingEdit)return;this.$store.commit(this.imageModule+"changeAnnotSelectedFeature",{indexFeature:n,annot:t})}e.set("annot",t),e.setGeometry(this.format.readGeometry(t.location))}},loader:function(){var e=arguments,t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c,l,u;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:t.lastExtent,r=e.length>1&&void 0!==e[1]?e[1]:t.resolution,t.resolution=r,t.layer.visible&&a){n.next=5;break}return n.abrupt("return");case 5:return n.prev=5,n.next=8,t.fetchAnnots(a);case 8:i=n.sent,i.sort((function(e,t){return e.area<t.area?1:-1})),n.next=16;break;case 12:return n.prev=12,n.t0=n["catch"](5),t.$notify({type:"error",text:t.$t("notif-error-fetch-annotations-viewer")}),n.abrupt("return");case 16:if(t.$refs.olSource){n.next=18;break}return n.abrupt("return");case 18:o=t.clustered,i.length&&(t.clustered=null!=i[0].count,!t.clustered&&r>t.maxResolutionNoClusters&&(t.maxResolutionNoClusters=r)),c=i.reduce((function(e,t){return e[t.id]=t,e}),{}),l=[],null!==o&&o!==t.clustered?t.clearFeatures():(u=t.clustered?t.$refs.olSource.$source.getFeatures():t.$refs.olSource.$source.getFeaturesInExtent(a),u.forEach((function(e){t.updateFeature(e,c[e.getId()]),l.push(e.getId())}))),i.forEach((function(e){l.includes(e.id)||t.$refs.olSource.addFeature(t.createFeature(e))}));case 24:case"end":return n.stop()}}),n,null,[[5,12]])})))()},loaderFactory:function(){var e=this;return function(t,n){return e.loader(t,n)}},createFeature:function(e){var t=this.format.readFeature(e.location);return t.setId(e.id),t.set("annot",e),this.annotsIdsToSelect.includes(e.id)&&this.$store.dispatch(this.imageModule+"selectFeature",t),t},sameTerms:function(e,t){return e.length===t.length&&e.every((function(e){return t.includes(e)}))}},mounted:function(){this.$eventBus.$on("addAnnotation",this.addAnnotationHandler),this.$eventBus.$on("selectAnnotationInLayer",this.selectAnnotationHandler),this.$eventBus.$on("reloadAnnotations",this.reloadAnnotationsHandler),this.$eventBus.$on("reviewAnnotation",this.reviewAnnotationHandler),this.$eventBus.$on("editAnnotation",this.editAnnotationHandler),this.$eventBus.$on("deleteAnnotation",this.deleteAnnotationHandler)},beforeDestroy:function(){this.$eventBus.$off("addAnnotation",this.addAnnotationHandler),this.$eventBus.$off("selectAnnotationInLayer",this.selectAnnotationHandler),this.$eventBus.$off("reloadAnnotations",this.reloadAnnotationsHandler),this.$eventBus.$off("reviewAnnotation",this.reviewAnnotationHandler),this.$eventBus.$off("editAnnotation",this.editAnnotationHandler),this.$eventBus.$off("deleteAnnotation",this.deleteAnnotationHandler)}},pl=dl,ml=Object(C["a"])(pl,nl,al,!1,null,null,null),fl=ml.exports,hl=function(){var e=this,t=e._self._c;return t("div",{staticClass:"rotation-selector-wrapper",class:{expanded:e.expanded}},[t("div",{staticClass:"ol-rotate ol-unselectable ol-control custom"},[t("button",{attrs:{type:"button"},on:{click:function(t){e.expanded=!0}}},[t("span",{staticClass:"ol-compass",style:{transform:"rotate(".concat(e.rotation,"rad)")}},[e._v("⇧")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.expanded,expression:"expanded"}]},[t("div",{staticClass:"top"},[t("div",{staticClass:"rotation-controls"},[t("b-field",[t("p",{staticClass:"control"},[t("button",{staticClass:"button is-small",on:{click:function(t){e.degreesRotation=0}}},[e._v(e._s(e.$t("button-reset")))])]),t("p",{staticClass:"control"},[t("button",{staticClass:"button is-small",on:{click:function(t){return e.increment(90)}}},[e._v("+90°")])]),t("p",{staticClass:"control"},[t("button",{staticClass:"button is-small",on:{click:function(t){return e.increment(-90)}}},[e._v("-90°")])])])],1),t("button",{staticClass:"delete is-small",on:{click:function(t){e.expanded=!1}}})]),t("cytomine-slider",{attrs:{max:360,integerOnly:!1,lazy:!1},model:{value:e.degreesRotation,callback:function(t){e.degreesRotation=t},expression:"degreesRotation"}})],1)])},gl=[],vl={name:"rotation-selector",components:{CytomineSlider:ce},props:{index:String},data:function(){return{expanded:!1}},computed:{viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},rotation:function(){return this.imageWrapper.view.rotation},degreesRotation:{get:function(){return Math.round(180*this.rotation/Math.PI*1e3)/1e3},set:function(e){this.$store.dispatch(this.viewerModule+"setRotation",{index:this.index,rotation:Number(e)/180*Math.PI})}}},methods:{increment:function(e){this.degreesRotation=(this.degreesRotation+e+360)%360}}},bl=vl,yl=(n("4bdd"),n("128e"),Object(C["a"])(bl,hl,gl,!1,null,"3ef9c304",null)),wl=yl.exports,jl=function(){var e=this,t=e._self._c;return t("div",{staticClass:"scale-line",class:{interpolation:e.interpolation}},[t("div",{staticClass:"scale-line-top",style:{width:e.scaleLineLength+"px"}},[e._v(" "+e._s(e.scaleLength)+" ")]),t("div",{staticClass:"scale-line-bottom"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.magnification,expression:"magnification"}]},[e._v(" "+e._s(e.$t("magnification"))+": "+e._s(e.magnification)+"X ")])]),e.mousePosition?t("div",{staticClass:"scale-line-position"},[t("div",{staticStyle:{float:"left"}},[e._v("x: "+e._s(Math.round(e.mousePosition[0])))]),t("div",{staticStyle:{float:"right"}},[e._v("y: "+e._s(Math.round(e.mousePosition[1])))])]):e._e()])},kl=[],_l={name:"scale-line",props:{image:Object,zoom:Number,mousePosition:Array},data:function(){return{scaleLineLength:100}},computed:{magnification:function(){var e=Math.pow(2,this.zoom-this.image.zoom)*this.image.magnification;return Math.round(100*e)/100},resolution:function(){var e=this.image.physicalSizeX?this.image.physicalSizeX:1;return Math.pow(2,this.image.zoom-this.zoom)*e},scaleLength:function(){var e=this.scaleLineLength*this.resolution;if(this.image.physicalSizeX){var t=this.$t("um");return e>1e3&&(e/=1e3,t=this.$t("mm")),"".concat(e.toPrecision(3)," ").concat(t)}return"".concat(Math.round(1e3*e)/1e3," ").concat(this.$t("pixels"))},interpolation:function(){return this.zoom>this.image.zoom}}},xl=_l,Cl=(n("e8ff"),Object(C["a"])(xl,jl,kl,!1,null,"543499ef",null)),Ol=Cl.exports,$l=(n("cb29"),n("38cf"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"draw-tools-wrapper"},[e.isToolDisplayed("select")?t("div",{staticClass:"buttons has-addons are-small"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("select"),expression:"$t('select')"}],staticClass:"button",class:{"is-selected":"select"===e.activeTool},on:{click:function(t){return e.activateTool("select")}}},[e._m(0)])]):e._e(),e.reviewMode?[t("div",{staticClass:"buttons has-addons are-small"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("validate-annotation"),expression:"$t('validate-annotation')"}],staticClass:"button",class:{"is-success":!e.isToolDisabled("accept")},attrs:{disabled:e.isToolDisabled("accept")},on:{click:function(t){return e.accept()}}},[e._m(8)]),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("reject-annotation"),expression:"$t('reject-annotation')"}],staticClass:"button",class:{"is-danger":!e.isToolDisabled("reject")},attrs:{disabled:e.isToolDisabled("reject")},on:{click:function(t){return e.reject()}}},[e._m(9)])])]:[e.terms&&e.terms.length>0?t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.showTermSelector=!1},expression:"() => showTermSelector = false"}],staticClass:"buttons has-addons are-small term-selection",class:{"has-preview":e.termsToAssociate.length>0}},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("terms-new-annotation"),expression:"$t('terms-new-annotation')"}],staticClass:"button",attrs:{disabled:e.disabledDraw,title:e.disabledDrawMessage},on:{click:function(t){e.showTermSelector=!e.showTermSelector}}},[e._m(1)]),t("div",{staticClass:"color-preview",style:{background:e.backgroundTermsNewAnnot}},[e.termsToAssociate.length>1?t("span",[e._v(e._s(e.termsToAssociate.length))]):e._e()]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showTermSelector,expression:"showTermSelector"}],staticClass:"ontology-tree-container"},[t("b-input",{attrs:{placeholder:e.$t("search-placeholder"),size:"is-small"},model:{value:e.searchStringTerm,callback:function(t){e.searchStringTerm=t},expression:"searchStringTerm"}}),t("ontology-tree",{staticClass:"ontology-tree",attrs:{ontology:e.ontology,searchString:e.searchStringTerm},model:{value:e.termsToAssociate,callback:function(t){e.termsToAssociate=t},expression:"termsToAssociate"}})],1)]):e._e(),e.tracks&&e.maxRank>1?t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.showTrackSelector=!1},expression:"() => showTrackSelector = false"}],staticClass:"buttons has-addons are-small track-selection",class:{"has-preview":e.tracksToAssociate.length>0}},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("tracks-new-annotation"),expression:"$t('tracks-new-annotation')"}],staticClass:"button",attrs:{disabled:e.disabledDraw,title:e.disabledDrawMessage},on:{click:function(t){e.showTrackSelector=!e.showTrackSelector}}},[e._m(2)]),t("div",{staticClass:"color-preview",style:{"border-color":e.backgroundTracksNewAnnot}},[e.tracksToAssociate.length>1?t("span",[e._v(e._s(e.tracksToAssociate.length))]):e._e()]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showTrackSelector,expression:"showTrackSelector"}],staticClass:"tracks-tree-container"},[t("b-input",{attrs:{placeholder:e.$t("search-placeholder"),size:"is-small"},model:{value:e.searchStringTrack,callback:function(t){e.searchStringTrack=t},expression:"searchStringTrack"}}),t("track-tree",{staticClass:"track-tree",attrs:{tracks:e.tracks,searchString:e.searchStringTrack,"allow-new":!0,"allow-edition":!0,image:e.image},on:{newTrack:e.refreshTracks,updatedTrack:e.refreshTracks,deletedTrack:e.refreshTracks},model:{value:e.tracksToAssociate,callback:function(t){e.tracksToAssociate=t},expression:"tracksToAssociate"}})],1)]):e._e(),t("div",{staticClass:"buttons has-addons are-small"},[e.isToolDisplayed("point")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("point"),expression:"$t('point')"}],staticClass:"button",class:{"is-selected":"point"===e.activeTool},attrs:{disabled:e.disabledDraw,title:e.disabledDrawMessage},on:{click:function(t){return e.activateTool("point")}}},[e._m(3)]):e._e(),e.isToolDisplayed("line")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("line"),expression:"$t('line')"}],staticClass:"button",class:{"is-selected":"line"===e.activeTool},attrs:{disabled:e.disabledDraw,title:e.disabledDrawMessage},on:{click:function(t){return e.activateTool("line")}}},[e._m(4)]):e._e(),e.isToolDisplayed("freehand-line")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("freehand-line"),expression:"$t('freehand-line')"}],staticClass:"button",class:{"is-selected":"freehand-line"===e.activeTool},attrs:{disabled:e.disabledDraw,title:e.disabledDrawMessage},on:{click:function(t){return e.activateTool("freehand-line")}}},[t("span",{staticClass:"icon is-small"},[t("icon-line-free-hand")],1)]):e._e(),e.isToolDisplayed("rectangle")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("rectangle"),expression:"$t('rectangle')"}],staticClass:"button",class:{"is-selected":"rectangle"===e.activeTool},attrs:{disabled:e.disabledDraw,title:e.disabledDrawMessage},on:{click:function(t){return e.activateTool("rectangle")}}},[e._m(5)]):e._e(),e.isToolDisplayed("circle")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("circle"),expression:"$t('circle')"}],staticClass:"button",class:{"is-selected":"circle"===e.activeTool},attrs:{disabled:e.disabledDraw,title:e.disabledDrawMessage},on:{click:function(t){return e.activateTool("circle")}}},[e._m(6)]):e._e(),e.isToolDisplayed("polygon")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("polygon"),expression:"$t('polygon')"}],staticClass:"button",class:{"is-selected":"polygon"===e.activeTool},attrs:{disabled:e.disabledDraw,title:e.disabledDrawMessage},on:{click:function(t){return e.activateTool("polygon")}}},[e._m(7)]):e._e(),e.isToolDisplayed("freehand-polygon")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("freehand-polygon"),expression:"$t('freehand-polygon')"}],staticClass:"button",class:{"is-selected":"freehand-polygon"===e.activeTool},attrs:{disabled:e.disabledDraw,title:e.disabledDrawMessage},on:{click:function(t){return e.activateTool("freehand-polygon")}}},[t("span",{staticClass:"icon is-small"},[t("icon-polygon-free-hand")],1)]):e._e()])],t("div",{staticClass:"buttons has-addons are-small"},[e.isToolDisplayed("screenshot")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("screenshot"),expression:"$t('screenshot')"}],staticClass:"button",attrs:{disabled:e.disabledDraw},on:{click:function(t){return e.takeScreenshot()}}},[e._m(10)]):e._e()]),e.configUI["project-explore-annotation-main"]?t("div",{staticClass:"buttons has-addons are-small"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("display-annot-details"),expression:"$t('display-annot-details')"}],staticClass:"button",class:{"is-selected":e.displayAnnotDetails&&e.selectedFeature},attrs:{disabled:!e.selectedFeature},on:{click:function(t){e.displayAnnotDetails=!e.displayAnnotDetails}}},[e._m(11)])]):e._e(),t("div",{staticClass:"buttons has-addons are-small"},[e.isToolDisplayed("fill")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("fill"),expression:"$t('fill')"}],staticClass:"button",attrs:{disabled:e.isToolDisabled("fill")},on:{click:function(t){return e.fill()}}},[e._m(12)]):e._e(),e.isToolDisplayed("edit")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("modify"),expression:"$t('modify')"}],staticClass:"button",class:{"is-selected":"modify"===e.activeEditTool},attrs:{disabled:e.isToolDisabled("edit")},on:{click:function(t){return e.activateEditTool("modify")}}},[e._m(13)]):e._e(),e.isToolDisplayed("union")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("freehand-correct-add"),expression:"$t('freehand-correct-add')"}],staticClass:"button",class:{"is-selected":"correct-add"===e.activeEditTool},attrs:{disabled:e.isToolDisabled("correct-add")},on:{click:function(t){return e.activateEditTool("correct-add")}}},[e._m(14)]):e._e(),e.isToolDisplayed("diff")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("freehand-correct-remove"),expression:"$t('freehand-correct-remove')"}],staticClass:"button",class:{"is-selected":"correct-remove"===e.activeEditTool},attrs:{disabled:e.isToolDisabled("correct-remove")},on:{click:function(t){return e.activateEditTool("correct-remove")}}},[e._m(15)]):e._e(),e.isToolDisplayed("move")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("move"),expression:"$t('move')"}],staticClass:"button",class:{"is-selected":"translate"===e.activeEditTool},attrs:{disabled:e.isToolDisabled("move")},on:{click:function(t){return e.activateEditTool("translate")}}},[e._m(16)]):e._e(),e.isToolDisplayed("resize")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("rescale"),expression:"$t('rescale')"}],staticClass:"button",class:{"is-selected":"rescale"===e.activeEditTool},attrs:{disabled:e.isToolDisabled("resize")},on:{click:function(t){return e.activateEditTool("rescale")}}},[e._m(17)]):e._e(),e.isToolDisplayed("rotate")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("rotate"),expression:"$t('rotate')"}],staticClass:"button",class:{"is-selected":"rotate"===e.activeEditTool},attrs:{disabled:e.isToolDisabled("rotate")},on:{click:function(t){return e.activateEditTool("rotate")}}},[e._m(18)]):e._e(),e.isToolDisplayed("delete")?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("delete"),expression:"$t('delete')"}],staticClass:"button",attrs:{disabled:e.isToolDisabled("delete")},on:{click:function(t){return e.confirmDeletion()}}},[e._m(19)]):e._e()]),e.isToolDisplayed("copy-paste")?t("div",{staticClass:"buttons has-addons are-small"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("copy"),expression:"$t('copy')"}],staticClass:"button",attrs:{disabled:e.isToolDisabled("copy")},on:{click:function(t){return e.copy()}}},[e._m(20)]),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("paste"),expression:"$t('paste')"}],staticClass:"button",attrs:{disabled:e.disabledPaste},on:{click:function(t){return e.paste()}}},[e._m(21)]),e.maxRepeats>0?t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.showRepeatSelector=!1},expression:"() => showRepeatSelector = false"}],staticClass:"special-paste-selection"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("paste-repeat"),expression:"$t('paste-repeat')"}],staticClass:"button",attrs:{disabled:e.disabledPaste},on:{click:function(t){e.showRepeatSelector=!e.showRepeatSelector}}},[e._m(22)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showRepeatSelector,expression:"showRepeatSelector"}],staticClass:"special-paste-container"},[t("div",{staticClass:"panel"},[t("div",{staticClass:"panel-block"},[t("p",[t("i18n",{attrs:{path:"paste-repeat-info"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.nbRepeats,expression:"nbRepeats"}],staticClass:"repeat-input",attrs:{type:"number",place:"input",min:"1",max:e.maxRepeats},domProps:{value:e.nbRepeats},on:{input:function(t){t.target.composing||(e.nbRepeats=t.target.value)}}})]),t("br")],1),t("div",{staticClass:"repeat-button-container"},[t("button",{staticClass:"button is-small",on:{click:function(t){return e.repeat()}}},[e._v(e._s(e.$t("paste-repeat")))])])])])])]):e._e()]):e._e(),e.isToolDisplayed("undo-redo")?t("div",{staticClass:"buttons has-addons are-small"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("undo"),expression:"$t('undo')"}],staticClass:"button",attrs:{disabled:0===e.actions.length},on:{click:function(t){return e.undo()}}},[e._m(23)]),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("redo"),expression:"$t('redo')"}],staticClass:"button",attrs:{disabled:0===e.undoneActions.length},on:{click:function(t){return e.redo()}}},[e._m(24)])]):e._e()],2)}),Tl=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-mouse-pointer"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-hashtag"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-route"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-map-pin"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-minus"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"far fa-square"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"far fa-circle"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-draw-polygon"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-check"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-minus"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-camera"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-info"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-fill"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-edit"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"superscript fas fa-plus"}),t("i",{staticClass:"fas fa-pencil-alt"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"superscript fas fa-minus"}),t("i",{staticClass:"fas fa-pencil-alt"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-arrows-alt"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-expand"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-sync-alt"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"far fa-trash-alt"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-copy"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-paste"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-paste"}),t("i",{staticClass:"fas fa-star special-paste-icon"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-undo"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-redo"})])}],Sl=n("0af5"),Pl={name:"draw-tools",components:{TrackTree:ji["a"],OntologyTree:Xt["a"],IconPolygonFreeHand:oc,IconLineFreeHand:pc},props:{index:String},data:function(){return{showTermSelector:!1,format:new rl["a"],searchStringTerm:"",showTrackSelector:!1,searchStringTrack:"",showRepeatSelector:!1,nbRepeats:2}},computed:{configUI:Object(l["a"])("currentProject/configUI"),ontology:Object(l["a"])("currentProject/ontology"),currentUser:Object(l["a"])("currentUser/user"),imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageWrapper:function(){return this.viewerWrapper.images[this.index]},image:function(){return this.imageWrapper.imageInstance},slice:function(){return this.imageWrapper.activeSlices?this.imageWrapper.activeSlices[0]:null},multipleActiveSlices:function(){return this.imageWrapper.activeSlices&&this.imageWrapper.activeSlices.length>1},maxRank:function(){return this.$store.getters[this.imageModule+"maxRank"]},terms:function(){return this.$store.getters["currentProject/terms"]},termsToAssociate:{get:function(){return this.imageWrapper.draw.termsNewAnnots},set:function(e){this.$store.commit(this.imageModule+"setTermsNewAnnots",e)}},backgroundTermsNewAnnot:function(){var e=this;return 1===this.termsToAssociate.length?this.terms.find((function(t){return e.termsToAssociate[0]===t.id})).color:"#e2e2e2"},tracks:function(){return this.imageWrapper.tracks.tracks},tracksToAssociate:{get:function(){return this.imageWrapper.draw.tracksNewAnnots},set:function(e){this.$store.commit(this.imageModule+"setTracksNewAnnots",e)}},backgroundTracksNewAnnot:function(){var e=this;return 1===this.tracksToAssociate.length?this.tracks.find((function(t){return e.tracksToAssociate[0]===t.id})).color:"#e2e2e2"},activeTool:{get:function(){return this.imageWrapper.draw.activeTool},set:function(e){this.$store.dispatch(this.imageModule+"activateTool",e)}},displayAnnotDetails:{get:function(){return this.imageWrapper.selectedFeatures.displayAnnotDetails},set:function(e){this.$store.commit(this.imageModule+"setDisplayAnnotDetails",e)}},activeEditTool:{get:function(){return this.imageWrapper.draw.activeEditTool},set:function(e){this.$store.commit(this.imageModule+"activateEditTool",e)}},selectedFeature:function(){return this.$store.getters[this.imageModule+"selectedFeature"]},layers:function(){return this.imageWrapper.layers.selectedLayers||[]},noActiveLayer:function(){return!this.layers.find((function(e){return e.drawOn}))},disabledDraw:function(){return this.noActiveLayer||this.multipleActiveSlices},disabledDrawMessage:function(){return this.multipleActiveSlices?this.$t("warning-cannot-draw-multiple-slices"):null},actions:function(){return this.imageWrapper.undoRedo.actions},undoneActions:function(){return this.imageWrapper.undoRedo.undoneActions},isActiveImage:function(){return this.viewerWrapper.activeImage===this.index},reviewMode:function(){return this.imageWrapper.review.reviewMode},copiedAnnot:{get:function(){return this.viewerWrapper.copiedAnnot},set:function(e){this.$store.commit(this.viewerModule+"setCopiedAnnot",e)}},disabledPaste:function(){return this.disabledDraw||!this.copiedAnnot},imageExtent:function(){return[0,0,this.image.width,this.image.height]},maxRepeats:function(){return this.maxRank-this.slice.rank-1}},watch:{noActiveLayer:function(e){e&&(this.activeTool="select")},selectedFeature:function(e){!e&&["correct-add","correct-remove"].includes(this.activeEditTool)&&(this.activeEditTool=null)},reviewMode:function(e){e&&(this.activeTool="select")}},methods:{isToolDisplayed:function(e){return this.configUI["project-tools-".concat(e)]},isToolDisabled:function(e){if(!this.selectedFeature)return!0;if("copy"===e)return!1;var t=this.selectedFeature,n=t.properties.annot;if("accept"===e)return n.type===p["AnnotationType"].REVIEWED;if("reject"===e)return n.type!==p["AnnotationType"].REVIEWED;if(!this.$store.getters["currentProject/canEditAnnot"](n))return!0;var a=t.geometry.type;return"Point"===a?"move"!==e&&"delete"!==e:"LineString"===a&&["fill","correct-add","correct-remove"].includes(e)},activateTool:function(e){this.activeTool=e},activateEditTool:function(e){this.activeTool="select",this.activeEditTool=this.activeEditTool===e?null:e},fill:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.selectedFeature,n){t.next=3;break}return t.abrupt("return");case 3:return e.activateEditTool(null),a=n.properties.annot.clone(),t.prev=5,t.next=8,a.fill();case 8:e.$eventBus.$emit("editAnnotation",a),e.$store.commit(e.imageModule+"addAction",{annot:a,type:il.UPDATE}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5),e.$notify({type:"error",text:e.$t("notif-error-annotation-fill")});case 15:case"end":return t.stop()}}),t,null,[[5,12]])})))()},deleteAnnot:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.selectedFeature,n){t.next=3;break}return t.abrupt("return");case 3:return e.activateEditTool(null),t.prev=4,a=n.properties.annot,t.next=8,p["Annotation"].delete(a.id);case 8:e.$eventBus.$emit("deleteAnnotation",a),e.$store.commit(e.imageModule+"addAction",{annot:a,type:il.DELETE}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),e.$notify({type:"error",text:e.$t("notif-error-annotation-deletion")});case 15:case"end":return t.stop()}}),t,null,[[4,12]])})))()},confirmDeletion:function(){var e=this;this.selectedFeature&&this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-annotation"),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return e.deleteAnnot()}})},copy:function(){var e=this.selectedFeature;e&&(this.copiedAnnot=e.properties.annot.clone(),this.$notify({type:"success",text:this.$t("notif-success-annotation-copy")}))},paste:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r,i,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.copiedAnnot){t.next=2;break}return t.abrupt("return");case 2:if(a=(new rl["a"]).readGeometry(e.copiedAnnot.location),e.image.id===e.copiedAnnot.image||Object(Sl["g"])(e.imageExtent,a.getExtent())?n=e.copiedAnnot.location:(r=a.getExtent(),i=[(r[0]+r[2])/2,(r[1]+r[3])/2],a.translate(e.image.width/2-i[0],e.image.height/2-i[1]),Object(Sl["g"])(e.imageExtent,a.getExtent())&&(n=(new rl["a"]).writeGeometry(a))),n){t.next=7;break}return e.$notify({type:"error",text:e.$t("notif-error-annotation-paste")}),t.abrupt("return");case 7:return o=new p["Annotation"]({location:n,image:e.image.id,slice:e.slice.id,user:e.currentUser.id,term:e.copiedAnnot.term,track:e.copiedAnnot.track}),t.prev=8,t.next=11,o.save();case 11:o.term=e.copiedAnnot.term.slice(),o.userByTerm=e.copiedAnnot.term.map((function(t){return{term:t,user:[e.currentUser.id]}})),e.$eventBus.$emit("addAnnotation",o),e.$eventBus.$emit("selectAnnotation",{index:e.index,annot:o}),e.$store.commit(e.imageModule+"addAction",{annot:o,type:il.CREATE}),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](8),e.$notify({type:"error",text:e.$t("notif-error-annotation-creation")});case 21:case"end":return t.stop()}}),t,null,[[8,18]])})))()},repeat:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.copiedAnnot){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.copiedAnnot.repeat(e.slice.id,e.nbRepeats);case 5:e.$eventBus.$emit("reloadAnnotations",{idImage:e.image.id}),e.$notify({type:"success",text:e.$t("notif-success-annotation-repeat")}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),e.$notify({type:"error",text:e.$t("notif-error-annotation-repeat")});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},undo:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.actions.length){t.next=2;break}return t.abrupt("return");case 2:return n=e.actions[e.actions.length-1],t.prev=3,t.next=6,e.reverseAction(n,!0);case 6:a=t.sent,e.$store.commit(e.imageModule+"undoAction",a),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),e.$notify({type:"error",text:e.$t("notif-error-undo")});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},redo:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.undoneActions.length){t.next=2;break}return t.abrupt("return");case 2:return n=e.undoneActions[e.undoneActions.length-1],t.prev=3,t.next=6,e.reverseAction(n,!1);case 6:a=t.sent,e.$store.commit(e.imageModule+"redoAction",a),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),e.$notify({type:"error",text:e.$t("notif-error-redo")});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},reverseAction:function(e,t){var n=this;return Object(c["a"])(Object(s["a"])().mark((function a(){var r,i,o,c,l,u,d,m;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.annot,i=e.type,o=e.command,c=i,i!==il.CREATE){a.next=10;break}return a.next=5,p["Annotation"].delete(r.id);case 5:n.$eventBus.$emit("deleteAnnotation",r),c=il.DELETE,o=p["Cytomine"].instance.lastCommand,a.next=34;break;case 10:if(i!==il.DELETE){a.next=21;break}return a.next=13,p["Cytomine"].instance.undo(o);case 13:return l=a.sent,a.next=16,n.getUpdatedAnnotation(l);case 16:u=a.sent,n.$eventBus.$emit("addAnnotation",u),c=il.CREATE,a.next=34;break;case 21:if(!t){a.next=27;break}return a.next=24,p["Cytomine"].instance.undo(o);case 24:d=a.sent,a.next=30;break;case 27:return a.next=29,p["Cytomine"].instance.redo(o);case 29:d=a.sent;case 30:return a.next=32,n.getUpdatedAnnotation(d);case 32:m=a.sent,n.$eventBus.$emit("editAnnotation",m);case 34:return a.abrupt("return",{annot:r,command:o,type:c});case 35:case"end":return a.stop()}}),a)})))()},getUpdatedAnnotation:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r,i,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object(z["a"])(e),t.prev=1,n.s();case 3:if((a=n.n()).done){t.next=15;break}if(r=a.value,i=r.annotation||r.reviewedannotation,!i){t.next=13;break}return o=new p["Annotation"](i),t.next=10,ol(o);case 10:return t.next=12,cl(o);case 12:return t.abrupt("return",o);case 13:t.next=3;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](1),n.e(t.t0);case 20:return t.prev=20,n.f(),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[1,17,20,23]])})))()},accept:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.selectedFeature,n){t.next=3;break}return t.abrupt("return");case 3:if(e.activateEditTool(null),a=n.properties.annot,a.type!==p["AnnotationType"].REVIEWED){t.next=7;break}return t.abrupt("return");case 7:return t.prev=7,t.next=10,a.review();case 10:r=t.sent,r.userByTerm=a.userByTerm,e.$eventBus.$emit("reviewAnnotation",a),e.$eventBus.$emit("addAnnotation",r),e.$eventBus.$emit("selectAnnotation",{index:e.index,annot:r}),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](7),e.$notify({type:"error",text:e.$t("notif-error-annotation-validation")});case 20:case"end":return t.stop()}}),t,null,[[7,17]])})))()},reject:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.selectedFeature,n){t.next=3;break}return t.abrupt("return");case 3:if(e.activateEditTool(null),a=n.properties.annot,a.type===p["AnnotationType"].REVIEWED){t.next=7;break}return t.abrupt("return");case 7:return t.prev=7,t.next=10,p["Annotation"].fetch(a.parentIdent);case 10:return r=t.sent,r.userByTerm=a.userByTerm,t.next=14,r.cancelReview();case 14:e.$eventBus.$emit("deleteAnnotation",a),e.$eventBus.$emit("addAnnotation",r,!1),e.$eventBus.$emit("selectAnnotation",{index:e.index,annot:r}),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](7),e.$notify({type:"error",text:e.$t("notif-error-annotation-rejection")});case 22:case"end":return t.stop()}}),t,null,[[7,19]])})))()},refreshTracks:function(){this.$store.dispatch(this.viewerModule+"refreshTracks",{idImage:this.image.id})},takeScreenshot:function(){this.$emit("screenshot")},shortkeyHandler:function(e){if("toggle-all-current"===e||this.isActiveImage)switch(e){case"tool-select":return void(this.isToolDisplayed("select")&&this.activateTool("select"));case"tool-point":return void(this.isToolDisplayed("point")&&!this.disabledDraw&&this.activateTool("point"));case"tool-line":return void(this.isToolDisplayed("line")&&!this.disabledDraw&&this.activateTool("line"));case"tool-freehand-line":return void(this.isToolDisplayed("freehand-line")&&!this.disabledDraw&&this.activateTool("freehand-line"));case"tool-rectangle":return void(this.isToolDisplayed("rectangle")&&!this.disabledDraw&&this.activateTool("rectangle"));case"tool-circle":return void(this.isToolDisplayed("circle")&&!this.disabledDraw&&this.activateTool("circle"));case"tool-polygon":return void(this.isToolDisplayed("polygon")&&!this.disabledDraw&&this.activateTool("polygon"));case"tool-freehand-polygon":return void(this.isToolDisplayed("polygon")&&!this.disabledDraw&&this.activateTool("freehand-polygon"));case"tool-screenshot":return void(this.isToolDisplayed("screenshot")&&!this.disabledDraw&&this.takeScreenshot());case"tool-delete":return void(this.isToolDisplayed("delete")&&!this.disabledDraw&&this.confirmDeletion());case"tool-undo":return void(this.isToolDisplayed("undo-redo")&&this.undo());case"tool-redo":return void(this.isToolDisplayed("undo-redo")&&this.redo());case"tool-review-accept":return void(this.reviewMode&&this.isToolDisplayed("accept")&&this.accept());case"tool-review-reject":return void(this.reviewMode&&this.isToolDisplayed("reject")&&this.reject());case"tool-fill":return void(this.isToolDisplayed("fill")&&!this.isToolDisabled("fill")&&this.fill());case"tool-correct-add":return void(this.isToolDisplayed("union")&&!this.isToolDisabled("correct-add")&&this.activateEditTool("correct-add"));case"tool-correct-remove":return void(this.isToolDisplayed("diff")&&!this.isToolDisabled("correct-remove")&&this.activateEditTool("correct-remove"));case"tool-modify":return void(this.isToolDisplayed("edit")&&!this.isToolDisabled("edit")&&this.activateEditTool("modify"));case"tool-move":return void(this.isToolDisplayed("move")&&!this.isToolDisabled("move")&&this.activateEditTool("translate"));case"tool-rescale":return void(this.isToolDisplayed("resize")&&!this.isToolDisabled("resize")&&this.activateEditTool("rescale"));case"tool-rotate":return void(this.isToolDisplayed("rotate")&&!this.isToolDisabled("rotate")&&this.activateEditTool("rotate"));case"toggle-current":case"toggle-all-current":return void(this.configUI["project-explore-annotation-main"]&&this.selectedFeature&&(this.displayAnnotDetails=!this.displayAnnotDetails));case"tool-copy":return void(this.isToolDisplayed("copy-paste")&&!this.isToolDisabled("copy")&&this.copy());case"tool-paste":return void(this.isToolDisplayed("copy-paste")&&!this.disabledPaste&&this.paste())}}},mounted:function(){this.$eventBus.$on("shortkeyEvent",this.shortkeyHandler)},beforeDestroy:function(){this.$eventBus.$off("shortkeyEvent",this.shortkeyHandler)}},Al=Pl,Il=(n("1813"),n("0f64"),Object(C["a"])(Al,$l,Tl,!1,null,"04a5c87e",null)),Dl=Il.exports,El=function(){var e=this,t=e._self._c;return e.isImageMultidimensional?t("div",{staticClass:"image-controls-container"},[e.hasChannels?t("div",{staticClass:"image-dimension"},[t("strong",{staticClass:"image-dimension-name"},[e._v("C")]),e.areChannelsMergeable?[t("b-select",{staticClass:"channel-selector",attrs:{value:e.currentChannelsIndexesOption,size:"is-small",expanded:""},on:{input:e.setCurrentChannelsIndexes}},[t("option",{domProps:{value:null}},[e._v(" "+e._s(e.$t("merged-channels"))+" "),null===e.currentChannelsIndexesOption?[e._v(" ("+e._s(e.orderedCurrentChannels.length)+"/"+e._s(e.image.channels)+") ("),e._l(e.orderedCurrentChannels,(function(n,a){return t("span",{key:"".concat(e.image.id,"-").concat(n.index,"-name-list")},[t("channel-name",{attrs:{channel:n}}),a!==e.currentChannelsIndexes.length-1?[e._v("|")]:e._e()],2)})),e._v(") ")]:e._e()],2),e._l(e.channelOptions,(function(n){return t("option",{key:"".concat(e.image.id,"-").concat(n.value,"-opt"),domProps:{value:n.value}},[t("channel-name",{attrs:{channel:n}})],1)}))],2)]:[t("image-controls-shift-buttons",{attrs:{index:e.index,forward:!1,current:e.currentSlice.channel,size:e.image.channels,dimension:"channel"},on:{shift:function(t){return e.shift("channel",t)}}}),t("cytomine-slider",{staticClass:"image-dimension-slider",attrs:{max:e.image.channels-1,"integer-only":!0},scopedSlots:e._u([e.hasChannelName?{key:"default",fn:function(t){var n=t.value;return[e._v(" "+e._s(e.channelValue(n)||"?")+" ")]}}:null],null,!0),model:{value:e.currentChannelIndex,callback:function(t){e.currentChannelIndex=t},expression:"currentChannelIndex"}}),t("image-controls-shift-buttons",{attrs:{index:e.index,forward:!0,current:e.currentSlice.channel,size:e.image.channels,dimension:"channel"},on:{shift:function(t){return e.shift("channel",t)}}})]],2):e._e(),e.hasDepth?t("div",{staticClass:"image-dimension"},[t("strong",{staticClass:"image-dimension-name"},[e._v("Z")]),t("image-controls-shift-buttons",{attrs:{index:e.index,forward:!1,current:e.currentSlice.zStack,size:e.image.depth,dimension:"zStack"},on:{shift:function(t){return e.shift("zStack",t)}}}),t("cytomine-slider",{staticClass:"image-dimension-slider",attrs:{max:e.image.depth-1,"integer-only":!0},model:{value:e.currentZStackIndex,callback:function(t){e.currentZStackIndex=t},expression:"currentZStackIndex"}}),t("image-controls-shift-buttons",{attrs:{index:e.index,forward:!0,current:e.currentSlice.zStack,size:e.image.depth,dimension:"zStack"},on:{shift:function(t){return e.shift("zStack",t)}}})],1):e._e(),e.hasDuration?t("div",{staticClass:"image-dimension"},[t("strong",{staticClass:"image-dimension-name"},[e._v("T")]),t("image-controls-shift-buttons",{attrs:{index:e.index,forward:!1,current:e.currentSlice.time,size:e.image.duration,dimension:"time"},on:{shift:function(t){return e.shift("time",t)}}}),t("cytomine-slider",{staticClass:"image-dimension-slider",attrs:{max:e.image.duration-1,"integer-only":!0},scopedSlots:e._u([e.image.fps?{key:"default",fn:function(t){var n=t.value;return[e._v(" "+e._s(e.formatMinutesSeconds(n/e.image.fps))+" | "+e._s(n)+" ")]}}:null],null,!0),model:{value:e.currentTimeIndex,callback:function(t){e.currentTimeIndex=t},expression:"currentTimeIndex"}}),t("image-controls-shift-buttons",{attrs:{index:e.index,forward:!0,current:e.currentSlice.time,size:e.image.duration,dimension:"time"},on:{shift:function(t){return e.shift("time",t)}}})],1):e._e()]):e._e()},Nl=[],Ml=function(){var e=this,t=e._self._c;return t("div",{staticClass:"buttons has-addons",class:{"backward-buttons":!e.forward}},[t("button",{staticClass:"button is-small item",attrs:{disabled:!e.canShift},on:{click:function(t){return e.shiftOne()}}},[t("i",{staticClass:"fas",class:{"fa-step-forward":e.forward,"fa-step-backward":!e.forward}})]),t("v-popover",{attrs:{placement:e.selectorPlacement,trigger:"manual",open:e.opened,"auto-hide":!1,"popover-inner-class":"tooltip-inner popover-inner step-selector"},scopedSlots:e._u([{key:"popover",fn:function(){return[t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.stopEdition()},expression:"() => stopEdition()"},{name:"click-outside",rawName:"v-click-outside:contextmenu.capture",value:function(){return e.stopEdition()},expression:"() => stopEdition()",arg:"contextmenu",modifiers:{capture:!0}}],staticClass:"step-selector"},[t("b-input",{ref:"inputStepSelector",attrs:{placeholder:e.$t("step"),size:"is-small"},on:{"hook:mounted":function(t){return e.focus()},blur:function(t){return e.stopEdition()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.stopEdition()}},model:{value:e.editedValue,callback:function(t){e.editedValue=t},expression:"editedValue"}})],1)]},proxy:!0}])},[t("button",{staticClass:"button is-small item",attrs:{disabled:!e.canShift},on:{click:function(t){return e.shift()},contextmenu:function(t){return t.preventDefault(),e.startEdition()}}},[t("i",{staticClass:"fas",class:{"fa-fast-forward":e.forward,"fa-fast-backward":!e.forward}}),t("div",{staticClass:"step-counter"},[e.forward?[e._v("+")]:[e._v("-")],e._v(e._s(e.step)+" ")],2)])])],1)},Rl=[],Ul={name:"ImageControlsShiftButtons",props:{index:String,forward:Boolean,current:Number,size:Number,dimension:String},data:function(){return{opened:!1,editedValue:0}},computed:{imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},imageWrapper:function(){return this.viewerWrapper.images[this.index]},step:{get:function(){return this.imageWrapper.controls.step[this.dimension]},set:function(e){this.$store.commit(this.imageModule+"setStep",{dimension:this.dimension,value:Number(e)})}},canShift:function(){return this.forward?this.current<this.size-1:this.current>=1},shiftDirection:function(){return this.forward?1:-1},selectorPlacement:function(){return this.forward?"left":"right"}},methods:{shiftOne:function(){this.$emit("shift",this.shiftDirection)},shift:function(){var e=this.shiftDirection;e*=this.forward?Math.min(this.step,this.size-this.current-1):Math.min(this.step,this.current),this.$emit("shift",e)},startEdition:function(){this.editedValue=this.step,this.opened=!0},stopEdition:function(){this.opened=!1,this.editedValue&&!isNaN(this.editedValue)&&(this.step=parseInt(this.editedValue))},focus:function(){this.$refs.inputStepSelector.focus()}}},zl=Ul,Ll=(n("f46c"),n("0480"),Object(C["a"])(zl,Ml,Rl,!1,null,"5eb6685e",null)),Fl=Ll.exports,Bl=n("ed42"),ql={name:"image-controls",components:{ChannelName:Bl["a"],ImageControlsShiftButtons:Fl,CytomineSlider:ce},props:{index:String},computed:{viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},imageWrapper:function(){return this.viewerWrapper.images[this.index]},isActiveImage:function(){return this.viewerWrapper.activeImage===this.index},image:function(){return this.imageWrapper.imageInstance},channels:function(){return this.$store.getters[this.imageModule+"channels"]},currentSlices:function(){return this.imageWrapper.activeSlices},currentSlice:function(){return this.currentSlices[0]},nbSlices:function(){return this.image.depth*this.image.duration*this.image.channels},currentChannelIndex:{get:function(){return this.currentSlice.channel},set:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.seek([e],t.currentSlice.zStack,t.currentSlice.time);case 2:case"end":return n.stop()}}),n)})))()}},currentChannelsIndexes:{get:function(){return this.currentSlices.map((function(e){return e.channel}))},set:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.seek(e,t.currentSlice.zStack,t.currentSlice.time);case 2:case"end":return n.stop()}}),n)})))()}},currentZStackIndex:{get:function(){return this.currentSlice.zStack},set:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.seek(t.currentChannelsIndexes,e,t.currentSlice.time);case 2:case"end":return n.stop()}}),n)})))()}},currentTimeIndex:{get:function(){return this.currentSlice.time},set:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.seek(t.currentChannelsIndexes,t.currentSlice.zStack,e);case 2:case"end":return n.stop()}}),n)})))()}},hasChannels:function(){return this.image.channels>1},hasDepth:function(){return this.image.depth>1},hasDuration:function(){return this.image.duration>1},isImageMultidimensional:function(){return this.hasChannels||this.hasDuration||this.hasDepth},showMultiChannels:function(){return this.currentChannelsIndexes.length>1},sliceInstances:function(){return this.imageWrapper.sliceInstances},hasChannelName:function(){return null!==this.currentSlice.channelName},areChannelsMergeable:function(){return!0},channelOptions:function(){return this.channels.map((function(e){return Object(h["a"])({value:[e.index]},e)}))},orderedCurrentChannels:function(){var e=this;return Object(L["a"])(this.currentChannelsIndexes).sort((function(e,t){return e-t})).map((function(t){return e.channels.find((function(e){return e.index===t}))}))},currentChannelsIndexesOption:function(){return this.currentChannelsIndexes.length>1?null:this.currentChannelsIndexes}},methods:{setCurrentChannelsIndexes:function(e){if(null===e){var t=Math.min(I["a"].MAX_MERGEABLE_CHANNELS,this.image.channels);e=wt.a.range(0,t)}this.currentChannelsIndexes=e},formatMinutesSeconds:function(e){return Oa(e)},channelValue:function(e){if(this.channels.length===this.image.channels){var t=this.channels[e];return t?t.name:null}var n=$a({channel:e,zStack:this.currentZStackIndex,time:this.currentTimeIndex},this.image),a=this.sliceInstances[n];return a?a.channelName:null},goToRank:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch(t.imageModule+"setActiveSliceByRank",e);case 2:t.$eventBus.$emit("reloadAnnotations",{idImage:t.image.id});case 3:case"end":return n.stop()}}),n)})))()},seek:function(e,t,n){var a=this;return Object(c["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.$store.dispatch(a.imageModule+"setActiveSlicesByPosition",{channels:e,zStack:t,time:n});case 2:a.$eventBus.$emit("reloadAnnotations",{idImage:a.image.id});case 3:case"end":return r.stop()}}),r)})))()},shift:function(e,t){var n=this;return Object(c["a"])(Object(s["a"])().mark((function a(){var r,i,o;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r="time"===e?n.currentTimeIndex+t:n.currentTimeIndex,i="channel"===e?[n.currentChannelIndex+t]:n.currentChannelsIndexes,o="zStack"===e?n.currentZStackIndex+t:n.currentZStackIndex,a.next=5,n.seek(i,o,r);case 5:case"end":return a.stop()}}),a)})))()},canShiftForward:function(e){switch(e){case"channel":return this.currentSlice.channel<this.image.channels-1;case"time":return this.currentSlice.time<this.image.duration-1;case"zStack":return this.currentSlice.zStack<this.image.depth-1;case"rank":return this.currentSlice.rank<this.nbSlices-1}},canShiftBackward:function(e){switch(e){case"channel":return this.currentSlice.channel>=1;case"time":return this.currentSlice.time>=1;case"zStack":return this.currentSlice.zStack>=1;case"rank":return this.currentSlice.rank>=1}},shortkeyHandler:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.isActiveImage){n.next=2;break}return n.abrupt("return");case 2:n.t0=e,n.next="nav-next-t"===n.t0?5:"nav-previous-t"===n.t0?9:"nav-first-t"===n.t0?13:"nav-last-t"===n.t0?15:"nav-next-z"===n.t0?17:"nav-previous-z"===n.t0?19:"nav-first-z"===n.t0?21:"nav-last-z"===n.t0?23:"nav-next-c"===n.t0?25:"nav-previous-c"===n.t0?27:"nav-first-c"===n.t0?29:"nav-last-c"===n.t0?31:"nav-next-slice"===n.t0?33:"nav-previous-slice"===n.t0?37:"nav-first-slice"===n.t0?41:"nav-last-slice"===n.t0?44:47;break;case 5:if(!t.canShiftForward("time")){n.next=8;break}return n.next=8,t.shift("time",1);case 8:return n.abrupt("return");case 9:if(!t.canShiftBackward("time")){n.next=12;break}return n.next=12,t.shift("time",-1);case 12:return n.abrupt("return");case 13:return t.currentTimeIndex=0,n.abrupt("return");case 15:return t.currentTimeIndex=t.image.duration-1,n.abrupt("return");case 17:return t.canShiftForward("zStack")&&t.currentZStackIndex++,n.abrupt("return");case 19:return t.canShiftBackward("zStack")&&t.currentZStackIndex--,n.abrupt("return");case 21:return t.currentZStackIndex=0,n.abrupt("return");case 23:return t.currentZStackIndex=t.image.depth-1,n.abrupt("return");case 25:return!t.showMultiChannels&&t.canShiftForward("channel")&&t.currentChannelIndex++,n.abrupt("return");case 27:return!t.showMultiChannels&&t.canShiftBackward("channel")&&t.currentChannelIndex--,n.abrupt("return");case 29:return t.showMultiChannels||(t.currentChannelIndex=0),n.abrupt("return");case 31:return t.showMultiChannels||(t.currentChannelIndex=t.image.channels-1),n.abrupt("return");case 33:if(!t.canShiftForward("rank")){n.next=36;break}return n.next=36,t.goToRank(t.currentSlice.rank+1);case 36:return n.abrupt("return");case 37:if(!t.canShiftBackward("rank")){n.next=40;break}return n.next=40,t.goToRank(t.currentSlice.rank-1);case 40:return n.abrupt("return");case 41:return n.next=43,t.seek([0],0,0);case 43:return n.abrupt("return");case 44:return n.next=46,t.seek([t.image.channels-1],t.image.depth-1,t.image.duration-1);case 46:return n.abrupt("return");case 47:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.$eventBus.$on("shortkeyEvent",this.shortkeyHandler)},beforeDestroy:function(){this.$eventBus.$off("shortkeyEvent",this.shortkeyHandler)}},Vl=ql,Wl=(n("b495"),n("f407"),Object(C["a"])(Vl,El,Nl,!1,null,"ff293574",null)),Gl=Wl.exports,Hl=function(){var e=this,t=e._self._c;return t("div",[e.isPanelDisplayed("annotation-main")?t("annotation-details-container",{attrs:{index:e.index},on:{select:e.selectAnnotation,centerView:function(t){return e.centerView({annot:t,sameView:!0})},addTerm:e.addTerm,addTrack:e.addTrack,updateTermsOrTracks:e.updateTermsOrTracks,updateProperties:e.updateProperties,delete:e.handleDeletion}}):e._e()],1)},Jl=[],Kl=function(){var e=this,t=e._self._c;return t("div",{ref:"playground",staticClass:"annotation-details-playground"},[e.selectedFeature&&e.selectedFeature.properties&&e.reload?t("vue-draggable-resizable",{directives:[{name:"show",rawName:"v-show",value:e.displayAnnotDetails,expression:"displayAnnotDetails"}],ref:"detailsPanel",staticClass:"draggable",attrs:{parent:!0,resizable:!1,"drag-handle":".drag",w:e.width,h:"auto",x:e.positionAnnotDetails.x,y:e.positionAnnotDetails.y},on:{dragstop:e.dragStop}},[t("div",{staticClass:"actions"},[t("h1",[e._v(e._s(e.$t("current-selection")))]),t("button",{staticClass:"drag button is-small close"},[t("i",{staticClass:"fas fa-arrows-alt"})]),t("button",{staticClass:"button is-small close",on:{click:function(t){e.displayAnnotDetails=!1}}},[t("i",{staticClass:"fas fa-times"})])]),t("div",{staticClass:"annotation-details-container"},[t("annotation-details",{key:e.selectedFeature.id,attrs:{annotation:e.selectedFeature.properties.annot,terms:e.terms,images:[e.image],slices:e.slices,profiles:e.profiles,tracks:e.tracks,users:e.allUsers,showImageInfo:!1,showChannelInfo:e.showChannelInfo,showComments:e.showComments},on:{addTerm:function(t){return e.$emit("addTerm",t)},addTrack:function(t){return e.$emit("addTrack",t)},updateTerms:function(t){return e.$emit("updateTermsOrTracks",e.annot)},updateTracks:function(t){return e.$emit("updateTermsOrTracks",e.annot)},updateProperties:function(t){return e.$emit("updateProperties")},select:function(t){return e.$emit("select",t)},centerView:function(t){e.$emit("centerView",t||e.annot)},deletion:function(t){return e.$emit("delete",e.annot)}}})],1)]):e._e()],1)},Yl=[],Zl=n("fb19"),Xl=n.n(Zl),Ql=n("305f"),eu={name:"annotations-details-container",components:{VueDraggableResizable:Xl.a,AnnotationDetails:Ql["default"]},props:{index:String},data:function(){return{width:320,projectUsers:[],userJobs:[],reload:!0,showComments:!1}},computed:{viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},image:function(){return this.imageWrapper.imageInstance},slices:function(){return this.imageWrapper.activeSlices},showChannelInfo:function(){return this.imageWrapper.activeSlices&&this.imageWrapper.activeSlices.length>1},profiles:function(){return this.imageWrapper.profile?[this.imageWrapper.profile]:[]},displayAnnotDetails:{get:function(){return this.imageWrapper.selectedFeatures.displayAnnotDetails},set:function(e){this.$store.commit(this.imageModule+"setDisplayAnnotDetails",e)}},positionAnnotDetails:{get:function(){return this.imageWrapper.selectedFeatures.positionAnnotDetails},set:function(e){this.$store.commit(this.imageModule+"setPositionAnnotDetails",e)}},selectedFeature:function(){return this.$store.getters[this.imageModule+"selectedFeature"]},allUsers:function(){var e=this.projectUsers.concat(this.userJobs);return e.forEach((function(e){return e.fullName=Object(he["a"])(e)})),e},annot:function(){return this.selectedFeature?this.selectedFeature.properties.annot:{}},terms:function(){return this.$store.getters["currentProject/terms"]||[]},tracks:function(){return this.imageWrapper.tracks.tracks}},watch:{selectedFeature:function(){if(this.selectedFeature){this.displayAnnotDetails=!0;var e=this.imageWrapper.selectedFeatures.showComments;this.showComments=e===this.annot.id,null!==e&&this.$store.commit(this.imageModule+"setShowComments",null)}}},methods:{fetchUsers:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new p["UserCollection"]({filterKey:"project",filterValue:e.image.project.id}),t.next=3,n.fetchAll();case 3:e.projectUsers=t.sent.array;case 4:case"end":return t.stop()}}),t)})))()},fetchUserJobs:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["UserJobCollection"].fetchAll({filterKey:"project",filterValue:e.image.project});case 2:e.userJobs=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},dragStop:function(e,t){this.positionAnnotDetails={x:e,y:t}},handleResize:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r,i,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:e.$refs.playground&&(n=Math.max(e.$refs.playground.clientWidth-e.width,0),a=500,e.$refs.detailsPanel&&(a=e.$refs.detailsPanel.height),r=Math.max(e.$refs.playground.clientHeight-a,0),i=Math.min(e.positionAnnotDetails.x,n),o=Math.min(e.positionAnnotDetails.y,r),e.positionAnnotDetails={x:i,y:o},e.reload=!1,e.$nextTick((function(){return e.reload=!0})));case 3:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchUsers(),this.fetchUserJobs()},mounted:function(){window.addEventListener("resize",this.handleResize),this.$eventBus.$on("updateMapSize",this.handleResize)},destroyed:function(){window.removeEventListener("resize",this.handleResize),this.$eventBus.$off("updateMapSize",this.handleResize)}},tu=eu,nu=(n("36b7"),n("0abe"),Object(C["a"])(tu,Kl,Yl,!1,null,"0d23ef15",null)),au=nu.exports,ru={name:"AnnotationsContainer",props:{index:String},data:function(){return{format:new rl["a"]}},components:{AnnotationDetailsContainer:au},computed:{configUI:Object(l["a"])("currentProject/configUI"),viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},image:function(){return this.imageWrapper.imageInstance}},methods:{isPanelDisplayed:function(e){return this.configUI["project-explore-".concat(e)]},addTerm:function(e){this.$store.dispatch(this.viewerModule+"addTerm",e)},addTrack:function(e){this.$store.dispatch(this.viewerModule+"refreshTracks",{idImage:e.image})},updateTermsOrTracks:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.clone().fetch();case 2:return a=n.sent,n.next=5,ol(a);case 5:return n.next=7,cl(a);case 7:t.$eventBus.$emit("editAnnotation",a),t.$store.commit(t.imageModule+"changeAnnotSelectedFeature",{indexFeature:0,annot:a});case 9:case"end":return n.stop()}}),n)})))()},updateProperties:function(){this.$store.dispatch(this.imageModule+"refreshProperties",this.index)},handleDeletion:function(e){this.$store.commit(this.imageModule+"addAction",{annot:e,type:il.DELETE}),this.$eventBus.$emit("deleteAnnotation",e)},selectAnnotation:function(e){var t=e.annot,n=e.options,a=n.trySameView?this.index:null;this.$eventBus.$emit("selectAnnotation",{index:a,annot:t,center:!0})},centerView:function(e){var t=e.annot,n=e.sameView,a=void 0!==n&&n;a?this.$emit("centerView",t):this.$eventBus.$emit("selectAnnotation",{index:null,annot:t,center:!0})}}},iu=ru,ou=Object(C["a"])(iu,Hl,Jl,!1,null,"0c9628f6",null),su=ou.exports,cu=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v(" "+e._s(e.$t("information"))+" ")]),t("table",{staticClass:"table"},[t("tbody",[e.currentUser.isDeveloper?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("id")))])]),t("td",[e._v(e._s(e.image.id))])]):e._e(),t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("name")))])]),t("td",[t("image-name",{attrs:{image:e.image,showBothNames:""}})],1)]),t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("width")))])]),t("td",[e._v(e._s(e.image.width)+" "+e._s(e.$t("pixels")))])]),t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("height")))])]),t("td",[e._v(e._s(e.image.height)+" "+e._s(e.$t("pixels")))])]),e.image.depth>1?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("image-depth")))])]),t("td",[e._v(e._s(e.$tc("count-slices",e.image.depth,{count:e.image.depth})))])]):e._e(),e.image.duration>1?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("image-time")))])]),t("td",[e._v(e._s(e.$tc("count-frames",e.image.duration,{count:e.image.duration})))])]):e._e(),e.image.channels>1?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("image-channels")))])]),t("td",[e._v(" "+e._s(e.$tc("count-bands",e.image.apparentChannels,{count:e.image.apparentChannels}))+" ("+e._s(e.image.channels)+" x "+e._s(e.image.samplePerPixel)+") ")])]):e._e(),t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("resolution")))])]),e.image.physicalSizeX?t("td",[e._v(e._s(e.image.physicalSizeX.toFixed(3))+" "+e._s(e.$t("um-per-pixel")))]):t("td",[e._v(e._s(e.$t("unknown")))])]),e.image.depth>1?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("z-resolution")))])]),e.image.physicalSizeZ?t("td",[e._v(e._s(e.image.physicalSizeZ.toFixed(3))+" "+e._s(e.$t("um-per-slice")))]):t("td",[e._v(e._s(e.$t("unknown")))])]):e._e(),e.image.duration>1?t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("frame-rate")))])]),e.image.fps?t("td",[e._v(e._s(e.image.fps.toFixed(3))+" "+e._s(e.$t("frame-per-second")))]):t("td",[e._v(e._s(e.$t("unknown")))])]):e._e(),t("tr",[t("td",[t("strong",[e._v(e._s(e.$t("magnification")))])]),e.image.magnification?t("td",[e._v(e._s(e.image.magnification))]):t("td",[e._v(e._s(e.$t("unknown")))])]),t("tr",[t("td",{staticClass:"buttons-wrapper",attrs:{colspan:"2"}},[t("div",{staticClass:"buttons"},[e.canEdit?t("button",{staticClass:"button is-small",on:{click:function(t){e.calibrationModal=!0}}},[e._v(" "+e._s(e.$t("button-set-calibration"))+" ")]):e._e(),t("router-link",{staticClass:"button is-small",attrs:{to:"/project/".concat(e.image.project,"/image/").concat(e.image.id,"/information")}},[e._v(" "+e._s(e.$t("button-more-info"))+" ")]),e.canDownloadImages?t("a",{staticClass:"button is-small",on:{click:function(t){return e.download(e.image,e.shortTermToken)}}},[e._v(" "+e._s(e.$t("button-download"))+" ")]):e._e()],1)])]),t("tr",[t("td",{staticClass:"buttons-wrapper",attrs:{colspan:"2"}},[t("div",{staticClass:"buttons navigation has-addons"},[t("button",{staticClass:"button is-small",attrs:{disabled:e.isFirstImage},on:{click:function(t){return e.previousImage()}}},[t("i",{staticClass:"fas fa-angle-left fa-lg"}),e._v(" "+e._s(e.$t("button-previous-image"))+" ")]),t("button",{staticClass:"button is-small",attrs:{disabled:e.isLastImage},on:{click:function(t){return e.nextImage()}}},[e._v(" "+e._s(e.$t("button-next-image"))+" "),t("i",{staticClass:"fas fa-angle-right fa-lg"})])])])])])]),t("calibration-modal",{attrs:{image:e.image,active:e.calibrationModal},on:{"update:active":function(t){e.calibrationModal=t},setResolution:e.setResolution}})],1)},lu=[],uu={name:"information-panel",components:{ImageName:Qn["a"],CalibrationModal:ma},props:{index:String},data:function(){return{calibrationModal:!1,isFirstImage:!1,isLastImage:!1}},computed:{currentUser:Object(l["a"])("currentUser/user"),shortTermToken:Object(l["a"])("currentUser/shortTermToken"),viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},image:function(){return this.viewerWrapper.images[this.index].imageInstance},canEdit:function(){return this.$store.getters["currentProject/canEditImage"](this.image)},canDownloadImages:function(){return null!==this.image.path&&(this.canManageProject||(this.$store.state.currentProject.project||{}).areImagesDownloadable||!1)},canManageProject:function(){return this.$store.getters["currentProject/canManageProject"]},isActiveImage:function(){return this.viewerWrapper.activeImage===this.index}},methods:{appendShortTermToken:k["a"],setResolution:function(e){this.$store.dispatch(this.viewerModule+"setImageResolution",{idImage:this.image.id,resolution:e}),this.$eventBus.$emit("reloadAnnotations",{idImage:this.image.id})},download:function(e){window.location.assign(Object(k["a"])(e.downloadURL,this.shortTermToken))},previousImage:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.image.fetchPrevious();case 3:if(n=t.sent,n.id){t.next=9;break}e.$notify({type:"error",text:e.$t("notif-error-first-image")}),e.isFirstImage=!0,t.next=14;break;case 9:return t.next=11,n.fetchReferenceSlice();case 11:return a=t.sent,t.next=14,e.$store.dispatch(e.imageModule+"setImageInstance",{image:n,slices:[a]});case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-fetch-previous-image")});case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()},nextImage:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.image.fetchNext();case 3:if(n=t.sent,n.id){t.next=9;break}e.$notify({type:"error",text:e.$t("notif-error-last-image")}),e.isLastImage=!0,t.next=14;break;case 9:return t.next=11,n.fetchReferenceSlice();case 11:return a=t.sent,t.next=14,e.$store.dispatch(e.imageModule+"setImageInstance",{image:n,slices:[a]});case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-fetch-next-image")});case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()},shortkeyHandler:function(e){this.isActiveImage&&("nav-next-image"===e?this.nextImage():"nav-previous-image"===e&&this.previousImage())}},mounted:function(){this.$eventBus.$on("shortkeyEvent",this.shortkeyHandler)},beforeDestroy:function(){this.$eventBus.$off("shortkeyEvent",this.shortkeyHandler)}},du=uu,pu=(n("86cf"),Object(C["a"])(du,cu,lu,!1,null,"c76e9400",null)),mu=pu.exports,fu=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v(e._s(e.$t("digital-zoom")))]),t("b-checkbox",{model:{value:e.digitalZoom,callback:function(t){e.digitalZoom=t},expression:"digitalZoom"}},[e._v(" "+e._s(e.$t("digital-zoom-checkbox-label"))+" ")]),t("div",{staticClass:"actions level"},[t("button",{staticClass:"button is-small level-item",on:{click:function(t){return e.$emit("fitZoom")}}},[e._v(" "+e._s(e.$t("button-best-fit-zoom"))+" ")]),t("button",{staticClass:"button is-small level-item",on:{click:function(t){return e.$emit("resetZoom")}}},[e._v(" "+e._s(e.$t("button-reset-zoom"))+" ")])])],1)},hu=[],gu={name:"digital-zoom",props:{index:String},computed:{imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},digitalZoom:{get:function(){return this.imageWrapper.view.digitalZoom},set:function(e){this.$store.commit(this.imageModule+"setDigitalZoom",Boolean(e))}}}},vu=gu,bu=(n("be2b"),Object(C["a"])(vu,fu,hu,!1,null,"319faf68",null)),yu=bu.exports,wu=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v(e._s(e.$t("colors")))]),e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small",size:"is-small"}},[t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[t("table",{staticClass:"table"},[t("thead",[t("tr",[t("th",{staticClass:"checkbox-column"},[t("span",{staticClass:"far fa-eye"})]),t("th",{staticClass:"name-column"},[t("b-input",{attrs:{placeholder:e.$t("search-placeholder"),size:"is-small",expanded:""},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),t("th",{staticClass:"bounds-column"},[t("div",{staticClass:"buttons has-addons is-right"},[e.isImageMultidimensional?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("button-adjust-slice"),expression:"$t('button-adjust-slice')"}],staticClass:"button is-small",attrs:{disabled:e.areBoundsAdjustedToSlice},on:{click:e.adjustAllToSlice}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-magic"}),t("span",{staticClass:"subscript"},[e._v("ZT")])])]):e._e(),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.adjustImageLabel,expression:"adjustImageLabel"}],staticClass:"button is-small",attrs:{disabled:e.areBoundsAdjustedToImage},on:{click:e.adjustAllToImage}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-magic"})])]),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("button-reset"),expression:"$t('button-reset')"}],staticClass:"button is-small",attrs:{disabled:e.areBoundsDefault},on:{click:e.resetAll}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-tint-slash"})])])])]),t("th",{staticClass:"settings-column"},[t("b-dropdown",{attrs:{position:"is-bottom-left"},scopedSlots:e._u([{key:"trigger",fn:function(e){var n=e.active;return[t("button",{staticClass:"button is-small",class:{"is-selected":n}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-cogs"})])])]}}])},[t("b-dropdown-item",{attrs:{custom:""}},[t("b-field",{attrs:{label:e.$t("histogram-scale"),"custom-class":"is-small"}},[t("div",{staticClass:"block"},[t("b-radio",{attrs:{"native-value":!1,size:"is-small"},model:{value:e.histogramLogScale,callback:function(t){e.histogramLogScale=t},expression:"histogramLogScale"}},[e._v(" "+e._s(e.$t("linear"))+" ")]),t("b-radio",{attrs:{"native-value":!0,size:"is-small"},model:{value:e.histogramLogScale,callback:function(t){e.histogramLogScale=t},expression:"histogramLogScale"}},[e._v(" "+e._s(e.$t("logarithmic"))+" ")])],1)]),t("b-field",{attrs:{label:e.$t("intensities-manipulation"),"custom-class":"is-small"}},[t("div",{staticClass:"block"},[t("b-radio",{attrs:{"native-value":!0,size:"is-small"},model:{value:e.intensitiesByMinMax,callback:function(t){e.intensitiesByMinMax=t},expression:"intensitiesByMinMax"}},[e._v(" "+e._s(e.$t("min-max"))+" ")]),t("b-radio",{attrs:{"native-value":!1,size:"is-small"},model:{value:e.intensitiesByMinMax,callback:function(t){e.intensitiesByMinMax=t},expression:"intensitiesByMinMax"}},[e._v(" "+e._s(e.$t("brightness"))+"/"+e._s(e.$t("contrast"))+" ")])],1)])],1)],1)],1)])]),t("tbody",[e._l(e.filteredManipulableChannels,(function(n){return[t("tr",{key:"channel-".concat(e.image.id,"-").concat(n.index)},[t("td",{staticClass:"checkbox-column"},[t("b-checkbox",{attrs:{size:"is-small",value:n.visible,disabled:e.isApparentChannelVisibilityDisabled(n)},on:{input:function(t){return e.setApparentChannelVisibility(n.index,t)}}})],1),t("td",{staticClass:"name-column"},[t("cytomine-channel",{attrs:{name:n.name,color:n.color,"default-color":n.defaultColor,"channel-index":n.channel,"sample-index":n.sample,"nb-samples-per-channel":e.image.samplePerPixel,"editable-color":!0},on:{setColor:function(t){return e.setApparentChannelColor(n.index,t)},click:function(t){return e.toggleLookUpTableDetails(n.index)}}})],1),t("td",{staticClass:"bounds-column"},[e._v(" ("+e._s(n.bounds.min)+" - "+e._s(n.bounds.max)+") ")]),t("td",{staticClass:"checkbox-column"},[t("a",{attrs:{role:"button"},on:{click:function(t){return t.stopPropagation(),e.toggleLookUpTableDetails(n.index)}}},[e.isVisibleLookUpTableDetails(n.index)?t("i",{staticClass:"fas fa-chevron-down"}):t("i",{staticClass:"fas fa-chevron-up"})])])]),e.isVisibleLookUpTableDetails(n.index)?t("tr",{key:"channel-".concat(e.image.id,"-").concat(n.index,"-details")},[t("td",{attrs:{colspan:"4"}},[t("div",{staticClass:"chart-container channel-histogram"},[t("histogram-chart",{attrs:{"log-scale":e.histogramLogScale,color:n.color,histogram:n.histogram.histogram,"n-bins":n.histogram.nBins,"first-bin":n.histogram.firstBin,"last-bin":n.histogram.lastBin,"default-bounds":e.defaultBounds,"image-bounds":{min:n.histogram.minimum,max:n.histogram.maximum},"current-bounds":n.bounds,gamma:n.gamma,inverted:n.inverted,"css-classes":"chart"}})],1),t("adjustable-look-up-table",{attrs:{index:e.index,"adjust-image-label":e.adjustImageLabel,"show-adjust-buttons":e.manipulableChannels.length>1,"intensities-by-min-max":e.intensitiesByMinMax,"default-bounds":e.defaultBounds,gamma:n.gamma,inverted:n.inverted,bounds:n.bounds,"image-bounds":n.imageBounds,"slice-bounds":{min:n.histogram.minimum,max:n.histogram.maximum}},on:{setBounds:function(t){return e.setApparentChannelBounds(n.index,t)},adjustToImage:function(t){return e.adjustToImage(n.index)},adjustToSlice:function(t){return e.adjustToSlice(n.index)},reset:function(t){return e.reset(n.index)},setGamma:function(t){return e.setApparentChannelGamma(n.index,t)},invert:function(t){return e.setApparentChannelInverted(n.index,t)}}})],1)]):e._e()]}))],2)]),e.filters&&e.filters.length>0?t("b-field",{attrs:{horizontal:"",label:e.$t("filter")}},[t("b-select",{attrs:{size:"is-small",expanded:""},model:{value:e.selectedFilter,callback:function(t){e.selectedFilter=t},expression:"selectedFilter"}},[t("option",{domProps:{value:null}},[e._v(e._s(e.$t("original-no-filter")))]),e._l(e.filters,(function(n){return t("option",{key:n.id,domProps:{value:n.method}},[e._v(" "+e._s(n.name)+" ")])}))],2)],1):e._e()]],2)},ju=[];function ku(e,t){return e.min===t.min&&e.max===t.max}var _u=function(){var e=this,t=e._self._c;return t("div",[t("v-popover",{attrs:{placement:"right","popover-inner-class":"color-selector",open:e.showColorSelector,delay:0},on:{"update:open":function(t){e.showColorSelector=t}},scopedSlots:e._u([e.showColorSelector?{key:"popover",fn:function(){return[t("sketch-picker",{attrs:{value:e.formattedColor,presetColors:e.presetColors,"disable-alpha":!0},on:{input:e.setColor}})]},proxy:!0}:null],null,!0)},[t("div",{staticClass:"color-preview",class:{"is-selected":e.showColorSelector,"is-clickable":e.editableColor},style:{background:e.formattedColor},on:{click:e.openColorSelector}})]),t("a",{attrs:{role:"button"},on:{click:function(t){return t.stopPropagation(),e.$emit("click")}}},[e._v(" "+e._s(e.formattedName)+" ")])],1)},xu=[],Cu=n("c345"),Ou={name:"cytomine-channel",components:{"sketch-picker":Cu["Sketch"]},props:{name:String,color:String,defaultColor:String,channelIndex:Number,sampleIndex:Number,nbSamplesPerChannel:{type:Number,default:1},editableColor:{type:Boolean,default:!1}},data:function(){return{showColorSelector:!1}},computed:{rgbColors:function(){return[this.$t("red"),this.$t("green"),this.$t("blue")]},formattedName:function(){var e=this.name;return null===e&&(e="".concat(this.$t("channel-abbr")," ").concat(this.channelIndex+1)),3===this.nbSamplesPerChannel&&(e+=" (".concat(this.rgbColors[this.sampleIndex],")")),e},formattedColor:function(){return null===this.color?"#ffffff":this.color},presetColors:function(){var e=null===this.defaultColor?"#ffffff":this.defaultColor;return[e,"#FF0000","#00FF00","#0000FF","#00FFFF","#FFFF00","#FF00FF","#FFF"]}},methods:{openColorSelector:function(){this.editableColor&&(this.showColorSelector=!this.showColorSelector)},setColor:wt.a.debounce((function(e){this.$emit("setColor",e.hex)}),500,{leading:!0})}},$u=Ou,Tu=(n("f1d1"),n("8e9a"),Object(C["a"])($u,_u,xu,!1,null,"23cfb05c",null)),Su=Tu.exports,Pu=function(){var e=this,t=e._self._c;return t("div",[e.showAdjustButtons?t("div",{staticClass:"buttons has-addons is-centered"},[e.isImageMultidimensional?t("button",{staticClass:"button is-small",attrs:{disabled:e.areBoundsAdjustedToSlice},on:{click:function(t){return e.$emit("adjustToSlice")}}},[t("span",[e._v(" "+e._s(e.$t("button-adjust-slice"))+" ")])]):e._e(),t("button",{staticClass:"button is-small",attrs:{disabled:e.areBoundsAdjustedToImage},on:{click:function(t){return e.$emit("adjustToImage")}}},[t("span",[e._v(" "+e._s(e.adjustImageLabel)+" ")])]),t("button",{staticClass:"button is-small",attrs:{disabled:e.areBoundsDefault},on:{click:function(t){return e.$emit("reset")}}},[t("span",[e._v(" "+e._s(e.$t("button-reset"))+" ")])])]):e._e(),t("div",{staticClass:"adjustments"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.intensitiesByMinMax,expression:"intensitiesByMinMax"}],staticClass:"adjustment"},[t("div",{staticClass:"adjustment-label"},[e._v(" "+e._s(e.$t("min-max"))+" ")]),t("cytomine-slider",{staticClass:"adjustment-body",attrs:{value:e.arrayBounds,min:e.defaultBounds.min,max:e.defaultBounds.max,contained:!0,"smart-tooltip-position":!0,size:"is-small"},on:{input:e.setBounds}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.intensitiesByMinMax,expression:"!intensitiesByMinMax"}],staticClass:"adjustment"},[t("div",{staticClass:"adjustment-label"},[e._v(" "+e._s(e.$t("brightness"))+" ")]),t("cytomine-slider",{staticClass:"adjustment-body",attrs:{value:e.brightness,min:e.defaultBounds.min,max:e.defaultBounds.max,tooltip:!1,contained:!0,size:"is-small"},on:{input:e.setBrightness}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.intensitiesByMinMax,expression:"!intensitiesByMinMax"}],staticClass:"adjustment"},[t("div",{staticClass:"adjustment-label"},[e._v(" "+e._s(e.$t("contrast"))+" ")]),t("cytomine-slider",{staticClass:"adjustment-body",attrs:{value:e.contrast,min:e.defaultBounds.min,max:e.defaultBounds.max,tooltip:!1,contained:!0,size:"is-small"},on:{input:e.setContrast}})],1),t("div",{staticClass:"adjustment"},[t("div",{staticClass:"adjustment-label"},[e._v(" "+e._s(e.$t("gamma"))+" ")]),t("cytomine-slider",{staticClass:"adjustment-body",attrs:{value:e.gamma,min:.1,max:4,interval:.1,"integer-only":!1,contained:!0,"smart-tooltip-position":!0,size:"is-small"},on:{input:function(t){return e.$emit("setGamma",t)}}})],1),t("div",{staticClass:"adjustment"},[t("div",{staticClass:"adjustment-label"},[e._v(" "+e._s(e.$t("inverse"))+" ")]),t("div",{staticClass:"adjustment-body"},[t("b-switch",{attrs:{value:e.inverted,size:"is-small"},on:{input:function(t){return e.$emit("invert",t)}}},[e.inverted?[e._v(e._s(e.$t("yes")))]:[e._v(e._s(e.$t("no")))]],2)],1)])])])},Au=[],Iu={name:"AdjustableLookUpTable",components:{CytomineSlider:ce},props:{index:String,adjustImageLabel:String,showAdjustButtons:Boolean,intensitiesByMinMax:Boolean,defaultBounds:Object,gamma:Number,inverted:Boolean,bounds:Object,imageBounds:Object,sliceBounds:Object},data:function(){return{brightness:0,contrast:0}},computed:{imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},image:function(){return this.imageWrapper.imageInstance},isImageMultidimensional:function(){return this.image.depth*this.image.duration>1},defaultRange:function(){return this.defaultBounds.max-this.defaultBounds.min},defaultCenter:function(){return this.defaultRange/2},range:function(){return this.bounds.max-this.bounds.min},center:function(){return this.bounds.min+this.range/2},arrayBounds:function(){return[this.bounds.min,this.bounds.max]},areBoundsAdjustedToImage:function(){return ku(this.bounds,this.imageBounds)},areBoundsAdjustedToSlice:function(){return ku(this.bounds,this.sliceBounds)},areBoundsDefault:function(){return ku(this.bounds,this.defaultBounds)&&1===this.gamma&&!this.inverted}},watch:{bounds:{deep:!0,handler:function(){this.computeBrightness(),this.computeContrast()}}},methods:{setBounds:function(e){var t,n,a=e[0],r=e[1],i=a>r;i?(t=r,n=a):(t=a,n=r),t=Math.max(this.defaultBounds.min,Math.min(t,this.defaultBounds.max)),n=Math.min(this.defaultBounds.max,Math.max(n,this.defaultBounds.min)),this.$emit("setBounds",{min:t,max:n})},setBrightness:function(e){var t=this.defaultBounds.min+this.defaultRange*((this.defaultRange-e)/this.defaultRange),n=this.range/2;this.$emit("setBounds",{min:Math.max(this.defaultBounds.min,Math.round(t-n)),max:Math.min(this.defaultBounds.max,Math.round(t+n))}),this.brightness=e},setContrast:function(e){var t;if(t=e<=this.defaultCenter?e/this.defaultCenter:this.defaultCenter/(this.defaultRange-e),t>0){var n=this.defaultRange/2;this.$emit("setBounds",{min:Math.max(this.defaultBounds.min,Math.round(this.center-n/t)),max:Math.min(this.defaultBounds.max,Math.round(this.center+n/t))}),this.contrast=e}},computeBrightness:function(){this.brightness=Math.round(this.defaultRange*(1-(this.center-this.defaultBounds.min)/this.defaultRange))},computeContrast:function(){var e=this.defaultRange/this.range;this.contrast=Math.round(e>0?this.defaultRange-this.defaultCenter/e:this.defaultCenter*e)}},created:function(){this.computeBrightness(),this.computeContrast()}},Du=Iu,Eu=(n("7061"),Object(C["a"])(Du,Pu,Au,!1,null,"8590653c",null)),Nu=Eu.exports,Mu={name:"histogram-chart",extends:Ui["c"],props:{logScale:Boolean,color:String,histogram:Array,nBins:Number,firstBin:Number,lastBin:Number,defaultBounds:Object,imageBounds:Object,currentBounds:Object,gamma:Number,inverted:Boolean},data:function(){return{chartData:null}},computed:{extendedHistogram:function(){var e=new Array(this.firstBin).fill(0),t=new Array(this.nBins-this.lastBin-1).fill(0);return e.concat(this.histogram).concat(t)},logHistogram:function(){return this.extendedHistogram.map((function(e){return Math.log(e)}))},scaledHistogram:function(){return this.logScale?this.logHistogram:this.extendedHistogram},binSize:function(){return(this.defaultBounds.max+1)/this.nBins},integerBinSize:function(){return Math.round(this.binSize)},labels:function(){var e=this;return this.extendedHistogram.map((function(t,n){return Math.round(n*e.binSize)}))},imageBoundsLabel:function(){return{min:this.findLabel(this.imageBounds.min),max:this.findLabel(this.imageBounds.max)}},currentBoundsLabel:function(){return{min:Math.max(this.defaultBounds.min,this.findLabel(this.currentBounds.min)),max:Math.min(this.defaultBounds.max,this.findLabel(this.currentBounds.max))}},boundsLabel:function(){return{min:Math.min(this.imageBoundsLabel.min,this.currentBoundsLabel.min),max:Math.max(this.imageBoundsLabel.max,this.currentBoundsLabel.max)}},currentLabels:function(){var e=this;return this.labels.filter((function(t){return t>=e.currentBoundsLabel.min&&t<=e.currentBoundsLabel.max}))},systemResponse:function(){var e=this;if(1===this.currentLabels.length)return[{x:this.currentLabels[0],y:0},{x:this.currentLabels[0],y:255}];var t=100,n=(this.currentLabels.length-1)/t,a=wt.a.range(0,this.currentLabels.length-1+n,n),r=this.inverted?1:0,i=this.inverted?0:1,o=(r-i)/(this.currentBoundsLabel.min-this.currentBoundsLabel.max),s=r-o*this.currentBoundsLabel.min,c=this.inverted?1/this.gamma:this.gamma,l=a.map((function(t){var n=e.currentLabels[Math.round(t)];return{x:n,y:255*Math.pow(o*n+s,c)}}));return wt.a.uniqBy(l,"x")},backgroundColor:function(){return null!==this.color?this.color:"#fff"},datasets:function(){return[{data:this.systemResponse,fill:!1,pointRadius:0,pointHoverRadius:0,borderColor:"#333",borderWidth:1,type:"line",order:2,cubicInterpolationMode:"monotone",yAxisID:"yResponse"},{data:this.scaledHistogram,backgroundColor:this.backgroundColor,pointRadius:1,order:1,yAxisID:"yHistogram"}]}},watch:{currentBoundsLabel:function(){this.doRenderChart()},logScale:function(){this.doRenderChart()},systemResponse:function(){this.doRenderChart()},backgroundColor:function(){this.doRenderChart()}},methods:{findBin:function(e){return Math.floor(e/this.binSize)},findLabel:function(e){return Math.floor(this.findBin(e)*this.binSize)},doRenderChart:function(){try{this.renderChart({labels:this.labels,datasets:this.datasets,logScale:this.logScale,binSize:this.integerBinSize},{tooltips:{filter:function(e){return 0!==e.datasetIndex},callbacks:{label:function(e,t){return t.logScale?Math.round(Math.exp(e.value)):e.value},title:function(e,t){if(e.length>0){var n=Number(e[0].label);if(1===t.binSize)return n;var a=n+t.binSize;return"[".concat(n," - ").concat(a,"[")}}}},maintainAspectRatio:!1,responsive:!0,title:{display:!1},legend:{display:!1},animation:{duration:0},scales:{xAxes:[{display:!0,scaleLabel:{display:!1},ticks:Object(h["a"])(Object(h["a"])({},this.boundsLabel),{},{fontSize:10})}],yAxes:[{id:"yHistogram",display:!1},{id:"yResponse",display:!1}]}})}catch(e){this.$emit("error",!0)}}},mounted:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.doRenderChart();case 1:case"end":return t.stop()}}),t)})))()}},Ru={name:"color-manipulation",components:{AdjustableLookUpTable:Nu,CytomineChannel:Su,HistogramChart:Mu},props:{index:String},data:function(){return{filters:null,histograms:[],loading:!1,error:!1,searchString:"",visibleLookUpTableDetails:[]}},computed:{project:Object(l["a"])("currentProject/project"),imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},image:function(){return this.imageWrapper.imageInstance},slices:function(){return this.imageWrapper.activeSlices},sliceChannels:function(){return this.$store.getters[this.imageModule+"channels"]},plane:function(){return{zStack:this.imageWrapper.activeSlices[0].zStack,time:this.imageWrapper.activeSlices[0].time}},activePanel:function(){return this.imageWrapper.activePanel},apparentChannels:function(){return this.imageWrapper.colors.apparentChannels},isImageMultidimensional:function(){return this.image.depth*this.image.duration>1},adjustImageLabel:function(){return this.isImageMultidimensional?this.$t("button-adjust-image"):this.$t("button-adjust")},defaultBounds:function(){return{min:0,max:Math.pow(2,this.image.bitPerSample)-1}},manipulableChannels:function(){var e,t=this;return null===(e=this.apparentChannels)||void 0===e?void 0:e.map((function(e){return Object(h["a"])(Object(h["a"])({},e),{},{histogram:t.histograms.find((function(t){return t.apparentChannel===e.index})),name:t.sliceChannels[e.channel].name})}))},visibleManipulableChannels:function(){var e;return null===(e=this.manipulableChannels)||void 0===e?void 0:e.filter((function(e){return e.visible}))},nbVisibleManipulableChannels:function(){var e,t;return null!==(e=null===(t=this.visibleManipulableChannels)||void 0===t?void 0:t.length)&&void 0!==e?e:0},regexp:function(){return Object(Kt["a"])(this.searchString)},filteredManipulableChannels:function(){var e=this;return this.searchString?this.manipulableChannels.filter((function(t){return e.regexp.test(t.name)})):this.manipulableChannels},areBoundsAdjustedToImage:function(){var e,t,n=null!==(e=null===(t=this.visibleManipulableChannels)||void 0===t?void 0:t.filter((function(e){return ku(e.bounds,e.imageBounds)})).length)&&void 0!==e?e:0;return n===this.nbVisibleManipulableChannels},areBoundsAdjustedToSlice:function(){var e,t,n=null!==(e=null===(t=this.visibleManipulableChannels)||void 0===t?void 0:t.filter((function(e){var t=e.histogram;return!!t&&ku(e.bounds,{min:t.minimum,max:t.maximum})})).length)&&void 0!==e?e:0;return n===this.nbVisibleManipulableChannels},areBoundsDefault:function(){var e,t,n=this,a=null!==(e=null===(t=this.visibleManipulableChannels)||void 0===t?void 0:t.filter((function(e){return ku(e.bounds,n.defaultBounds)&&!e.inverted&&1===e.gamma})).length)&&void 0!==e?e:0;return a===this.nbVisibleManipulableChannels},selectedFilter:{get:function(){return this.imageWrapper.colors.filter},set:function(e){this.$store.commit(this.imageModule+"setFilter",e)}},histogramLogScale:{get:function(){return this.imageWrapper.colors.histogramLogScale},set:function(e){this.$store.commit(this.imageModule+"setHistogramLogScale",e)}},intensitiesByMinMax:{get:function(){return this.imageWrapper.colors.intensitiesByMinMax},set:function(e){this.$store.commit(this.imageModule+"setIntensitiesByMinMax",e)}}},watch:{plane:function(){this.fetchHistograms()}},methods:{setApparentChannelVisibility:function(e,t){this.$store.dispatch(this.imageModule+"setApparentChannelVisibility",{indexApparentChannel:e,visible:t})},setApparentChannelColor:function(e,t){this.$store.commit(this.imageModule+"setApparentChannelColor",{indexApparentChannel:e,color:t,isColormap:!1})},setApparentChannelGamma:function(e,t){this.$store.commit(this.imageModule+"setApparentChannelGamma",{indexApparentChannel:e,gamma:t})},setApparentChannelInverted:function(e,t){this.$store.commit(this.imageModule+"setApparentChannelInverted",{indexApparentChannel:e,inverted:t})},setApparentChannelBounds:function(e,t){this.$store.commit(this.imageModule+"setApparentChannelBounds",{indexApparentChannel:e,bounds:t})},reset:function(e){this.$store.commit(this.imageModule+"resetApparentChannelIntensities",e)},resetAll:function(){this.$store.commit(this.imageModule+"resetApparentChannelsIntensities")},adjustToImage:function(e){this.$store.commit(this.imageModule+"adjustToImage",e)},adjustAllToImage:function(){this.$store.commit(this.imageModule+"adjustAllToImage")},adjustToSlice:function(e){var t=this.manipulableChannels[e],n={min:t.histogram.minimum,max:t.histogram.maximum};this.$store.commit(this.imageModule+"adjustToSlice",{indexApparentChannel:e,bounds:n})},adjustAllToSlice:function(){this.$store.commit(this.imageModule+"adjustAllToSlice",this.manipulableChannels.map((function(e){return{min:e.histogram.minimum,max:e.histogram.maximum}})))},isApparentChannelVisibilityDisabled:function(e){return this.nbVisibleManipulableChannels<=1&&e.visible||this.nbVisibleManipulableChannels>=I["a"].MAX_MERGEABLE_CHANNELS&&!e.visible},toggleLookUpTableDetails:function(e){var t=this.isVisibleLookUpTableDetails(e);if(t){var n=this.visibleLookUpTableDetails.indexOf(e);this.visibleLookUpTableDetails.splice(n,1)}else this.visibleLookUpTableDetails.push(e)},isVisibleLookUpTableDetails:function(e){return this.visibleLookUpTableDetails.indexOf(e)>=0},fetchHistograms:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.slices[0].fetchChannelHistograms({nBins:256});case 3:e.histograms=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.error=!0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["ImageFilterProjectCollection"].fetchAll({filterKey:"project",filterValue:e.project.id});case 3:return n=t.sent.array,n.forEach((function(e){return e.prefix=e.imagingServer+e.baseUrl})),a=n.map((function(e){return e.prefix})),e.selectedFilter&&!a.includes(e.selectedFilter)&&(e.selectedFilter=null),e.filters=n,t.next=10,e.fetchHistograms();case 10:1===e.manipulableChannels.length&&e.toggleLookUpTableDetails(e.manipulableChannels[0].index),e.loading=!1,t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](0);case 16:case"end":return t.stop()}}),t,null,[[0,14]])})))()}},Uu=Ru,zu=(n("bbc5"),n("f4db"),Object(C["a"])(Uu,wu,ju,!1,null,"49a921d7",null)),Lu=zu.exports,Fu=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v(e._s(e.$t("link-images")))]),t("b-field",{attrs:{horizontal:"",label:e.$t("link-mode")}},[t("b-select",{attrs:{size:"is-small",expanded:""},model:{value:e.linkMode,callback:function(t){e.linkMode=t},expression:"linkMode"}},e._l(e.modeOptions,(function(n){return t("option",{key:n.label,domProps:{value:n.key}},[e._v(" "+e._s(n.label)+" ")])})),0)],1),e.linkedIndexes?t("div",{staticClass:"current-group"},[t("p",[e._v(e._s(e.$t("view-linked-with")))]),t("ul",e._l(e.linkedIndexes,(function(n){return t("li",{key:n},[t("i",{staticClass:"fas fa-caret-right"}),e._v(" "+e._s(e.$t("viewer-view",{number:e.imagesWithNum[n].number}))+" ("),t("image-name",{attrs:{image:e.imagesWithNum[n].image}}),e._v(") "),t("br")],1)})),0),t("button",{staticClass:"button is-small",on:{click:function(t){return e.unlink()}}},[e._v(e._s(e.$t("button-unlink")))])]):e._e(),e.otherGroups.length||e.otherSoloImages.length?[e.linkedIndexes?t("p",[e._v(e._s(e.$t("link-other-images-to-this-group")))]):t("p",[e._v(e._s(e.$t("link-view-with")))]),e._l(e.otherGroups,(function(n){var a=n.images,r=n.index,i=n.number;return t("p",{key:"group".concat(i)},[t("b-checkbox",{attrs:{value:!1},nativeOn:{change:function(t){return function(t){return e.handleCheckboxChange(t,r)}.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("link-group",{number:i}))+" "),t("ul",{staticClass:"group"},e._l(a,(function(n){return t("li",{key:n},[t("i",{staticClass:"fas fa-caret-right"}),e._v(" "+e._s(e.$t("viewer-view",{number:e.imagesWithNum[n].number}))+" ("),t("image-name",{attrs:{image:e.imagesWithNum[n].image}}),e._v(") "),t("br")],1)})),0)])],1)})),e._l(e.otherSoloImages,(function(n){var a=n.image,r=n.index,i=n.number;return t("p",{key:r},[t("b-checkbox",{attrs:{value:!1},nativeOn:{change:function(t){return function(t){return e.handleCheckboxChange(t,null,r)}.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("viewer-view",{number:i}))+" ("),t("image-name",{attrs:{image:a}}),e._v(") ")],1)],1)}))]:e._e()],2)},Bu=[],qu=(n("9911"),{name:"link-panel",props:{index:String},components:{ImageName:Qn["a"]},data:function(){return{revisionNumber:0}},computed:{modeOptions:function(){return[{key:"ABSOLUTE",label:this.$t("absolute-link-mode")},{key:"RELATIVE",label:this.$t("relative-link-mode")}]},viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},linkMode:{get:function(){return this.viewerWrapper.linkMode},set:function(e){this.$store.commit(this.viewerModule+"setLinkMode",e)}},images:function(){return this.viewerWrapper.images},imagesWithNum:function(){var e=this,t=1;return Object.keys(this.images).reduce((function(n,a){return n[a]={number:t,index:a,image:e.images[a].imageInstance},t++,n}),[])},linkGroups:function(){return this.viewerWrapper.links},linkGroupsWithNum:function(){var e=1;return this.linkGroups.reduce((function(t,n,a){return t[a]={number:e,index:a,images:n},e++,t}),[])},indexCurrentGroup:function(){var e=this;return this.linkGroups.findIndex((function(t){return t.includes(e.index)}))},linkedIndexes:function(){var e=this;return-1===this.indexCurrentGroup?null:this.linkGroups[this.indexCurrentGroup].filter((function(t){return t!==e.index}))},otherGroups:function(){var e=this;return Object.values(this.linkGroupsWithNum).filter((function(t){return t.index!==e.indexCurrentGroup}))},inGroupsIndexes:function(){var e=[];return this.linkGroups.forEach((function(t){return e.push.apply(e,Object(L["a"])(t))})),e},otherSoloImages:function(){var e=this;return Object.values(this.imagesWithNum).filter((function(t){return t.index!==e.index&&!e.inGroupsIndexes.includes(t.index)}))},trackedUser:function(){return this.viewerWrapper.images[this.index].tracking.trackedUser}},methods:{handleCheckboxChange:function(e,t,n){var a=this;this.trackedUser?this.$buefy.dialog.confirm({title:this.$t("possible-conflict"),message:this.$t("confirm-untrack-to-link-view"),confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){e.target.checked=!1,a.$store.commit(a.imageModule+"setTrackedUser",null),a.link(t,n)},onCancel:function(){return e.target.checked=!1}}):(e.target.checked=!1,this.link(t,n))},link:function(e,t){this.linkedIndexes?null!=e?this.$store.commit(this.viewerModule+"mergeLinkGroups",[this.indexCurrentGroup,e]):this.$store.commit(this.viewerModule+"linkImageToGroup",{indexGroup:this.indexCurrentGroup,indexImage:t}):null!=e?this.$store.commit(this.viewerModule+"linkImageToGroup",{indexGroup:e,indexImage:this.index}):this.$store.commit(this.viewerModule+"createLinkGroup",[this.index,t])},unlink:function(){this.$store.commit(this.viewerModule+"unlinkImage",{indexGroup:this.indexCurrentGroup,indexImage:this.index})}}}),Vu=qu,Wu=(n("99f0"),Object(C["a"])(Vu,Fu,Bu,!1,null,"53934cea",null)),Gu=Wu.exports,Hu=function(){var e=this,t=e._self._c;return t("div",{staticClass:"layers"},[t("h1",[e._v(e._s(e.$t("annotation-layers")))]),e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small",size:"is-small"}},[t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[t("b-field",[t("b-select",{attrs:{placeholder:e.$t("select-layer"),size:"is-small"},model:{value:e.selectedLayer,callback:function(t){e.selectedLayer=t},expression:"selectedLayer"}},e._l(e.unselectedLayers,(function(n){return t("option",{key:n.id,domProps:{value:n}},[e._v(" "+e._s(e.layerName(n))+" ")])})),0),t("button",{staticClass:"button is-small",attrs:{disabled:!e.selectedLayer},on:{click:function(t){return e.addLayer()}}},[e._v(e._s(e.$t("button-add")))])],1),t("table",{staticClass:"table"},[t("thead",[t("tr",[t("th",{staticClass:"checkbox-column"},[t("span",{staticClass:"far fa-eye"})]),e.reviewMode?e._e():t("th",{staticClass:"checkbox-column"},[t("span",{staticClass:"fas fa-pencil-alt"})]),t("th",{staticClass:"name-column"}),t("th",{staticClass:"checkbox-column"})])]),t("tbody",[e._l(e.selectedLayers,(function(n,a){return t("tr",{key:n.id},[t("td",{staticClass:"checkbox-column"},[t("b-checkbox",{attrs:{size:"is-small",value:n.visible},on:{input:function(t){return e.toggleLayerVisibility(a)}}})],1),e.reviewMode?e._e():t("td",{staticClass:"checkbox-column"},[t("b-checkbox",{attrs:{size:"is-small",value:n.drawOn,disabled:!e.canDraw(n)},on:{input:function(t){return e.toggleLayerDrawOn(a)}}})],1),t("td",{staticClass:"name-column"},[e._v(" "+e._s(e.layerName(n))+" ")]),t("td",{staticClass:"checkbox-column"},[e.reviewMode&&n.isReview?e._e():t("button",{staticClass:"button is-small",on:{click:function(t){return e.removeLayer(a)}}},[t("span",{staticClass:"fas fa-times"})])])])})),0===e.selectedLayers.length?t("tr",[t("td",{staticClass:"has-text-grey is-italic",attrs:{colspan:"4"}},[e._v(e._s(e.$t("no-selected-layers")))])]):e._e()],2)]),t("div",{staticClass:"opacity"},[t("label",[e._v(e._s(e.$t("layers-opacity")))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.layersOpacity,expression:"layersOpacity"}],staticClass:"slider is-fullwidth is-small",attrs:{step:"0.05",min:"0",max:"1",type:"range"},domProps:{value:e.layersOpacity},on:{__r:function(t){e.layersOpacity=t.target.value}}})])]],2)},Ju=[],Ku=(n("0481"),n("4069"),{name:"layers-panel",props:{index:String,layersToPreload:{type:Array,default:function(){return[]}}},data:function(){return{error:!1,layers:[],indexLayers:[],selectedLayer:null}},computed:{currentUser:Object(l["a"])("currentUser/user"),project:Object(l["a"])("currentProject/project"),imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},imageWrapper:function(){return this.viewerWrapper.images[this.index]},image:function(){return this.imageWrapper.imageInstance},slices:function(){return this.imageWrapper.activeSlices},activePanel:function(){return this.imageWrapper.activePanel},layersOpacity:{get:function(){return this.imageWrapper.style.layersOpacity},set:function(e){this.$store.commit(this.imageModule+"setLayersOpacity",Number(e))}},layersIds:function(){return this.layers.map((function(e){return e.id}))},selectedLayers:function(){return this.imageWrapper.layers.selectedLayers||[]},selectedLayersIds:function(){return this.selectedLayers.map((function(e){return e.id}))},unselectedLayers:function(){var e=this;return this.layers.filter((function(t){return!e.selectedLayersIds.includes(t.id)})).sort((function(e,t){return e.lastname<t.lastname?-1:1}))},nbReviewedAnnotations:function(){return this.indexLayers.reduce((function(e,t){return e+t.countReviewedAnnotation}),0)},hasReviewLayer:function(){return this.image.inReview||this.image.reviewed},reviewLayer:function(){return{id:-1,isReview:!0}},reviewMode:function(){return this.imageWrapper.review.reviewMode},isActiveImage:function(){return this.viewerWrapper.activeImage===this.index}},watch:{activePanel:function(){this.fetchIndexLayers()},reviewMode:function(){var e=this;if(this.reviewMode)this.layers.includes(this.reviewLayer)||this.layers.push(this.reviewLayer),this.addLayer(this.reviewLayer);else if(!this.hasReviewLayer){var t=this.selectedLayersIds.findIndex((function(t){return t===e.reviewLayer.id}));-1!==t&&this.removeLayer(t),this.layers=this.layers.filter((function(e){return!e.isReview}))}},layersToPreload:{deep:!0,handler:function(e){var t=this;e.forEach((function(e){var n=t.selectedLayersIds.findIndex((function(e){return e===t.reviewLayer.id}));-1===n?t.addLayerById(e,!0):t.selectedLayers[n].visible||t.toggleLayerVisibility(n)}))}}},methods:{addAnnotationEventHandler:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.annotationEventHandler(e);var n=this.$store.state.currentProject.project.clone();"UserAnnotation"===e.type?t&&n.numberOfAnnotations++:n.numberOfReviewedAnnotations++,this.$store.dispatch("currentProject/updateProject",n)},deleteAnnotationEventHandler:function(e){this.annotationEventHandler(e)},annotationEventHandler:function(e){e.image===this.image.id&&this.fetchIndexLayers()},reloadAnnotationsHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.idImage;t&&t!==this.image.id||this.fetchIndexLayers()},layerName:function(e){if(e.isReview)return"".concat(this.$t("review-layer")," (").concat(this.nbReviewedAnnotations,")");var t=Object(he["a"])(e),n=this.currentUser.isDeveloper?" (".concat(this.$t("id"),": ").concat(e.id,")"):"",a=this.indexLayers.find((function(t){return t.user===e.id}))||{};return"".concat(t).concat(n," (").concat(a.countAnnotation||0,")")},canDraw:function(e){return!e.isReview&&!e.algo&&this.$store.getters["currentProject/canEditLayer"](e.id)},addLayerById:function(e,t){var n=this.layers.find((function(t){return t.id===e}));n&&this.addLayer(n,t)},addLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedLayer,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.selectedLayersIds.includes(e.id)||(e.visible=t,e.drawOn=e.id===this.currentUser.id&&this.canDraw(e),this.$store.dispatch(this.imageModule+"addLayer",e),this.selectedLayer=null)},removeLayer:function(e){this.$store.dispatch(this.imageModule+"removeLayer",e)},toggleLayerVisibility:function(e){this.$store.dispatch(this.imageModule+"toggleLayerVisibility",e)},toggleLayerDrawOn:function(e){this.$store.commit(this.imageModule+"toggleLayerDrawOn",e)},fetchLayers:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.project.fetchUserLayers(e.image.id);case 2:e.layers=t.sent.array,e.hasReviewLayer&&e.layers.push(e.reviewLayer),n=e.layers.map((function(e){return e.id})),e.$store.commit(e.imageModule+"filterSelectedLayers",n);case 6:case"end":return t.stop()}}),t)})))()},fetchIndexLayers:function(){var e=arguments,t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]&&e[0],a||"layers"===t.activePanel){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Promise.all(t.slices.map(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchAnnotationsIndex();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:r=n.sent,r=Object.values(wt.a.groupBy(r.flat(),"user")),t.indexLayers=r.map((function(e){return e.reduce((function(e,t){return{user:e.user,countAnnotation:e.countAnnotation+t.countAnnotation,countReviewedAnnotation:e.countReviewedAnnotation+t.countReviewedAnnotation}}),{user:e[0].user,countAnnotation:0,countReviewedAnnotation:0})}));case 8:case"end":return n.stop()}}),n)})))()},shortkeyHandler:function(e){var t=this;if(e.startsWith("toggle-all-")||this.isActiveImage)if(e=e.replace("toggle-all-","toggle-"),"toggle-selected-layers"===e)this.selectedLayers.forEach((function(e,n){return t.toggleLayerVisibility(n)}));else if("toggle-review-layer"===e){var n=this.selectedLayersIds.findIndex((function(e){return e===t.reviewLayer.id}));if(-1!==n)return void this.toggleLayerVisibility(n);this.layers.includes(this.reviewLayer)&&this.addLayer(this.reviewLayer)}}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.fetchLayers(),e.fetchIndexLayers(!0)]);case 3:t.next=10;break;case 5:return t.prev=5,t.t0=t["catch"](0),e.error=!0,e.$notify({type:"error",text:e.$t("notif-error-loading-annotation-layers")}),t.abrupt("return");case 10:if(n=e.layersToPreload.map((function(e){return{id:e,visible:!0}})),e.imageWrapper.layers.selectedLayers){t.next=23;break}return e.layersToPreload.includes(e.currentUser.id)||n.push({id:e.currentUser.id,visible:!0}),t.prev=13,t.next=16,p["ProjectDefaultLayerCollection"].fetchAll({filterKey:"project",filterValue:e.project.id});case 16:a=t.sent,r=n.map((function(e){return e.id})),a.array.forEach((function(e){var t=e.user,a=e.hideByDefault;r.includes(t)||n.push({id:t,visible:!a})})),t.next=23;break;case 21:t.prev=21,t.t1=t["catch"](13);case 23:n.map((function(t){return e.addLayerById(t.id,t.visible)}));case 24:case"end":return t.stop()}}),t,null,[[0,5],[13,21]])})))()},mounted:function(){this.$eventBus.$on("addAnnotation",this.addAnnotationEventHandler),this.$eventBus.$on("deleteAnnotation",this.deleteAnnotationEventHandler),this.$eventBus.$on("reloadAnnotations",this.reloadAnnotationsHandler),this.$eventBus.$on("shortkeyEvent",this.shortkeyHandler)},beforeDestroy:function(){this.$eventBus.$off("addAnnotation",this.addAnnotationEventHandler),this.$eventBus.$off("deleteAnnotation",this.deleteAnnotationEventHandler),this.$eventBus.$off("reloadAnnotations",this.reloadAnnotationsHandler),this.$eventBus.$off("shortkeyEvent",this.shortkeyHandler)}}),Yu=Ku,Zu=(n("b460"),Object(C["a"])(Yu,Hu,Ju,!1,null,"1376cde3",null)),Xu=Zu.exports,Qu=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v(e._s(e.$t("terms")))]),t("div",{staticClass:"ontology-tree-wrapper"},[t("div",{staticClass:"header-tree"},[t("b-input",{attrs:{placeholder:e.$t("search-placeholder"),size:"is-small",expanded:""},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),t("div",{staticClass:"sidebar-tree"},[e._m(0),t("div",{staticClass:"opacity"},[e._v(e._s(e.$t("opacity")))])])],1),t("ontology-tree",{attrs:{ontology:e.ontology,allowSelection:!1,searchString:e.searchString,additionalNodes:e.additionalNodes},scopedSlots:e._u([{key:"custom-sidebar",fn:function(n){var a=n.term;return[t("div",{staticClass:"sidebar-tree"},[t("div",{staticClass:"visibility"},[a.id?t("b-checkbox",{attrs:{size:"is-small",value:e.terms[e.termsMapping[a.id]].visible},on:{input:function(t){return e.toggleTermVisibility(e.termsMapping[a.id])}}}):t("b-checkbox",{attrs:{size:"is-small"},model:{value:e.displayNoTerm,callback:function(t){e.displayNoTerm=t},expression:"displayNoTerm"}})],1),t("div",{staticClass:"opacity"},[a.id?t("input",{staticClass:"slider is-fullwidth is-small",attrs:{step:"0.05",min:"0",max:"1",type:"range",disabled:!e.terms[e.termsMapping[a.id]].visible},domProps:{value:e.terms[e.termsMapping[a.id]].opacity},on:{change:function(t){return e.changeOpacity(e.termsMapping[a.id],t)},input:function(t){return e.changeOpacity(e.termsMapping[a.id],t)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.noTermOpacity,expression:"noTermOpacity"}],staticClass:"slider is-fullwidth is-small",attrs:{step:"0.05",min:"0",max:"1",type:"range"},domProps:{value:e.noTermOpacity},on:{__r:function(t){e.noTermOpacity=t.target.value}}})])])]}}])})],1),t("div",{staticClass:"has-text-right"},[t("button",{staticClass:"button is-small",on:{click:function(t){return e.resetOpacities()}}},[e._v(e._s(e.$t("button-reset-opacities")))])])])},ed=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"visibility"},[t("i",{staticClass:"far fa-eye"})])}],td={name:"ontology-panel",components:{OntologyTree:Xt["a"]},props:{index:String},data:function(){return{searchString:""}},computed:{ontology:Object(l["a"])("currentProject/ontology"),imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},terms:function(){return this.imageWrapper.style.terms},termsMapping:function(){var e={};return this.terms.forEach((function(t,n){return e[t.id]=n})),e},additionalNodes:function(){return[{id:0,name:this.$t("no-term")}]},displayNoTerm:{get:function(){return this.imageWrapper.style.displayNoTerm},set:function(e){this.$store.dispatch(this.imageModule+"setDisplayNoTerm",e)}},noTermOpacity:{get:function(){return this.imageWrapper.style.noTermOpacity},set:function(e){this.$store.commit(this.imageModule+"setNoTermOpacity",Number(e))}}},methods:{toggleTermVisibility:function(e){this.$store.dispatch(this.imageModule+"toggleTermVisibility",e)},changeOpacity:function(e,t){var n=Number(t.target.value);this.$store.commit(this.imageModule+"setTermOpacity",{indexTerm:e,opacity:n})},resetOpacities:function(){this.$store.commit(this.imageModule+"resetTermOpacities")}}},nd=td,ad=(n("2c2b"),Object(C["a"])(nd,Qu,ed,!1,null,"2a725c86",null)),rd=ad.exports,id=function(){var e=this,t=e._self._c;return t("div",{staticClass:"properties-panel"},[t("h1",[e._v(e._s(e.$t("properties")))]),t("b-field",{attrs:{horizontal:"",label:e.$t("key")}},[t("b-select",{attrs:{size:"is-small"},model:{value:e.selectedPropertyKey,callback:function(t){e.selectedPropertyKey=t},expression:"selectedPropertyKey"}},[t("option",{domProps:{value:null}},[e._v(" "+e._s(e.$t("no-key-selected"))+" ")]),e._l(e.propertiesKeys,(function(n){return t("option",{key:n,domProps:{value:n}},[e._v(" "+e._s(n)+" ")])}))],2)],1),t("b-field",{attrs:{horizontal:"",label:e.$t("color")}},[t("b-select",{attrs:{size:"is-small"},model:{value:e.selectedPropertyColor,callback:function(t){e.selectedPropertyColor=t},expression:"selectedPropertyColor"}},e._l(e.colors,(function(n){return t("option",{key:n.name,domProps:{value:n}},[e._v(" "+e._s(e.$t(n.name))+" ")])})),0)],1)],1)},od=[],sd={name:"properties-panel",props:{index:String},computed:{colors:function(){return bi},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},selectedPropertyKey:{get:function(){return this.imageWrapper.properties.selectedPropertyKey},set:function(e){this.$store.dispatch(this.imageModule+"setSelectedPropertyKey",e)}},selectedPropertyColor:{get:function(){return this.imageWrapper.properties.selectedPropertyColor},set:function(e){this.$store.commit(this.imageModule+"setSelectedPropertyColor",e)}},propertiesKeys:function(){return this.imageWrapper.properties.propertiesKeys}}},cd=sd,ld=(n("b249"),Object(C["a"])(cd,id,od,!1,null,null,null)),ud=ld.exports,dd=function(){var e=this,t=e._self._c;return t("div",{staticClass:"follow-panel"},[t("h1",[e._v(e._s(e.$t("broadcast")))]),t("div",[t("b-checkbox",{attrs:{type:"is-info",disabled:e.disabledBroadcast},model:{value:e.broadcastModel,callback:function(t){e.broadcastModel=t},expression:"broadcastModel"}},[e._v(" "+e._s(e.$t("broadcast-my-position"))+" ")])],1),e.broadcast?[t("h2",[e._v(e._s(e.$t("followers"))+" ("+e._s(this.followers.length)+")")]),t("div",{staticClass:"followers"},e._l(e.followers,(function(e){return t("div",{key:e.id,staticClass:"field"},[t("li",[t("username",{attrs:{user:e}})],1)])})),0)]:e._e(),t("h2",{class:{disabled:e.broadcast}},[e._v(e._s(e.$t("follow-user")))]),t("div",{staticClass:"follow-panel-content",class:{disabled:e.broadcast}},[t("div",{staticClass:"field"},[t("b-radio",{attrs:{"native-value":null,type:"is-info",disabled:e.broadcast},model:{value:e.trackedUserModel,callback:function(t){e.trackedUserModel=t},expression:"trackedUserModel"}},[e._v(" "+e._s(e.$t("no-tracking"))+" ")])],1),e.onlineManagers.length>0?[t("h3",[e._v(e._s(e.$t("online-managers")))]),e._l(e.onlineManagers,(function(n){return t("div",{key:n.id,staticClass:"field"},[t("b-radio",{attrs:{"native-value":n.id,type:"is-info",disabled:e.broadcast},model:{value:e.trackedUserModel,callback:function(t){e.trackedUserModel=t},expression:"trackedUserModel"}},[t("username",{attrs:{user:n}})],1)],1)}))]:e._e(),e.onlineContributors.length>0?[t("h3",[e._v(e._s(e.$t("online-contributors")))]),e._l(e.onlineContributors,(function(n){return t("div",{key:n.id,staticClass:"field"},[t("b-radio",{attrs:{"native-value":n.id,type:"is-info",disabled:e.broadcast},model:{value:e.trackedUserModel,callback:function(t){e.trackedUserModel=t},expression:"trackedUserModel"}},[t("username",{attrs:{user:n}})],1)],1)}))]:e._e()],2)],2)},pd=[],md=(n("e9c4"),n("5b81"),{name:"follow-panel",components:{Username:ye},props:{index:String,view:Object},data:function(){return{onlineUsers:[],followers:[],broadcastModel:!1,trackedUserModel:null,timeoutOnlineUsers:null,timeoutTracking:null,disabledBroadcast:!1,wsUserPositionPath:"ws"+I["a"].CYTOMINE_CORE_HOST.replaceAll("http","")+"/ws/user-position/",userPostitionWebsock:null,wsConnected:!1,wsInterval:void 0,viewerPositionChanged:!1,lastPositionUpdate:Date.now()}},computed:{projectMembers:Object(l["a"])("currentProject/members"),projectManagers:Object(l["a"])("currentProject/managers"),shortTermToken:Object(l["a"])("currentUser/shortTermToken"),projectContributors:function(){return this.$store.getters["currentProject/contributors"]},currentUser:Object(l["a"])("currentUser/user"),project:Object(l["a"])("currentProject/project"),blindMode:function(){return this.project.blindMode},viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},images:function(){return this.viewerWrapper.images},linkedIndexes:function(){var e=this;return this.viewerWrapper.links.find((function(t){return t.includes(e.index)}))||[]},linkedIndexTracking:function(){var e=this;return this.linkedIndexes.some((function(t){return t!==e.index&&e.images[t].tracking.trackedUser}))},imageWrapper:function(){return this.viewerWrapper.images[this.index]},image:function(){return this.imageWrapper.imageInstance},activePanel:function(){return this.imageWrapper.activePanel},broadcast:{get:function(){return this.imageWrapper.tracking.broadcast},set:function(e){this.$store.commit(this.imageModule+"setBroadcast",e)}},alreadyBroadcastingImage:function(){var e=this;return Object.keys(this.images).some((function(t){var n=e.images[t];return t!==e.index&&n.imageInstance&&n.imageInstance.id===e.image.id&&n.tracking.broadcast}))},trackedUser:{get:function(){return this.imageWrapper.tracking.trackedUser},set:function(e){this.$store.commit(this.imageModule+"setTrackedUser",e)}},onlineManagers:function(){var e=this;return this.projectManagers.filter((function(t){var n=t.id;return e.onlineUsers.includes(n)}))},onlineContributors:function(){var e=this;return this.projectContributors.filter((function(t){var n=t.id;return e.onlineUsers.includes(n)}))},trackedUserFullName:function(){var e=this,t=this.projectMembers.find((function(t){return t.id===e.trackedUser}));return t?t.fullName:null}},watch:{activePanel:function(e){"follow"===e&&this.fetchOnline()},broadcast:function(){var e=this;this.broadcast?(this.stopTrack(),this.wsConnected||(this.initWebSocket(),this.wsInterval=setInterval((function(){e.sendPosition()}),I["a"].TRACKING_REFRESH_INTERVAL)),this.trackedUser=null):(clearInterval(this.wsInterval),this.userPostitionWebsock.close())},alreadyBroadcastingImage:function(e){e||(this.disabledBroadcast=!1)},broadcastModel:function(e){var t=this;if(e&&this.alreadyBroadcastingImage)return this.$notify({type:"error",text:this.$t("notif-error-already-broadcasting-this-image")}),this.disabledBroadcast=!0,void this.$nextTick((function(){return t.broadcastModel=!1}));this.broadcast=e},trackedUserModel:function(e){var t=this;e&&this.linkedIndexTracking?this.$buefy.dialog.confirm({title:this.$t("possible-conflict"),message:this.$t("confirm-unlink-view-to-track"),confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){t.$store.commit(t.viewerModule+"unlinkImage",{indexImage:t.index}),t.trackedUser=e},onCancel:function(){t.stopTrack(),t.trackedUserModel=null}}):(this.stopTrack(),this.trackedUser=e)},trackedUser:function(e){this.trackedUserModel=e,e&&(this.wsConnected||this.initTracking(),this.track(),this.fetchOnline())},onlineUsers:function(e){this.trackedUser&&!e.includes(this.trackedUser)&&(this.$notify({type:"info",text:this.$t("end-tracking-user-no-longer-broadcasting",{username:this.trackedUserFullName,imageName:this.blindMode?this.image.blindedName:this.image.instanceFilename})}),this.trackedUser=null)},"view.zoom":function(){this.viewerPositionChanged=!0},"view.rotation":function(){this.viewerPositionChanged=!0},"view.viewCenter.0":function(){this.viewerPositionChanged=!0},"view.viewCenter.1":function(){this.viewerPositionChanged=!0}},methods:{initTracking:function(){this.initWebSocket(),this.userPostitionWebsock.onopen=this.onOpentracking},initWebSocket:function(){try{this.userPostitionWebsock=new WebSocket(Object(k["a"])(this.wsUserPositionPath+this.currentUser.id+"/"+this.image.id+"/"+this.broadcast,this.shortTermToken)),this.userPostitionWebsock.onopen=this.onOpen,this.userPostitionWebsock.onclose=this.onClose,this.userPostitionWebsock.onmessage=this.onMessage}catch(e){}},onOpen:function(){this.wsConnected=!0},onOpentracking:function(){this.onOpen(),this.userPostitionWebsock.send(this.trackedUserModel)},onClose:function(){this.wsConnected=!1},onMessage:function(e){if("stop-track"==e.data)this.stopTrack();else{var t=JSON.parse(e.data);this.moveView(t)}},moveView:function(e){this.view.animate({center:[e.x,e.y],zoom:e.zoom,rotation:e.rotation,duration:500})},stopTrack:function(){this.wsConnected&&(this.userPostitionWebsock.close(),this.wsConnected=!1),this.trackedUser=null},sendPosition:function(){var e=Date.now()-this.lastPositionUpdate>I["a"].WS_POSITION_KEEP_ALIVE_INTERVAL;if(this.broadcast&&this.wsConnected&&(this.viewerPositionChanged||e)){var t=JSON.stringify({x:this.view.viewCenter[0],y:this.view.viewCenter[1],zoom:this.view.zoom,rotation:this.view.rotation});this.userPostitionWebsock.send(t),this.viewerPositionChanged=!1,this.lastPositionUpdate=Date.now()}},track:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.trackedUser&&!e.wsConnected){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,p["UserPosition"].fetchLastPosition(e.image.id,e.trackedUser);case 5:if(n=t.sent,n.id&&n.broadcast){t.next=8;break}return t.abrupt("return");case 8:e.moveView(n),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),e.$notify({type:"error",text:e.$t("notif-error-tracked-user-position")});case 14:clearTimeout(e.timeoutTracking),e.wsConnected||(e.timeoutTracking=setTimeout(e.track,I["a"].TRACKING_REFRESH_INTERVAL));case 16:case"end":return t.stop()}}),t,null,[[2,11]])})))()},fetchOnline:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.trackedUser||"follow"===e.activePanel){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.image.fetchConnectedUsers(!0);case 4:if(n=t.sent,e.onlineUsers=n.filter((function(t){return t!==e.currentUser.id})),!e.broadcast){t.next=12;break}return e.followers=[],t.next=10,e.$store.dispatch("currentProject/fetchFollowers",{userId:e.currentUser.id,imageId:e.image.id});case 10:a=t.sent,e.projectMembers.forEach((function(t){a.includes(""+t.id)&&e.followers.push(t)}));case 12:clearTimeout(e.timeoutOnlineUsers),e.timeoutOnlineUsers=setTimeout(e.fetchOnline,I["a"].BROADCASTING_USERS_REFRESH_INTERVAL);case 14:case"end":return t.stop()}}),t)})))()}},created:function(){this.trackedUserModel=this.trackedUser,this.broadcastModel=this.broadcast,this.fetchOnline(),this.track()},beforeDestroy:function(){clearTimeout(this.timeoutTracking),clearTimeout(this.timeoutOnlineUsers),this.wsConnected&&(this.userPostitionWebsock.close(),this.wsConnected=!1)}}),fd=md,hd=(n("bfeb"),n("d424"),Object(C["a"])(fd,dd,pd,!1,null,"f95581d2",null)),gd=hd.exports,vd=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v(e._s(e.$t("review")))]),e.image.reviewed?[t("b-message",{attrs:{type:"is-success",size:"is-small","has-icon":""}},[t("i18n",{attrs:{path:e.isReviewer?"you-have-validated-image-on":"image-validated-by-on"}},[e.isReviewer?e._e():t("username",{attrs:{place:"user",user:e.reviewer}}),t("span",{attrs:{place:"date"}},[e._v(e._s(e._f("moment")(Number(e.image.reviewStop),"ll LT")))])],1)],1),e.isReviewer?t("button",{staticClass:"button is-small is-fullwidth",on:{click:function(t){return e.unvalidate()}}},[e._m(0),t("span",[e._v(e._s(e.$t("button-unvalidate-and-continue-review")))])]):e._e()]:e.image.inReview?[e.isReviewer?[e.reviewMode?t("div",[t("div",{staticClass:"small"},[t("i18n",{attrs:{path:"review-list-visible-layers"}},[t("list-usernames",{attrs:{place:"visibleLayers",users:e.visibleUserLayers}})],1),e.taskReviewAll&&100!==e.taskReviewAll.progress?t("cytomine-task",{attrs:{task:e.taskReviewAll},on:{"update:task":function(t){e.taskReviewAll=t}}}):t("div",[e._v(" "+e._s(this.$t("review-explanation"))+" "),t("div",{staticClass:"buttons is-centered are-small has-addons is-fullwidth"},[t("button",{staticClass:"button",on:{click:function(t){return e.reviewAll(!0)}}},[e._m(2),t("span",[e._v(e._s(e.$t("button-accept-all")))])]),t("button",{staticClass:"button",on:{click:function(t){return e.reviewAll(!1)}}},[e._m(3),t("span",[e._v(e._s(e.$t("button-reject-all")))])])])])],1),t("div",{staticClass:"buttons are-small"},[t("button",{staticClass:"button is-fullwidth",on:{click:function(t){e.reviewMode=!1}}},[e._m(4),t("span",[e._v(e._s(e.$t("button-continue-review-later")))])]),t("button",{staticClass:"button is-danger is-fullwidth",on:{click:function(t){return e.cancelReview()}}},[e._m(5),t("span",[e._v(e._s(e.$t("button-cancel-review")))])]),t("button",{staticClass:"button is-success is-fullwidth",on:{click:function(t){return e.validate()}}},[e._m(6),t("span",[e._v(e._s(e.$t("button-validate-review")))])])])]):t("div",[t("b-message",{attrs:{type:"is-info",size:"is-small","has-icon":""}},[t("i18n",{attrs:{path:"you-are-reviewing-image-since"}},[t("span",{attrs:{place:"date"}},[e._v(e._s(e._f("moment")(Number(e.image.reviewStart),"ll LT")))])])],1),t("button",{staticClass:"button is-small is-fullwidth",on:{click:function(t){e.reviewMode=!0}}},[e._m(1),t("span",[e._v(e._s(e.$t("button-continue-review")))])])],1)]:t("b-message",{attrs:{type:"is-info",size:"is-small","has-icon":""}},[t("i18n",{attrs:{path:"image-in-review-by-since"}},[t("username",{attrs:{place:"user",user:e.reviewer}}),t("span",{attrs:{place:"date"}},[e._v(e._s(e._f("moment")(Number(e.image.reviewStart),"ll LT")))])],1)],1)]:[e._v(" "+e._s(e.$t("image-not-reviewed"))+" "),t("button",{staticClass:"button is-small is-fullwidth has-margin-top",on:{click:function(t){return e.startReview()}}},[e._m(7),t("span",[e._v(e._s(e.$t("button-start-review")))])])]],2)},bd=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-thumbs-down"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-play-circle"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-check"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-minus"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-pause-circle"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-times"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-thumbs-up"})])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-play-circle"})])}],yd={name:"review-panel",props:{index:String},components:{Username:ye,ListUsernames:_e,CytomineTask:Ko},data:function(){return{taskReviewAll:null,reviewer:null}},computed:{currentUser:Object(l["a"])("currentUser/user"),project:Object(l["a"])("currentProject/project"),imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},image:function(){return this.imageWrapper.imageInstance.clone()},reviewMode:{get:function(){return this.imageWrapper.review.reviewMode},set:function(e){this.$store.commit(this.imageModule+"setReviewMode",e)}},isReviewer:function(){return this.image.reviewUser===this.currentUser.id},selectedLayers:function(){return this.imageWrapper.layers.selectedLayers||[]},visibleUserLayers:function(){return this.selectedLayers.filter((function(e){return e.visible&&!e.isReview}))},visibleUserLayerIds:function(){return this.visibleUserLayers.map((function(e){return e.id}))},reviewLayer:function(){return this.selectedLayers.find((function(e){return e.isReview}))||{}}},methods:{commitImage:function(){this.$store.commit(this.imageModule+"setImageInstance",this.image)},startReview:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.image.review();case 3:e.commitImage(),e.reviewMode=!0,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-start-review")});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cancelReview:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.image.stopReview(!0);case 3:e.commitImage(),e.reviewMode=!1,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-cancel-review")});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},validate:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.image.stopReview();case 3:e.commitImage(),e.reviewMode=!1,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-validate-review")});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},unvalidate:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.image.stopReview(!0);case 3:e.commitImage(),e.reviewMode=!1,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-unvalidate-review")});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},reviewAll:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,new p["Task"]({project:t.project.id}).save();case 3:return t.taskReviewAll=n.sent,n.next=6,p["AnnotationCollection"].reviewAll({accept:e,image:t.image.id,users:t.visibleUserLayerIds,task:t.taskReviewAll.id});case 6:t.$eventBus.$emit("reloadAnnotations",{idImage:t.image.id,clear:!0}),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](0),t.taskReviewAll=null,t.$notify({type:"error",text:t.$t("notif-error-review-"+(e?"accept":"reject")+"-all")});case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.image.reviewUser||e.isReviewer){t.next=4;break}return t.next=3,p["User"].fetch(e.image.reviewUser);case 3:e.reviewer=t.sent;case 4:case"end":return t.stop()}}),t)})))()}},wd=yd,jd=(n("9c70"),Object(C["a"])(wd,vd,bd,!1,null,"2a9f2ca9",null)),kd=jd.exports,_d=function(){var e=this,t=e._self._c;return t("vl-interaction-select",{ref:"interactionSelect",attrs:{ident:"select-target-".concat(e.index),filter:e.filterFunction,features:e.selectedFeatures,"toggle-condition":e.never,"remove-condition":e.shiftKeyOnly,multi:!0},on:{"update:features":function(t){e.selectedFeatures=t}}},[t("vl-style-func",{attrs:{factory:e.styleFunctionFactory}})],1)},xd=[],Cd=n("06f8"),Od={name:"select-interaction",props:{index:String},computed:{imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},selectedFeatures:{get:function(){return this.imageWrapper.selectedFeatures.selectedFeatures},set:function(e){var t=e.filter((function(e){return!Object.keys(e).includes("id")&&null===e.properties}));if(1==t.length)return e=t,void this.$store.commit(this.imageModule+"setSelectedFeatures",e);e.sort((function(e,t){return e.properties.annot.area>t.properties.annot.area?1:-1}));var n=this.imageWrapper.selectedFeatures.selectionTargetedFeatures,a=this.imageWrapper.selectedFeatures.selectedFeatures[0];if(this.$store.commit(this.imageModule+"setSelectionTargetedFeatures",e),0==this.imageWrapper.selectedFeatures.selectedFeatures.length)e.length>=1&&(e=[e[0]]);else if(e.length>1)if(e.map((function(e){return e.id})).includes(a.id)){var r=n.findIndex((function(e){return e.id===a.id})),i=n.slice(0,r+1);r=0;for(var o=0;o<e.length;o++)if(!i.map((function(e){return e.id})).includes(e[o].id)){r=o;break}e=[e[r]]}else e=[e[0]];if(e.length>=1&&null!==e[0].properties){var s=e[0].properties.annot;s.recordAction()}this.$store.commit(this.imageModule+"setSelectedFeatures",e)}},terms:function(){return this.imageWrapper.style.terms||[]},styleFunctionFactory:function(){var e=this;return this.imageWrapper.selectedFeatures.selectedFeatures,this.imageWrapper.style.layersOpacity,this.terms.forEach((function(e){e.visible,e.color,e.opacity})),this.imageWrapper.style.displayNoTerm,this.imageWrapper.style.noTermOpacity,this.imageWrapper.draw.activeEditTool,this.imageWrapper.properties.selectedPropertyValues,this.imageWrapper.properties.selectedPropertyColor,this.imageWrapper.review.reviewMode,this.imageWrapper.style.wrappedTracks&&this.imageWrapper.style.wrappedTracks.forEach((function(e){e.color})),function(){return e.$store.getters[e.imageModule+"genStyleFunction"]}},filterFunction:function(){return function(e){return!Rr(e)}},never:function(){return Cd["g"]},shiftKeyOnly:function(){return Cd["k"]}},watch:{styleFunctionFactory:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.interactionSelect||!e.$refs.interactionSelect.$interaction){t.next=3;break}return t.next=3,e.$refs.interactionSelect.$interaction.getFeatures().forEach((function(e){return e.changed()}));case 3:case"end":return t.stop()}}),t)})))()}}},$d=Od,Td=Object(C["a"])($d,_d,xd,!1,null,null,null),Sd=Td.exports,Pd=function(){var e=this,t=e._self._c;return t("div",[t("vl-layer-vector",[t("vl-source-vector",{ref:"olSourceDrawTarget",attrs:{ident:e.drawSourceName}})],1),e.nbActiveLayers>0||e.drawCorrection?t("vl-interaction-draw",{ref:"olDrawInteraction",attrs:{source:e.drawSourceName,type:e.drawType,freehand:e.drawFreehand,"freehand-condition":void 0,"geometry-function":e.drawGeometryFunction},on:{drawend:e.drawEndHandler}}):e._e()],1)},Ad=[],Id=n("5bc3"),Dd={name:"draw-interaction",props:{index:String},data:function(){return{format:new rl["a"]}},computed:{currentUser:Object(l["a"])("currentUser/user"),imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},rotation:function(){return this.imageWrapper.view.rotation},termsToAssociate:function(){return this.imageWrapper.draw.termsNewAnnots},tracksToAssociate:function(){return this.imageWrapper.draw.tracksNewAnnots},image:function(){return this.imageWrapper.imageInstance},slice:function(){return this.imageWrapper.activeSlices?this.imageWrapper.activeSlices[0]:null},activeTool:function(){return this.imageWrapper.draw.activeTool},activeEditTool:function(){return this.imageWrapper.draw.activeEditTool},selectedFeature:function(){return this.$store.getters[this.imageModule+"selectedFeature"]},drawType:function(){switch(this.activeTool){case"point":return"Point";case"line":case"freehand-line":return"LineString";case"rectangle":case"circle":return"Circle";case"polygon":case"freehand-polygon":case"select":return"Polygon";default:return""}},drawCorrection:function(){return"select"===this.activeTool},drawFreehand:function(){return"freehand-polygon"===this.activeTool||"freehand-line"===this.activeTool||this.drawCorrection},drawGeometryFunction:function(){var e=this;return"rectangle"===this.activeTool?function(t,n){var a=e.rotateCoords(t,e.rotation),r=Object(Et["a"])(a,2),i=r[0],o=r[1],s=[o[0],i[1]],c=[i[0],o[1]],l=[i,s,o,c,i],u=[e.rotateCoords(l,-e.rotation)];return n?n.setCoordinates(u):n=new Id["b"](u),n}:null},layers:function(){return this.imageWrapper.layers.selectedLayers||[]},activeLayers:function(){return this.layers.filter((function(e){return e.drawOn}))},nbActiveLayers:function(){return this.activeLayers.length},drawSourceName:function(){return"draw-target-".concat(this.index)}},watch:{activeTool:function(){this.$refs.olDrawInteraction.scheduleRecreate()}},methods:{rotateCoords:function(e,t){var n=Math.cos(t),a=Math.sin(t);return e.map((function(e){var t=Object(Et["a"])(e,2),r=t[0],i=t[1];return[r*n+i*a,-r*a+i*n]}))},clearDrawnFeatures:function(){this.$refs.olSourceDrawTarget.clear(!0)},drawEndHandler:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.feature,!t.drawCorrection){n.next=6;break}return n.next=4,t.endCorrection(a);case 4:n.next=9;break;case 6:if(!(t.nbActiveLayers>0)){n.next=9;break}return n.next=9,t.endDraw(a);case 9:t.clearDrawnFeatures();case 10:case"end":return n.stop()}}),n)})))()},endDraw:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.activeLayers.forEach(function(){var n=Object(c["a"])(Object(s["a"])().mark((function n(a,r){var i;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=new p["Annotation"]({location:t.getWktLocation(e),image:t.image.id,slice:t.slice.id,user:a.id,term:t.termsToAssociate,track:t.tracksToAssociate}),n.prev=1,n.next=4,i.save();case 4:i.userByTerm=t.termsToAssociate.map((function(e){return{term:e,user:[t.currentUser.id]}})),t.$eventBus.$emit("addAnnotation",i),r===t.nbActiveLayers-1&&t.$eventBus.$emit("selectAnnotation",{index:t.index,annot:i}),t.$store.commit(t.imageModule+"addAction",{annot:i,type:il.CREATE}),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](1),t.$notify({type:"error",text:t.$t("notif-error-annotation-creation")});case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e,t){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})))()},endCorrection:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.selectedFeature){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,a=t.selectedFeature.properties.annot,n.next=6,p["Annotation"].correctAnnotations({location:t.getWktLocation(e),review:a.type===p["AnnotationType"].REVIEWED,remove:"correct-remove"===t.activeEditTool,annotation:a.id});case 6:r=n.sent,r&&(r.userByTerm=a.userByTerm,r.track=a.track,r.annotationTrack=a.annotationTrack,t.$store.commit(t.imageModule+"addAction",{annot:r,type:il.UPDATE}),t.$eventBus.$emit("editAnnotation",r)),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](2),t.$notify({type:"error",text:t.$t("notif-error-annotation-correction")});case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))()},getWktLocation:function(e){var t=e.getGeometry();return"Circle"===t.getType()&&e.setGeometry(Object(Id["c"])(t)),this.format.writeFeature(e)}}},Ed=Dd,Nd=Object(C["a"])(Ed,Pd,Ad,!1,null,null,null),Md=Nd.exports,Rd=function(){var e=this,t=e._self._c;return t("div",["modify"===e.activeEditTool?t("vl-interaction-modify",{ref:"olModifyInteraction",attrs:{source:e.selectSource,"delete-condition":e.deleteCondition,"insert-vertex-condition":e.insertVertexCondition},on:{modifystart:e.startEdit,modifyend:e.endEdit}}):e._e(),"translate"===e.activeEditTool?t("vl-interaction-translate",{attrs:{source:e.selectSource},on:{translatestart:e.startEdit,translateend:e.endEdit}}):e._e(),"rescale"===e.activeEditTool?t("vl-interaction-rescale",{attrs:{source:e.selectSource},on:{rescalestart:e.startEdit,rescaleend:e.endEdit}}):e._e(),"rotate"===e.activeEditTool?t("vl-interaction-rotate",{attrs:{source:e.selectSource},on:{rotatestart:e.startEdit,rotateend:e.endEdit}}):e._e()],1)},Ud=[];function zd(e){if(1!==e.getLinearRingCount()||5!==e.getCoordinates()[0].length)return!1;for(var t=e.getCoordinates(!1)[0],n=t[0][0],a=t[0][1],r=1;r<=4;r++){var i=t[r][0],o=t[r][1],s=i!==n,c=o!==a;if(s===c)return!1;n=i,a=o}return!0}var Ld={name:"modify-interaction",props:{index:String},data:function(){return{format:new rl["a"]}},computed:{imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},imageWrapper:function(){return this.$store.getters["currentProject/currentViewer"].images[this.index]},image:function(){return this.imageWrapper.imageInstance},selectSource:function(){return"select-target-".concat(this.index)},activeEditTool:function(){return this.imageWrapper.draw.activeEditTool},ongoingEdit:{get:function(){return this.imageWrapper.draw.ongoingEdit},set:function(e){this.$store.commit(this.imageModule+"setOngoingEdit",e)}},deleteCondition:function(){return function(e){return e.originalEvent.ctrlKey&&Object(Cd["l"])(e)}},insertVertexCondition:function(){return function(){return!this.features_.getArray().every((function(e){return zd(e.getGeometry())}))}}},methods:{startEdit:function(){this.ongoingEdit=!0},endEdit:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.features,a.forEach(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(n){var a,r;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.get("annot")){e.next=2;break}return e.abrupt("return");case 2:return a=n.get("annot").clone(),r=a.location,e.prev=4,a.location=t.format.writeFeature(n),a.terms=a.term,e.next=9,a.save();case 9:t.$eventBus.$emit("editAnnotation",a),t.$store.commit(t.imageModule+"addAction",{annot:a,type:il.UPDATE}),e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](4),t.$notify({type:"error",text:t.$t("notif-error-annotation-update")}),a.location=r,n.setGeometry(t.format.readGeometry(a.location));case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()),t.ongoingEdit=!1;case 3:case"end":return n.stop()}}),n)})))()}}},Fd=Ld,Bd=Object(C["a"])(Fd,Rd,Ud,!1,null,null,null),qd=Bd.exports,Vd=n("2986"),Wd=n("a2c7"),Gd=n("e50d"),Hd=n("1b42"),Jd=n("0c10");var Kd={name:"cytomine-image",props:{index:String},components:{ImageName:Qn["a"],AnnotationLayer:fl,RotationSelector:wl,ScaleLine:Ol,DrawTools:Dl,ImageControls:Gl,AnnotationsContainer:su,InformationPanel:mu,DigitalZoom:yu,ColorManipulation:Lu,LinkPanel:Gu,LayersPanel:Xu,OntologyPanel:rd,PropertiesPanel:ud,FollowPanel:gd,ReviewPanel:kd,SelectInteraction:Sd,DrawInteraction:Md,ModifyInteraction:qd},data:function(){return{minZoom:0,projectedMousePosition:[0,0],baseSource:null,routedAnnotation:null,selectedAnnotation:null,timeoutSavePosition:null,loading:!0,overview:null,format:new rl["a"]}},computed:{document:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return document})),routedAction:function(){return this.$route.query.action},configUI:Object(l["a"])("currentProject/configUI"),viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageModule:function(){return this.$store.getters["currentProject/imageModule"](this.index)},viewerWrapper:function(){return this.$store.getters["currentProject/currentViewer"]},nbImages:function(){return Object.keys(this.viewerWrapper.images).length},imageWrapper:function(){return this.viewerWrapper.images[this.index]},image:function(){return this.imageWrapper.imageInstance},slices:function(){return this.imageWrapper.activeSlices},sliceIds:function(){return this.slices.map((function(e){return e.id}))},canEdit:function(){return this.$store.getters["currentProject/canEditImage"](this.image)},projectionName:function(){return"CYTO-".concat(this.image.id)},terms:function(){return this.$store.getters["currentProject/terms"]},selectedLayers:function(){return this.imageWrapper.layers.selectedLayers||[]},isActiveImage:{get:function(){return this.viewerWrapper.activeImage===this.index},set:function(e){if(!e)throw new Error("Cannot unset active map");this.viewerWrapper&&this.$store.commit(this.viewerModule+"setActiveImage",this.index)}},activePanel:function(){return this.imageWrapper.activePanel},activeTool:function(){return this.imageWrapper.draw.activeTool},activeEditTool:function(){return this.imageWrapper.draw.activeEditTool},maxZoom:function(){return this.$store.getters[this.imageModule+"maxZoom"]},center:{get:function(){return this.imageWrapper.view.center},set:function(e){this.$store.dispatch(this.viewerModule+"setCenter",{index:this.index,center:e})}},zoom:{get:function(){return this.imageWrapper.view.zoom},set:function(e){this.$store.dispatch(this.viewerModule+"setZoom",{index:this.index,zoom:Number(e)})}},rotation:{get:function(){return this.imageWrapper.view.rotation},set:function(e){this.$store.dispatch(this.viewerModule+"setRotation",{index:this.index,rotation:Number(e)})}},viewState:function(){return{center:this.center,zoom:this.zoom,rotation:this.rotation}},extent:function(){return[0,0,this.image.width,this.image.height]},imageSize:function(){return[this.image.width,this.image.height]},tileSize:function(){return this.image.tileSize},baseLayerProcessingParams:function(){return this.$store.getters[this.imageModule+"tileRequestParams"]},baseLayerSliceParams:function(){return{z_slices:this.slices[0].zStack,timepoints:this.slices[0].time}},baseLayerURLQuery:function(){var e=new URLSearchParams(Object(h["a"])(Object(h["a"])({},this.baseLayerSliceParams),this.baseLayerProcessingParams)).toString();return e.length>0?"?".concat(e):e},baseLayerURLs:function(){var e=this.slices[0];return["".concat(e.imageServerUrl,"/image/").concat(e.path,"/normalized-tile/zoom/{z}/ti/{tileIndex}.jpg").concat(this.baseLayerURLQuery)]},layersToPreload:function(){var e=[],t=this.selectedAnnotation||this.routedAnnotation;return t&&e.push(t.type===p["AnnotationType"].REVIEWED?-1:t.user),"review"!==this.routedAction||e.includes(-1)||e.push(-1),e},overviewCollapsed:function(){return this.overview?this.overview.getCollapsed():this.imageWrapper.view.overviewCollapsed},correction:function(){return["correct-add","correct-remove"].includes(this.activeEditTool)},activeSelectInteraction:function(){return"select"===this.activeTool},activeDrawInteraction:function(){return!this.activeSelectInteraction||this.correction},activeModifyInteraction:function(){return this.activeSelectInteraction&&this.activeEditTool&&!this.correction},idealZoom:function(){var e=this.$refs.container,t=this.maxZoom,n=this.maxZoom-this.image.zoom,a=this.image.width*Math.pow(2,n),r=this.image.height*Math.pow(2,n);while(a>e.clientWidth||r>e.clientHeight)a/=2,r/=2,t--;return t}},watch:{viewState:function(){this.savePosition()},overviewCollapsed:function(e){this.$store.commit(this.imageModule+"setOverviewCollapsed",e)}},methods:{setInitialZoom:function(){null===this.zoom&&(this.zoom=this.idealZoom)},updateMapSize:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:e.$refs.map&&e.$refs.map.updateSize();case 3:case"end":return t.stop()}}),t)})))()},updateKeyboardInteractions:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.map.$createPromise;case 2:e.$refs.map.$map.getInteractions().forEach((function(t){(t instanceof Hd["a"]||t instanceof Jd["a"])&&(t.condition_=function(t){return Object(Cd["h"])(t)&&Object(Cd["m"])(t)&&e.isActiveImage&&!t.originalEvent.target.classList.contains("ql-editor")})}));case 3:case"end":return t.stop()}}),t)})))()},viewMounted:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.view.$createPromise;case 2:e.routedAnnotation&&e.centerViewOnAnnot(e.routedAnnotation,500),e.savePosition();case 4:case"end":return t.stop()}}),t)})))()},setBaseSource:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.baseSource.$createPromise;case 2:e.baseSource=e.$refs.baseSource.$source;case 3:case"end":return t.stop()}}),t)})))()},addOverviewMap:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isPanelDisplayed("overview")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$refs.map.$createPromise;case 4:return t.next=6,e.$refs.baseLayer.$createPromise;case 6:n=e.$refs.map.$map,e.overview=new Gd["a"]({view:new Wd["a"]({projection:e.projectionName}),layers:[e.$refs.baseLayer.$layer],tipLabel:e.$t("overview"),target:e.$refs.overview,collapsed:e.imageWrapper.view.overviewCollapsed}),n.addControl(e.overview),e.overview.getOverviewMap().on("click",(function(e){var t=n.getSize();n.getView().centerOn(e.coordinate,t,[t[0]/2,t[1]/2])}));case 10:case"end":return t.stop()}}),t)})))()},toggleOverview:function(){this.overview&&this.overview.setCollapsed(!this.imageWrapper.view.overviewCollapsed)},togglePanel:function(e){this.$store.commit(this.imageModule+"togglePanel",e)},savePosition:wt.a.debounce(Object(c["a"])(Object(s["a"])().mark((function e(){var t;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$refs.view){e.next=12;break}return t=this.$refs.view.$view.calculateExtent(),e.prev=2,e.next=5,p["UserPosition"].create({image:this.image.id,slice:this.slices[0].id,zoom:this.zoom,rotation:this.rotation,bottomLeftX:Math.round(t[0]),bottomLeftY:Math.round(t[1]),bottomRightX:Math.round(t[2]),bottomRightY:Math.round(t[1]),topLeftX:Math.round(t[0]),topLeftY:Math.round(t[3]),topRightX:Math.round(t[2]),topRightY:Math.round(t[3]),broadcast:this.imageWrapper.tracking.broadcast});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](2),this.$notify({type:"error",text:this.$t("notif-error-save-user-position")});case 10:clearTimeout(this.timeoutSavePosition),this.timeoutSavePosition=setTimeout(this.savePosition,I["a"].SAVE_POSITION_IN_IMAGE_INTERVAL);case 12:case"end":return e.stop()}}),e,this,[[2,7]])}))),500),fitZoom:function(){this.$refs.view.animate({zoom:this.idealZoom,center:[this.image.width/2,this.image.height/2]})},centerViewOnAnnot:function(e,t){var n=this;return Object(c["a"])(Object(s["a"])().mark((function a(){var r;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.image!==n.image.id){a.next=8;break}if(e.location){a.next=5;break}return a.next=4,p["Annotation"].fetch(e.id);case 4:e=a.sent;case 5:r=n.format.readGeometry(e.location),n.$refs.view.fit(r,{duration:t,padding:[10,10,10,10],maxZoom:n.image.zoom}),n.center="Point"===r.getType()?r.getFirstCoordinate():[e.centroid.x,e.centroid.y];case 8:case"end":return a.stop()}}),a)})))()},selectAnnotationHandler:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c,l,u,d,m;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.index,r=e.annot,i=e.center,o=void 0!==i&&i,c=e.showComments,l=void 0!==c&&c,t.index!==a||r.image!==t.image.id){n.next=30;break}if(n.prev=2,u=!1,r.slice){n.next=8;break}return n.next=7,p["Annotation"].fetch(r.id);case 7:r=n.sent;case 8:if(r.slice===t.slices[0].id){n.next=16;break}return n.next=11,p["SliceInstance"].fetch(r.slice);case 11:return d=n.sent,n.next=14,t.$store.dispatch(t.imageModule+"setActiveSlice",d);case 14:t.$eventBus.$emit("reloadAnnotations",{idImage:t.image.id,hard:!0}),u=!0;case 16:if(l&&t.$store.commit(t.imageModule+"setShowComments",r),t.selectedAnnotation=r,t.$store.commit(t.imageModule+"setAnnotToSelect",r),t.$eventBus.$emit("selectAnnotationInLayer",{index:a,annot:r}),!o){n.next=25;break}return n.next=23,t.viewMounted();case 23:m=u?void 0:500,t.centerViewOnAnnot(r,m);case 25:n.next=30;break;case 27:n.prev=27,n.t0=n["catch"](2),t.$notify({type:"error",text:t.$t("notif-error-target-annotation")});case 30:case"end":return n.stop()}}),n,null,[[2,27]])})))()},isPanelDisplayed:function(e){return this.configUI["project-explore-".concat(e)]},shortkeyHandler:function(e){if(e.startsWith("toggle-all-")||this.isActiveImage)switch(e=e.replace("toggle-all-","toggle-"),e){case"toggle-information":return void(this.isPanelDisplayed("info")&&this.togglePanel("info"));case"toggle-zoom":return void(this.isPanelDisplayed("digital-zoom")&&this.togglePanel("digital-zoom"));case"toggle-link":return void(this.isPanelDisplayed("link")&&this.nbImages>1&&this.togglePanel("link"));case"toggle-filters":return void(this.isPanelDisplayed("color-manipulation")&&this.togglePanel("colors"));case"toggle-layers":return void(this.isPanelDisplayed("image-layers")&&this.togglePanel("layers"));case"toggle-ontology":return void(this.isPanelDisplayed("ontology")&&this.terms&&this.terms.length>0&&this.togglePanel("ontology"));case"toggle-properties":return void(this.isPanelDisplayed("property")&&this.togglePanel("properties"));case"toggle-broadcast":return void(this.isPanelDisplayed("follow")&&this.togglePanel("follow"));case"toggle-review":return void(this.isPanelDisplayed("review")&&this.canEdit&&this.togglePanel("review"));case"toggle-overview":return void(this.isPanelDisplayed("overview")&&this.toggleOverview())}},takeScreenshot:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=document.querySelector(".map-container").clientHeight,document.querySelector(".map-container").style.height=n+"px",a=document.createElement("a"),t.next=5,e.$html2canvas(document.querySelector(".ol-unselectable"),{type:"dataURL"});case 5:a.href=t.sent,r="image_"+e.image.id.toString()+"_project_"+e.image.project.toString()+".png",a.download=r,a.click(),document.querySelector(".map-container").style.height="";case 10:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r,i,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(Vd["k"])(e.projectionName)||(n=Object(Vd["i"])({code:e.projectionName,units:"pixels",extent:e.extent}),Object(Vd["h"])(n)),"review"!==e.routedAction){t.next=15;break}if(e.togglePanel("review"),e.image.inReview){t.next=14;break}return t.prev=4,t.next=7,e.image.clone().review();case 7:a=t.sent,e.$store.commit(e.imageModule+"setImageInstance",a),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),e.$notify({type:"error",text:e.$t("notif-error-start-review")});case 14:e.$store.commit(e.imageModule+"setReviewMode",!0);case 15:if(e.selectedLayers.forEach((function(t){e.$store.commit(e.imageModule+"removeLayerFromSelectedFeatures",{layer:t,cache:!0})})),r=e.imageWrapper.routedAnnotation,r){t.next=29;break}if(i=e.$route.params.idAnnotation,!i){t.next=29;break}return t.prev=20,t.next=23,p["Annotation"].fetch(i);case 23:r=t.sent,t.next=29;break;case 26:t.prev=26,t.t1=t["catch"](20),e.$notify({type:"error",text:e.$t("notif-error-target-annotation")});case 29:if(!r){t.next=47;break}if(t.prev=30,r.image!==e.image.id){t.next=41;break}if(e.sliceIds.includes(r.slice)){t.next=38;break}return t.next=35,p["SliceInstance"].fetch(r.slice);case 35:return o=t.sent,t.next=38,e.$store.dispatch(e.imageModule+"setActiveSlice",o);case 38:e.routedAnnotation=r,"comments"===e.routedAction&&e.$store.commit(e.imageModule+"setShowComments",r),e.$store.commit(e.imageModule+"setAnnotToSelect",r);case 41:e.$store.commit(e.imageModule+"clearRoutedAnnotation"),t.next=47;break;case 44:t.prev=44,t.t2=t["catch"](30),e.$notify({type:"error",text:e.$t("notif-error-target-annotation")});case 47:return t.prev=47,t.next=50,new p["ImageConsultation"]({image:e.image.id}).save();case 50:t.next=55;break;case 52:t.prev=52,t.t3=t["catch"](47),e.$notify({type:"error",text:e.$t("notif-error-save-image-consultation")});case 55:e.loading=!1;case 56:case"end":return t.stop()}}),t,null,[[4,11],[20,26],[30,44],[47,52]])})))()},mounted:function(){this.$eventBus.$on("updateMapSize",this.updateMapSize),this.$eventBus.$on("shortkeyEvent",this.shortkeyHandler),this.$eventBus.$on("selectAnnotation",this.selectAnnotationHandler),this.setInitialZoom()},beforeDestroy:function(){this.$eventBus.$off("updateMapSize",this.updateMapSize),this.$eventBus.$off("shortkeyEvent",this.shortkeyHandler),this.$eventBus.$off("selectAnnotation",this.selectAnnotationHandler),clearTimeout(this.timeoutSavePosition)}},Yd=Kd,Zd=(n("554a"),Object(C["a"])(Yd,el,tl,!1,null,null,null)),Xd=Zd.exports,Qd=function(){var e=this,t=e._self._c;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.imageSelectorEnabled,expression:"imageSelectorEnabled"}],staticClass:"image-selector-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[t("div",{staticClass:"header"},[t("div",{staticClass:"filters"},[t("b-input",{staticClass:"search-images search",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),t("div",{staticClass:"filter-label"},[e._v(" "+e._s(e.$t("tags"))+" ")]),t("div",{staticClass:"filter-body"},[t("cytomine-multiselect",{attrs:{options:e.availableTags,label:"name","track-by":"id",multiple:!0,allPlaceholder:e.$t("all")},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)],1),t("button",{staticClass:"delete",on:{click:function(t){e.imageSelectorEnabled=!1}}})]),e.error?t("div",{staticClass:"content-wrapper"},[t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])])],1):t("div",{staticClass:"image-selector"},[e._l(e.displayedImages,(function(n){return t("div",{key:n.id,staticClass:"card"},[t("a",{staticClass:"card-image",style:"background-image: url("+e.appendShortTermToken(e.imageThumbUrl(n),e.shortTermToken)+")",on:{click:function(t){return e.addImage(n)}}}),t("div",{staticClass:"card-content"},[t("div",{staticClass:"content"},[t("a",{on:{click:function(t){return e.addImage(n)}}},[t("image-name",{attrs:{image:n}})],1)])])])})),e.nbImagesDisplayed<e.filteredImages.length?t("button",{staticClass:"button",on:{click:function(t){return e.more()}}},[e._v(" "+e._s(e.$t("button-more"))+" ")]):e._e(),t("div",{staticClass:"space"},[e._v(" ")])],2)]],2),t("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("add-image"),placement:"left"},expression:"{content: $t('add-image'), placement: 'left'}"}],staticClass:"image-selector-button",on:{click:function(t){e.imageSelectorEnabled=!0}}},[t("i",{staticClass:"fas fa-plus"})])])},ep=[],tp={rootModuleProp:"storeModule"},np=function(e,t){return Object(l["e"])(null,e,t,tp)},ap={name:"image-selector",components:{ImageName:Qn["a"],CytomineMultiselect:ee},data:function(){return{images:[],availableTags:[],searchString:"",nbImagesDisplayed:20,loading:!0,error:!1}},computed:{project:Object(l["a"])("currentProject/project"),shortTermToken:Object(l["a"])("currentUser/shortTermToken"),selectedTags:np("selectedTags","availableTags"),storeModule:function(){return this.$store.getters["currentProject/currentProjectModule"]+"listImages"},viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},imageSelectorEnabled:{get:function(){return this.$store.getters["currentProject/currentViewer"].imageSelector},set:function(e){this.$store.commit(this.viewerModule+"setImageSelector",e)}},filteredImages:function(){var e=this.images;if(this.searchString){var t=Object(Kt["a"])(this.searchString);e=e.filter((function(e){return t.test(e.instanceFilename)}))}return e},displayedImages:function(){return this.filteredImages.slice(0,this.nbImagesDisplayed)}},watch:{selectedTags:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectedTags.length){t.next=4;break}e.images=[],t.next=6;break;case 4:return t.next=6,e.fetchImages();case 6:case"end":return t.stop()}}),t)})))()}},methods:{appendShortTermToken:k["a"],addImage:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.fetch();case 3:return n.next=5,e.fetchReferenceSlice();case 5:return a=n.sent,n.next=8,t.$store.dispatch(t.viewerModule+"addImage",{image:e,slices:[a]});case 8:n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-add-viewer-image")});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},fetchImages:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new p["ImageInstanceCollection"]({filterKey:"project",filterValue:e.project.id}),e.selectedTags.length>0&&(n["tag"]={in:e.selectedTags.map((function(e){return e.id})).join()}),t.next=4,n.fetchAll();case 4:e.images=t.sent.array;case 5:case"end":return t.stop()}}),t)})))()},fetchTags:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=[{id:"null",name:e.$t("no-tag")}],t.t1=L["a"],t.next=4,p["TagCollection"].fetchAll();case 4:t.t2=t.sent.array,t.t3=(0,t.t1)(t.t2),e.availableTags=t.t0.concat.call(t.t0,t.t3);case 7:case"end":return t.stop()}}),t)})))()},more:function(){this.nbImagesDisplayed+=20},toggle:function(){this.imageSelectorEnabled=!this.imageSelectorEnabled},shortkeyHandler:function(e){"toggle-add-image"===e&&this.toggle()},imageThumbUrl:function(e){return e.thumbURL(256,b)}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.fetchImages();case 3:return t.next=5,e.fetchTags();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=!0;case 10:e.loading=!1;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},mounted:function(){this.$eventBus.$on("shortkeyEvent",this.shortkeyHandler)},beforeDestroy:function(){this.$eventBus.$off("shortkeyEvent",this.shortkeyHandler)}},rp=ap,ip=(n("bd5e"),Object(C["a"])(rp,Qd,ep,!1,null,"64d47f27",null)),op=ip.exports,sp=n("2f62");function cp(){return{user:null,expandedSidebar:!0,increment:0,shortTermToken:null}}var lp={namespaced:!0,state:cp(),mutations:{setUser:function(e,t){e.user=t?t.clone():null},setShortTermToken:function(e,t){e.shortTermToken=t},setAdminByNow:function(e,t){e.user.adminByNow=t},setExpandedSidebar:function(e,t){e.expandedSidebar=t},resetState:function(e){Object.assign(e,cp())}},actions:{fetchUser:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,p["User"].fetchCurrent();case 3:a=t.sent,a.id?n("setUser",a):n("setUser",null);case 5:case"end":return t.stop()}}),t)})))()},updateUser:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,n.next=3,t.update();case 3:a("setUser",t);case 4:case"end":return n.stop()}}),n)})))()},regenerateKeys:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,a=e.commit,r=n.user.clone(),t.next=4,r.regenerateKeys();case 4:a("setUser",r);case 5:case"end":return t.stop()}}),t)})))()},openAdminSession:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,p["Cytomine"].instance.openAdminSession();case 3:n("setAdminByNow",!0);case 4:case"end":return t.stop()}}),t)})))()},closeAdminSession:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,p["Cytomine"].instance.closeAdminSession();case 3:return t.next=5,n("fetchUser");case 5:case"end":return t.stop()}}),t)})))()},login:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.dispatch,r=e.commit,n.next=3,p["Cytomine"].instance.login(t.username,t.password,t.rememberMe);case 3:return i=n.sent,o=i.shortTermToken,r("setShortTermToken",o),n.next=8,a("fetchUser");case 8:case"end":return n.stop()}}),n)})))()}},getters:{currentShortTermToken:function(e,t,n){var a=n.currentUser||{};return a.shortTermToken}}};function up(){return{project:null,configUI:{},ontology:null,managers:[],members:[],currentViewer:null}}var dp={namespaced:!0,state:up(),mutations:{resetState:function(e){Object.assign(e,up())},setProject:function(e,t){e.project=t},setOntology:function(e,t){e.ontology=t},setConfigUI:function(e,t){e.configUI=t},setManagers:function(e,t){e.managers=t},setMembers:function(e,t){e.members=t},setCurrentViewer:function(e,t){e.currentViewer=t}},actions:{loadProject:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c,l;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.state,r=e.dispatch,i=e.commit,o=!a.project||a.project.id!==t,n.next=4,p["Project"].fetch(t);case 4:return c=n.sent,i("setProject",c),i("projects/".concat(c.id,"/setProject"),c,{root:!0}),l=[r("fetchUIConfig"),r("fetchOntology"),r("fetchProjectMembers")],o&&l.push(new p["ProjectConnection"]({project:t}).save()),n.next=11,Promise.all(l);case 11:case"end":return n.stop()}}),n)})))()},reloadProject:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,a=e.commit,t.next=3,p["Project"].fetch(n.project.id);case 3:r=t.sent,a("setProject",r);case 5:case"end":return t.stop()}}),t)})))()},updateProject:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,r=e.dispatch,i=e.commit,o=a.project.ontology!==t.ontology,i("setProject",t),i("projects/".concat(t.id,"/setProject"),t,{root:!0}),!o){n.next=7;break}return n.next=7,r("fetchOntology");case 7:case"end":return n.stop()}}),n)})))()},fetchUIConfig:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,a=e.commit,t.next=3,p["Cytomine"].instance.fetchUIConfigCurrentUser(n.project.id);case 3:r=t.sent,a("setConfigUI",r);case 5:case"end":return t.stop()}}),t)})))()},fetchProjectMembers:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r,i,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,a=e.commit,r=new p["UserCollection"]({filterKey:"project",filterValue:n.project.id}),t.next=4,r.fetchAll();case 4:i=t.sent.array,o=i.filter((function(e){return e.role==p["ProjectMemberRole"].MANAGER||e.role==p["ProjectMemberRole"].REPRESENTATIVE})),i.forEach((function(e){return e.fullName=Object(he["a"])(e)})),a("setManagers",o),a("setMembers",i);case 9:case"end":return t.stop()}}),t)})))()},fetchFollowers:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function e(){var n,a,r;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.userId,a=t.imageId,e.next=3,p["UserCollection"].fetchFollowers(n,a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))()},fetchOntology:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,a=e.commit,!n.project.ontology){t.next=7;break}return t.next=4,p["Ontology"].fetch(n.project.ontology);case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=null;case 8:r=t.t0,a("setOntology",r);case 10:case"end":return t.stop()}}),t)})))()}},getters:{canEditLayer:function(e,t,n){return function(a){var r=n.currentUser.user,i=e.project;return t.canManageProject||!i.isReadOnly&&(a===r.id||!i.isRestricted)}},canEditAnnot:function(e,t,n){return function(e){if(e.type===p["AnnotationType"].ALGO)return!1;var a=n.currentUser.user,r=e.user;return e.type===p["AnnotationType"].REVIEWED?a.adminByNow||!a.guestByNow&&e.reviewUser===a.id:t.canEditLayer(r)}},canEditImage:function(e,t,n){return function(a){var r=n.currentUser.user,i=e.project;return t.canManageProject||!r.guestByNow&&!i.isReadOnly&&(a.user===r.id||!i.isRestricted)}},canManageJob:function(e,t,n){return function(a){var r=n.currentUser.user,i=e.project;return t.canManageProject||!r.guestByNow&&!i.isReadOnly&&(a.username===r.username||!i.isRestricted)}},canManageProject:function(e,t,n){var a=n.currentUser.user||{};return a.adminByNow||!a.guestByNow&&e.managers.some((function(e){return e.id===a.id}))},contributors:function(e){var t=e.managers.map((function(e){return e.id}));return e.members.filter((function(e){return!t.includes(e.id)}))},terms:function(e){return e.ontology?pr(e.ontology):null},currentProjectModule:function(e){return e.project?"projects/".concat(e.project.id,"/"):null},currentViewer:function(e,t,n){return e.project?n.projects[e.project.id].viewers[e.currentViewer]:null},currentViewerModule:function(e,t){return"".concat(t.currentProjectModule,"viewers/").concat(e.currentViewer,"/")},imageModule:function(e,t){return function(e){return"".concat(t.currentViewerModule,"images/").concat(e,"/")}}}};function pp(){return{searchString:"",selectedOntology:null}}var mp={namespaced:!0,state:pp(),mutations:{setSelectedOntology:function(e,t){e.selectedOntology=t},setSearchString:function(e,t){e.searchString=t},resetState:function(e){Object.assign(e,pp())}}};function fp(){return{searchString:"",filtersOpened:!1,filters:{selectedOntologies:null,selectedRoles:null,selectedTags:null,boundsMembers:null,boundsImages:null,boundsUserAnnotations:null,boundsJobAnnotations:null,boundsReviewedAnnotations:null},currentPage:1,perPage:10,sortField:"lastActivity",sortOrder:"desc",openedDetails:[]}}var hp={namespaced:!0,state:fp(),mutations:{resetState:function(e){Object.assign(e,fp())},setSearchString:function(e,t){e.searchString=t},setFiltersOpened:function(e,t){e.filtersOpened=t},setFilter:function(e,t){var n=t.filterName,a=t.propValue;e.filters[n]=a},setCurrentPage:function(e,t){e.currentPage=t},setPerPage:function(e,t){e.perPage=t},setSortField:function(e,t){e.sortField=t},setSortOrder:function(e,t){e.sortOrder=t},setOpenedDetails:function(e,t){e.openedDetails=t}},getters:{nbActiveFilters:function(e){return Object.values(e.filters).filter((function(e){return e})).length},nbEmptyFilters:function(e){return Object.values(e.filters).filter((function(e){return e&&0===e.length})).length}}};function gp(){return{searchString:"",filtersOpened:!1,filters:{boundsJobs:null,boundsSuccessJobs:null,onlyLastReleases:!0,onlyExecutables:!0},currentPage:1,perPage:10,sort:{field:"name",order:"asc"},openedDetails:[]}}var vp={namespaced:!0,state:gp(),mutations:{resetState:function(e){Object.assign(e,gp())},setSearchString:function(e,t){e.searchString=t},setFiltersOpened:function(e,t){e.filtersOpened=t},setFilter:function(e,t){var n=t.filterName,a=t.propValue;e.filters[n]=a},setCurrentPage:function(e,t){e.currentPage=t},setPerPage:function(e,t){e.perPage=t},setSort:function(e,t){e.sort=t},setOpenedDetails:function(e,t){e.openedDetails=t}},getters:{nbActiveFilters:function(e){return Object.values(e.filters).filter((function(e){return e})).length}}};a["default"].use(sp["a"]);var bp=new sp["a"].Store({actions:{logout:function(e){var t=e.state,n=e.commit;for(var a in n("currentUser/setShortTermToken",null),n("currentUser/resetState"),n("currentProject/resetState"),n("ontologies/resetState"),n("listProjects/resetState"),n("listSoftware/resetState"),t.projects)this.unregisterModule(["projects",a])}},modules:{currentUser:lp,currentProject:dp,ontologies:mp,listProjects:hp,listSoftware:vp,projects:{namespaced:!0}},strict:!1}),yp=bp;function wp(e){var t=Object.keys(bp._modulesNamespaceMap),n=t.find((function(t){return bp._modulesNamespaceMap[t].context.state===e}));if("string"===typeof n)return n.slice(0,-1).split("/")}var jp={state:function(){return{idImage:0,nbBitsPerSample:8,nbSamplesPerChannel:1,apparentChannels:null,gammaPerApparentChannel:!0,invertedPerApparentChannel:!0,histogramLogScale:!0,intensitiesByMinMax:!0,filter:null}},mutations:{setIdImage:function(e,t){e.idImage=t},setNbBitsPerSample:function(e,t){e.nbBitsPerSample=t},setNbSamplesPerChannel:function(e,t){e.nbSamplesPerChannel=t},setGammaPerApparentChannel:function(e,t){e.gammaPerApparentChannel=t},setInvertedPerApparentChannel:function(e,t){e.invertedPerApparentChannel=t},setHistogramLogScale:function(e,t){e.histogramLogScale=t},setIntensitiesByMinMax:function(e,t){e.intensitiesByMinMax=t},setFilter:function(e,t){e.filter=t},setApparentChannels:function(e,t){e.apparentChannels=t},setApparentChannelVisibility:function(e,t){var n=t.indexApparentChannel,a=t.visible,r=e.apparentChannels[n];r.visible=a},setApparentChannelColor:function(e,t){var n=t.indexApparentChannel,a=t.color,r=t.isColormap,i=e.apparentChannels[n];i.color=a,i.isColormap=r},setApparentChannelBounds:function(e,t){var n=t.indexApparentChannel,a=t.bounds,r=e.apparentChannels[n];r.bounds=a},setApparentChannelGamma:function(e,t){var n=t.indexApparentChannel,a=t.gamma,r=e.apparentChannels[n];r.gamma=a},setApparentChannelInverted:function(e,t){var n=t.indexApparentChannel,a=t.inverted,r=e.apparentChannels[n];r.inverted=a},resetApparentChannel:function(e,t){var n=e.apparentChannels[t];Sp(n,e.nbBitsPerSample)},resetApparentChannels:function(e){e.apparentChannels.forEach((function(t){Sp(t,e.nbBitsPerSample)}))},resetApparentChannelIntensities:function(e,t){var n=e.apparentChannels[t];Sp(n,e.nbBitsPerSample,!0)},resetApparentChannelsIntensities:function(e){e.apparentChannels.forEach((function(t){Sp(t,e.nbBitsPerSample,!0)}))},adjustToImage:function(e,t){var n=e.apparentChannels[t];n.bounds=n.imageBounds},adjustAllToImage:function(e){e.apparentChannels.forEach((function(e){e.visible&&(e.bounds=e.imageBounds)}))},adjustToSlice:function(e,t){var n=t.indexApparentChannel,a=t.bounds,r=e.apparentChannels[n];r.bounds=a},adjustAllToSlice:function(e,t){e.apparentChannels.forEach((function(e,n){e.visible&&(e.bounds=t[n])}))},setChannelsVisibility:function(e,t){e.apparentChannels.forEach((function(e){e.visible=t.includes(e.channel)}))},resetImageColorManipulationSettings:function(e){e.gammaPerApparentChannel=!0,e.invertedPerApparentChannel=!0,e.histogramLogScale=!0,e.intensitiesByMinMax=!0}},actions:{initialize:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,i=t.image,o=t.slices,a("setIdImage",i.id),a("setNbBitsPerSample",i.bitPerSample),a("setNbSamplesPerChannel",i.samplePerPixel),n.next=7,r("refreshApparentChannels",{image:i});case 7:c=o.map((function(e){return e.channel})),a("setChannelsVisibility",c);case 9:case"end":return n.stop()}}),n)})))()},setImageInstance:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,i=t.image,a("setIdImage",i.id),a("setNbBitsPerSample",i.bitPerSample),a("setNbSamplesPerChannel",i.samplePerPixel),n.next=7,r("refreshApparentChannels",{image:i});case 7:case"end":return n.stop()}}),n)})))()},refreshApparentChannels:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=t.image,n.t0=$p,n.next=5,Cp(r);case 5:n.t1=n.sent,n.t2=r.bitPerSample,i=(0,n.t0)(n.t1,n.t2),a("setApparentChannels",i);case 9:case"end":return n.stop()}}),n)})))()},resetColorManipulation:function(e){var t=e.commit;t("resetApparentChannels"),t("resetImageColorManipulationSettings"),t("setFilter",null)},setApparentChannelVisibility:function(e,t){var n=e.commit,a=e.state,r=e.dispatch,i=t.indexApparentChannel,o=t.visible,s=a.apparentChannels[i],c=a.apparentChannels.filter((function(e){return e.visible&&e.channel===s.channel})).length;o&&0===c?r("addActiveSliceChannel",{channel:s.channel}):o||1!==c||r("removeActiveSliceChannel",{channel:s.channel}),n("setApparentChannelVisibility",{indexApparentChannel:i,visible:o})},setActiveSlice:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,a("setChannelsVisibility",[t.channel]);case 2:case"end":return n.stop()}}),n)})))()},setActiveSliceByPosition:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,r=t.channel,a("setChannelsVisibility",[r]);case 3:case"end":return n.stop()}}),n)})))()},setActiveSlicesByPosition:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,r=t.channels,a("setChannelsVisibility",r);case 3:case"end":return n.stop()}}),n)})))()}},getters:{tileRequestParams:function(e){var t={};null!==e.filter&&(t.filters=e.filter);var n=[];return e.apparentChannels&&(n=e.apparentChannels.filter((function(e){return e.visible}))),n.length>0&&(t.channels=[],t.min_intensities=[],t.max_intensities=[],t.gammas=[],t.colormaps=[],n.forEach((function(e){t.channels.push(e.index),t.min_intensities.push(e.bounds.min),t.max_intensities.push(e.bounds.max),t.gammas.push(e.gamma),t.colormaps.push(kp(e.color,e.inverted))}))),t}}};function kp(e,t){return null===e&&(e="DEFAULT"),t?"!".concat(e):e}function _p(e){return{min:0,max:Math.pow(2,e)-1}}function xp(e,t){var n=t.min,a=t.max;return e>8?{min:n,max:a}:{min:0,max:255}}function Cp(e){return Op.apply(this,arguments)}function Op(){return Op=Object(c["a"])(Object(s["a"])().mark((function e(t){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchChannelHistogramBounds();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Op.apply(this,arguments)}function $p(e,t){if(e)return e.map((function(e){return Tp(e,t)}))}function Tp(e,t){var n={index:e.apparentChannel};return n.channel=e.channel,n.sample=e.sample,n.defaultColor=e.color,n.color=e.color,n.isColormap=!1,n.visible=!0,n.gamma=1,n.inverted=!1,n.imageBounds={min:e.minimum,max:e.maximum},n.bounds=xp(t,n.imageBounds),n}function Sp(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n||(e.color=e.defaultColor,e.isColormap=!1,e.visible=!0),e.gamma=1,e.inverted=!1,e.bounds=_p(t)}var Pp={state:function(){return{activeTool:"select",termsNewAnnots:[],tracksNewAnnots:[],activeEditTool:null,ongoingEdit:!1}},mutations:{activateTool:function(e,t){e.activeTool=t},activateEditTool:function(e,t){e.activeEditTool=t},setOngoingEdit:function(e,t){e.ongoingEdit=t},setTermsNewAnnots:function(e,t){e.termsNewAnnots=t},filterTermsNewAnnots:function(e,t){var n=t.map((function(e){return e.id}));e.termsNewAnnots=e.termsNewAnnots.filter((function(e){return n.includes(e)}))},setTracksNewAnnots:function(e,t){e.tracksNewAnnots=t},filterTracksNewAnnots:function(e,t){var n=t.map((function(e){return e.id}));e.tracksNewAnnots=e.tracksNewAnnots.filter((function(e){return n.includes(e)}))}},actions:{activateTool:function(e,t){var n=e.state,a=e.commit,r=n.activeTool;"select"===r&&"select"!==t&&(a("clearSelectedFeatures"),a("activateEditTool",{tool:null})),a("activateTool",t)},refreshData:function(e){var t=e.commit,n=e.getters,a=e.rootGetters;t("filterTermsNewAnnots",a["currentProject/terms"]||[]),t("filterTracksNewAnnots",n.tracks||[])}}},Ap={state:function(){return{selectedLayers:null}},mutations:{addLayer:function(e,t){e.selectedLayers||(e.selectedLayers=[]),e.selectedLayers.push(Object(h["a"])({},t))},removeLayer:function(e,t){e.selectedLayers.splice(t,1)},toggleLayerVisibility:function(e,t){var n=e.selectedLayers[t];n.visible=!n.visible},toggleLayerDrawOn:function(e,t){var n=e.selectedLayers[t];n.drawOn=!n.drawOn},filterSelectedLayers:function(e,t){e.selectedLayers&&(e.selectedLayers=e.selectedLayers.filter((function(e){return t.includes(e.id)})))}},actions:{addLayer:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,a("addLayer",t);case 2:case"end":return n.stop()}}),n)})))()},toggleLayerVisibility:function(e,t){var n=e.state,a=e.commit;a("toggleLayerVisibility",t);var r=n.selectedLayers[t];r.visible||a("removeLayerFromSelectedFeatures",{layer:r})},removeLayer:function(e,t){var n=e.state,a=e.commit,r=n.selectedLayers[t];a("removeLayer",t),a("removeLayerFromSelectedFeatures",{layer:r})}},getters:{selectedLayers:function(e){return e.selectedLayers}}},Ip={state:function(){return{idImage:0,propertiesKeys:null,selectedPropertyKey:null,selectedPropertyColor:bi[0],selectedPropertyValues:{}}},mutations:{setIdImage:function(e,t){e.idImage=t},setPropertiesKeys:function(e,t){e.propertiesKeys=t},setSelectedPropertyKey:function(e,t){e.selectedPropertyKey=t},setSelectedPropertyColor:function(e,t){e.selectedPropertyColor=t},setSelectedPropertyValues:function(e,t){e.selectedPropertyValues=t},addSelectedPropertyValues:function(e,t){e.selectedPropertyValues=Object(h["a"])(Object(h["a"])({},e.selectedPropertyValues),t)}},actions:{initialize:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c,l,u,d,m;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.rootState,i=t.image,a("setIdImage",i.id),n.next=5,Promise.all([Np(i.id),p["PropertyCollection"].fetchAll({object:r.currentProject.project})]);case 5:o=n.sent,c=Object(Et["a"])(o,2),l=c[0],u=c[1],d=null,m=u.array.find((function(e){return e.key===I["a"].DEFAULT_PROPERTY_KEY})),m&&l.includes(m.value)&&(d=m.value),a("setPropertiesKeys",l),a("setSelectedPropertyKey",d);case 14:case"end":return n.stop()}}),n)})))()},setSelectedPropertyKey:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c,l,u,d,p;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,r=e.commit,i=e.getters,o=i.selectedLayers,c={},!t||!o){n.next=23;break}l=Object(z["a"])(o),n.prev=5,l.s();case 7:if((u=l.n()).done){n.next=15;break}return d=u.value,n.next=11,Dp(d.id,a.idImage,t);case 11:p=n.sent,c=Object(h["a"])(Object(h["a"])({},c),p);case 13:n.next=7;break;case 15:n.next=20;break;case 17:n.prev=17,n.t0=n["catch"](5),l.e(n.t0);case 20:return n.prev=20,l.f(),n.finish(20);case 23:r("setSelectedPropertyValues",c),r("setSelectedPropertyKey",t);case 25:case"end":return n.stop()}}),n,null,[[5,17,20,23]])})))()},addLayer:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,r=e.commit,i=a.selectedPropertyKey,o={},!i){n.next=7;break}return n.next=6,Dp(t.id,a.idImage,i);case 6:o=n.sent;case 7:r("addSelectedPropertyValues",o);case 8:case"end":return n.stop()}}),n)})))()},setImageInstance:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,i=t.image,a("setIdImage",i.id),n.next=5,r("refreshProperties");case 5:case"end":return n.stop()}}),n)})))()},refreshProperties:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r,i,o,c;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,a=e.commit,r=e.dispatch,t.next=3,Np(n.idImage);case 3:i=t.sent,a("setPropertiesKeys",i),o=n.selectedPropertyKey,c=i.includes(o)?o:null,r("setSelectedPropertyKey",c);case 8:case"end":return t.stop()}}),t)})))()},refreshData:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,n("refreshProperties");case 3:case"end":return t.stop()}}),t)})))()}}};function Dp(e,t,n){return Ep.apply(this,arguments)}function Ep(){return Ep=Object(c["a"])(Object(s["a"])().mark((function e(t,n,a){var r,i;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1!==t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,p["PropertyCollection"].fetchPropertiesValuesAndPositions(t,n,a);case 4:return r=e.sent,i={},r.forEach((function(e){i[e.idAnnotation]?i[e.idAnnotation]+="; "+e.value:i[e.idAnnotation]=e.value})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),Ep.apply(this,arguments)}function Np(e){return Mp.apply(this,arguments)}function Mp(){return Mp=Object(c["a"])(Object(s["a"])().mark((function e(t){var n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["PropertyCollection"].fetchKeysAnnotationProperties(null,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),Mp.apply(this,arguments)}var Rp=n("7df7"),Up={state:function(){return{selectionTargetedFeatures:[],selectedFeatures:[],annotsToSelect:[],showComments:null,displayAnnotDetails:!0,positionAnnotDetails:{x:0,y:0}}},mutations:{setSelectionTargetedFeatures:function(e,t){e.selectionTargetedFeatures=t},setSelectedFeatures:function(e,t){var n=JSON.stringify(t),a=JSON.stringify(e.selectedFeatures);n!==a&&(e.selectedFeatures=t)},clearSelectedFeatures:function(e){e.selectedFeatures=[],e.annotsToSelect=[]},selectFeature:function(e,t){e.selectedFeatures.push(Object(Rp["a"])().writeFeatureObject(t))},changeAnnotSelectedFeature:function(e,t){var n=t.indexFeature,a=t.annot;e.selectedFeatures[n]&&(e.selectedFeatures[n].properties.annot=a)},removeLayerFromSelectedFeatures:function(e,t){for(var n=t.layer,a=t.cache,r=void 0!==a&&a,i=e.selectedFeatures,o=i.length-1;o>=0;o--){var s=i[o],c=s.properties.annot;ul(c,n)&&(i.splice(o,1),r&&e.annotsToSelect.push(c))}r||(e.annotsToSelect=e.annotsToSelect.filter((function(e){return!ul(e,n)})))},removeTermFromSelectedFeatures:function(e,t){var n=t.idTerm,a=t.terms;e.selectedFeatures=e.selectedFeatures.filter((function(e){var t=e.properties.annot;return!t.term.includes(n)||a.some((function(e){return e.visible&&t.term.includes(e.id)}))}))},removeNoTermFromSelectedFeatures:function(e){e.selectedFeatures=e.selectedFeatures.filter((function(e){var t=e.properties.annot;return t.term.length}))},setAnnotToSelect:function(e,t){e.annotsToSelect=[t]},setShowComments:function(e,t){e.showComments=t?t.id:null},setDisplayAnnotDetails:function(e,t){e.displayAnnotDetails=t},setPositionAnnotDetails:function(e,t){e.positionAnnotDetails=t}},actions:{selectFeature:function(e,t){var n=e.commit;n("clearSelectedFeatures"),n("selectFeature",t)},setImageInstance:function(e){var t=e.commit;t("clearSelectedFeatures")},setActiveSlice:function(e){var t=e.commit;t("clearSelectedFeatures")},setActiveSlices:function(e){var t=e.commit;t("clearSelectedFeatures")}},getters:{selectedFeature:function(e){if(1===e.selectedFeatures.length)return e.selectedFeatures[0]}}},zp=1,Lp=1,Fp=.5,Bp={state:function(){return{terms:null,displayNoTerm:!0,noTermOpacity:zp,noTermStyle:Br("#fff",Fp*zp),defaultStyle:Br("#fff",Fp),multipleTermsStyle:Br("#fff",Fp),layersOpacity:Fp,wrappedTracks:null,multipleTracksStyle:Ur("#fff",Fp)}},mutations:{addTerm:function(e,t){e.terms.push(Vp(t,e.layersOpacity))},setTerms:function(e,t){e.terms=t},setWrappedTracks:function(e,t){e.wrappedTracks=Wp(t,e.layersOpacity,e.wrappedTracks||[])},toggleTermVisibility:function(e,t){var n=e.terms[t];n.visible=!n.visible},setDisplayNoTerm:function(e,t){e.displayNoTerm=t},setTermOpacity:function(e,t){var n=t.indexTerm,a=t.opacity,r=e.terms[n];r.opacity=a,gi(r.olStyle,e.layersOpacity*a),gi(r.olLineStyle,e.layersOpacity*a)},setNoTermOpacity:function(e,t){e.noTermOpacity=t,gi(e.noTermStyle,e.layersOpacity*t)},resetTermOpacities:function(e){e.terms.forEach((function(t){t.opacity=zp,gi(t.olStyle,e.layersOpacity*zp),gi(t.olLineStyle,e.layersOpacity*zp)})),e.noTermOpacity=zp,gi(e.noTermStyle,e.layersOpacity*e.noTermOpacity)},setLayersOpacity:function(e,t){e.layersOpacity=t,e.terms&&e.terms.forEach((function(e){gi(e.olStyle,t*e.opacity),gi(e.olLineStyle,t*e.opacity)})),gi(e.noTermStyle,t*e.noTermOpacity),gi(e.multipleTermsStyle,t),gi(e.defaultStyle,t),e.wrappedTracks&&e.wrappedTracks.forEach((function(e){gi(e.olStyle,t*e.opacity),gi(e.olLineStyle,t*e.opacity)})),gi(e.multipleTracksStyle,t)}},actions:{initialize:function(e){var t=e.commit,n=e.getters,a=e.rootGetters,r=qp(a["currentProject/terms"],Fp);t("setTerms",r);var i=Wp(n.tracks,Fp);t("setWrappedTracks",i)},toggleTermVisibility:function(e,t){var n=e.state,a=e.commit;a("toggleTermVisibility",t);var r=n.terms[t];r.visible||a("removeTermFromSelectedFeatures",{idTerm:r.id,terms:n.terms})},setDisplayNoTerm:function(e,t){var n=e.commit;n("setDisplayNoTerm",t),t||n("removeNoTermFromSelectedFeatures")},refreshData:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r,i,o,c;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.state,a=e.commit,r=e.getters,i=e.rootGetters,o=qp(i["currentProject/terms"],n.layersOpacity,n.terms),a("setTerms",o),c=Wp(r.tracks,n.layersOpacity,n.terms),a("setWrappedTracks",c);case 5:case"end":return t.stop()}}),t)})))()}},getters:{termsMapping:function(e){return e.terms?e.terms.reduce((function(e,t){return e[t.id]=t,e}),{}):{}},tracksMapping:function(e){return e.wrappedTracks?e.wrappedTracks.reduce((function(e,t){return e[t.id]=t,e}),{}):{}},wrappedTracks:function(e){return e.wrappedTracks},hiddenTermsIds:function(e){if(!e.terms)return[];var t=e.terms.filter((function(e){return!e.visible})).map((function(e){return e.id}));return e.displayNoTerm||t.push(0),t||[]}}};function qp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e){for(var a=[],r=e.length,i=function(){var r=e[o],i=n.find((function(e){return e.id===r.id}));a.push(i||Vp(r,t))},o=0;o<r;o++)i();return a}}function Vp(e,t){var n={id:e.id};return n.opacity=zp,n.olStyle=Br(e.color,zp*t),n.olLineStyle=qr(e.color,zp*t),n.visible=!0,n.color=e.color,n}function Wp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e){for(var a=[],r=e.length,i=function(){var r=e[o],i=n.find((function(e){return e.id===r.id&&e.color===r.color}));a.push(i||Gp(r,t))},o=0;o<r;o++)i();return a}}function Gp(e,t){var n={id:e.id};return n.opacity=Lp,n.olStyle=Ur(e.color,Lp*t),n.olLineStyle=zr(e.color,Lp*t),n.color=e.color,n}var Hp={state:function(){return{broadcast:!1,trackedUser:null}},mutations:{setBroadcast:function(e,t){e.broadcast=t},setTrackedUser:function(e,t){e.trackedUser=t}}},Jp={state:function(){return{actions:[],undoneActions:[]}},mutations:{resetActions:function(e){e.actions=[],e.undoneActions=[]},addAction:function(e,t){var n=t.annot,a=t.type,r={annot:n,type:a,command:p["Cytomine"].instance.lastCommand};e.actions.push(r),e.undoneActions=[]},undoAction:function(e,t){e.actions.pop(),e.undoneActions.push(t)},redoAction:function(e,t){e.undoneActions.pop(),e.actions.push(t)}},actions:{setImageInstance:function(e){var t=e.commit;t("resetActions")}}},Kp={state:function(){return{zoom:null,center:[0,0],rotation:0,digitalZoom:!0,overviewCollapsed:!1}},mutations:{setCenter:function(e,t){e.center=t},setZoom:function(e,t){e.zoom=t},setRotation:function(e,t){e.rotation=t},setDigitalZoom:function(e,t){e.digitalZoom=t},setOverviewCollapsed:function(e,t){e.overviewCollapsed=t}},actions:{initialize:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,r=t.image,a("setCenter",[r.width/2,r.height/2]);case 3:case"end":return n.stop()}}),n)})))()}}},Yp={state:function(){return{reviewMode:!1}},mutations:{setReviewMode:function(e,t){e.reviewMode=t}},actions:{setImageInstance:function(e){var t=e.commit;t("setReviewMode",!1)}}},Zp={state:function(){return{idImage:0,tracks:[]}},mutations:{setIdImage:function(e,t){e.idImage=t},setTracks:function(e,t){e.tracks=t}},actions:{initialize:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=t.image,a("setIdImage",r.id),n.next=5,Promise.all([Xp(r.id)]);case 5:i=n.sent,o=Object(Et["a"])(i,1),c=o[0],a("setTracks",c),a("setWrappedTracks",c);case 10:case"end":return n.stop()}}),n)})))()},setImageInstance:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,i=t.image,a("setIdImage",i.id),n.next=5,r("refreshTracks");case 5:case"end":return n.stop()}}),n)})))()},refreshTracks:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,a=e.commit,t.next=3,Xp(n.idImage);case 3:r=t.sent,a("filterTracksNewAnnots",r||[]),a("setTracks",r),a("setWrappedTracks",r);case 7:case"end":return t.stop()}}),t)})))()},refreshData:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,n("refreshTracks");case 3:case"end":return t.stop()}}),t)})))()}},getters:{tracks:function(e){return e.tracks}}};function Xp(e){return Qp.apply(this,arguments)}function Qp(){return Qp=Object(c["a"])(Object(s["a"])().mark((function e(t){var n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["TrackCollection"].fetchAll({filterKey:"imageinstance",filterValue:t});case 2:return n=e.sent.array,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),Qp.apply(this,arguments)}var em={state:function(){return{open:!1,currentPages:{}}},mutations:{setShowAnnotationsList:function(e,t){e.open=t},setCurrentPage:function(e,t){var n=t.prop,r=t.page;a["default"].set(e.currentPages,n,r)}}},tm={state:function(){return{step:{channel:I["a"].DEFAULT_IMAGE_CONTROLS_STEP,zStack:I["a"].DEFAULT_IMAGE_CONTROLS_STEP,time:I["a"].DEFAULT_IMAGE_CONTROLS_STEP}}},mutations:{setStep:function(e,t){var n=t.dimension,a=t.value;e.step[n]=a}}},nm={namespaced:!0,state:function(){return{imageInstance:null,profile:null,sliceInstances:{},loadedSlicePages:[],activeSlices:null,activePanel:null,routedAnnotation:null}},mutations:{setImageInstance:function(e,t){e.imageInstance=t},setResolution:function(e,t){e.imageInstance.physicalSizeX=t.x,e.imageInstance.physicalSizeY=t.y,e.imageInstance.physicalSizeZ=t.z,e.imageInstance.fps=t.t},togglePanel:function(e,t){e.activePanel=e.activePanel===t?null:t},clearSliceInstances:function(e){e.sliceInstances={},e.loadedSlicePages=[]},setSliceInstances:function(e,t){e.sliceInstances=Object.assign({},e.sliceInstances,t.reduce((function(e,t){return Object(h["a"])(Object(h["a"])({},e),{},Object(_t["a"])({},t.rank,t))}),{}))},setLoadedSlicePage:function(e,t){e.loadedSlicePages.push(t)},setActiveSlice:function(e,t){e.activeSlices=[t]},setActiveSlices:function(e,t){e.activeSlices=t},setProfile:function(e,t){e.profile=t},setRoutedAnnotation:function(e,t){e.routedAnnotation=t},clearRoutedAnnotation:function(e){e.routedAnnotation=null}},actions:{initialize:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,i=t.image,o=t.slices,c=i.clone(),a("setImageInstance",c),c=wt.a.cloneDeep(o),a("setActiveSlices",c),n.next=8,r("fetchSliceInstancesAround",{rank:c[0].rank});case 8:case"end":return n.stop()}}),n)})))()},setImageInstance:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c,l;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.dispatch,r=e.rootState,i=t.image,o=t.slices,n.next=4,a("initialize",{image:i,slices:o});case 4:c=r.currentProject.project.id,l=r.currentProject.currentViewer,a("projects/".concat(c,"/viewers/").concat(l,"/changePath"),null,{root:!0});case 7:case"end":return n.stop()}}),n)})))()},setActiveSlice:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,i=e.rootState,o=i.currentProject.project.id,c=i.currentProject.currentViewer,a("setActiveSlice",t),r("projects/".concat(o,"/viewers/").concat(c,"/changePath"),null,{root:!0}),n.next=7,r("fetchSliceInstancesAround",{rank:t.rank});case 7:case"end":return n.stop()}}),n)})))()},setActiveSliceByPosition:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c,l;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.state,r=e.dispatch,i=t.channel,o=t.zStack,c=t.time,l=$a({channel:i,zStack:o,time:c},a.imageInstance),n.next=5,r("setActiveSliceByRank",l);case 5:case"end":return n.stop()}}),n)})))()},setActiveSlicesByPosition:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c,l;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.state,r=e.dispatch,i=t.channels,o=t.zStack,c=t.time,l=i.map((function(e){return $a({channel:e,zStack:o,time:c},a.imageInstance)})),n.next=5,r("setActiveSlicesByRank",l);case 5:case"end":return n.stop()}}),n)})))()},addActiveSliceChannel:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.state,r=e.dispatch,i=t.channel,o=a.activeSlices[0],c=a.activeSlices.map((function(e){return e.rank})),c.push($a({channel:i,zStack:o.zStack,time:o.time},a.imageInstance)),n.next=7,r("setActiveSlicesByRank",c);case 7:case"end":return n.stop()}}),n)})))()},removeActiveSliceChannel:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c,l;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.state,r=e.dispatch,i=t.channel,o=a.activeSlices.map((function(e){return e.channel})).filter((function(e){return e!==i})),c=a.activeSlices[0],l=o.map((function(e){return $a({channel:e,zStack:c.zStack,time:c.time},a.imageInstance)})),n.next=7,r("setActiveSlicesByRank",l);case 7:case"end":return n.stop()}}),n)})))()},setActiveSliceByRank:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c,l,u;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,r=e.commit,i=e.dispatch,o=e.rootState,c=a.sliceInstances[t],c){n.next=7;break}return n.next=5,i("fetchSliceInstancesAround",{rank:t,setActive:!0});case 5:n.next=8;break;case 7:r("setActiveSlice",c);case 8:l=o.currentProject.project.id,u=o.currentProject.currentViewer,i("projects/".concat(l,"/viewers/").concat(u,"/changePath"),null,{root:!0});case 11:case"end":return n.stop()}}),n)})))()},setActiveSlicesByRank:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,l,u,d;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.state,r=e.commit,i=e.dispatch,o=e.rootState,n.next=3,Promise.all(t.map(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){var n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=a.sliceInstances[t],n){e.next=5;break}return e.next=4,i("fetchSliceInstancesAround",{rank:t,setActive:!1});case 4:n=a.sliceInstances[t];case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:l=n.sent,r("setActiveSlices",l),u=o.currentProject.project.id,d=o.currentProject.currentViewer,i("projects/".concat(u,"/viewers/").concat(d,"/changePath"),null,{root:!0});case 8:case"end":return n.stop()}}),n)})))()},refreshData:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,a=e.commit,r=e.dispatch,t.next=3,Promise.all([p["ImageInstance"].fetch(n.imageInstance.id).then((function(e){return a("setImageInstance",e)})),Promise.all(n.activeSlices.map(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["SliceInstance"].fetch(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){return a("setActiveSlices",e)}))]);case 3:return a("clearSliceInstances"),t.next=6,r("fetchSliceInstancesAround",{rank:n.activeSlices[0].rank});case 6:case"end":return t.stop()}}),t)})))()},fetchSliceInstancesAround:function(e,t){return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c,l,u,d,m,f;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.state,r=e.commit,i=t.rank,o=t.setActive,c=void 0!==o&&o,l=[],u={filterKey:"imageinstance",filterValue:a.imageInstance.id,max:I["a"].PRELOADED_SLICES},d=am(i),a.loadedSlicePages.includes(d)||l.push(new p["SliceInstanceCollection"](u).fetchPage(d).then((function(e){if(r("setSliceInstances",e.array),c){var t=e.array.find((function(e){return e.rank===i}));t&&r("setActiveSlice",t)}})).then((function(){return r("setLoadedSlicePage",d)}))),m=d-1,m>=0&&!a.loadedSlicePages.includes(m)&&l.push(new p["SliceInstanceCollection"](u).fetchPage(m).then((function(e){r("setSliceInstances",e.array)})).then((function(){return r("setLoadedSlicePage",m)}))),f=d+1,f<rm(a.imageInstance)&&!a.loadedSlicePages.includes(m)&&l.push(new p["SliceInstanceCollection"](u).fetchPage(f).then((function(e){r("setSliceInstances",e.array)})).then((function(){return r("setLoadedSlicePage",f)}))),n.next=12,Promise.all(l);case 12:case"end":return n.stop()}}),n)})))()}},getters:{genStyleFunction:function(e,t){return function(n){var a=n.get("annot");if(a){if(Rr(n))return[e.style.defaultStyle,Gr(a.count.toString())];var r=[],i=a.term.length,o=e.style.terms;if(o&&1===i){var s=t.termsMapping[a.term[0]];if(s){if(!s.visible)return;"LineString"===n.getGeometry().getType()?r.push(s.olLineStyle):r.push(s.olStyle)}else r.push(e.style.noTermStyle)}else if(o&&i>1){var c=o.some((function(e){return e.visible&&a.term.includes(e.id)}));if(!c)return;r.push(e.style.multipleTermsStyle)}else{if(!e.style.displayNoTerm)return;r.push(e.style.noTermStyle)}var l=a.track?a.track.length:0,u=a.type===p["AnnotationType"].REVIEWED,d=e.review.reviewMode&&!u;e.selectedFeatures.selectedFeatures.map((function(e){return e.id})).includes(n.getId())?(r.push.apply(r,Object(L["a"])(u?mi:d?hi:l>0?li:ui)),"modify"===e.draw.activeEditTool&&r.push(di)):u?r.push.apply(r,Object(L["a"])(pi)):d&&r.push.apply(r,Object(L["a"])(fi));var m=e.style.wrappedTracks;if(m&&1===l){var f=t.tracksMapping[a.track[0]];f&&("LineString"===n.getGeometry().getType()?r.unshift(f.olLineStyle):r.push(f.olStyle))}else m&&l>1&&r.push(e.style.multipleTracksStyle);var h=e.properties.selectedPropertyValues[a.id];if(h){var g=e.properties.selectedPropertyColor,v="34px";e.view.zoom<=3?v="12px":e.view.zoom<=6?v="19px":e.view.zoom<=8&&(v="26px"),r.push(Gr(h,v,g.fill,null))}return r}}},maxZoom:function(e){if(!e.imageInstance)return 0;var t=e.view.digitalZoom?I["a"].DIGITAL_ZOOM_INCREMENT:0;return e.imageInstance.zoom+t},maxRank:function(e){return e.imageInstance?e.imageInstance.depth*e.imageInstance.duration*e.imageInstance.channels:0},channels:function(e){return wt.a.orderBy(Object.values(wt.a.groupBy(e.sliceInstances,"channel")).map((function(e){return{index:e[0].channel,name:e[0].channelName,color:e[0].channelColor}})),"index")}},modules:{colors:jp,draw:Pp,layers:Ap,properties:Ip,selectedFeatures:Up,style:Bp,tracking:Hp,undoRedo:Jp,view:Kp,review:Yp,tracks:Zp,annotationsList:em,controls:tm}};function am(e){return Math.ceil((e+1)/I["a"].PRELOADED_SLICES)-1}function rm(e){return Math.ceil(e.depth*e.duration*e.channels/I["a"].PRELOADED_SLICES)}var im={namespaced:!0,state:function(){return{links:[],linkMode:"ABSOLUTE",imageSelector:!1,activeImage:0,indexNextImage:0,copiedAnnot:null}},mutations:{setImageSelector:function(e,t){e.imageSelector=t},addImage:function(e){e.imageSelector=!1,e.activeImage=e.indexNextImage,e.indexNextImage++},setActiveImage:function(e,t){e.activeImage=t},setCopiedAnnot:function(e,t){e.copiedAnnot=t},setLinkMode:function(e,t){e.linkMode=t},createLinkGroup:function(e,t){e.links.push(t)},linkImageToGroup:function(e,t){var n=t.indexGroup,a=t.indexImage;e.links[n].push(a)},mergeLinkGroups:function(e,t){var n;(n=e.links[t[0]]).push.apply(n,Object(L["a"])(e.links[t[1]])),e.links.splice(t[1],1)},unlinkImage:function(e,t){var n=t.indexGroup,a=t.indexImage,r=e.links;if(n||(n=r.findIndex((function(e){return e.includes(a)})),-1!==n)){var i=r[n],o=i.findIndex((function(e){return e===a}));i.splice(o,1),1===i.length&&r.splice(n,1)}}},actions:{changePath:function(e){var t=e.getters,n=Nh.currentRoute.params.idAnnotation,a=Nh.currentRoute.query.action;Nh.replace(t.pathViewer({idAnnotation:n,action:a}))},addImage:function(e,t){var n=this;return Object(c["a"])(Object(s["a"])().mark((function a(){var r,i,o,c,l,u,d,p,m;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.state,i=e.commit,o=e.getters,c=e.dispatch,l=t.image,u=t.slices,d=t.annot,p=void 0===d?null:d,m=r.indexNextImage,i("addImage"),n.registerModule(o.pathImageModule(m),nm),p&&i("images/".concat(m,"/setRoutedAnnotation"),p),a.next=8,c("images/".concat(m,"/initialize"),{image:l,slices:u});case 8:c("changePath");case 9:case"end":return a.stop()}}),a)})))()},setImageResolution:function(e,t){var n=e.state,a=e.commit,r=t.idImage,i=t.resolution;for(var o in n.images){var s=n.images[o].imageInstance;s&&s.id===r&&a("images/".concat(o,"/setResolution"),i)}},addTerm:function(e,t){var n=e.state,a=e.commit;for(var r in n.images)a("images/".concat(r,"/addTerm"),t)},refreshTracks:function(e,t){var n=e.state,a=e.dispatch,r=t.idImage;for(var i in n.images){var o=n.images[i].imageInstance;o&&o.id===r&&a("images/".concat(i,"/refreshTracks"))}},setCenter:function(e,t){var n=e.state,a=e.getters,r=e.commit,i=t.index,o=t.center,s="RELATIVE"===n.linkMode,c=n.images[i],l=c.view.center.map((function(e,t){return o[t]-e})),u=c.imageInstance.zoom-c.view.zoom,d=a.getLinkedIndexes(i);d.forEach((function(e){var t=o;if(s){var a=n.images[e],i=a.imageInstance.zoom-a.view.zoom-u,c=Math.pow(2,i);t=a.view.center.map((function(e,t){return e+l[t]*c}))}r("images/".concat(e,"/setCenter"),t)}))},setZoom:function(e,t){var n=e.state,a=e.getters,r=e.commit,i=t.index,o=t.zoom,s="RELATIVE"===n.linkMode,c=o-n.images[i].view.zoom,l=a.getLinkedIndexes(i);l.forEach((function(e){var t=s?n.images[e].view.zoom+c:o;r("images/".concat(e,"/setZoom"),t)}))},setRotation:function(e,t){var n=e.state,a=e.getters,r=e.commit,i=t.index,o=t.rotation,s="RELATIVE"===n.linkMode,c=o-n.images[i].view.rotation+2*Math.PI,l=a.getLinkedIndexes(i);l.forEach((function(e){var t=s?(n.images[e].view.rotation+c)%(2*Math.PI):o;r("images/".concat(e,"/setRotation"),t)}))},refreshData:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,a=e.dispatch,t.next=3,Promise.all(Object.keys(n.images).map(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a("images/".concat(t,"/refreshData"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:a("changePath");case 4:case"end":return t.stop()}}),t)})))()},removeImage:function(e,t){var n=e.commit,a=e.getters,r=e.dispatch;n("unlinkImage",{indexImage:t}),this.unregisterModule(a.pathImageModule(t),nm),r("changePath")}},getters:{pathModule:function(e){return wp(e)},pathImageModule:function(e,t){return function(e){return[].concat(Object(L["a"])(t.pathModule),["images",e])}},pathViewer:function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.idAnnotation,r=n.action,i=t.pathModule[1],o=t.pathModule[3],s=Object.values(e.images).map((function(e){return e.imageInstance?e.imageInstance.id:0})),c=Object.values(e.images).map((function(e){return e.activeSlices&&e.activeSlices.length>0?e.activeSlices.map((function(e){return e.id})).join(":"):0})),l=a?"/annotation/".concat(a):"",u=r?"&action="+r:"";return"/project/".concat(i,"/image/").concat(s.join("-"),"/slice/").concat(c.join("-")).concat(l,"?viewer=").concat(o).concat(u)}},getLinkedIndexes:function(e){return function(t){return e.links.find((function(e){return e.includes(t)}))||[t]}}},modules:{images:{namespaced:!0}}},om=n("4a35"),sm=om.detect,cm=sm(),lm=cm&&"Mac OS"===cm.os?"meta":"ctrl",um=Object.freeze({"general-close-modal":["esc"],"general-shortcuts-modal":["shift","?"],"viewer-nav-zoom-in":["+"],"viewer-nav-zoom-out":["-"],"viewer-nav-move-up":["arrowup"],"viewer-nav-move-down":["arrowdown"],"viewer-nav-move-left":["arrowleft"],"viewer-nav-move-right":["arrowright"],"viewer-nav-next-image":["shift","arrowright"],"viewer-nav-previous-image":["shift","arrowleft"],"viewer-nav-next-t":["pageup"],"viewer-nav-previous-t":["pagedown"],"viewer-nav-first-t":["home"],"viewer-nav-last-t":["end"],"viewer-nav-next-c":["alt","pageup"],"viewer-nav-previous-c":["alt","pagedown"],"viewer-nav-first-c":["alt","home"],"viewer-nav-last-c":["alt","end"],"viewer-nav-next-z":["shift","pageup"],"viewer-nav-previous-z":["shift","pagedown"],"viewer-nav-first-z":["shift","home"],"viewer-nav-last-z":["shift","end"],"viewer-nav-next-slice":["alt","shift","pageup"],"viewer-nav-previous-slice":["alt","shift","pagedown"],"viewer-nav-first-slice":["alt","shift","home"],"viewer-nav-last-slice":["alt","shift","end"],"viewer-nav-drag-rotate":["alt","shift","drag"],"viewer-nav-drag-zoom":["shift","drag"],"viewer-tool-select":["s"],"viewer-tool-point":["o"],"viewer-tool-line":["l"],"viewer-tool-freehand-line":["shift","l"],"viewer-tool-rectangle":["r"],"viewer-tool-circle":["c"],"viewer-tool-polygon":["p"],"viewer-tool-freehand-polygon":["shift","p"],"viewer-tool-screenshot":["shift","s"],"viewer-tool-fill":["f"],"viewer-tool-correct-add":["shift","c"],"viewer-tool-correct-remove":["alt","shift","c"],"viewer-tool-modify":["m"],"viewer-tool-modify-delete-vertex":["ctrl","click"],"viewer-tool-rescale":["shift","m"],"viewer-tool-move":["t"],"viewer-tool-rotate":["shift","t"],"viewer-tool-delete":["del"],"viewer-tool-copy":[lm,"c"],"viewer-tool-paste":[lm,"v"],"viewer-tool-undo":[lm,"z"],"viewer-tool-redo":[lm,"y"],"viewer-tool-review-accept":["j"],"viewer-tool-review-reject":["k"],"viewer-toggle-review-layer":["i"],"viewer-toggle-all-review-layer":[lm,"i"],"viewer-toggle-selected-layers":["q"],"viewer-toggle-all-selected-layers":[lm,"q"],"viewer-toggle-information":["alt","i"],"viewer-toggle-all-information":[lm,"alt","i"],"viewer-toggle-zoom":["alt","z"],"viewer-toggle-all-zoom":[lm,"alt","z"],"viewer-toggle-link":["alt","s"],"viewer-toggle-all-link":[lm,"alt","s"],"viewer-toggle-filters":["alt","f"],"viewer-toggle-all-filters":[lm,"alt","f"],"viewer-toggle-layers":["alt","l"],"viewer-toggle-all-layers":[lm,"alt","l"],"viewer-toggle-ontology":["alt","t"],"viewer-toggle-all-ontology":[lm,"alt","t"],"viewer-toggle-properties":["alt","p"],"viewer-toggle-all-properties":[lm,"alt","p"],"viewer-toggle-broadcast":["alt","b"],"viewer-toggle-all-broadcast":[lm,"alt","b"],"viewer-toggle-review":["alt","r"],"viewer-toggle-all-review":[lm,"alt","r"],"viewer-toggle-overview":["alt","o"],"viewer-toggle-all-overview":[lm,"alt","o"],"viewer-toggle-annotations":["alt","a"],"viewer-toggle-all-annotations":[lm,"alt","a"],"viewer-toggle-current":["alt","c"],"viewer-toggle-all-current":[lm,"alt","c"],"viewer-toggle-add-image":["alt","+"],"text-editor-bold":[lm,"b"],"text-editor-italic":[lm,"i"],"text-editor-underline":[lm,"u"]}),dm={name:"cytomine-viewer",components:{CytomineImage:Xd,ImageSelector:op},data:function(){return{error:!1,errorBadImageProject:!1,loading:!0,reloadInterval:null,idViewer:null}},computed:{project:Object(l["a"])("currentProject/project"),currentUser:Object(l["a"])("currentUser/user"),viewers:function(){return this.$store.state.projects[this.project.id].viewers},idImages:function(){return this.$route.params.idImages.split("-")},idSlices:function(){return this.$route.params.idSlices?this.$route.params.idSlices.split("-"):[]},paramIdViewer:function(){return this.$route.query.viewer},viewerModule:function(){return this.$store.getters["currentProject/currentViewerModule"]},viewer:function(){return this.viewers[this.idViewer]},indexImages:function(){return this.viewer?Object.keys(this.viewer.images):[]},nbImages:function(){return this.indexImages.length},nbHorizontalCells:function(){return Math.ceil(Math.sqrt(this.nbImages))},nbVerticalCells:function(){return this.nbHorizontalCells?Math.ceil(this.nbImages/this.nbHorizontalCells):0},cells:function(){for(var e=new Array(this.nbHorizontalCells*this.nbVerticalCells),t=0;t<this.nbImages;t++){var n=this.indexImages[t],a=this.viewer.images[n].imageInstance,r=this.viewer.images[n].activeSlices;e[t]={index:n,image:a,slices:r}}return e},elementHeight:function(){return 100/this.nbVerticalCells},elementWidth:function(){return 100/this.nbHorizontalCells},shortkeysMapping:function(){var e=["nav-next-image","nav-previous-image","nav-next-slice","nav-previous-slice","nav-next-t","nav-previous-t","nav-next-c","nav-previous-c","nav-first-slice","nav-last-slice","nav-first-t","nav-last-t","nav-first-z","nav-last-z","nav-first-c","nav-last-c","tool-select","tool-point","tool-line","tool-freehand-line","tool-rectangle","tool-circle","tool-polygon","tool-freehand-polygon","tool-screenshot","tool-fill","tool-correct-add","tool-correct-remove","tool-modify","tool-rescale","tool-move","tool-rotate","tool-delete","tool-undo","tool-redo","tool-review-accept","tool-review-reject","toggle-review-layer","toggle-all-review-layer","toggle-selected-layers","toggle-all-selected-layers","tool-go-to-slice-t","tool-go-to-slice-z","tool-go-to-slice-c","toggle-information","toggle-zoom","toggle-filters","toggle-layers","toggle-ontology","toggle-properties","toggle-broadcast","toggle-review","toggle-overview","toggle-annotations","toggle-current","toggle-add-image","toggle-link","nav-next-z","nav-previous-z","tool-copy","tool-paste","tool-review-reject","tool-review-toggle","tool-go-to-slice-t","tool-go-to-slice-z","tool-go-to-slice-c","toggle-all-information","toggle-all-zoom","toggle-all-filters","toggle-all-layers","toggle-all-ontology","toggle-all-properties","toggle-all-broadcast","toggle-all-review","toggle-all-overview","toggle-all-annotations","toggle-all-current","toggle-all-link"];return Object.keys(um).filter((function(t){return e.includes(t.replace("viewer-",""))})).reduce((function(e,t){return e[t.replace("viewer-","")]=um[t],e}),{})}},watch:{paramIdViewer:function(){this.findIdViewer()},idViewer:function(e,t){t&&(this.loading=!0,this.loadViewer())},viewer:function(){this.viewer||this.$router.push("/project/".concat(this.$route.params.idProject))},nbImages:function(){this.$eventBus.$emit("updateMapSize")}},methods:{findIdViewer:function(){if(this.paramIdViewer)this.idViewer=this.paramIdViewer;else{for(var e in this.viewers){var t=Object.values(this.viewers[e].images).map((function(e){return e.imageInstance.id})).join("-");if(t===this.$route.params.idImages)return void(this.idViewer=e)}this.idViewer=Math.random().toString(36).substr(2,9)}},closeMap:function(e){1===this.nbImages?(this.$store.unregisterModule(["projects",this.project.id,"viewers",this.idViewer]),this.$router.push("/project/".concat(this.$route.params.idProject))):this.$store.dispatch(this.viewerModule+"removeImage",e)},loadViewer:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$store.commit("currentProject/setCurrentViewer",e.idViewer),e.viewer){t.next=16;break}return e.$store.registerModule(["projects",e.project.id,"viewers",e.idViewer],im),t.next=6,Promise.all(e.idImages.map(function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(n,a){var r,i,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ImageInstance"].fetch(n);case 2:if(r=t.sent,i=e.idSlices[a],!i){t.next=11;break}return i=i.split(":"),t.next=8,Promise.all(i.map(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["SliceInstance"].fetch(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:o=t.sent,t.next=15;break;case 11:return t.next=13,r.fetchReferenceSlice();case 13:t.t0=t.sent,o=[t.t0];case 15:return t.next=17,e.$store.dispatch(e.viewerModule+"addImage",{image:r,slices:o});case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 6:return n={},a=Object(L["a"])(new Set(e.idImages)),t.next=10,Promise.all(a.map(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(t){var a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["ImageInstance"].fetch(t);case 2:a=e.sent,n[t]=a;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:if(r=Object.values(n).filter((function(t){return t.project!=e.project.id})),!(r.length>0)){t.next=14;break}throw e.errorBadImageProject=!0,new Error("Some images are not from this project");case 14:t.next=18;break;case 16:return t.next=18,e.$store.dispatch(e.viewerModule+"refreshData");case 18:e.loading=!1,t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](0),e.error=!0;case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},selectAnnotationHandler:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r,i,o,c,l,u,d,m,f,h,g,v;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.index,r=e.annot,i=e.center,o=void 0!==i&&i,n.prev=1,!a||r.image===t.viewer.images[a].imageInstance.id){n.next=17;break}return n.next=5,p["Annotation"].fetch(r.id);case 5:return r=n.sent,n.next=8,Promise.all([p["ImageInstance"].fetch(r.image),p["SliceInstance"].fetch(r.slice)]);case 8:return c=n.sent,l=Object(Et["a"])(c,2),u=l[0],d=l[1],t.$store.commit("".concat(t.viewerModule,"images/").concat(a,"/setRoutedAnnotation"),r),n.next=15,t.$store.dispatch("".concat(t.viewerModule,"images/").concat(a,"/setImageInstance"),{image:u,slice:d});case 15:n.next=34;break;case 17:if(null!==a){n.next=34;break}return n.next=20,p["Annotation"].fetch(r.id);case 20:if(r=n.sent,!t.idImages.includes(String(r.image))){n.next=26;break}m=t.cells.find((function(e){return e.image.id===r.image})).index,t.$eventBus.$emit("selectAnnotation",{index:m,annot:r,center:o}),n.next=34;break;case 26:return n.next=28,Promise.all([p["ImageInstance"].fetch(r.image),p["SliceInstance"].fetch(r.slice)]);case 28:return f=n.sent,h=Object(Et["a"])(f,2),g=h[0],v=h[1],n.next=34,t.$store.dispatch(t.viewerModule+"addImage",{image:g,slice:v,annot:r});case 34:n.next=39;break;case 36:n.prev=36,n.t0=n["catch"](1),t.error=!0;case 39:case"end":return n.stop()}}),n,null,[[1,36]])})))()},shortkeyEvent:function(e){this.$eventBus.$emit("shortkeyEvent",e.srcKey)}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.findIdViewer(),t.next=3,e.loadViewer();case 3:e.reloadInterval=setInterval((function(){return e.$eventBus.$emit("reloadAnnotations")}),I["a"].VIEWER_ANNOTATIONS_REFRESH_INTERVAL);case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){this.$eventBus.$on("selectAnnotation",this.selectAnnotationHandler)},beforeDestroy:function(){this.$eventBus.$off("selectAnnotation",this.selectAnnotationHandler),clearInterval(this.reloadInterval)}},pm=dm,mm=(n("ec25"),Object(C["a"])(pm,Xc,Qc,!1,null,"2b45029e",null)),fm=mm.exports,hm=function(){var e=this,t=e._self._c;return e.permissionError||e.notFoundError?t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t(e.permissionError?"access-denied":"not-found"))+" ")]),t("p",[e._v(" "+e._s(e.$t(e.permissionError?"insufficient-permission":"not-found-error"))+" ")])]):t("div",{staticClass:"project-container"},[e.loading?e._e():t("project-sidebar",{key:e.idProject}),t("div",{staticClass:"app-content"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():t("router-view")],1)],1)},gm=[],vm=function(){var e=this,t=e._self._c;return t("div",{ref:"sidebar",staticClass:"sidebar-wrapper",class:{expanded:e.expanded}},[t("nav",{staticClass:"sidebar",on:{click:e.clickHandler}},[t("h1",{staticClass:"project-name"},[e._v(e._s("".concat(e.$t("project"),": ").concat(e.project.name)))]),t("ul",[e.isTabDisplayed("images")?[t("router-link",{attrs:{tag:"li",to:"/project/".concat(e.project.id,"/images")}},[t("a",[t("i",{staticClass:"far fa-images"}),e._v(" "+e._s(e.$t("images"))+" ")])])]:e._e(),e.isTabDisplayed("annotations")?t("router-link",{attrs:{tag:"li",to:"/project/".concat(e.project.id,"/annotations")}},[t("a",[t("i",{staticClass:"far fa-edit"}),e._v(" "+e._s(e.$t("annotations"))+" ")])]):e._e(),e.isTabDisplayed("jobs")&&e.algoEnabled?t("router-link",{attrs:{tag:"li",to:"/project/".concat(e.project.id,"/analysis")}},[t("a",[t("i",{staticClass:"fas fa-tasks"}),e._v(" "+e._s(e.$t("analysis"))+" ")])]):e._e(),e.isTabDisplayed("activities")?t("router-link",{attrs:{tag:"li",to:"/project/".concat(e.project.id,"/activity")}},[t("a",[t("i",{staticClass:"fas fa-tachometer-alt"}),e._v(" "+e._s(e.$t("activity"))+" ")])]):e._e(),e.isTabDisplayed("information")?t("router-link",{attrs:{tag:"li",to:"/project/".concat(e.project.id,"/information")}},[t("a",[t("i",{staticClass:"fas fa-info-circle"}),e._v(" "+e._s(e.$t("information"))+" ")])]):e._e()],2),t("ul",{staticClass:"bottom-menu"},[e.isTabDisplayed("configuration")?t("router-link",{attrs:{tag:"li",to:"/project/".concat(e.project.id,"/configuration")}},[t("a",[t("i",{staticClass:"fas fa-cogs"}),e._v(" "+e._s(e.$t("configuration"))+" ")])]):e._e()],1)]),t("div",{staticClass:"arrow-sidebar",on:{click:function(t){e.expanded=!1}}},[t("i")])])},bm=[],ym={name:"project-sidebar",data:function(){return{algoEnabled:I["a"].ALGORITHMS_ENABLED}},computed:{project:Object(l["a"])("currentProject/project"),configUI:Object(l["a"])("currentProject/configUI"),expanded:Object(l["b"])("currentUser/expandedSidebar")},methods:{clickHandler:function(e){var t=e.target;this.expanded||"I"===t.tagName||"A"===t.tagName||(this.expanded=!0)},isTabDisplayed:function(e){return this.configUI["project-".concat(e,"-tab")]},transitionEndHandler:function(){this.$eventBus.$emit("updateMapSize")}},mounted:function(){this.$refs.sidebar.addEventListener("transitionend",this.transitionEndHandler)},beforeDestroy:function(){this.$refs.sidebar.removeEventListener("transitionend",this.transitionEndHandler)}},wm=ym,jm=(n("a547"),Object(C["a"])(wm,vm,bm,!1,null,"291f472f",null)),km=jm.exports,_m={namespaced:!0,state:function(){return{searchString:"",filtersOpened:!1,filters:{formats:null,vendors:null,selectedTags:null,magnifications:null,resolutions:null,boundsWidth:null,boundsHeight:null,boundsUserAnnotations:null,boundsJobAnnotations:null,boundsReviewedAnnotations:null},currentPage:1,perPage:10,sortField:null,sortOrder:"asc",openedDetails:[]}},mutations:{setSearchString:function(e,t){e.searchString=t},setFiltersOpened:function(e,t){e.filtersOpened=t},setFilter:function(e,t){var n=t.filterName,a=t.propValue;e.filters[n]=a},setCurrentPage:function(e,t){e.currentPage=t},setPerPage:function(e,t){e.perPage=t},setSortField:function(e,t){e.sortField=t},setSortOrder:function(e,t){e.sortOrder=t},setOpenedDetails:function(e,t){e.openedDetails=t}},getters:{nbActiveFilters:function(e){return Object.values(e.filters).filter((function(e){return e})).length},nbEmptyFilters:function(e){return Object.values(e.filters).filter((function(e){return e&&0===e.length})).length}}},xm={namespaced:!0,state:function(){return{previewSize:null,categorization:null,perPage:25,outlineColor:null,annotationType:null,filters:{members:null,reviewers:null,userJobs:null,images:null,termsIds:null,tracksIds:null,tags:null},fromDate:null,toDate:null,currentPages:{}}},mutations:{setPreviewSize:function(e,t){e.previewSize=t},setCategorization:function(e,t){e.categorization=t},setPerPage:function(e,t){e.perPage=t},setOutlineColor:function(e,t){e.outlineColor=t},setAnnotationType:function(e,t){e.annotationType=t},setFilter:function(e,t){var n=t.filterName,a=t.propValue;e.filters[n]=a},setFromDate:function(e,t){e.fromDate=t},setToDate:function(e,t){e.toDate=t},resetPagesAndFilters:function(e){for(var t in e.filters)e.filters[t]=null;e.fromDate=null,e.toDate=null,e.currentPages={}},setCurrentPage:function(e,t){var n=t.prop,r=t.page;a["default"].set(e.currentPages,n,r)}}},Cm={namespaced:!0,state:function(){return{filters:{softwares:null,launchers:null,statuses:null,favorites:null},executionDate:null,currentPage:1,perPage:10,sortField:"created",sortOrder:"desc",openedDetails:[]}},mutations:{setFilter:function(e,t){var n=t.filterName,a=t.propValue;e.filters[n]=a},setExecutionDate:function(e,t){e.executionDate=t},setCurrentPage:function(e,t){e.currentPage=t},setPerPage:function(e,t){e.perPage=t},setSortField:function(e,t){e.sortField=t},setSortOrder:function(e,t){e.sortOrder=t},setOpenedDetails:function(e,t){e.openedDetails=t}},getters:{nbActiveFilters:function(e){return Object.values(e.filters).filter((function(e){return e})).length},nbEmptyFilters:function(e){return Object.values(e.filters).filter((function(e){return e&&0===e.length})).length}}},Om={namespaced:!0,state:function(){return{id:null,name:null}},mutations:{setProject:function(e,t){e.id=t.id,e.name=t.name}},modules:{viewers:{namespaced:!0},listImages:_m,listAnnotations:xm,listJobs:Cm}},$m={name:"cytomine-project",components:{ProjectSidebar:km},data:function(){return{loading:!0,permissionError:!1,notFoundError:!1}},computed:{idProject:function(){return this.$route.params.idProject},project:Object(l["a"])("currentProject/project"),projectModule:function(){return this.$store.state.projects[this.idProject]}},watch:{idProject:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.loadProject();case 3:case"end":return t.stop()}}),t)})))()},projectModule:function(){this.projectModule||(this.$store.commit("currentProject/resetState"),this.$router.push("/projects"))}},methods:{loadProject:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.$store.state.projects[e.idProject]||e.$store.registerModule(["projects",e.idProject],Om),t.next=4,e.$store.dispatch("currentProject/loadProject",e.idProject);case 4:e.loading=!1,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),t.t0.response&&403===t.t0.response.status?e.permissionError=!0:e.notFoundError=!0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},deleteAnnotationEventHandler:function(e){var t=this.$store.state.currentProject.project.clone();"UserAnnotation"===e.type?t.numberOfAnnotations--:t.numberOfReviewedAnnotations--,this.$store.dispatch("currentProject/updateProject",t)}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadProject();case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){this.$eventBus.$on("deleteAnnotation",this.deleteAnnotationEventHandler)},beforeDestroy:function(){this.$eventBus.$off("deleteAnnotation",this.deleteAnnotationEventHandler)}},Tm=$m,Sm=(n("2ca4"),Object(C["a"])(Tm,hm,gm,!1,null,null,null)),Pm=Sm.exports,Am=function(){var e=this,t=e._self._c;return t("div")},Im=[],Dm={computed:{project:Object(l["a"])("currentProject/project"),configUI:Object(l["a"])("currentProject/configUI")},created:function(){this.configUI["project-images-tab"]?this.$router.replace("/project/".concat(this.project.id,"/images")):this.$router.replace("/project/".concat(this.project.id,"/information"))}},Em=Dm,Nm=Object(C["a"])(Em,Am,Im,!1,null,null,null),Mm=Nm.exports,Rm=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-activity-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():t("div",{staticClass:"content-wrapper"},[t("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[t("ul",[t("li",[t("router-link",{attrs:{to:"/project/".concat(e.project.id)}},[e._v(e._s(e.project.name))])],1),t("li",[t("router-link",{attrs:{to:"/project/".concat(e.project.id,"/activity?tab=members")}},[e._v(e._s(e.$t("members-activity")))])],1),t("li",{staticClass:"is-active"},[t("a",{attrs:{href:"#","aria-current":"page"}},[e._v(e._s(e.$t("activity-of-user",{username:e.user.fullName})))])])])]),t("div",{staticClass:"box"},[e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[t("p",{staticClass:"last-update is-size-7 has-text-grey"},[e._v(" "+e._s(e.$t("data-last-updated-on",{time:e.$options.filters.moment(e.lastUpdate,"LTS")}))+" ")]),t("h1",[e._v(e._s(e.$t("activity-of-user",{username:e.user.fullName})))]),t("ul",[e.currentUser.adminByNow?t("li",[t("strong",[e._v(e._s(e.$t("email"))+":")]),e._v(" "),t("a",{attrs:{href:"mailto:".concat(e.user.email)}},[e._v(e._s(e.user.email))])]):e._e(),t("li",[t("strong",[e._v(e._s(e.$t("registration-date"))+":")]),e._v(" "+e._s(e._f("moment")(Number(e.user.created),"ll LTS")))]),t("li",[t("strong",[e._v(e._s(e.$t("first-project-connection"))+":")]),e._v(" "+e._s(e._f("moment")(Number(e.resumeActivity.firstConnection),"ll LTS")))]),t("li",[t("strong",[e._v(e._s(e.$t("last-project-connection"))+":")]),e._v(" "+e._s(e._f("moment")(Number(e.resumeActivity.lastConnection),"ll LTS")))])]),t("hr"),t("div",{staticClass:"level"},[t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("p",{staticClass:"heading"},[e._v(e._s(e.$t("project-connections")))]),t("p",{staticClass:"title"},[e._v(e._s(e.resumeActivity.totalConnections))])])]),t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("p",{staticClass:"heading"},[e._v(e._s(e.$t("image-consultations")))]),t("p",{staticClass:"title"},[e._v(e._s(e.resumeActivity.totalConsultations))])])]),t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("p",{staticClass:"heading"},[e._v(e._s(e.$t("annotation-selections")))]),t("p",{staticClass:"title"},[e._v(e._s(e.resumeActivity.totalAnnotationSelections))])])]),t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("p",{staticClass:"heading"},[e._v(e._s(e.$t("annotation-creations")))]),t("p",{staticClass:"title"},[e._v(e._s(e.resumeActivity.totalAnnotations))])])])]),t("hr"),t("h2",[e._v(e._s(e.$t("detailed-project-connections")))]),t("b-table",{attrs:{data:e.connections.array,"default-sort":"created","default-sort-direction":"desc",paginated:!0,"per-page":e.connectionsPerPage,"pagination-size":"is-small",detailed:"","detail-key":"id"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{label:e.$t("date"),field:"created",sortable:""}},[e._v(" "+e._s(e._f("moment")(Number(a.created),"ll LT"))+" ")]),t("b-table-column",{attrs:{label:e.$t("duration"),field:"time",sortable:""}},[e._v(" "+e._s(e._f("duration")(a.time,"humanize"))+" "),a.online?t("span",{staticClass:"tag is-success"},[e._v(e._s(e.$t("ongoing")))]):e._e()]),t("b-table-column",{attrs:{label:e.$t("number-viewed-images"),field:"countViewedImages",centered:"",sortable:""}},[e._v(" "+e._s(a.countViewedImages)+" ")]),t("b-table-column",{attrs:{label:e.$t("number-annotation-creations"),field:"countCreatedAnnotations",centered:"",sortable:""}},[e._v(" "+e._s(a.countCreatedAnnotations)+" ")])]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-project-connection")))])])]},proxy:!0},{key:"detail",fn:function(e){var n=e.row;return[t("project-connection-details",{key:n.id,attrs:{connection:n}})]}},{key:"footer",fn:function(){return[t("p",{staticClass:"has-text-centered"},[t("a",{staticClass:"button is-link",on:{click:function(t){return e.downloadConnections(e.connections)}}},[e._v(" "+e._s(e.$t("button-export-as-csv"))+" ")])])]},proxy:!0},{key:"bottom-left",fn:function(){return[t("b-select",{attrs:{size:"is-small"},model:{value:e.connectionsPerPage,callback:function(t){e.connectionsPerPage=t},expression:"connectionsPerPage"}},[t("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),t("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),t("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),t("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}],null,!1,1062019546)}),t("hr"),t("h2",[e._v(e._s(e.$t("connections-chart")))]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-narrow"},[t("b-field",{attrs:{label:e.$t("by"),horizontal:""}},[t("b-select",{attrs:{size:"is-small"},model:{value:e.period,callback:function(t){e.period=t},expression:"period"}},[t("option",{attrs:{value:"hour"}},[e._v(e._s(e.$t("hour")))]),t("option",{attrs:{value:"day"}},[e._v(e._s(e.$t("day")))]),t("option",{attrs:{value:"week"}},[e._v(e._s(e.$t("week")))])])],1)],1),t("div",{staticClass:"column is-narrow"},[t("b-field",{attrs:{label:e.$t("from"),horizontal:""}},[t("cytomine-datepicker",{attrs:{resetButton:!1,maxDate:e.endDate||new Date},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1)],1),t("div",{staticClass:"column is-narrow"},[t("b-field",{attrs:{label:e.$t("to"),horizontal:""}},[t("cytomine-datepicker",{attrs:{minDate:e.startDate,maxDate:new Date},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)],1)]),t("div",{staticClass:"chart-container"},[t("last-connections-chart",{attrs:{"css-classes":"chart",project:e.project.id,user:e.idUser,period:e.period,startDate:e.startDate.getTime(),endDate:e.endDate?e.endDate.setHours(23,59,59,999):null,showDates:!0,revision:e.chartRevision}})],1),t("hr"),t("h2",[e._v(e._s(e.$t("detailed-image-consultations")))]),t("b-table",{attrs:{data:e.consultations.array,paginated:!0,"per-page":e.consultationsPerPage,"pagination-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{label:e.$t("overview"),field:"created"}},[t("router-link",{attrs:{to:"/project/".concat(e.project.id,"/image/").concat(a.image)}},[t("image-thumbnail",{key:a.imageThumb,attrs:{url:a.imageThumb,size:128,"extra-parameters":{Authorization:"Bearer "+e.shortTermToken}}})],1)],1),t("b-table-column",{attrs:{label:e.$t("image"),field:"imageName",sortable:""}},[t("router-link",{attrs:{to:"/project/".concat(e.project.id,"/image/").concat(a.image)}},[e._v(" "+e._s(a.imageName)+" ")])],1),t("b-table-column",{attrs:{label:e.$t("duration"),field:"time",sortable:""}},[e._v(" "+e._s(e._f("duration")(a.time,"humanize"))+" ")]),t("b-table-column",{attrs:{label:e.$t("number-consultations"),field:"frequency",centered:"",sortable:""}},[e._v(" "+e._s(a.frequency)+" ")]),t("b-table-column",{attrs:{label:e.$t("first-consultation"),field:"first",centered:"",sortable:""}},[e._v(" "+e._s(e._f("moment")(Number(a.first),"ll LT"))+" ")]),t("b-table-column",{attrs:{label:e.$t("last-consultation"),field:"last",centered:"",sortable:""}},[e._v(" "+e._s(e._f("moment")(Number(a.last),"ll LT"))+" ")]),t("b-table-column",{attrs:{label:e.$t("number-annotation-creations"),field:"countCreatedAnnotations",centered:"",sortable:""}},[e._v(" "+e._s(a.countCreatedAnnotations)+" ")])]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-image-consultation")))])])]},proxy:!0},{key:"footer",fn:function(){return[t("p",{staticClass:"has-text-centered"},[t("a",{staticClass:"button is-link",on:{click:function(t){return e.downloadConnections(e.consultations)}}},[e._v(" "+e._s(e.$t("button-export-as-csv"))+" ")])])]},proxy:!0},{key:"bottom-left",fn:function(){return[t("b-select",{attrs:{size:"is-small"},model:{value:e.consultationsPerPage,callback:function(t){e.consultationsPerPage=t},expression:"consultationsPerPage"}},[t("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),t("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),t("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),t("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}],null,!1,3460362066)})]],2)])],1)},Um=[],zm=function(){var e=this,t=e._self._c;return t("table",{staticClass:"table"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading},on:{"update:active":function(t){e.loading=t}}}),e.loading?e._e():t("tbody",[t("tr",[t("td",[e._v(e._s(e.$t("operating-system")))]),t("td",[e._v(e._s(e.connection.os))])]),t("tr",[t("td",[e._v(e._s(e.$t("browser")))]),t("td",{staticClass:"is-capitalized"},[e._v(" "+e._s(e.connection.browser)+" "),e.connection.browserVersion?t("span",[e._v(e._s(e.connection.browserVersion))]):e._e()])]),e.consultations?t("tr",[t("td",[e._v(e._s(e.$t("image-consultations")))]),t("td",[e.consultations.length>0?t("div",{staticClass:"columns is-multiline"},e._l(e.consultations,(function(n){return t("div",{key:n.id,staticClass:"column"},[t("image-preview",{attrs:{image:n,blindMode:e.blindMode}},[t("div",{staticClass:"details"},[t("p",[t("strong",[e._v(e._s(e.$t("duration"))+":")]),e._v(" "+e._s(e._f("duration")(n.time,"humanize"))+" "),t("br"),t("strong",[e._v(e._s(e.$t("annotation-creations"))+":")]),e._v(" "+e._s(n.countCreatedAnnotations||0)+" ")])])])],1)})),0):t("em",{staticClass:"has-text-grey"},[e._v(e._s(e.$t("no-image-consultation")))])])]):e._e()])],1)},Lm=[],Fm={name:"project-connection-details",components:{ImagePreview:$},props:{connection:Object},data:function(){return{loading:!0,consultations:null}},computed:{blindMode:function(){return this.$store.state.currentProject.project.blindMode}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["ImageConsultationCollection"].fetchAll({projectConnection:e.connection.id});case 3:e.consultations=t.sent.array,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("error-failed-to-fetch-image-consultations")});case 9:e.loading=!1;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},Bm=Fm,qm=(n("5967"),Object(C["a"])(Bm,zm,Lm,!1,null,"9af9c308",null)),Vm=qm.exports,Wm={name:"last-connections-chart",extends:Ui["a"],props:{startDate:Number,endDate:Number,period:String,project:Number,user:Number,showDates:{type:Boolean,default:!1},revision:Number},data:function(){return{chartData:null,projectConnections:null}},computed:{locale:function(){return this.$i18n.locale},queryParams:function(){return this.revision,{afterThan:this.startDate,beforeThan:this.endDate,period:this.period,user:this.user,project:this.project}},momentPeriod:function(){return this.period+"s"}},watch:{queryParams:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.updateChart();case 3:case"end":return t.stop()}}),t)})))()},locale:function(){this.updateLabels(),this.updateChart()}},methods:{fetchData:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r,i,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ProjectConnectionCollection"].fetchConnectionsFrequency(e.queryParams);case 2:n=t.sent.sort(),n.sort((function(e,t){return Number(e.time)<Number(t.time)?-1:1})),a=[],r=rr()(e.startDate),i=e.endDate?rr()(e.endDate):rr()(),o=0;while(r.isBefore(i))n[o]&&r.isSame(Number(n[o].time),e.period)?(a.push(n[o]),o++):a.push({time:r.valueOf(),frequency:0}),r.add(1,e.momentPeriod);e.projectConnections=a,e.chartData.datasets[0].data=e.projectConnections.map((function(e){return e.frequency})),e.updateLabels();case 12:case"end":return t.stop()}}),t)})))()},updateLabels:function(){var e=this;this.chartData.labels=this.projectConnections.map((function(t){var n=Number(t.time);switch(e.period){case"hour":return rr()(n).format(e.showDates?"ll LT":"LT")+" - "+rr()(n).add(1,"hours").format("LT");case"day":return rr()(n).format(e.showDates?"ll":"dddd");case"week":return rr()(n).format("ll")+" - "+rr.a.min(rr()(),rr()(n).endOf("week")).format("ll")}}))},updateChart:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$data._chart.update();case 1:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.chartData={labels:[],datasets:[{label:e.$t("project-connections"),data:[],backgroundColor:"#4480c4",borderWidth:0}]},t.next=3,e.fetchData();case 3:e.renderChart(e.chartData,{maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{min:0}}],xAxes:[{categoryPercentage:.6,gridLines:{display:!1}}]}});case 4:case"end":return t.stop()}}),t)})))()}},Gm={name:"member-activity-details",components:{ImageThumbnail:Ut,CytomineDatepicker:cr,ProjectConnectionDetails:Vm,LastConnectionsChart:Wm},data:function(){return{loading:!0,error:!1,user:null,resumeActivity:null,connections:null,connectionsPerPage:10,consultations:null,consultationsPerPage:10,lastUpdate:null,timeout:null,chartRevision:0,period:"day",startDate:rr()().subtract(1,"month").toDate(),endDate:null}},computed:{currentUser:Object(l["a"])("currentUser/user"),idUser:function(){return Number(this.$route.params.idUser)},project:Object(l["a"])("currentProject/project"),shortTermToken:Object(l["a"])("currentUser/shortTermToken")},methods:{appendShortTermToken:k["a"],fetchData:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.fetchUser(),e.fetchResumeActivity(),e.fetchConnections(),e.fetchConsultations()]);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t["catch"](0),e.error=!0,t.abrupt("return");case 9:e.chartRevision++,e.lastUpdate=new Date,clearTimeout(e.timeout),e.timeout=setTimeout(e.fetchData,I["a"].MEMBERS_ACTIVITY_REFRESH_INTERVAL);case 13:case"end":return t.stop()}}),t,null,[[0,5]])})))()},fetchUser:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.user.fetch();case 2:e.user.fullName=Object(he["a"])(e.user);case 3:case"end":return t.stop()}}),t)})))()},fetchResumeActivity:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.user.fetchResumeActivity(e.project.id);case 2:e.resumeActivity=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchConnections:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ProjectConnectionCollection"].fetchAll({project:e.project.id,user:e.idUser});case 2:e.connections=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchConsultations:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ImageConsultationCollection"].fetchAll({project:e.project.id,user:e.idUser,resume:!0});case 2:e.consultations=t.sent;case 3:case"end":return t.stop()}}),t)})))()},downloadConnections:function(e){window.location.assign(Object(k["a"])(e.downloadURL,this.shortTermToken),"_blank")}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.user=new p["User"]({id:e.idUser}),t.next=3,e.fetchData();case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},destroyed:function(){clearTimeout(this.timeout)}},Hm=Gm,Jm=(n("6fcb"),n("d017"),Object(C["a"])(Hm,Rm,Um,!1,null,"3009d81c",null)),Km=Jm.exports,Ym=function(){var e=this,t=e._self._c;return e.currentUser.adminByNow?t("div",{staticClass:"content-wrapper"},[t("b-field",{staticClass:"radio-buttons-fullwidth"},[t("b-radio-button",{attrs:{"native-value":"dashboard",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("dashboard"))+" ")]),t("b-radio-button",{attrs:{"native-value":"users",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("users"))+" ")]),t("b-radio-button",{directives:[{name:"show",rawName:"v-show",value:e.algoEnabled,expression:"algoEnabled"}],attrs:{"native-value":"trusted-sources",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("trusted-sources"))+" ")]),t("b-radio-button",{attrs:{"native-value":"tags",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("tags"))+" ")]),t("b-radio-button",{attrs:{"native-value":"configuration",type:"is-link"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._v(" "+e._s(e.$t("configuration"))+" ")])],1),t("div",{staticClass:"box"},[t("keep-alive",[t(e.activeComponent,{tag:"component"})],1)],1)],1):t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("access-denied"))+" ")]),t("p",[e._v(e._s(e.$t("insufficient-permission")))])])},Zm=[],Xm=function(){var e=this,t=e._self._c;return t("div",{staticClass:"admin-dashboard-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[t("h2",[e._v(e._s(e.$t("currently")))]),e.currentStats?[t("div",{staticClass:"level"},[t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("p",{staticClass:"heading"},[e._v(e._s(e.$t("online-users")))]),t("p",{staticClass:"title"},[e._v(e._s(e.currentStats.users))])])]),t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("p",{staticClass:"heading"},[e._v(e._s(e.$t("active-projects")))]),t("p",{staticClass:"title"},[e._v(e._s(e.currentStats.projects))])])]),t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("p",{staticClass:"heading"},[e._v(e._s(e.$t("used-storage-space")))]),t("p",{staticClass:"title"},[e.storageStats?[e._v(e._s(Math.round(100*e.storageStats.usedP))+"%")]:[e._v("?")]],2)])])]),e.currentStats.mostActiveProject?t("p",[t("strong",[e._v(e._s(e.$t("most-active-project")))]),e._v(": "),t("router-link",{attrs:{to:"/project/".concat(e.currentStats.mostActiveProject.project.id)}},[e._v(" "+e._s(e.currentStats.mostActiveProject.project.name)+" ")]),e._v(" ("+e._s(e.$tc("count-active-users",e.currentStats.mostActiveProject.users,{count:e.currentStats.mostActiveProject.users}))+") ")],1):e._e()]:t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("failed-fetch-current-stats"))+" ")]),t("hr"),t("h2",[e._v(e._s(e.$t("total")))]),e.totalCounts?t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("table",{staticClass:"table is-fullwidth"},[t("tbody",[t("tr",[t("td",[e._v(e._s(e.totalCounts.users))]),t("td",[e._v(e._s(e.$t("users")))])]),t("tr",[t("td",[e._v(e._s(e.totalCounts.projects))]),t("td",[e._v(e._s(e.$t("projects")))])]),t("tr",[t("td",[e._v(e._s(e.totalCounts.images))]),t("td",[e._v(e._s(e.$t("images-in-projects")))])]),t("tr",[t("td",[e._v(e._s(e.totalCounts.abstractImages))]),t("td",[e._v(e._s(e.$t("uploaded-images")))])])])])]),t("div",{staticClass:"column"},[t("table",{staticClass:"table is-fullwidth"},[t("tbody",[t("tr",[t("td",[e._v(e._s(e.totalCounts.ontologies))]),t("td",[e._v(e._s(e.$t("ontologies")))])]),t("tr",[t("td",[e._v(e._s(e.totalCounts.terms))]),t("td",[e._v(e._s(e.$t("terms")))])]),t("tr",[t("td",[e._v(e._s(e.totalCounts.userAnnotations))]),t("td",[e._v(e._s(e.$t("user-annotations")))])]),t("tr")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.algoEnabled,expression:"algoEnabled"}],staticClass:"column"},[t("table",{staticClass:"table is-fullwidth"},[t("tbody",[t("tr",[t("td",[e._v(e._s(e.totalCounts.softwares))]),t("td",[e._v(e._s(e.$t("algorithms")))])]),t("tr",[t("td",[e._v(e._s(e.totalCounts.jobs))]),t("td",[e._v(e._s(e.$t("analyses")))])]),t("tr",[t("td",[e._v(e._s(e.totalCounts.jobAnnotations))]),t("td",[e._v(e._s(e.$t("analysis-annotations")))])]),t("tr")])])])]):t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("failed-fetch-total-counts"))+" ")]),t("hr"),t("h2",[e._v(e._s(e.$t("last-connections")))]),t("div",{staticClass:"is-flex"},[t("strong",{staticClass:"has-margin-right"},[e._v(e._s(e.$t("period")))]),t("b-select",{model:{value:e.selectedChartOption,callback:function(t){e.selectedChartOption=t},expression:"selectedChartOption"}},e._l(e.chartOptions,(function(n){return t("option",{key:n.label,domProps:{value:n}},[e._v(" "+e._s(n.label)+" ")])})),0)],1),t("div",{staticClass:"chart-container"},[t("last-connections-chart",{attrs:{"css-classes":"chart",startDate:e.selectedChartOption.startDate,period:e.selectedChartOption.period}})],1)]],2)},Qm=[],ef={name:"admin-dashboard",components:{LastConnectionsChart:Wm},data:function(){return{loading:!0,currentStats:null,totalCounts:null,storageStats:null,chartOptions:[],algoEnabled:I["a"].ALGORITHMS_ENABLED,selectedChartOption:null}},methods:{fetchCurrentStats:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.currentStats=null,t.next=3,p["Cytomine"].instance.fetchCurrentStats();case 3:e.currentStats=t.sent;case 4:case"end":return t.stop()}}),t)})))()},fetchTotalCounts:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.totalCounts=null,t.next=3,p["Cytomine"].instance.fetchTotalCounts();case 3:e.totalCounts=t.sent;case 4:case"end":return t.stop()}}),t)})))()},fetchStorageStats:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.storageStats=null,t.next=3,p["Cytomine"].instance.fetchStorageStats();case 3:e.storageStats=t.sent;case 4:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this,t=[{interval:"day",period:"hour"},{interval:"week",period:"day"},{interval:"month",period:"week"},{interval:"year",period:"week"}];this.chartOptions=t.map((function(t){var n=rr()().add(1,t.period+"s").subtract(1,t.interval+"s").startOf(t.period).valueOf();return{label:e.$t("last-".concat(t.interval)),period:t.period,startDate:n}})),this.selectedChartOption=this.chartOptions[0]},activated:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Promise.all([e.fetchCurrentStats(),e.fetchTotalCounts(),e.fetchStorageStats()].map((function(e){return e.catch((function(e){}))})));case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()}},tf=ef,nf=(n("c8a2"),Object(C["a"])(tf,Xm,Qm,!1,null,"2eaa6ab8",null)),af=nf.exports,rf=function(){var e=this,t=e._self._c;return t("div",[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),t("div",{staticClass:"column is-one-half has-text-right-desktop"},[t("button",{staticClass:"button is-link",on:{click:function(t){return e.startUserCreation()}}},[e._v(" "+e._s(e.$t("button-new-user"))+" ")])])]),t("cytomine-table",{attrs:{collection:e.userCollection,currentPage:e.currentPage,perPage:e.perPage,sort:e.sortField,order:e.sortOrder,detailed:!0,revision:e.revision},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:perPage":function(t){e.perPage=t},"update:per-page":function(t){e.perPage=t},"update:sort":function(t){e.sortField=t},"update:order":function(t){e.sortOrder=t}},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{field:"username",label:e.$t("username"),sortable:"",width:"100"}},[e._v(" "+e._s(a.username)+" ")]),t("b-table-column",{attrs:{field:"fullName",label:e.$t("name"),sortable:"",width:"150"}},[e._v(" "+e._s(a.firstname)+" "+e._s(a.lastname)+" ")]),t("b-table-column",{attrs:{field:"role",label:e.$t("role"),sortable:"",width:"50"}},[t("span",{staticClass:"tag",class:e.getRoleData(a).class},[e._v(e._s(e.$t(e.getRoleData(a).label)))])]),t("b-table-column",{attrs:{field:"email",label:e.$t("email"),sortable:"",width:"150"}},[t("a",{attrs:{href:"mailto:".concat(a.email)}},[e._v(e._s(a.email))])]),t("b-table-column",{attrs:{field:"origin",label:e.$t("source"),centered:"",sortable:"",width:"50"}},[t("span",{class:["tag",a.LDAP?"is-link":"is-grey"]},[e._v(" "+e._s(e.displayMemberOrigin(a))+" ")])]),t("b-table-column",{attrs:{field:"created",label:e.$t("created"),sortable:"",width:"150"}},[e._v(" "+e._s(e._f("moment")(Number(a.created),"ll LT"))+" ")]),t("b-table-column",{attrs:{field:"updated",label:e.$t("updated"),sortable:"",width:"150"}},[a.updated?[e._v(e._s(e._f("moment")(Number(a.updated),"ll LT")))]:[e._v("-")]],2),t("b-table-column",{attrs:{label:"",width:"100"}},[t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-link is-small",on:{click:function(t){return e.startUserEdition(a)}}},[e._v(" "+e._s(e.$t("button-edit"))+" ")]),a.enabled?t("button",{staticClass:"button is-danger is-small",on:{click:function(t){return e.lock(a)}}},[e._v(" "+e._s(e.$t("button-lock"))+" ")]):t("button",{staticClass:"button is-success is-small",on:{click:function(t){return e.unlock(a)}}},[e._v(" "+e._s(e.$t("button-unlock"))+" ")])])])]}},{key:"detail",fn:function(e){var n=e.row;return[t("user-details",{attrs:{user:n}})]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-user-fitting-criteria")))])])]},proxy:!0}],null,!1,1975094862)}),t("user-modal",{attrs:{active:e.modal,user:e.editedUser},on:{"update:active":function(t){e.modal=t},addUser:e.refreshUsers,updateUser:e.updateUser}})]]],2)},of=[],sf=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.save()}}},[t("cytomine-modal",{attrs:{active:e.active,title:e.title},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()||!e.isAdminConfirmed()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[t("input",{staticClass:"hidden",attrs:{id:"username",type:"text"}}),t("input",{staticClass:"hidden",attrs:{id:"password",type:"password"}}),t("b-field",{key:"username",attrs:{label:e.$t("username"),horizontal:"",type:{"is-danger":e.errors.has("username")},message:e.errors.first("username")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"username",type:"text",disabled:e.internalUser.id},model:{value:e.internalUser["username"],callback:function(t){e.$set(e.internalUser,"username",t)},expression:"internalUser['username']"}})],1),e._l(e.editableFields,(function(n){var a=n.field,r=n.validationRules;return t("b-field",{key:a,attrs:{label:e.$t("password"===a&&e.editionMode?"password-new":a),horizontal:"",type:{"is-danger":e.errors.has(a)},message:e.errors.first(a)}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:r,expression:"validationRules"}],attrs:{name:a,type:"password"===a?"password":"text","password-reveal":"password"===a},model:{value:e.internalUser[a],callback:function(t){e.$set(e.internalUser,a,t)},expression:"internalUser[field]"}})],1)})),t("b-field",{attrs:{label:e.$t("role"),horizontal:""}},[t("b-select",{model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}},e._l(e.roles,(function(n,a){return t("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(e.$t(n.label))+" ")])})),0)],1),e.isChangingRoleToAdmin()?t("b-field",{attrs:{horizontal:""}},[t("b-checkbox",{model:{value:e.adminConfirm,callback:function(t){e.adminConfirm=t},expression:"adminConfirm"}},[e._v(" "+e._s(e.$t("admin-warning"))+" ")])],1):e._e(),t("b-field",{attrs:{label:e.$t("language"),horizontal:""}},[t("b-select",{model:{value:e.internalUser["language"],callback:function(t){e.$set(e.internalUser,"language",t)},expression:"internalUser['language']"}},e._l(e.languages,(function(n){var a=n.value,r=n.name;return t("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(r)+" ")])})),0)],1),t("b-field",{attrs:{label:e.$t("developer-mode"),horizontal:""}},[t("b-switch",{staticClass:"switch",model:{value:e.internalUser.isDeveloper,callback:function(t){e.$set(e.internalUser,"isDeveloper",t)},expression:"internalUser.isDeveloper"}},[e.internalUser.isDeveloper?[e._v(e._s(e.$t("yes")))]:[e._v(e._s(e.$t("no")))]],2)],1)],2)],1)},cf=[],lf="ROLE_GUEST",uf={value:"EN",name:"English"},df={name:"user-modal",props:{active:Boolean,user:Object},components:{CytomineModal:Ie},$_veeValidate:{validator:"new"},data:function(){return{internalUser:{},rolesWithIds:null,selectedRole:lf,displayErrors:!1,adminConfirm:!1,languages:[{value:"EN",name:"English"},{value:"FR",name:"Français"},{value:"ES",name:"Español"},{value:"NL",name:"Nederlands"}]}},computed:{roles:function(){return zc},editionMode:function(){return Boolean(this.user)},title:function(){return this.$t(this.editionMode?"update-user":"create-user")},editableFields:function(){return[{field:"firstname",validationRules:"required"},{field:"lastname",validationRules:"required"},{field:"email",validationRules:"required|email"},{field:"password",validationRules:this.editionMode?"min:8":"required|min:8"}]},idRole:function(){var e=this;return this.rolesWithIds.find((function(t){return t.authority===e.selectedRole})).id}},watch:{selectedRole:function(){this.adminConfirm=!this.isChangingRoleToAdmin()},active:function(e){if(e){if(!this.rolesWithIds)return this.$notify({type:"error",text:this.$t("notif-unexpected-error")}),void this.$emit("update:active",!1);this.internalUser=this.user?this.user.clone():new p["User"],this.selectedRole=this.user?this.user.role:lf,this.internalUser.language=this.user?this.user.language:uf.value,this.displayErrors=!1,this.adminConfirm=!1}}},methods:{isChangingRoleToAdmin:function(){var e=this.user?this.user.role:lf;return this.isNotAdmin(e)&&!this.isNotAdmin(this.selectedRole)},isNotAdmin:function(e){return"ROLE_ADMIN"!=e&&"ROLE_SUPER_ADMIN"!=e},isAdminConfirmed:function(){return this.adminConfirm||!this.isChangingRoleToAdmin()},save:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return a=e.editionMode?"update":"creation",t.prev=6,t.next=9,e.internalUser.save();case 9:if(e.editionMode&&e.selectedRole===e.user.role){t.next=13;break}return t.next=12,e.internalUser.defineRole(e.idRole);case 12:e.internalUser.role=e.selectedRole;case 13:if(!e.editionMode||!e.internalUser.password){t.next=16;break}return t.next=16,e.internalUser.savePassword(e.internalUser.password);case 16:e.internalUser.password="",e.$notify({type:"success",text:e.$t("notif-success-user-"+a)}),e.$emit("update:active",!1),e.$emit(e.editionMode?"updateUser":"addUser",e.internalUser),t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](6),e.$notify({type:"error",text:e.$t("notif-error-user-"+a)});case 25:case"end":return t.stop()}}),t,null,[[6,22]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["RoleCollection"].fetchAll();case 3:e.rolesWithIds=t.sent.array,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},pf=df,mf=(n("084f"),Object(C["a"])(pf,sf,cf,!1,null,"faba5b5c",null)),ff=mf.exports,hf=function(){var e=this,t=e._self._c;return t("div",{staticClass:"details-wrapper"},[t("b-loading",{staticClass:"small",attrs:{active:e.loading,"is-full-page":!1}}),e.loading?e._e():t("table",{staticClass:"table"},[t("tbody",[e.currentUser.isDeveloper?t("tr",[t("td",[e._v(e._s(e.$t("id")))]),t("td",{attrs:{colspan:"2"}},[e._v(e._s(e.user.id))])]):e._e(),t("tr",[t("td",[e._v(e._s(e.$t("projects")))]),t("td",[e._v(" "+e._s(e.projects?e.projects.length:"?")+" ")]),t("td",[e.projects&&e.projects.length?t("b-collapse",{attrs:{open:!1},scopedSlots:e._u([{key:"trigger",fn:function(n){var a=n.open;return[t("button",{staticClass:"button is-small"},[e._v(" "+e._s(e.$t(a?"button-hide":"button-show"))+" ")])]}}],null,!1,3507901580)},[t("ul",e._l(e.projects,(function(n){return t("li",{key:n.id},[t("router-link",{attrs:{to:"/project/".concat(n.id)}},[e._v(" "+e._s(n.name)+" ")])],1)})),0)]):e._e()],1)]),t("tr",[t("td",[e._v(e._s(e.$t("managed-projects")))]),t("td",[e._v(" "+e._s(e.managedProjects?e.managedProjects.length:"?")+" ")]),t("td",[e.managedProjects&&e.managedProjects.length?t("b-collapse",{attrs:{open:!1},scopedSlots:e._u([{key:"trigger",fn:function(n){var a=n.open;return[t("button",{staticClass:"button is-small"},[e._v(" "+e._s(e.$t(a?"button-hide":"button-show"))+" ")])]}}],null,!1,3507901580)},[t("ul",e._l(e.managedProjects,(function(n){return t("li",{key:n.id},[t("router-link",{attrs:{to:"/project/".concat(n.id)}},[e._v(" "+e._s(n.name)+" ")])],1)})),0)]):e._e()],1)]),t("tr",[t("td",[e._v(e._s(e.$t("user-annotations")))]),t("td",[e._v(" "+e._s(null==e.nbAnnotations?"?":e.nbAnnotations)+" ")]),t("td")]),e.currentUser.id!==e.user.id?t("tr",[t("td",[e._v(e._s(e.$t("actions")))]),t("td",{attrs:{colspan:"2"}},[t("button",{staticClass:"button is-link is-small",on:{click:function(t){return e.switchUser()}}},[e._v(" "+e._s(e.$t("connect-as-user",{username:e.user.username}))+" ")])])]):e._e()])])],1)},gf=[],vf={props:{user:Object},data:function(){return{loading:!0,projects:null,managedProjects:null,nbAnnotations:null,showProjects:!1,showManagedProjects:!1}},computed:{currentUser:Object(l["a"])("currentUser/user")},methods:{fetchProjects:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ProjectCollection"].fetchAll({filterKey:"user",filterValue:e.user.id,light:!0});case 2:e.projects=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},fetchManagedProjects:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ProjectCollection"].fetchAll({filterKey:"user",filterValue:e.user.id,light:!0,admin:!0});case 2:e.managedProjects=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},fetchNbAnnotations:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.user.fetchNbAnnotations();case 2:e.nbAnnotations=t.sent;case 3:case"end":return t.stop()}}),t)})))()},switchUser:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["Cytomine"].instance.switchUser(e.user.username);case 3:return t.next=5,e.$store.dispatch("currentUser/fetchUser");case 5:e.$router.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-failed-to-connect-as-user")});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.fetchProjects(),e.fetchManagedProjects(),e.fetchNbAnnotations()].map((function(e){return e.catch((function(e){}))})));case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()}},bf=vf,yf=(n("1b4b"),Object(C["a"])(bf,hf,gf,!1,null,"5bd2ab78",null)),wf=yf.exports,jf={name:"admin-users",components:{CytomineTable:G,UserModal:ff,UserDetails:wf},data:function(){return{loading:!0,error:!1,addUserModal:!1,searchString:"",currentPage:1,perPage:25,sortField:"username",sortOrder:"",revision:0,modal:!1,editedUser:null}},computed:{roles:function(){return zc},userCollection:function(){var e=new p["UserCollection"]({withRoles:!0});return this.searchString&&(e["fullName"]={ilike:encodeURIComponent(this.searchString)}),e}},methods:{displayMemberOrigin:function(e){var t;return"LDAP"===e.origin&&(t="LDAP"),t="BOOTSTRAP"===e.origin?"system":"manual",this.$t(t)},getRoleData:function(e){return this.roles[e.role]},lock:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.lock();case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-user-lock")});case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},unlock:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.unlock();case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-user-unlock")});case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},startUserCreation:function(){this.editedUser=null,this.modal=!0},refreshUsers:function(){this.revision++},startUserEdition:function(e){this.editedUser=e,this.modal=!0},updateUser:function(e){this.revision++,this.editedUser.populate(e)}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.revision++,e.loading=!1;case 2:case"end":return t.stop()}}),t)})))()}},kf=jf,_f=Object(C["a"])(kf,rf,of,!1,null,null,null),xf=_f.exports,Cf=function(){var e=this,t=e._self._c;return t("div",[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[e.trustedSources?[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),t("div",{staticClass:"column is-one-half has-text-right-desktop"},[t("button",{staticClass:"button is-link",on:{click:function(t){return e.startSourceCreation()}}},[e._v(" "+e._s(e.$t("button-new-trusted-source"))+" ")])])]),t("b-table",{attrs:{data:e.filteredTrustedSources,paginated:!0,"per-page":e.perPage,"pagination-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{field:"source",label:e.$t("trusted-source"),width:"400"}},[t("software-source",{attrs:{source:a}})],1),t("b-table-column",{attrs:{label:"",width:"50"}},[t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-link is-small",on:{click:function(t){return e.startSourceEdition(a)}}},[e._v(" "+e._s(e.$t("button-edit"))+" ")]),t("button",{staticClass:"button is-link is-small",on:{click:function(t){return e.refresh(a)}}},[e._v(" "+e._s(e.$t("button-refresh"))+" ")]),t("button",{staticClass:"button is-danger is-small",on:{click:function(t){return e.deleteSourceDialog(a)}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")])])])]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-trusted-source-fitting-criteria")))])])]},proxy:!0},{key:"bottom-left",fn:function(){return[t("b-select",{attrs:{size:"is-small"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[t("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),t("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),t("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),t("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}],null,!1,3431149966)}),t("trusted-source-modal",{attrs:{active:e.modal,source:e.editedSource},on:{"update:active":function(t){e.modal=t},addSource:e.addSource,updateSource:e.updateSource}})]:t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])])]],2)},Of=[],$f=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.save()}}},[t("cytomine-modal",{attrs:{active:e.active,title:e.title},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},e._l(e.editableFields,(function(n){var a=n.field,r=n.validationRules,i=n.disabled;return t("b-field",{key:a,attrs:{label:e.$t(e.fieldLabels[a]),horizontal:"",type:{"is-danger":e.errors.has(a)},message:e.errors.first(a)}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:r,expression:"validationRules"}],attrs:{name:a,placeholder:"",disabled:i},model:{value:e.internalSource[a],callback:function(t){e.$set(e.internalSource,a,t)},expression:"internalSource[field]"}})],1)})),1)],1)},Tf=[],Sf={name:"trusted-source-modal",props:{active:Boolean,source:Object},components:{CytomineModal:Ie},$_veeValidate:{validator:"new"},data:function(){return{internalSource:{},displayErrors:!1}},computed:{editionMode:function(){return Boolean(this.source)},title:function(){return this.$t(this.editionMode?"update-source":"create-source")},editableFields:function(){return[{field:"username",validationRules:"required",disabled:!1},{field:"dockerUsername",validationRules:"required",disabled:!1},{field:"prefix",validationRules:"",disabled:!1},{field:"provider",validationRules:"required",disabled:!0},{field:"environmentProvider",validationRules:"required",disabled:!0}]},fieldLabels:function(){return{provider:"source-provider",username:"source-provider-name",environmentProvider:"environment-provider",dockerUsername:"environment-provider-name",prefix:"prefix"}}},watch:{active:function(e){e&&(this.internalSource=this.formatSource(this.source?this.source.clone():new p["TrustedSource"]),this.displayErrors=!1)}},methods:{save:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return a=e.editionMode?"update":"creation",t.prev=6,t.next=9,e.internalSource.save();case 9:r=t.sent,e.internalSource=e.formatSource(r),e.$notify({type:"success",text:e.$t("notif-success-source-"+a)}),e.$emit("update:active",!1),e.$emit(e.editionMode?"updateSource":"addSource",e.internalSource),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](6),e.$notify({type:"error",text:e.$t("notif-error-source-"+a)});case 19:case"end":return t.stop()}}),t,null,[[6,16]])})))()},formatSource:function(e){return e.environmentProvider="docker",e.provider=e.provider?e.provider:"github",e}}},Pf=Sf,Af=(n("27a6"),Object(C["a"])(Pf,$f,Tf,!1,null,"0a1b2893",null)),If=Af.exports,Df={name:"admin-software",components:{SoftwareSource:Nn,TrustedSourceModal:If},data:function(){return{loading:!0,trustedSources:null,addSourceModal:!1,searchString:"",perPage:25,modal:!1,editedSource:null}},computed:{regexp:function(){return Object(Kt["a"])(this.searchString)},filteredTrustedSources:function(){var e=this;return this.searchString?this.trustedSources.filter((function(t){return e.regexp.test(t.name)||e.regexp.test(t.username)||e.regexp.test(t.provider)||e.regexp.test(t.dockerUsername)||e.regexp.test(t.environmentProvider)})):this.trustedSources}},methods:{formatSource:function(e){e.environmentProvider="docker"},refresh:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.refresh();case 3:t.$notify({type:"success",text:t.$t("notif-success-source-refresh")}),n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-source-refresh")});case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()},startSourceCreation:function(){this.editedSource=null,this.modal=!0},addSource:function(e){this.formatSource(e),this.trustedSources.push(e)},startSourceEdition:function(e){this.editedSource=e,this.modal=!0},updateSource:function(e){this.formatSource(e),this.editedSource.populate(e)},deleteSourceDialog:function(e){var t=this;this.$buefy.dialog.confirm({title:this.$t("delete"),message:this.$t("delete-source-confirmation-message",{username:e.username,dockerUsername:e.dockerUsername}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.deleteSource(e)}})},deleteSource:function(e){try{e.delete(),this.trustedSources.splice(this.trustedSources.indexOf(e),1),this.$notify({type:"success",text:this.$t("notif-success-source-delete",{username:e.username,dockerUsername:e.dockerUsername})})}catch(t){this.$notify({type:"error",text:this.$t("notif-error-source-delete",{username:e.username,dockerUsername:e.dockerUsername})})}}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["TrustedSourceCollection"].fetchAll();case 3:n=t.sent.array,n.forEach((function(t){return e.formatSource(t)})),e.trustedSources=n,t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:e.loading=!1;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},Ef=Df,Nf=Object(C["a"])(Ef,Cf,Of,!1,null,null,null),Mf=Nf.exports,Rf=function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v(e._s(e.$t("welcome-message")))]),t("cytomine-quill-editor",{model:{value:e.welcomeConfig.value,callback:function(t){e.$set(e.welcomeConfig,"value",t)},expression:"welcomeConfig.value"}}),t("p",{staticClass:"has-text-right"},[t("button",{staticClass:"button is-link",on:{click:e.save}},[e._v(e._s(e.$t("button-save")))])])],1)},Uf=[],zf=n("f320"),Lf={name:"admin-configuration",components:{CytomineQuillEditor:zf["a"]},data:function(){return{welcomeConfig:new p["Configuration"]({key:I["a"].CONFIG_KEY_WELCOME,value:"",readingRole:"all"})}},methods:{save:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.welcomeConfig.value){t.next=6;break}return t.next=4,e.welcomeConfig.delete();case 4:t.next=8;break;case 6:return t.next=8,e.welcomeConfig.save();case 8:e.$notify({type:"success",text:e.$t("notif-success-welcome-message-update")}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-welcome-message-update")});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.welcomeConfig.fetch();case 3:t.next=7;break;case 5:t.prev=5,t.t0=t["catch"](0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})))()}},Ff=Lf,Bf=(n("57ec"),Object(C["a"])(Ff,Rf,Uf,!1,null,"5d85b1f4",null)),qf=Bf.exports,Vf=function(){var e=this,t=e._self._c;return t("div",[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[e.tags?[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-quarter"},[t("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})],1),t("div",{staticClass:"column is-one-half has-text-right-desktop"},[t("button",{staticClass:"button is-link",on:{click:function(t){return e.startTagCreation()}}},[e._v(" "+e._s(e.$t("button-new-tag"))+" ")])])]),t("b-table",{attrs:{data:e.filteredTags,paginated:!0,"per-page":e.perPage,"pagination-size":"is-small"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{field:"name",label:e.$t("name"),sortable:""}},[e._v(" "+e._s(a.name)+" ")]),t("b-table-column",{attrs:{field:"creatorName",label:e.$t("creator"),sortable:""}},[e._v(" "+e._s(a.creatorName)+" ")]),t("b-table-column",{attrs:{field:"created",label:e.$t("created"),sortable:""}},[e._v(" "+e._s(e._f("moment")(Number(a.created),"ll"))+" ")]),t("b-table-column",{attrs:{label:" ",centered:""}},[t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-small is-link",on:{click:function(t){return e.startTagEdition(a)}}},[e._v(" "+e._s(e.$t("button-edit"))+" ")]),t("button",{staticClass:"button is-small is-danger",on:{click:function(t){return e.deleteTagDialog(a)}}},[e._v(" "+e._s(e.$t("button-delete"))+" ")])])])]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-tag-fitting-criteria")))])])]},proxy:!0},{key:"bottom-left",fn:function(){return[t("b-select",{attrs:{size:"is-small"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[t("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),t("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),t("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),t("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}],null,!1,2904442176)}),t("tag-modal",{attrs:{active:e.modal,tag:e.editedTag},on:{"update:active":function(t){e.modal=t},addTag:e.addTag,updateTag:e.updateTag}})]:t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])])]],2)},Wf=[],Gf=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.save()}}},[t("cytomine-modal",{attrs:{active:e.active,title:e.title},on:{close:function(t){return e.$emit("update:active",!1)}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("update:active",!1)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[t("b-field",{attrs:{label:e.$t("name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name"},model:{value:e.internalTag["name"],callback:function(t){e.$set(e.internalTag,"name",t)},expression:"internalTag['name']"}})],1)],1)],1)},Hf=[],Jf={name:"tag-modal",props:{active:Boolean,tag:Object},components:{CytomineModal:Ie},$_veeValidate:{validator:"new"},data:function(){return{internalTag:{},displayErrors:!1}},computed:{editionMode:function(){return Boolean(this.tag)},title:function(){return this.$t(this.editionMode?"update-tag":"create-tag")}},watch:{active:function(e){e&&(this.internalTag=this.tag?this.tag.clone():new p["Tag"],this.displayErrors=!1)}},methods:{save:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return a=e.editionMode?"update":"creation",t.prev=6,t.next=9,e.internalTag.save();case 9:e.$notify({type:"success",text:e.$t("notif-success-tag-"+a)}),e.$emit("update:active",!1),e.$emit(e.editionMode?"updateTag":"addTag",e.internalTag),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](6),e.$notify({type:"error",text:e.$t("notif-error-tag-"+a)});case 17:case"end":return t.stop()}}),t,null,[[6,14]])})))()}}},Kf=Jf,Yf=Object(C["a"])(Kf,Gf,Hf,!1,null,null,null),Zf=Yf.exports,Xf={name:"admin-tags",components:{TagModal:Zf},data:function(){return{loading:!0,tags:null,addTagModal:!1,searchString:"",perPage:25,modal:!1,editedTag:null}},computed:{regexp:function(){return Object(Kt["a"])(this.searchString)},filteredTags:function(){var e=this;return this.searchString?this.tags.filter((function(t){return e.regexp.test(t.name)})):this.tags}},methods:{startTagCreation:function(){this.editedTag=null,this.modal=!0},addTag:function(e){this.tags.push(e)},startTagEdition:function(e){this.editedTag=e,this.modal=!0},updateTag:function(e){this.editedTag.populate(e)},deleteTagDialog:function(e){var t=this;this.$buefy.dialog.confirm({title:this.$t("delete"),message:this.$t("delete-tag-confirmation-message",{tagName:e.name}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.deleteTag(e)}})},deleteTag:function(e){try{e.delete(),this.tags.splice(this.tags.indexOf(e),1),this.$notify({type:"success",text:this.$t("notif-success-tag-delete",{tagName:e.name})})}catch(t){this.$notify({type:"error",text:this.$t("notif-error-tag-delete",{tagName:this.currentTag.name})})}}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["TagCollection"].fetchAll();case 3:e.tags=t.sent.array,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:e.loading=!1;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},Qf=Xf,eh=Object(C["a"])(Qf,Vf,Wf,!1,null,null,null),th=eh.exports,nh="dashboard",ah={name:"admin-panel",data:function(){return{activeTab:0,tabNames:["dashboard","users","trusted-sources","tags","configuration"],algoEnabled:I["a"].ALGORITHMS_ENABLED}},computed:{currentUser:Object(l["a"])("currentUser/user"),queriedTab:function(){return this.$route.query.tab},activeComponent:function(){switch(this.activeTab){case"dashboard":return af;case"users":return xf;case"configuration":return qf;case"trusted-sources":return Mf;case"tags":return th}throw new Error("Cannot load active tabs "+this.activeTab)}},watch:{queriedTab:function(){this.changeTab()},activeTab:function(){(this.activeTab!==nh||this.queriedTab)&&this.$router.push("?tab=".concat(this.activeTab))}},methods:{changeTab:function(){this.activeTab=this.queriedTab||nh,this.activeComponent||(this.activeTab=nh)}},created:function(){this.changeTab()}},rh=ah,ih=(n("b5e2"),Object(C["a"])(rh,Ym,Zm,!1,null,"779e7332",null)),oh=ih.exports,sh=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"box"},[t("h2",[e._v(e._s(e.$t("activity-logs")))]),t("activity-logs",{attrs:{idUser:e.currentUser.id}})],1)])},ch=[],lh={name:"user-activity",components:{ActivityLogs:ko},computed:{currentUser:Object(l["a"])("currentUser/user")}},uh=lh,dh=(n("2bbd"),Object(C["a"])(uh,sh,ch,!1,null,"0e92280e",null)),ph=dh.exports,mh=function(){var e=this,t=e._self._c;return t("h1",[e._v(" "+e._s(e.$t("page-not-found"))+" ")])},fh=[],hh={name:"page-not-found"},gh=hh,vh=(n("8e6b"),Object(C["a"])(gh,mh,fh,!1,null,"38a884ba",null)),bh=vh.exports,yh=function(){var e=this,t=e._self._c;return t("div",{staticClass:"software-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():t("div",{staticClass:"content-wrapper"},[t("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[t("ul",[t("li",[t("router-link",{attrs:{to:"/algorithm"}},[e._v(e._s(e.$t("algorithms")))])],1),t("li",{staticClass:"is-active"},[t("a",{attrs:{href:"#","aria-current":"page"}},[e._v(e._s(e.software.fullName))])])])]),t("div",{staticClass:"box"},[e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):[t("h1",[e._v(e._s(e.software.fullName))]),t("div",{staticClass:"description"},[t("cytomine-description",{attrs:{object:e.software,canEdit:e.canManageSoftware}})],1),t("hr"),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("h2",[e._v(e._s(e.$t("projects")))]),e.projects.length?e._l(e.projects,(function(n,a){return t("span",{key:n.id},[t("router-link",{attrs:{to:"/project/".concat(n.id)}},[e._v(e._s(n.name))]),a<e.projects.length-1?t("span",[e._v(", ")]):e._e()],1)})):e.nbProjects>0?t("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("used-in-project-no-access"))+" ")]):t("em",{staticClass:"has-text-grey"},[e._v(" "+e._s(e.$t("not-used-in-any-project"))+" ")])],2),t("div",{staticClass:"column"},[t("h2",[e._v(e._s(e.$t("statistics")))]),t("div",{staticClass:"chart-container"},[t("software-statistics-chart",{attrs:{"css-classes":"chart",software:e.software}})],1)])]),t("hr"),t("h2",[e._v(e._s(e.$t("software-parameters")))]),t("b-table",{attrs:{data:e.softwareParameters,"default-sort":"created","default-sort-direction":"desc",paginated:!0,"per-page":e.softwareParametersPerPage,"pagination-size":"is-small",detailed:"","detail-key":"id"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("b-table-column",{attrs:{label:e.$t("name"),field:"name",sortable:""}},[e._v(" "+e._s(a.humanName)+" ")]),t("b-table-column",{attrs:{label:e.$t("type"),field:"type",sortable:""}},[e._v(" "+e._s(e.$t(a.type.toLowerCase()))+" ")]),t("b-table-column",{attrs:{label:e.$t("default-value"),field:"defaultValue"}},[e._v(" "+e._s(a.defaultParamValue)+" ")]),t("b-table-column",{attrs:{label:e.$t("mandatory"),field:"mandatory"}},[a.required?[e._v(e._s(e.$t("yes")))]:[e._v(e._s(e.$t("no")))]],2)]}},{key:"empty",fn:function(){return[t("div",{staticClass:"content has-text-grey has-text-centered"},[t("p",[e._v(e._s(e.$t("no-software-parameter")))])])]},proxy:!0},{key:"detail",fn:function(e){var n=e.row;return[t("software-parameter-details",{key:n.id,attrs:{parameter:n}})]}},{key:"bottom-left",fn:function(){return[t("b-select",{attrs:{size:"is-small"},model:{value:e.softwareParametersPerPage,callback:function(t){e.softwareParametersPerPage=t},expression:"softwareParametersPerPage"}},[t("option",{attrs:{value:"10"}},[e._v(e._s(e.$t("count-per-page",{count:10})))]),t("option",{attrs:{value:"25"}},[e._v(e._s(e.$t("count-per-page",{count:25})))]),t("option",{attrs:{value:"50"}},[e._v(e._s(e.$t("count-per-page",{count:50})))]),t("option",{attrs:{value:"100"}},[e._v(e._s(e.$t("count-per-page",{count:100})))])])]},proxy:!0}],null,!1,1795709409)}),t("hr"),t("h2",[e._v(e._s(e.$t("other-information")))]),t("software-details",{attrs:{software:e.software,"excluded-properties":["projects","name","description"]}})]],2)])],1)},wh=[],jh=function(){var e=this,t=e._self._c;return e.error?t("b-message",{attrs:{type:"is-danger","has-icon":"","icon-size":"is-small",size:"is-small"}},[t("h2",[e._v(" "+e._s(e.$t("error"))+" ")]),t("p",[e._v(" "+e._s(e.$t("unexpected-error-info-message"))+" ")])]):t("table",{staticClass:"table"},[t("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():t("tbody",[e.isPropDisplayed("id")&&e.currentUser.isDeveloper?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("id")))]),t("td",{staticClass:"prop-content"},[e._v(e._s(e.parameter.id))])]):e._e(),e.isPropDisplayed("description")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("description")))]),t("td",{staticClass:"prop-content"},[t("cytomine-description",{attrs:{object:e.parameter,canEdit:e.canManageParameter}})],1)]):e._e(),e.isPropDisplayed("name")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("name")))]),t("td",{staticClass:"prop-content"},[t("code",[e._v(e._s(e.parameter.name))])])]):e._e(),e.isPropDisplayed("valueKey")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("value-key")))]),t("td",{staticClass:"prop-content"},[t("code",[e._v(e._s(e.parameter.valueKey))])])]):e._e(),e.isPropDisplayed("commandLineFlag")?t("tr",[t("td",{staticClass:"prop-label"},[e._v(e._s(e.$t("command-line-flag")))]),t("td",{staticClass:"prop-content"},[t("code",[e._v(e._s(e.parameter.commandLineFlag))])])]):e._e()])],1)},kh=[],_h={name:"software-parameter-details",props:{parameter:Object,excludedProperties:{type:Array,default:function(){return[]}}},components:{CytomineDescription:qe["a"]},data:function(){return{loading:!0,error:!1}},computed:{currentUser:Object(l["a"])("currentUser/user"),canManageParameter:function(){return this.currentUser.adminByNow}},methods:{isPropDisplayed:function(e){return!this.excludedProperties.includes(e)},fetchProjects:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.error=!1,e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()}},created:function(){this.fetchProjects()}},xh=_h,Ch=(n("ab00"),Object(C["a"])(xh,jh,kh,!1,null,"5b5f6240",null)),Oh=Ch.exports,$h="#eee",Th={name:"software-statistics-chart",extends:Ui["b"],props:{software:Object,startDate:Number,endDate:Number},data:function(){return{chartData:null}},computed:{queryParams:function(){return{startDate:this.startDate,endDate:this.endDate}}},watch:{queryParams:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.doRenderChart();case 1:case"end":return t.stop()}}),t)})))()}},methods:{doRenderChart:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object.values(Ro),a=n.map((function(t){return e.software[t.statLabel]})),r=n.map((function(e){var t=Object(Mr["a"])(e.color||$h),n=Object(Et["a"])(t,3),a=n[0],r=n[1],i=n[2],o=.8;return"rgba(".concat(a*o,", ").concat(r*o,", ").concat(i*o,", 1)")})),e.$emit("nbElems",a.length),e.renderChart({labels:n.map((function(t){return e.$t(t.label)})),datasets:[{data:a,backgroundColor:n.map((function(e){return e.color||$h})),borderColor:r,borderWidth:1,hoverBorderColor:r}]},{maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{ticks:{min:0,suggestedMax:Math.round(1.2*Math.max.apply(Math,Object(L["a"])(a)))+1}}],yAxes:[{gridLines:{display:!1},categoryPercentage:.6}]}});case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addPlugin(Fi.a),e.doRenderChart();case 2:case"end":return t.stop()}}),t)})))()}},Sh={name:"software-information",components:{SoftwareDetails:Wn,SoftwareStatisticsChart:Th,SoftwareParameterDetails:Oh,CytomineDescription:qe["a"]},data:function(){return{loading:!0,error:!1,software:null,softwareParameters:[],softwareParametersPerPage:10,projects:[],chartRevision:0}},computed:{currentUser:Object(l["a"])("currentUser/user"),idSoftware:function(){return Number(this.$route.params.idSoftware)},canManageSoftware:function(){return this.currentUser.adminByNow},nbProjects:function(){return this.projects.length}},watch:{idSoftware:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.loadSoftware();case 3:case"end":return t.stop()}}),t)})))()},software:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.chartRevision++;case 1:case"end":return t.stop()}}),t)})))()}},methods:{loadSoftware:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.fetchSoftware(),e.fetchSoftwareParameters(),e.fetchProjects()]);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t["catch"](0),e.error=!0,t.abrupt("return");case 9:e.chartRevision++;case 10:case"end":return t.stop()}}),t,null,[[0,5]])})))()},fetchSoftware:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["Software"].fetch(e.idSoftware);case 2:e.software=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchSoftwareParameters:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["SoftwareParameterCollection"].fetchAll({filterKey:"software",filterValue:e.idSoftware});case 2:e.softwareParameters=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},fetchProjects:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ProjectCollection"].fetchAll({filterKey:"software",filterValue:e.idSoftware});case 2:e.projects=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadSoftware();case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()}},Ph=Sh,Ah=(n("3482"),n("2e2a"),Object(C["a"])(Ph,yh,wh,!1,null,"067d1ba2",null)),Ih=Ah.exports,Dh=[{path:"/",component:M},{path:"/projects",component:pt},{path:"/storage",component:Gt},{path:"/ontology/:idOntology?",component:mn},{path:"/algorithm",component:Yn},{path:"/algorithm/:idSoftware",component:Ih},{path:"/advanced-search/:searchString?",component:Zc},{path:"/account",component:Wc},{path:"/project/:idProject",component:Pm,children:[{path:"",component:Mm},{path:"images",component:Ga},{path:"image/:idImages",component:fm},{path:"image/:idImages/slice/:idSlices",component:fm},{path:"image/:idImage/information",component:Xa},{path:"image/:idImages/annotation/:idAnnotation",component:fm},{path:"image/:idImages/slice/:idSlices/annotation/:idAnnotation",component:fm},{path:"annotations",component:Di},{path:"analysis",component:ys},{path:"activity",component:Ao},{path:"activity/user/:idUser",component:Km},{path:"information",component:Cs},{path:"configuration",component:Dc},{path:"*",component:bh}]},{path:"/activity",component:ph},{path:"/admin",component:oh},{path:"/userdashboard",redirect:"/"},{path:"/project",redirect:"/projects"},{path:"/explorer",redirect:"/"},{path:"/upload",redirect:"/storage"},{path:"/software",redirect:"/algorithm"},{path:"/software/:idSoftware",redirect:"/algorithm/:idSoftware"},{path:"/activity",redirect:"/"},{path:"/activity-:idProject-",redirect:"/project/:idProject/activity"},{path:"/activity-:idProject-:idUser",redirect:"/project/:idProject/activity/user/:idUser"},{path:"/search-",redirect:"/advanced-search"},{path:"/admin-tabs-dashboard",redirect:"/admin?tab=dashboard"},{path:"/admin-tabs-users",redirect:"/admin?tab=users"},{path:"/admin-tabs-groups",redirect:"/"},{path:"/admin-tabs-permissions",redirect:"/"},{path:"/admin-tabs-configuration",redirect:"/admin?tab=configuration"},{path:"/tabs-dashboard-:idProject",redirect:"/project/:idProject/information"},{path:"/tabs-images-:idProject",redirect:"/project/:idProject/images"},{path:"/tabs-annotations-:idProject",redirect:"/project/:idProject/annotations"},{path:"/tabs-annotationproperties-:idProject-:idAnnot",redirect:"/project/:idProject"},{path:"/tabs-imageproperties-:idProject-:idImage",redirect:"/project/:idProject"},{path:"/tabs-imageproperties-:idProject-:idImage",redirect:"/project/:idProject"},{path:"/tabs-algos-:idProject",redirect:"/project/:idProject/analysis"},{path:"/tabs-config-:idProject",redirect:"/project/:idProject/configuration"},{path:"/tabs-usersconfig-:idProject",redirect:"/project/:idProject/configuration?tab=members"},{path:"/tabs-#tabs-useractivity-:idProject-:idUser",redirect:"/project/:idProject/activity/user/:idUser"},{path:"/tabs-image-:idProject-:idImage-0",redirect:"/project/:idProject/image/:idImage"},{path:"/tabs-image-:idProject-:idImage-:idAnnotation",redirect:"/project/:idProject/image/:idImage/annotation/:idAnnotation"},{path:"/tabs-image-:idProject-:idImage-",redirect:"/project/:idProject/image/:idImage"},{path:"*",component:bh}],Eh=new r["a"]({routes:Dh,linkActiveClass:"is-active"}),Nh=Eh,Mh=n("289d"),Rh=n("7bb1"),Uh=n("ee98"),zh=n.n(Uh),Lh=n("e37d"),Fh=n("2ead"),Bh=n.n(Fh),qh=n("3717"),Vh=n.n(qh),Wh=n("63d6"),Gh=n.n(Wh),Hh=n("df4d"),Jh=n("1cf8"),Kh=n("656a"),Yh=n("dcd0"),Zh=n("9cff"),Xh=n("451a"),Qh=n("78db"),eg=n("0414"),tg={tierSizeCalculation:{type:String},extent:{type:Array},size:{type:Array},url:{type:[String,Function],required:!1},urls:{type:Array},tileSize:{type:Number,default:eg["b"]}},ng=function(){return{tierSizeInTiles:null,tileCountUpToTier:null,resolutions:null}};function ag(){var e=this.size,t=e[0],n=e[1],a=[],r=this.tileSize;while(t>r||n>r)a.push([Math.ceil(t/r),Math.ceil(n/r)]),r+=r;a.push([1,1]),a.reverse();for(var i=[1],o=[0],s=1,c=a.length;s<c;s++)i.push(1<<s),o.push(a[s-1][0]*a[s-1][1]+o[s-1]);i.reverse(),this.tierSizeInTiles=a,this.tileCountUpToTier=o,this.resolutions=i}var rg,ig,og={createSource:function(){if(!this.url&&!this.urls)throw new Error("Either url or urls properties must be set for ZoomifySource");var e=new Yh["a"]({attributions:this.attributions,cacheSize:this.cacheSize,crossOrigin:this.crossOrigin,projection:this.projection,reprojectionErrorThreshold:this.reprojectionErrorThreshold,url:this.urlTmpl,tierSizeCalculation:this.tierSizeCalculation,size:this.size,extent:this.extent,transition:this.transition,tileSize:this.tileSize});if(this.urls){var t=Object(Zh["b"])(this.urls.map(this.createFromTemplate(e)));e.setTileUrlFunction(t)}return e},createTileGrid:function(){var e=this.extent||[0,-this.size[1],this.size[0],0];return new Qh["a"]({tileSize:this.tileSize,extent:e,origin:[e[0],e[3]],resolutions:this.resolutions})},createFromTemplate:function(e){var t=this;return function(n){return function(a){if(a){var r=a[0],i=a[1],o=-a[2]-1,s=i+o*t.tierSizeInTiles[r][0],c=e.tileGrid.getTileSize(r),l=Array.isArray(c)?c[0]:c,u=(s+t.tileCountUpToTier[r])/l|0,d={z:r,x:i,y:o,tileIndex:s,TileGroup:"TileGroup"+u};return n.replace(/\{(\w+?)\}/g,(function(e,t){return d[t]}))}}}}},sg={urls:function(){if(this.$source){var e=Object(Zh["b"])(this.urls.map(this.createFromTemplate(this.$source)));this.$source.setTileUrlFunction(e,this.urls.join("\n"))}}},cg={name:"vl-source-zoomify",mixins:[Xh["a"]],props:tg,data:ng,methods:og,watch:sg,created:ag},lg=cg,ug=Object(C["a"])(lg,rg,ig,!1,null,null,null),dg=ug.exports;function pg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pg.installed||(pg.installed=!0,t=Object(Kh["u"])(t,"dataProjection"),Object.assign(dg,t),e.component(dg.name,dg))}var mg,fg,hg=pg,gg=n("bd02"),vg=n("57e8"),bg={sources:{type:Array},operation:{type:Function},lib:{type:Object}},yg={createSource:function(){return new gg["a"]({sources:this.sources,operation:this.operation,lib:this.lib})}},wg={operation:function(){this.$source.setOperation(this.operation,this.lib)},lib:function(){this.$source.setOperation(this.operation,this.lib)}},jg={name:"vl-source-raster",mixins:[vg["a"]],props:bg,methods:yg,watch:wg},kg=jg,_g=Object(C["a"])(kg,mg,fg,!1,null,null,null),xg=_g.exports;function Cg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Cg.installed||(Cg.installed=!0,t=Object(Kh["u"])(t,"dataProjection"),Object.assign(xg,t),e.component(xg.name,xg))}var Og=Cg,$g=n("d051"),Tg=n("f594"),Sg=n("9ce2"),Pg=n("9858"),Ag=n("0ff9"),Ig=n("86e2"),Dg={source:{type:String,required:!0},hitTolerance:{type:Number,default:0}},Eg={createInteraction:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.makeIdent(e.source),t.next=3,e.$identityMap.get(n,e.$options.INSTANCE_PROMISE_POOL);case 3:return a=t.sent,Object(Kh["l"])(a.getFeatures)&&(r=a.getFeatures(),Object(Pg["b"])(r)&&(a=r)),t.abrupt("return",new $g["a"]({features:Object(Pg["b"])(a)?a:void 0,hitTolerance:e.hitTolerance}));case 6:case"end":return t.stop()}}),t)})))()},mount:function(){Sg["a"].methods.mount.call(this)},unmount:function(){Sg["a"].methods.unmount.call(this)},subscribeAll:function(){Rg.call(this)}},Ng=Object(Ig["b"])(["source"],(function(){return function(){this.scheduleRecreate()}})),Mg={name:"vl-interaction-translate",mixins:[Sg["a"]],props:Dg,methods:Eg,watch:Ng};function Rg(){var e=this;Object(Ag["e"])(this);var t=Object(Tg["a"])(this.$interaction,["translatestart","translateend"]);this.subscribeTo(t,(function(t){++e.rev,e.$emit(t.type,t)}))}var Ug,zg,Lg=Mg,Fg=Object(C["a"])(Lg,Ug,zg,!1,null,null,null),Bg=Fg.exports;function qg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qg.installed||(qg.installed=!0,t=Object(Kh["u"])(t,"dataProjection"),Object.assign(Bg,t),e.component(Bg.name,Bg))}var Vg=qg,Wg=n("3cd2"),Gg=n("862c"),Hg=n("78cd"),Jg=n("de17"),Kg={source:{type:String,required:!0},angle:{type:Number,default:0}},Yg={createInteraction:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.makeIdent(e.source),t.next=3,e.$identityMap.get(n,e.$options.INSTANCE_PROMISE_POOL);case 3:return a=t.sent,Object(Kh["l"])(a.getFeatures)&&(r=a.getFeatures(),Object(Pg["b"])(r)&&(a=r)),t.abrupt("return",new Wg["a"]({source:Object(Pg["c"])(a)?a:void 0,features:Object(Pg["b"])(a)?a:void 0,deleteCondition:e.deleteCondition,insertVertexCondition:e.insertVertexCondition,pixelTolerance:e.pixelTolerance,style:e.createStyleFunc(),wrapX:e.wrapX}));case 6:case"end":return t.stop()}}),t)})))()},getDefaultStyles:function(){var e=Object(Kh["s"])(Object(Hg["b"])(),(function(e){return e.map(Hg["a"])}));return function(t){if(t.getGeometry())return e[t.getGeometry().getType()]}},getServices:function(){return Object(Jg["a"])(Sg["a"].methods.getServices.call(this),Gg["a"].methods.getServices.call(this))},getStyleTarget:function(){return this.$interaction},mount:function(){Sg["a"].methods.mount.call(this)},unmount:function(){Sg["a"].methods.unmount.call(this)},subscribeAll:function(){Qg.call(this)},setStyle:function(e){e!==this._styles&&(this._styles=e,this.scheduleRefresh())}},Zg=Object(Ig["b"])(["source"],(function(){return function(){this.scheduleRecreate()}})),Xg={name:"vl-interaction-rotate",mixins:[Sg["a"],Gg["a"]],props:Kg,methods:Yg,watch:Zg};function Qg(){var e=this;Object(Ag["e"])(this);var t=Object(Tg["a"])(this.$interaction,["rotatestart","rotateend"]);this.subscribeTo(t,(function(t){++e.rev,e.$emit(t.type,t)}))}var ev,tv,nv=Xg,av=Object(C["a"])(nv,ev,tv,!1,null,null,null),rv=av.exports;function iv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};iv.installed||(iv.installed=!0,t=Object(Kh["u"])(t,"dataProjection"),Object.assign(rv,t),e.component(rv.name,rv))}var ov=iv,sv=n("d4ec"),cv=n("bee2"),lv=n("8f33"),uv=n("262e"),dv=n("c807"),pv=n("f623"),mv=n("a568"),fv=n("1300");function hv(e){var t=Object(fv["c"])(e.feature),n=e.depth;return n&&(t+="-"+n.join("-")),t}function gv(e,t){return e.index-t.index}function vv(e,t){var n=t.geometry;return n.getType()===pv["a"].CIRCLE&&1===t.index?n.getClosestPoint(e):Object(mv["c"])(e,t.segment)}var bv=function(e){function t(){return Object(sv["a"])(this,t),Object(lv["a"])(this,t,arguments)}return Object(uv["a"])(t,e),Object(cv["a"])(t,[{key:"handleDragEvent",value:function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,n=0,a=this.dragSegments_.length;n<a;++n){var r=this.dragSegments_[n],i=r[0],o=i.depth,s=i.geometry,c=void 0,l=void 0,u=i.segment,d=r[1];while(t.length<s.getStride())t.push(u[d][t.length]);switch(s.getType()){case pv["a"].POINT:c=t,u[0]=u[1]=t;break;case pv["a"].MULTI_POINT:c=s.getCoordinates(),c[i.index]=t,u[0]=u[1]=t;break;case pv["a"].LINE_STRING:c=s.getCoordinates(),c[i.index+d]=t,u[d]=t;break;case pv["a"].MULTI_LINE_STRING:c=s.getCoordinates(),c[o[0]][i.index+d]=t,u[d]=t;break;case pv["a"].POLYGON:c=s.getCoordinates(),l=t,2===n||3===n?(l=c[o[0]][i.index+d],l[0]=t[0]):4!==n&&5!==n||(l=c[o[0]][i.index+d],l[1]=t[1]),c[o[0]][i.index+d]=l,u[d]=l;break;case pv["a"].MULTI_POLYGON:c=s.getCoordinates(),c[o[1]][o[0]][i.index+d]=t,u[d]=t;break;case pv["a"].CIRCLE:u[0]=u[1]=t,1===i.index?(this.changingFeature_=!0,s.setCenter(t),this.changingFeature_=!1):(this.changingFeature_=!0,s.setRadius(Object(mv["e"])(s.getCenter(),t)),this.changingFeature_=!1);break;default:}c&&this.setGeometryCoordinates_(s,c)}this.createOrUpdateVertexFeature_(t)}},{key:"handleDownEvent",value:function(e){var t=this;if(!this.condition_(e))return!1;this.handlePointerAtPixel_(e.pixel,e.map);var n=e.map.getCoordinateFromPixel(e.pixel);this.dragSegments_.length=0,this.modified_=!1;var a=this.vertexFeature_;if(a){var r=[],i=a.getGeometry(),o=i.getCoordinates(),s=Object(Sl["b"])([o]),c=this.rBush_.getInExtent(s),l={};c.sort(gv);for(var u,d=function(){var a=c[p],i=a.segment,s=hv(a);if(l[s]||(l[s]=new Array(2)),a.geometry.getType()===pv["a"].CIRCLE&&1===a.index){var u=vv(n,a);Object(mv["f"])(u,o)&&!l[s][0]&&(t.dragSegments_.push([a,0]),l[s][0]=a)}else{if(a.geometry.getType()===pv["a"].POLYGON&&zd(a.geometry)){for(var d=a.feature.get("annot").id,m=t.rBush_.getInExtent(a.geometry.getExtent()).filter((function(e){return e.feature.get("annot").id===d})),f=a.geometry.getCoordinates()[0].filter((function(e){return!Object(mv["f"])(e,o)})),h=[function(e){return Object(mv["f"])(e.segment[0],o)&&!l[hv(e)][0]},function(e){return Object(mv["f"])(e.segment[1],o)&&!l[hv(e)][1]},function(e){return e.segment[0][0]===o[0]&&e.segment[0][1]!==o[1]&&f.find((function(t){return Object(mv["f"])(t,e.segment[0])}))},function(e){return e.segment[1][0]===o[0]&&e.segment[1][1]!==o[1]&&f.find((function(t){return Object(mv["f"])(t,e.segment[1])}))},function(e){return e.segment[0][1]===o[1]&&e.segment[0][0]!==o[0]&&f.find((function(t){return Object(mv["f"])(t,e.segment[0])}))},function(e){return e.segment[1][1]===o[1]&&e.segment[1][0]!==o[0]&&f.find((function(t){return Object(mv["f"])(t,e.segment[1])}))}],g=0,v=h.length;g<v;++g){var b=m.find(h[g]);if(!b)break;t.dragSegments_.push([b,g%2]);var y=hv(b);l[y]||(l[y]=new Array(2)),l[y][g%2]=b}return 0}if(Object(mv["f"])(i[0],o)&&!l[s][0])t.dragSegments_.push([a,0]),l[s][0]=a;else if(Object(mv["f"])(i[1],o)&&!l[s][1]){if((a.geometry.getType()===pv["a"].LINE_STRING||a.geometry.getType()===pv["a"].MULTI_LINE_STRING)&&l[s][0]&&0===l[s][0].index)return 1;t.dragSegments_.push([a,1]),l[s][1]=a}else t.insertVertexCondition_(e)&&Object(fv["c"])(i)in t.vertexSegments_&&!l[s][0]&&!l[s][1]&&r.push([a,o])}},p=0,m=c.length;p<m;++p)if(u=d(),0===u)break;r.length&&this.willModifyFeatures_(e);for(var f=r.length-1;f>=0;--f)this.insertVertex_.apply(this,r[f])}return!!this.vertexFeature_}}])}(dv["a"]),yv={source:{type:String,required:!0},condition:{type:Function,default:Cd["j"]},deleteCondition:{type:Function,default:Cd["a"]},insertVertexCondition:{type:Function,default:Cd["c"]},pixelTolerance:{type:Number,default:10},wrapX:{type:Boolean,default:!1}},wv={createInteraction:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.makeIdent(e.source),t.next=3,e.$identityMap.get(n,e.$options.INSTANCE_PROMISE_POOL);case 3:return a=t.sent,Object(Kh["l"])(a.getFeatures)&&(r=a.getFeatures(),Object(Pg["b"])(r)&&(a=r)),t.abrupt("return",new bv({source:Object(Pg["c"])(a)?a:void 0,features:Object(Pg["b"])(a)?a:void 0,deleteCondition:e.deleteCondition,insertVertexCondition:e.insertVertexCondition,pixelTolerance:e.pixelTolerance,style:e.createStyleFunc(),wrapX:e.wrapX}));case 6:case"end":return t.stop()}}),t)})))()},getDefaultStyles:function(){var e=Object(Kh["s"])(Object(Hg["b"])(),(function(e){return e.map(Hg["a"])}));return function(t){if(t.getGeometry())return e[t.getGeometry().getType()]}},getServices:function(){return Object(Jg["a"])(Sg["a"].methods.getServices.call(this),Gg["a"].methods.getServices.call(this))},getStyleTarget:function(){return this.$interaction},mount:function(){Sg["a"].methods.mount.call(this)},unmount:function(){Sg["a"].methods.unmount.call(this)},setStyle:function(e){e!==this._styles&&(this._styles=e,this.scheduleRefresh())},subscribeAll:function(){_v.call(this)}},jv=Object(Ig["b"])(["source"],(function(){return function(){this.scheduleRecreate()}})),kv={name:"vl-interaction-modify",mixins:[Sg["a"],Gg["a"]],props:yv,methods:wv,watch:jv};function _v(){var e=this;Object(Ag["e"])(this);var t=Object(Tg["a"])(this.$interaction,["modifystart","modifyend"]);this.subscribeTo(t,(function(t){++e.rev,e.$emit(t.type,t)}))}var xv,Cv,Ov=kv,$v=Object(C["a"])(Ov,xv,Cv,!1,null,null,null),Tv=$v.exports;function Sv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Sv.installed||(Sv.installed=!0,t=Object(Kh["u"])(t,"dataProjection"),Object.assign(Tv,t),e.component(Tv.name,Tv))}var Pv=Sv,Av=n("6729"),Iv={source:{type:String,required:!0},factor:{type:Number,default:1}},Dv={createInteraction:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.makeIdent(e.source),t.next=3,e.$identityMap.get(n,e.$options.INSTANCE_PROMISE_POOL);case 3:return a=t.sent,Object(Kh["l"])(a.getFeatures)&&(r=a.getFeatures(),Object(Pg["b"])(r)&&(a=r)),t.abrupt("return",new Av["a"]({source:Object(Pg["c"])(a)?a:void 0,features:Object(Pg["b"])(a)?a:void 0,deleteCondition:e.deleteCondition,insertVertexCondition:e.insertVertexCondition,pixelTolerance:e.pixelTolerance,style:e.createStyleFunc(),wrapX:e.wrapX}));case 6:case"end":return t.stop()}}),t)})))()},getDefaultStyles:function(){var e=Object(Kh["s"])(Object(Hg["b"])(),(function(e){return e.map(Hg["a"])}));return function(t){if(t.getGeometry())return e[t.getGeometry().getType()]}},getServices:function(){return Object(Jg["a"])(Sg["a"].methods.getServices.call(this),Gg["a"].methods.getServices.call(this))},getStyleTarget:function(){return this.$interaction},mount:function(){Sg["a"].methods.mount.call(this)},unmount:function(){Sg["a"].methods.unmount.call(this)},subscribeAll:function(){Mv.call(this)},setStyle:function(e){e!==this._styles&&(this._styles=e,this.scheduleRefresh())}},Ev=Object(Ig["b"])(["source"],(function(){return function(){this.scheduleRecreate()}})),Nv={name:"vl-interaction-rescale",mixins:[Sg["a"],Gg["a"]],props:Iv,methods:Dv,watch:Ev};function Mv(){var e=this;Object(Ag["e"])(this);var t=Object(Tg["a"])(this.$interaction,["rescalestart","rescaleend"]);this.subscribeTo(t,(function(t){++e.rev,e.$emit(t.type,t)}))}var Rv,Uv,zv=Nv,Lv=Object(C["a"])(zv,Rv,Uv,!1,null,null,null),Fv=Lv.exports;function Bv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Bv.installed||(Bv.installed=!0,t=Object(Kh["u"])(t,"dataProjection"),Object.assign(Fv,t),e.component(Fv.name,Fv))}var qv=Bv,Vv=n("30ef"),Wv=n.n(Vv),Gv=n("f634"),Hv=n.n(Gv),Jv=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper",attrs:{id:"app"}},[t("notifications",{attrs:{position:"top center",width:"30%",max:5},scopedSlots:e._u([{key:"body",fn:function(n){return[t("div",{staticClass:"notification vue-notification",class:n.item.type},[t("button",{staticClass:"delete",on:{click:n.close}}),t("strong",{staticClass:"notification-title"},[e._v(" "+e._s(n.item.title)+" ")]),t("div",{staticClass:"notification-content",domProps:{innerHTML:e._s(n.item.text)}})])]}}])}),e.loading?e._e():[e.communicationError?t("div",{staticClass:"box error"},[t("h2",[e._v(" "+e._s(e.$t("communication-error"))+" ")]),e._v(" "+e._s(e.$t("core-cannot-be-reached"))+" ")]):e.currentUser?[t("cytomine-navbar"),t("div",{staticClass:"bottom"},[t("keep-alive",{attrs:{include:"cytomine-storage"}},[e.currentUser?t("router-view"):e._e()],1)],1)]:t("login")]],2)},Kv=[],Yv=function(){var e=this,t=e._self._c;return t("nav",{staticClass:"navbar is-light",attrs:{role:"navigation"}},[t("div",{staticClass:"navbar-brand"},[t("router-link",{staticClass:"navbar-item",attrs:{to:"/",exact:""}},[t("img",{attrs:{src:n("9b19"),id:"logo",alt:"Cytomine"}})]),t("a",{staticClass:"navbar-burger",class:{"is-active":e.openedTopMenu},attrs:{role:""},on:{click:function(t){e.openedTopMenu=!e.openedTopMenu}}},[t("span"),e._v(" "),t("span"),e._v(" "),t("span")])],1),t("div",{staticClass:"navbar-menu",class:{"is-active":e.openedTopMenu},attrs:{id:"topMenu"}},[t("div",{staticClass:"navbar-start"},[this.nbActiveProjects>0?t("navbar-dropdown",{attrs:{icon:"fa-folder-open",title:e.$t("workspace"),listPathes:["/project/"]}},[t("navigation-tree")],1):e._e(),t("router-link",{staticClass:"navbar-item",attrs:{to:"/projects"}},[t("i",{staticClass:"fas fa-list-alt"}),e._v(" "+e._s(e.$t("projects"))+" ")]),e.currentUser.guestByNow?e._e():t("router-link",{staticClass:"navbar-item",attrs:{to:"/storage"}},[t("i",{staticClass:"fas fa-download"}),e._v(" "+e._s(e.$t("storage"))+" ")]),t("router-link",{staticClass:"navbar-item",attrs:{to:"/ontology"}},[t("i",{staticClass:"fas fa-hashtag"}),e._v(" "+e._s(e.$t("ontologies"))+" ")]),t("router-link",{directives:[{name:"show",rawName:"v-show",value:e.algoEnabled,expression:"algoEnabled"}],staticClass:"navbar-item",attrs:{to:"/algorithm"}},[t("i",{staticClass:"fas fa-code"}),e._v(" "+e._s(e.$t("algorithms"))+" ")]),e.currentUser.adminByNow?t("router-link",{staticClass:"navbar-item",attrs:{to:"/admin"}},[t("i",{staticClass:"fas fa-wrench"}),e._v(" "+e._s(e.$t("admin-menu"))+" ")]):e._e()],1),t("div",{staticClass:"navbar-end"},[t("cytomine-searcher"),t("navbar-dropdown",{attrs:{icon:e.currentUser.adminByNow?"fa-star":e.currentUser.isSwitched?"fa-user-ninja":"fa-user",title:e.currentUserFullInfo,linkClasses:{"has-text-dark-primary":e.currentUser.isSwitched},tag:e.currentUser.adminByNow?{type:"is-danger",text:e.$t("admin")}:null,listPathes:["/account","/activity"]}},[t("router-link",{staticClass:"navbar-item",attrs:{to:"/account"}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-user fa-xs"})]),e._v(" "+e._s(e.$t("account"))+" ")]),t("router-link",{staticClass:"navbar-item",attrs:{to:"/activity"}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-history fa-xs"})]),e._v(" "+e._s(e.$t("activity-history"))+" ")]),e.currentUser.admin?[e.currentUser.adminByNow?t("a",{staticClass:"navbar-item",on:{click:function(t){return e.closeAdminSession()}}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"far fa-star fa-xs"})]),e._v(" "+e._s(e.$t("close-admin-session"))+" ")]):t("a",{staticClass:"navbar-item",on:{click:function(t){return e.openAdminSession()}}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-star fa-xs"})]),e._v(" "+e._s(e.$t("open-admin-session"))+" ")])]:e._e(),e.currentUser.isSwitched?[t("a",{staticClass:"navbar-item has-text-dark-primary",on:{click:function(t){return e.stopSwitchUser()}}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-exchange-alt fa-xs"})]),e._v(" "+e._s(e.$t("switch-back-to-user",{username:e.currentUser.realUser}))+" ")])]:e._e(),t("a",{staticClass:"navbar-item",on:{click:function(t){return e.logout()}}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-power-off fa-xs"})]),e._v(" "+e._s(e.$t("logout"))+" ")])],2),t("navbar-dropdown",{attrs:{icon:"fa-question-circle",title:e.$t("help"),classes:["is-right"]}},[t("a",{staticClass:"navbar-item",on:{click:function(t){return e.openHotkeysModal()}}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"far fa-keyboard fa-xs"})]),e._v(" "+e._s(e.$t("shortcuts"))+" ")]),t("a",{staticClass:"navbar-item",on:{click:function(t){return e.openAboutModal()}}},[t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-info-circle fa-xs"})]),e._v(" "+e._s(e.$t("about-cytomine"))+" ")])])],1)]),t("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:e.openHotkeysModalShortcut,expression:"openHotkeysModalShortcut",modifiers:{once:!0}}],staticClass:"hidden",on:{shortkey:e.openHotkeysModal}})])},Zv=[],Xv=function(){var e=this,t=e._self._c;return t("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[t("span",{staticClass:"navbar-link",class:Object(h["a"])({"is-active":e.isActive},e.linkClasses),attrs:{tabindex:"0"}},[e.icon?t("i",{class:[e.iconPack,e.icon]}):e._e(),e._v(" "+e._s(e.title)+" "),e.tag?t("b-tag",{attrs:{type:e.tag.type}},[e._v(e._s(e.tag.text))]):e._e()],1),t("div",{staticClass:"navbar-dropdown",class:e.classes},[e._t("default")],2)])},Qv=[],eb=(n("466d"),{name:"navbar-dropdown",props:{icon:String,iconPack:{type:String,default:"fas"},title:String,tag:Object,classes:Array,linkClasses:Object,listPathes:Array},data:function(){return{isActive:!1}},watch:{"$route.path":{handler:function(){var e=this;this.listPathes&&(this.isActive=!!this.listPathes.find((function(t){return e.$route.path.match(t)}))),document.activeElement.blur()},immediate:!0}}}),tb=eb,nb=(n("8eda"),Object(C["a"])(tb,Xv,Qv,!1,null,null,null)),ab=nb.exports,rb=function(){var e=this,t=e._self._c;return t("div",{staticClass:"navigation-tree-wrapper"},e._l(e.projects,(function(n,a,r){return t("div",{key:n.id},[t("router-link",{staticClass:"navbar-item project-item",attrs:{to:"/project/".concat(n.id)}},[e._v(" "+e._s(n.name)+" "),t("a",{staticClass:"delete is-small",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closeProject(n)}}})]),e._l(n.viewers,(function(a,r){return[e.nbImages(a)?t("router-link",{key:r,staticClass:"navbar-item viewer-item",attrs:{to:e.viewerPath(n.id,r),exact:""}},[t("div",{staticClass:"viewer-name"},[t("span",[t("i",{staticClass:"fas fa-caret-right"}),1===e.nbImages(a)?[t("image-name",{attrs:{image:Object.values(a.images)[0].imageInstance}})]:[e._v(" "+e._s(e.$t("viewer-group",{nbImages:e.nbImages(a)}))+" ")],e._v(" "+e._s(a.name)+" ")],2),e.nbImages(a)>1?t("ul",{staticClass:"viewer-details"},e._l(a.images,(function(e,n){return t("li",{key:n},[t("image-name",{attrs:{image:e.imageInstance}})],1)})),0):e._e()]),t("a",{staticClass:"delete is-small",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closeViewer(n.id,r)}}})]):e._e()]})),r<e.projects.length-1?t("hr",{staticClass:"navbar-divider"}):e._e()],2)})),0)},ib=[],ob={name:"navigation-tree",components:{ImageName:Qn["a"]},computed:{projects:Object(l["a"])("projects")},methods:{nbImages:function(e){return Object.keys(e.images).length},viewerPath:function(e,t){return this.$store.getters["projects/".concat(e,"/viewers/").concat(t,"/pathViewer")]()},closeProject:function(e){var t=this,n=Object.keys(e.viewers).length;n?this.$buefy.dialog.confirm({title:this.$t("confirm-close-project"),message:this.$t("confirm-close-project-message",{viewers:this.$tc("count-viewers",n,{count:n})}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.doCloseProject(e)}}):this.doCloseProject(e)},doCloseProject:function(e){this.$store.unregisterModule(["projects",e.id])},closeViewer:function(e,t){this.$store.unregisterModule(["projects",e,"viewers",t])}}},sb=ob,cb=(n("95e0"),Object(C["a"])(sb,rb,ib,!1,null,"5859de40",null)),lb=cb.exports,ub=function(){var e=this,t=e._self._c;return t("cytomine-modal-card",{attrs:{title:e.$t("shortcuts"),footer:!1},on:{close:function(t){return e.$parent.close()}}},[t("b-input",{attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search",size:"is-small"},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),e._l(e.filteredCategories,(function(n){return t("div",{key:n},[t("h2",[e._v(e._s(e.$t("shortcut-".concat(n))))]),t("b-table",{staticClass:"shortcut-list",attrs:{data:e.filteredShortcuts(n)},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("b-table-column",{attrs:{field:"name",label:e.$t("description")}},[e._v(" "+e._s(e.$t("shortcut-".concat(r.name)))+" ")]),t("b-table-column",{attrs:{field:"val",label:e.$t("shortcut")}},e._l(r.key,(function(a,i){return t("span",{key:"".concat(n).concat(r.name).concat(a)},[t("span",{staticClass:"key"},["click"===a?t("i",{staticClass:"fas fa-mouse-pointer"}):"drag"===a?t("i",{staticClass:"fas fa-hand-pointer"}):"+"===a?t("i",{staticClass:"fas fa-plus"}):"-"===a?t("i",{staticClass:"fas fa-minus"}):"arrowleft"===a?t("i",{staticClass:"fas fa-arrow-left"}):"arrowright"===a?t("i",{staticClass:"fas fa-arrow-right"}):"arrowup"===a?t("i",{staticClass:"fas fa-arrow-up"}):"arrowdown"===a?t("i",{staticClass:"fas fa-arrow-down"}):t("span","meta"===a?[e._v("⌘ Cmd")]:"shift"===a?[e._v("⇧ Shift")]:"alt"===a?[e._v("⌥ Alt")]:"pageup"===a?[e._v("Page Up")]:"pagedown"===a?[e._v("Page Down")]:"del"===a?[e._v("Delete")]:[e._v(e._s(a))])]),i<r.key.length-1?[e._v("+")]:e._e()],2)})),0)]}}],null,!0)})],1)})),e.noResult?t("div",{staticClass:"content has-text-grey has-text-centered"},[e._v(" "+e._s(e.$t("no-result"))+" ")]):e._e()],2)},db=[],pb={name:"hotkeys-modal",components:{CytomineModalCard:Te["a"]},data:function(){return{categories:["general","viewer-nav","viewer-tool","viewer-toggle","text-editor"],searchString:""}},computed:{shortcuts:function(){return Object.entries(um).map((function(e){var t=Object(Et["a"])(e,2),n=t[0],a=t[1];return{name:n,key:a}}))},noResult:function(){var e=this;return this.categories.every((function(t){return e.isEmpty(t)}))},filteredCategories:function(){var e=this;return this.categories.filter((function(t){return e.filteredShortcuts(t).length>0}))}},methods:{filteredShortcuts:function(e){var t=this,n=Object(Kt["a"])(this.searchString);return this.shortcuts.filter((function(a){return a.name.startsWith("".concat(e,"-"))&&(!t.searchString||n.test(t.$t("shortcut-".concat(a.name))))}))},isEmpty:function(e){return 0===this.filteredShortcuts(e).length}}},mb=pb,fb=(n("a6532"),Object(C["a"])(mb,ub,db,!1,null,"31a9f839",null)),hb=fb.exports,gb=function(){var e=this,t=e._self._c;return t("cytomine-modal-card",{attrs:{title:e.$t("about-cytomine")},on:{close:function(t){return e.$parent.close()}}},[[t("dl",[t("dt",[e._v(e._s(e.$t("version")))]),t("dd",[e._v(e._s(e.version||"?"))]),t("dt",[e._v(e._s(e.$t("sponsors")))]),t("dd",[t("a",{attrs:{href:"https://cytomine.coop",target:"_blank"}},[t("img",{staticClass:"sponsor",attrs:{src:n("21dc")}})]),t("a",{attrs:{href:"https://www.uliege.be",target:"_blank"}},[t("img",{staticClass:"sponsor",attrs:{src:n("7205")}})]),t("a",{attrs:{href:"https://www.wallonie.be/",target:"_blank"}},[t("img",{staticClass:"sponsor",attrs:{src:n("f07d")}})])]),t("dt",[e._v(e._s(e.$t("description")))]),t("dd",[t("i18n",{attrs:{path:"cytomine-sponsors-info"}},[t("a",{attrs:{place:"cytomineCompanyLink",href:"https://cytomine.coop",target:"_blank"}},[e._v(" "+e._s(e.$t("cytomine-company")))])])],1),t("dt",[e._v(e._s(e.$t("website")))]),t("dd",[t("i18n",{attrs:{path:"cytomine-website-info"}},[t("a",{attrs:{place:"websiteLink",href:"https://cytomine.coop",target:"_blank"}},[e._v("cytomine.org")])])],1),t("dt",[e._v(e._s(e.$t("source-code")))]),t("dd",[t("i18n",{attrs:{path:"source-code-info"}},[t("a",{attrs:{place:"githubLink",href:"http://github.com/cytomine/",target:"_blank"}},[e._v(" "+e._s(e.$t("github-repository")))])])],1),t("dt",[e._v(e._s(e.$t("documentation")))]),t("dd",[t("i18n",{attrs:{path:"documentation-info"}},[t("a",{attrs:{place:"docLink",href:"https://documentation.cytomine.org/",target:"_blank"}},[e._v(e._s(e.$t("here")))])])],1),t("dt",[e._v(e._s(e.$t("contact")))]),t("dd",[t("i18n",{attrs:{path:"contact-info"}},[t("a",{attrs:{place:"contactMail",href:"mailto:info@cytomine.org"}},[e._v("info@cytomine.org")])])],1)])]],2)},vb=[],bb={name:"about-cytomine-wrapper",components:{CytomineModalCard:Te["a"]},data:function(){return{version:I["a"].CYTOMINE_COMMERCIAL_VERSION}}},yb=bb,wb=(n("6085"),Object(C["a"])(yb,gb,vb,!1,null,"9b72ba08",null)),jb=wb.exports,kb=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.deactivate,expression:"deactivate"}],class:["navbar-item","search",e.displayResults?"is-active":""]},[t("b-field",{staticClass:"no-margin",attrs:{type:e.error?"is-danger":null}},[t("b-input",{staticClass:"global-search",attrs:{placeholder:e.$t("search-placeholder"),type:"search",icon:"search",loading:e.loading,disabled:e.error},nativeOn:{click:function(t){return e.activate()}},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}}),t("p",{staticClass:"control"},[t("router-link",{staticClass:"button",attrs:{to:"/advanced-search","active-class":"router-link-active"},nativeOn:{click:function(t){return e.deactivate.apply(null,arguments)}}},[e._v("+")])],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"navbar-dropdown search-results"},[t("h2",[e._v(e._s(e.$t("project"))+" ("+e._s(e.filteredProjects.length)+")")]),e.filteredProjects.length>0?t("p",[e._l(e.subsetProjects,(function(n){return t("router-link",{key:n.id,staticClass:"navbar-item",attrs:{to:"/project/".concat(n.id)},domProps:{innerHTML:e._s(e.highlightedName(n.name))},nativeOn:{click:function(t){return e.deactivate.apply(null,arguments)}}})})),e.moreProjects?t("a",{staticClass:"navbar-item"},[e._v("...")]):e._e()],2):t("span",{staticClass:"navbar-item no-result"},[e._v(e._s(e.$t("no-project")))]),t("h2",[e._v(e._s(e.$t("images"))+" ("+e._s(e.filteredImages.length)+")")]),e.filteredImages.length>0?t("p",[e._l(e.subsetImages,(function(n){return t("router-link",{key:n.id,staticClass:"navbar-item",attrs:{to:"/project/".concat(n.project,"/image/").concat(n.id)},domProps:{innerHTML:e._s(e.htmlImageName(n))},nativeOn:{click:function(t){return e.deactivate.apply(null,arguments)}}})})),e.moreImages?t("a",{staticClass:"navbar-item"},[e._v("...")]):e._e()],2):t("span",{staticClass:"navbar-item no-result"},[e._v(e._s(e.$t("no-image")))]),e.moreImages||e.moreProjects?t("div",{staticClass:"search-view-all"},[t("router-link",{staticClass:"button is-small",attrs:{to:"/advanced-search/".concat(e.searchString)},nativeOn:{click:function(t){return e.deactivate.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("button-view-all"))+" ("+e._s(e.totalNbResults)+") ")])],1):e._e()])],1)},_b=[],xb={name:"cytomine-searcher",data:function(){return{isActive:!1,loading:!1,error:!1,searchString:"",projects:[],images:[],maxNbDisplayed:5}},computed:{currentUser:Object(l["a"])("currentUser/user"),displayResults:function(){return this.isActive&&!this.error&&this.searchString.length>0},regexp:function(){return Object(Kt["a"])(this.searchString)},filteredProjects:function(){var e=this;return this.searchString?this.projects.filter((function(t){return e.regexp.test(t.name)})):this.projects},subsetProjects:function(){return this.filteredProjects.slice(0,this.maxNbDisplayed)},moreProjects:function(){return this.filteredProjects>this.subsetProjects},filteredImages:function(){var e=this;return this.searchString?this.images.filter((function(t){return e.regexp.test(e.imageName(t))})):this.images},subsetImages:function(){return this.filteredImages.slice(0,this.maxNbDisplayed)},moreImages:function(){return this.filteredImages>this.subsetImages},totalNbResults:function(){return this.filteredImages.length+this.filteredProjects.length}},methods:{fetchImages:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["ImageInstanceCollection"].fetchAllLight();case 2:e.images=t.sent;case 3:case"end":return t.stop()}}),t)})))()},fetchProjects:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new p["ProjectCollection"]({light:!0,filterKey:"user",filterValue:e.currentUser.id}).fetchAll();case 2:e.projects=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()},activate:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isActive){t.next=12;break}return t.prev=1,e.loading=!0,t.next=5,Promise.all([e.fetchImages(),e.fetchProjects()]);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.error=!0;case 10:e.loading=!1,e.isActive=!0;case 12:case"end":return t.stop()}}),t,null,[[1,7]])})))()},deactivate:function(){this.isActive=!1},imageName:function(e){return String(e.blindedName||e.instanceFilename)},highlightedName:function(e){return e.replace(this.regexp,"<strong>$1</strong>")},htmlImageName:function(e){var t=e.blindedName?'<span class="blind">['.concat(this.$t("blinded-name-indication"),"] </span>"):"",n='<span class="in-project">('.concat(this.$t("in-project",{projectName:e.projectName}),")</span>");return"".concat(t).concat(this.highlightedName(this.imageName(e)),"&nbsp;").concat(n)}}},Cb=xb,Ob=(n("fbb3"),Object(C["a"])(Cb,kb,_b,!1,null,"714c3a7d",null)),$b=Ob.exports,Tb={name:"cytomine-navbar",components:{NavbarDropdown:ab,NavigationTree:lb,CytomineSearcher:$b},mixins:[Uc],data:function(){return{openedTopMenu:!1,hotkeysModal:null,algoEnabled:I["a"].ALGORITHMS_ENABLED,aboutModal:null}},computed:{currentUser:Object(l["a"])("currentUser/user"),currentUserFullInfo:function(){return Object(he["a"])(this.currentUser)},nbActiveProjects:function(){return Object.keys(this.$store.state.projects).length},openHotkeysModalShortcut:function(){return um["general-shortcuts-modal"]}},watch:{$route:function(){this.openedTopMenu=!1}},methods:{openHotkeysModal:function(){var e=this;this.hotkeysModal||(this.hotkeysModal=this.$buefy.modal.open({parent:this,component:hb,hasModalCard:!0,onCancel:function(){return e.hotkeysModal=null}}))},openAboutModal:function(){this.$buefy.modal.open({parent:this,component:jb,hasModalCard:!0})},openAdminSession:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("currentUser/openAdminSession");case 3:e.$router.push("/admin"),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()},closeAdminSession:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("currentUser/closeAdminSession");case 3:"/"===e.$router.currentRoute.path?e.$router.push("/projects"):e.$router.push("/"),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()},stopSwitchUser:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["Cytomine"].instance.stopSwitchUser();case 3:return t.next=5,e.$store.dispatch("currentUser/fetchUser");case 5:e.$router.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-failed-to-switch-back-as-real-user")});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},logout:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["Cytomine"].instance.logout();case 3:return t.next=5,e.$store.dispatch("logout");case 5:e.$store.commit("currentUser/setShortTermToken",null),e.changeLanguage(),window.location.href="/",t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-logout")});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}},Sb=Tb,Pb=(n("dbf4"),Object(C["a"])(Sb,Yv,Zv,!1,null,null,null)),Ab=Pb.exports,Ib=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel"},[e.forgotUsername?[t("p",{staticClass:"panel-heading"},[t("i",{staticClass:"fas fa-user",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("forgot-username"))+" "),e._m(0)]),t("div",{staticClass:"panel-block"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.sendUsername.apply(null,arguments)}}},[t("b-field",{attrs:{label:e.$t("email")}},[t("b-input",{model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),t("div",{staticClass:"buttons is-right"},[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){e.forgotUsername=!1}}},[e._v(" "+e._s(e.$t("button-cancel")))]),t("button",{staticClass:"button is-link"},[e._v(" "+e._s(e.$t("button-get-username")))])])],1)])]:e.forgotPassword?[t("p",{staticClass:"panel-heading"},[t("i",{staticClass:"fas fa-user",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("forgot-password"))+" "),e._m(1)]),t("div",{staticClass:"panel-block"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.resetPassword()}}},[t("b-field",{attrs:{label:e.$t("username")}},[t("b-input",{model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),t("div",{staticClass:"buttons is-right"},[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){e.forgotPassword=!1}}},[e._v(" "+e._s(e.$t("button-cancel")))]),t("button",{staticClass:"button is-link"},[e._v(" "+e._s(e.$t("button-reset-password")))])])],1)])]:e.registering?t("register",{on:{close:function(t){e.registering=!1}}}):[t("p",{staticClass:"panel-heading"},[t("i",{staticClass:"fas fa-user",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("login"))+" "),e._m(2)]),t("div",{staticClass:"panel-block"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.login()}}},[t("b-field",{attrs:{label:e.$t("username")}},[t("b-input",{attrs:{minlength:"1",maxlength:"50"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),t("b-field",{attrs:{label:e.$t("password")}},[t("b-input",{attrs:{type:"password","password-reveal":"",minlength:"4",maxlength:"100"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",[t("b-checkbox",{attrs:{type:"is-info"},model:{value:e.rememberMe,callback:function(t){e.rememberMe=t},expression:"rememberMe"}},[e._v(e._s(e.$t("remember-me")))])],1)],1),t("div",{staticClass:"column has-text-right"},[t("button",{staticClass:"button is-link",attrs:{disabled:!e.loginEnabled}},[e._v(" "+e._s(e.$t("button-login")))])])])],1)]),t("i18n",{staticClass:"is-size-7 has-text-centered forgot-credentials",attrs:{path:"forgot-credentials",tag:"p"}},[t("a",{attrs:{place:"username"},on:{click:function(t){e.forgotUsername=!0}}},[e._v(e._s(e.$t("username")))]),t("a",{attrs:{place:"password"},on:{click:function(t){e.forgotPassword=!0}}},[e._v(e._s(e.$t("password")))])]),e.allowedRegistration?t("i18n",{staticClass:"is-size-7 has-text-centered",attrs:{path:"no-account-yet",tag:"p"}},[t("a",{attrs:{place:"registerLink"},on:{click:function(t){e.registering=!0}}},[e._v(e._s(e.$t("register")))])]):e._e()]],2)},Db=[function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"https://doc.cytomine.org",target:"_blank"}},[t("img",{attrs:{src:n("9b19"),id:"logo",alt:"Cytomine"}})])},function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"https://doc.cytomine.org",target:"_blank"}},[t("img",{attrs:{src:n("9b19"),id:"logo",alt:"Cytomine"}})])},function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"https://doc.cytomine.org",target:"_blank"}},[t("img",{attrs:{src:n("9b19"),id:"logo",alt:"Cytomine"}})])}],Eb=function(){var e=this,t=e._self._c;return t("div",[t("p",{staticClass:"panel-heading"},[t("i",{staticClass:"fas fa-user-plus",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("register"))+" ")]),t("div",{staticClass:"panel-block"},[e.success?[t("b-message",{attrs:{type:"is-success","has-icon":"","icon-size":"is-small"}},[e._v(" "+e._s(e.$t("successful-registration"))+" ")]),t("p",{staticClass:"has-text-centered"},[t("a",{on:{click:function(t){return e.$emit("close")}}},[e._v(e._s(e.$t("back-to-login")))])])]:t("form",{on:{submit:function(t){return t.preventDefault(),e.register()}}},[t("b-field",{attrs:{label:e.$t("firstname"),type:{"is-danger":e.errors.has("firstname")},message:e.errors.first("firstname")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"firstname"},model:{value:e.firstname,callback:function(t){e.firstname=t},expression:"firstname"}})],1),t("b-field",{attrs:{label:e.$t("lastname"),type:{"is-danger":e.errors.has("lastname")},message:e.errors.first("lastname")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"lastname"},model:{value:e.lastname,callback:function(t){e.lastname=t},expression:"lastname"}})],1),t("b-field",{attrs:{label:e.$t("username"),type:{"is-danger":e.errors.has("username")},message:e.errors.first("username")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),t("b-field",{attrs:{label:e.$t("email"),type:{"is-danger":e.errors.has("email")},message:e.errors.first("email")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{name:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),t("div",{staticClass:"buttons is-right"},[t("button",{staticClass:"button",attrs:{type:"button",disabled:e.loading},on:{click:function(t){return e.$emit("close")}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",class:{"is-loading":e.loading},attrs:{disabled:e.errors.any()||e.loading}},[e._v(" "+e._s(e.$t("button-register"))+" ")])])],1)],2)])},Nb=[],Mb={name:"register",$_veeValidate:{validator:"new"},data:function(){return{username:"",email:"",firstname:"",lastname:"",success:!1,loading:!1}},methods:{register:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,e.loading=!0,a=new URLSearchParams,a.append("firstname",e.firstname),a.append("lastname",e.lastname),a.append("username",e.username),a.append("email",e.email),t.next=14,p["Cytomine"].instance.api.post("".concat(p["Cytomine"].instance.host,"/login/createAccount"),a);case 14:e.success=!0,t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](5),t.t0.response&&409===t.t0.response.status?e.$notify({type:"error",text:e.$t("notif-error-register-username-exists")}):e.$notify({type:"error",text:e.$t("notif-error-register")});case 20:e.loading=!1;case 21:case"end":return t.stop()}}),t,null,[[5,17]])})))()}}},Rb=Mb,Ub=Object(C["a"])(Rb,Eb,Nb,!1,null,null,null),zb=Ub.exports,Lb={name:"login",components:{Register:zb},mixins:[Uc],data:function(){return{username:"",password:"",email:"",rememberMe:!0,allowedRegistration:!1,forgotUsername:!1,forgotPassword:!1,registering:!1}},computed:{currentUser:Object(l["a"])("currentUser/user"),loginEnabled:function(){return!!this.username&&!!this.password}},methods:{login:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("currentUser/login",{username:e.username,password:e.password,rememberMe:e.rememberMe});case 3:e.currentUser?(e.changeLanguage(e.currentUser.language),e.$notify({type:"success",text:e.$t("notif-success-login")})):e.$notify({type:"error",text:e.$t("notif-unexpected-error")}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$notify({type:"error",text:t.t0.response.data.errors.message});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},sendUsername:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["Cytomine"].instance.forgotUsername(e.email);case 3:e.$notify({type:"success",text:e.$t("notif-success-forgot-username")}),e.forgotUsername=!1,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-forgot-username")});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},resetPassword:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["Cytomine"].instance.forgotPassword(e.username);case 3:e.$notify({type:"success",text:e.$t("notif-success-forgot-password")}),e.forgotPassword=!1,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-forgot-password")});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},Fb=Lb,Bb=(n("6e59"),Object(C["a"])(Fb,Ib,Db,!1,null,"d00c21ee",null)),qb=Bb.exports,Vb=n("aaa7"),Wb=n.n(Vb);Wb.a.setIdleDuration(I["a"].IDLE_DURATION);var Gb={name:"app",components:{CytomineNavbar:Ab,Login:qb},mixins:[Uc],data:function(){return{communicationError:!1,loading:!0,timeout:null}},computed:{currentUser:Object(l["a"])("currentUser/user"),project:Object(l["a"])("currentProject/project")},methods:{loginWithToken:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["Cytomine"].instance.loginWithToken(e.$route.query.username,e.$route.query.token);case 3:return n=t.sent,a=n.shortTermToken,e.$store.commit("currentUser/setShortTermToken",a),t.next=8,e.fetchUser();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("invalid-token")});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},ping:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Wb.a.now()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,p["Cytomine"].instance.ping(e.project?e.project.id:null);case 5:if(n=t.sent,a=n.authenticated,r=n.shortTermToken,e.$store.commit("currentUser/setShortTermToken",r),!e.currentUser||a){t.next=14;break}return t.next=12,e.$store.dispatch("logout");case 12:return window.location.href="/",t.abrupt("return");case 14:if(e.currentUser||!a){t.next=17;break}return t.next=17,e.fetchUser();case 17:e.communicationError=!1,t.next=32;break;case 20:if(t.prev=20,t.t0=t["catch"](2),-1===t.t0.toString().indexOf("401")){t.next=31;break}return e.communicationError=!1,t.next=26,e.$store.dispatch("logout");case 26:return p["Cytomine"].instance.logout(),window.location.href="/",t.abrupt("return");case 31:e.communicationError=!0;case 32:clearTimeout(e.timeout),e.timeout=setTimeout(e.ping,I["a"].PING_INTERVAL);case 34:case"end":return t.stop()}}),t,null,[[2,20]])})))()},fetchUser:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("currentUser/fetchUser");case 2:e.currentUser&&e.changeLanguage(e.currentUser.language);case 3:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,gt.a.get("configuration.json").then((function(e){return n=e.data}));case 2:return t.next=4,gt.a.get("meta-prefixes.json").then((function(e){I["a"].METADATA_PREFIXES=e.data}));case 4:for(a in n)(Object.prototype.hasOwnProperty.call(I["a"],a)||a.includes("_NAMESPACE")||a.includes("_VERSION")||a.includes("_ENABLED"))&&(I["a"][a]=n[a]);if(Object.freeze(I["a"]),new p["Cytomine"](I["a"].CYTOMINE_CORE_HOST),!e.$route.query.token||!e.$route.query.username){t.next=10;break}return t.next=10,e.loginWithToken();case 10:return t.next=12,e.ping();case 12:e.loading=!1,Wb.a.on("wakeup",e.ping);case 14:case"end":return t.stop()}}),t)})))()}},Hb=Gb,Jb=(n("4b03"),Object(C["a"])(Hb,Jv,Kv,!1,null,null,null)),Kb=Jb.exports;a["default"].use(r["a"]),a["default"].use(Mh["a"],{defaultIconPack:"fas"}),Rh["a"].extend("positive",(function(e){return Number(e)>0})),a["default"].use(Rh["b"],{i18nRootKey:"validations",i18n:Rc,inject:!1}),a["default"].use(zh.a),a["default"].use(Lh["a"]);var Yb=n("c1df");a["default"].use(Bh.a,{moment:Yb}),a["default"].use(Vh.a,{prevent:["input[type=text]","input[type=password]","input[type=search]","input[type=email]","textarea",".ql-editor"]}),a["default"].use(Gh.a),a["default"].use(Hh),a["default"].use(Jh["a"]),a["default"].use(hg),a["default"].use(Og),a["default"].use(Vg),a["default"].use(ov),a["default"].use(Pv),a["default"].use(qv),Wv.a.plugins.unregister(Hv.a),Wv.a.plugins.unregister(Fi.a),Wv.a.helpers.merge(Wv.a.defaults.global.plugins.datalabels,{anchor:"end",align:"end",offset:5,clamp:!0}),a["default"].config.productionTip=!1,a["default"].prototype.$eventBus=new a["default"],new a["default"]({render:function(e){return e(Kb)},router:Nh,store:yp,i18n:Rc}).$mount("#app")},"573d":function(e,t,n){},5785:function(e,t,n){"use strict";n("bca5")},5786:function(e,t,n){},"57ec":function(e,t,n){"use strict";n("48c1")},"582e":function(e,t,n){},"58e7":function(e,t,n){"use strict";n("b303")},5967:function(e,t,n){"use strict";n("53bb")},"59ec":function(e,t,n){},"5a91":function(e,t,n){},"5c12":function(e,t,n){"use strict";n("daa9")},"5cf5":function(e,t,n){"use strict";n("6eb3")},"5e53":function(e,t,n){},"5e80":function(e,t,n){"use strict";n("db76")},"5f2c":function(e,t,n){},"5f37":function(e,t,n){},"5fb5":function(e,t,n){},6085:function(e,t,n){"use strict";n("45d3")},6284:function(e,t,n){e.exports=n.p+"img/aperio.bfe0ede1.jpg"},"64b1":function(e,t,n){"use strict";n("cf82")},6509:function(e,t,n){},6559:function(e,t,n){"use strict";n("840e")},6715:function(e,t,n){},"681e":function(e,t,n){"use strict";n("ba77")},"68c7":function(e,t,n){e.exports=n.p+"img/leica.1ca27d5c.png"},"6a53":function(e,t,n){"use strict";n("0904")},"6d36":function(e,t,n){},"6d72":function(e){e.exports=JSON.parse('{"about-cytomine":"Over Cytomine","absolute-link-mode":"Absoluut","access-denied":"Verboden Acces ","account":"Rekening","actions":"Acties","active-projects":"Actieve projecten","activity-chart-info-message":"Deze grafiek toont een samenvatting van de activiteit die plaatsvond tijdens de geselecteerde periode","activity-charts":"Activiteit grafieken","activity-history":"Activiteit geschiedenis","activity-logs":"Activiteitenlogboeken","activity-of-user":"Usersactiviteit {username}","activity":"Activiteit","add-attached-file":"Voeg een bijgevoegd file toe","add-files":"Files toevoegen...","add-image":"Voeg een afbeelging toe","add-images":"Afbeeldingen toevoegen","add-members-to-project":"Voeg projectleden toe","add-new-comment":"Voeg een nieuwe commentaar toe","add-term":"Nieuwe term","add-track":"Track toevoegen","admin-menu":"Administratie","admin-warning":"Ik bevestig dat ik deze user een beheerder wil maken.","admin":"Admin","advanced-search":"geavanceerd zoeken","algorithm":"Algoritme","algorithms":"Algoritmen","all-analyses":"Alle","all-annotations-uncategorized":"Alle annotaties ongecategoriseerd","all-channels":"Alle kanalen","all-dates":"Alle","all-draw-tools":"Alle draw tools","all-images":"Alle","all-ontologies":"Alle","all-panels":"Alle gereedschappen","all-resolutions":"Alle","all-users-analyses":"Alle users/analyses","all":"Alle","allowed-formats-upload-info":"Ondersteunde beeldbestandsformaten:","already-in-project":"Reeds in het project","analyses":"Analyses","analysis-annotations-info-message":"Annotaties gemaakt door automatische analyse (uitvoering van een algoritme)","analysis-annotations":"Analyse annotaties","analysis":"Analyse","and-count-others":"- | en nog een | en {tel} anderen","annotated-images-vs-contributor":"Geannoteerde afbeeldingen VS. bijdrager","annotated-images-vs-contributors-chart-info-message":"deze grafiek toont het aantal afbeeldingen dat door elk lid is geannoteerd. Alleen annotaties die tijdens de geselecteerde periode zijn gemaakt, worden in aanmerking genomen.","annotated-images-vs-term":"Geannoteerde afbeeldingen VS. term","annotated-images-vs-terms-chart-info-message":"Deze grafiek geeft voor elke term het aantal afbeeldingen weer met ten minste één annotatie die aan deze term is gekoppeld. Alleen annotaties die tijdens de geselecteerde periode zijn gemaakt, worden in aanmerking genomen.","annotation-comments":"Opmerkingen","annotation-creations":"Annotatie creaties","annotation-details-box":"Annotatiedetails doos","annotation-details":"Annotatiegegevens","annotation-layers":"Annotatie lagen","annotation-selections-info-message":"Elke keer dat een user op een annotatie in een afbeelding klikt, wordt een annotatieselectie opgeslagen","annotation-selections":"Annotatie selecties","annotation-type":"Annotatie type","annotation":"Annotatie","annotations-list":" Lijst met annotaties","annotations-vs-contributors-chart-info-message":"Deze grafiek toont het aantal annotaties dat door elk lid tijdens de geselecteerde periode is gemaakt","annotations-vs-terms-chart-info-message":"Dit diagram toont het aantal handmatige annotaties dat aan elke term is gekoppeld. Alleen annotaties die tijdens de geselecteerde periode zijn gemaakt, worden in aanmerking genomen.","annotations":"Annotaties","api-keys":"API-sleutels","area":"Gebied","associate-tags":"Tags koppelen","associated-by":"geassocieerd door {usersnaam}","attached-files":"Bijlagen files","back-to-login":"Terug naar authenticatieformulier","barchart-click-label-to-toggle-visibility":"Klik op een label boven de grafiek om de gegevens die bij dit label horen in de grafiek weer te geven/te verbergen","barchart-hover-mouse-for-details":"Plaats de muisaanwijzer op een balk om details over die balk te bekijken","black":"Zwart","blind-mode-explanation":"Als de blinde modus is ingeschakeld, zien bijdragers geen namen van projectafbeeldingen. Dit kan handig zijn wanneer afbeeldingsnamen informatie bevatten (bijvoorbeeld het type ervaring) dat het werk van bijdragers mogelijk kan beïnvloeden.","blind-mode":"blinde modus","blinded-name-indication":"Verborgd","blue":"Blauw","boolean":"Booleaans","brightness":"Helderheid","broadcast-my-position":"Zend mijn positie in de afbeelding uit en laat andere gebruikers mij volgen","broadcast":"Verspreiding en opvolging","browser":"Browser","button-accept-all":"Alles valideren","button-add-comment":"Voeg een commentaar toe","button-add-image":"Voeg een afbeelding toe","button-add-members":"Leden toevoegen","button-add":"Toevoegen","button-added":"Toegevoegd","button-adjust-image":"Plan aanpassen","button-adjust-slice":"Afbeelding aanpassen","button-adjust":"Aanpassen","button-best-fit-zoom":"Pas zoom aan om te bekijken","button-cancel-review":"Review annuleren","button-cancel":"Annuleren","button-center-view-on-annot":"Kader de view op deze annotatie ","button-change-ontology":"Knop om de ontologie te veranderen","button-clear":"Resetten","button-close":"Sluiten","button-comments":"Opmerkingen","button-compute-profile":"Profiel berekenen","button-confirm":"Bevestigen","button-continue-review-later":"Ga later verder met de review","button-continue-review":"Validatie voortzetten","button-copy-url":"URL kopieren","button-copy":"Kopiëren","button-delete":"Verwijderen","button-details":"Details","button-download":"Downloaden","button-edit":"Bewerken","button-export-as-csv":"CSV exporteren","button-full-text":"Alles zien","button-get-username":"Usersnaam ophalen","button-hide-filters":"Verberg filters","button-hide":"Verbergen","button-kill":"Stoppen","button-launch-new-analysis":"Een nieuwe analyse starten","button-less":"Minder","button-load-more":"Meer loaden knop","button-lock":"blokkeren","button-login":"Inloggen","button-manage-members":"Leden managen","button-metadata":"Metagegevens","button-more-info":"Meer informatie","button-more":"Meer","button-new-tag":"nieuwe tag","button-new-trusted-source":"Nieuwe trusted source","button-new-user":"Nieuwe user","button-next-image":"Volgende afbeelding","button-open":"Openen","button-previous-image":"Vorige afbeelding","button-properties":"Eigenschappen","button-refresh":"Refresh","button-register":"Register","button-reject-all":"Alles weigeren","button-remove-selected-members":"Verwijder geselecteerde leden","button-remove":"Verwijderen","button-rename":"Hernoemen","button-reset-opacities":"Dekkingen resetten","button-reset-password":"Reset wachtwoord","button-reset-zoom":"Zoom resetten","button-reset":"Resetten","button-save":"Save","button-set-calibration":"Kalibreren","button-set-magnification":"De vergroting veranderen","button-share":"Delen","button-show-filters":"Toon filters","button-show":"Tonen","button-start-review":"Review starten","button-start":"Uploaden","button-unlink":"Scheiden","button-unlock":"Unlock","button-unvalidate-and-continue-review":"Validatie annuleren","button-unvalidate-review":"Validatie annuleren knop","button-validate-review":"Review valideren","button-view-activity":"Activiteit bekijken","button-view-all":"Alles zien","button-view-crop":"View het crop","button-view-in-image":"Zie op de afbeelding","button-view":"View","by-term":"Per termijn","by-track":"Per track","by":"Door","calibrate-image":"Afbeelding kalibreren","cancel-upload":"Uploaden annuleren","cannot-delete-ontology-with-projects":"Deze ontologie kan niet worden verwijderd: deze wordt gebruikt in projecten.","categorization":"Categorisering","change-ontology-warning-message":"Als u de ontologie wijzigt, worden alle bestaande annotatie-termassociaties verwijderd. Deze actie is onomkeerbaar.","change-ontology":"Ontologie veranderen","channel-abbr":"kan.","channel":"Kanaal","checking-integrity":"Integriteitscontrole wordt uitgevoerd","choose-file-or-drop":"Klik hier of sleep de file van uw keuze","circle":"Cirkel","classic-mode-explanation":"Bijdragers hebben het recht om zonder beperking gegevens in dit project toe te voegen, te bewerken en te verwijderen, inclusief annotaties, eigenschappen en beschrijvingen op lagen van andere gebruikers.","classic":"Klassiek (collaboratief)","click-or-drop-new-file":"Klik hier om een ??nieuwe file te slepen en neer te zetten om het huidige bestand te vervangen","close-admin-session":"De adminsessie sluiten","color":"Kleur","colors":"Kleuren","command-line-flag":"Opdrachtregelargument","comment-will-be-sent-by-email":"De opmerking wordt per e-mail naar de geselecteerde users verzonden","comment":"Opmerking","comments":"Opmerkingen","communication-error":"Communicatie fout","companion-files":"Gerelateerde files","configuration":"Configuratie","confirm-close-project-message":"Bent u zeker dat u dit project wilt sluiten? De {viewers} die het bevat, worden ook gesloten.","confirm-close-project":"Project afsluiten","confirm-default-property-not-used-in-project":"Momenteel zijn er geen annotaties in dit project gekoppeld aan een eigenschap met sleutel \'{key}\'.<br>Weet u zeker dat u deze als de standaardeigenschap wilt gebruiken","confirm-default-property":"Eigenschap bevestigen door uitsluiting ","confirm-deletion-analysis-data":"Bent u zeker dat u de volgende analysegegevens wilt verwijderen:","confirm-deletion-annotation":"Bent u zeker dat u deze annotatie wilt verwijderen?","confirm-deletion-attached-file":"Bent u zeker dat u het bijgevoegde file {filename} wilt verwijderen?","confirm-deletion-file":"Bent u zeker dat u dit file wilt verwijderen?","confirm-deletion-ontology":"Bent u zeker dat u de ontologie {name} wilt verwijderen?","confirm-deletion-term":"Bent u zeker dat u de term {name} wilt verwijderen?","confirm-deletion-track":"Bent u zeker dat u de {name}-tracering wilt verwijderen?","confirm-deletion":"Verwijdering bevestigen","confirm-ontology-change-delete-user-terms":"Projectleden hebben termen gekoppeld aan annotaties ({count} associaties). Weet u zeker dat u deze koppelingen wilt verwijderen?","confirm-ontology-change":"Bevestig de wijziging van de ontologie","confirm-unlink-view-to-track":"Deze afbeelding wordt gesynchroniseerd met een andere afbeelding waarin u een gebruiker volgt. Dit kan leiden tot conflicten en grillig gedrag. Als u bevestigt, wordt de synchronisatie onderbroken om een ??dergelijk conflict te vermijden","confirm-untrack-to-link-view":"Dit beeld wordt momenteel gesynchroniseerd met de bewegingen van een andere gebruiker. Dit kan leiden tot conflicten en grillig gedrag. Als u bevestigt, wordt de synchronisatie onderbroken om een ??dergelijk conflict te vermijden","connect-as-user":"Log in als {usersnaam}","connections-chart":"Verbindingen grafiek","contact-info":"U kunt contact opnemen met het Cytomine-team via {contactMail}.","contact":"Contact","content-type":"Inhoudstype","contrast":"Contrast","contributor-icon-label":"U bent een projectmedewerker","contributor":"Contributor","contributors":"bijdragers","converted":"Omgebouwd","converting":"Conversie bezig","copy-paste":"Kopiëren/plakken","copy":"Kopiëren","core-cannot-be-reached":"Communicatiefout met Cytomine-backend","count-active-users":"geen actieve user | een actieve user | {count} actieve users","count-annotation-terms":"0 termassociatie | 1 termassociatie | {count} termassociaties","count-annotations":"0 annotatie | 1 annotatie | {tel} annotaties","count-bands":"- | 1 bandje | {tel} bands","count-files":"0 file| 1 file | {count} files","count-frames":"- | 1 frame | {tel} frames","count-per-page":"{count} per pagina","count-reviewed-annotations":"0 annotatie gevalideerd | 1 annotatie gevalideerd | {count} gevalideerde annotaties","count-slices":"- | plan | {tel} plannen","count-viewers":"geen kijker | kijkers | {count} kijkers","create-ontology-for-project":"Maak een ontologie met dezelfde naam als het project","create-ontology":"Ontologie creëeren","create-project":"Een project aanmaken","create-source":"Een trusted source creëeren","create-tag":"Een tag maken","create-term":"Een term creëeren","create-track":"Maak een track","create-user":"Maak een user aan","created-by":"Gemaakt door","created-on":"Gecreëerd op","created":"Gemaakt","creation-date":"Aanmaakdatum","creation-info":"Creatie informatie","creator":"Schepper","current-selection":"Selectie","currently-visible-annotations-for-track":"Annotaties die momenteel zichtbaar zijn voor de tracering","currently-visible-annotations-with":"Momenteel zichtbaar annotatie met","currently":"Momenteel","custom-ui":"Custom interface (UI)","cytomine-company":"Cytomine bedrijf","cytomine-sponsors-info":"Cytomine Community Edition werd ontwikkeld door {cytomineCompanyLink} in samenwerking met de Universiteit van Luik en wordt gesubsidieerd door onderzoeksovereenkomsten van het Waalse Gewest.","cytomine-website-info":"Meer informatie vindt u op de website van het Cytomine-project: {websiteLink}.","dashboard":"Dashboard","data-last-updated-on":"Gegevens geupdated om {time}","data":"Data","date":"Datum","day":"Dag","default-annotation-layers":"Lagen worden standaard geladen","default-property":"Default eigenschap","default-value":"Eigenschap door uitsluiting","delete-analysis-confirmation-message":"Bent u zeker dat u deze scan wilt verwijderen? Alle gegevens in dit project gaan onherstelbaar verloren.","delete-analysis-data":"Analysegegevens verwijderen","delete-analysis":"Analyse verwijderen","delete-data":"Verwijder data","delete-image-confirmation-message":"Bent u zeker dat u afbeelding {imageName} wilt verwijderen? <br> Deze actie kan niet ongedaan worden gemaakt","delete-image":"Afbeelding verwijderen","delete-project-confirmation-message":"Bent u zeker dat u het project {projectName} wilt verwijderen? <br> Alle gegevens in dit project gaan onherstelbaar verloren","delete-project":"Project verwijderen","delete-source-confirmation-message":"Weet u zeker dat u de trusted source {username}/{dockerUsername} wilt verwijderen?","delete-source":"De trusted source verwijderen","delete-tag-confirmation-message":"Bent u zeker dat u de {projectName}-tag wilt verwijderen? <br> Alle verenigingen gaan onherstelbaar verloren","delete-tag":"Tag verwijderen","delete":"verwijderen","deleted-analysis-data":"Data analysis deleted","deployed":"Ingezet","deploying":"Implementatie bezig","deprecated":"Verouderd ","description":"Beschrijving","detailed-image-consultations":"Afbeeldingsweergave details","detailed-image-information":"Gedetailleerde informatie van de afbeelding {imageName}","detailed-project-connections":"Details van projectverbindingen","detecting-format":"Formaatdetectie wordt uitgevoerd","developer-mode":"Developersmodus","digital-zoom-checkbox-label":"Digitale zoom inschakelen (door interpolatie)","digital-zoom":"Digitale zoom ","disabled":"Uitgeschalekd","display-annot-details":"Bekijk details van geselecteerde annotatie","display":"Display","dockerhub":"DockerHub","documentation-info":"Volledige documentatie is beschikbaar {docLink}.","documentation":"Documentatie","domain":"Cytomine-domein","dont-have-access-to-any-ontology":"U hebt geen toegang tot ontologie","download-CSV":"CSV downloaden","download-excel":"Excel downloaden","download-PDF":"Download PDF","download-permission":"Download toestemming ","download-results":"Resultaten downloaden","drag-drop-upload-info":"Als u Google Chrome, Mozilla Firefox of Apple Safari gebruikt, kunt u files van uw computer naar de \\"{labelButton}\\"-knop slepen en neerzetten.","draw-tools":"Draw tools","draw":"Tools voor annotaties","duration":"Duur","editing-mode-explanation":"De editingmodus bepaalt de machtigingen van bijdragers. Projectmanagers hebben nog steeds de mogelijkheid om gegevens voor dat project te bekijken, toe te voegen, te bewerken en te verwijderen","editing-mode":"Editingmodus","email":"E-mailadres","enabled":"Ingeschakeld","end-tracking-user-no-longer-broadcasting":"Het volgen van {username} in afbeelding {imageName} is gestopt omdat hij/zij is gestopt met het uitzenden van zijn/haar locatie.","enter-comment":"Voer uw opmerking in","enter-description":"Voer een beschrijving in","enter-new-name-of-image":"Nieuwe afbeeldingsnaam","enter-text":"Tekst invoeren","environment-provider-name":"usersnaam van de omgeving-provider","environment-provider":"Omgeving-provider","error-attached-files":"Fout bij het laden van bijgevoegde bestanden","error-cannot-upload":"Een onverwachte fout verhindert uploads","error-convert":"Conversie error","error-deployment":"Implementatiefout","error-extraction":"Ophaal error","error-failed-to-fetch-image-consultations":"Er is een fout opgetreden bij het ophalen van afbeeldingsweergaven","error-fetch-properties":"Fout bij het laden van eigenschappen","error-format":"Formaat error","error-integrity":"Beschadigd bestand","error-load-annotations-filters":"Er is een fout opgetreden bij het laden van annotatiefilters","error-loading-image-bad-project":"Ten minste één afbeelding bevindt zich niet in het project dat aan de link is gekoppeld","error-loading-image":"Er is een fout opgetreden tijdens het laden van de afbeelding","error-unpacking":"Decompressie fout","error":"Fout","execute-command":"Run-command","execution-date":"Executie datum","execution-duration":"Uitvoertijd","execution-log":"Uitvoeringslogboek","extracting-data":"Gegevensextractie wordt uitgevoerd","failed-fetch-annots":"Door een fout konden annotaties niet worden geladen","failed-fetch-current-stats":"Er is een fout opgetreden bij het laden van statistieken over de huidige activiteit","failed-fetch-profile":"Door een fout kon het profiel niet worden geladen","failed-fetch-recent-projects":"Fout bij het laden van recente projecten","failed-fetch-total-counts":"Er is een fout opgetreden tijdens het laden van statistieken","failed":"Failed","fav":"Fav.","favorite":"Favoriet","file-tree":"Fileboom","filename":"Filenaam","files":"Files","fill":"Invullen","filter":"Filter ","filters":"Filters","first-consultation":"Eerste afbeelding consult","first-project-connection":"Eerste verbinding met het project","firstname":"Voornaam","follow-user":"User opvolging","followers":"Volgers","forgot-credentials":"{Usersnaam} of {wachtwoord} vergeten?","forgot-password":"Wachtwoord vergeten","forgot-username":"Usersnaam vergeten","format":"Formaat","frame-per-second":"f/s","frame-rate":"Frame rate","freehand-correct-add":"Corrigeer de annotatie door er een polygoon uit de vrije hand aan toe te voegen","freehand-correct-remove":"Corrigeer de annotatie door er een polygoon uit de vrije hand van af te trekken","freehand-line":"Lijn uit de vrije hand","freehand-polygon":"veelhoek uit de vrije hand","from-file":"Van file","from":"Van","general":"Algemeen","geometry-info":"Metingen (oppervlakte, omtrek, lengte)","github-repository":"GitHub-gids","github":"Github","global-size":"Totale grootte","go-back":"Vorige pagina","green":"Groen","guest":"Gast","height":"Hoogte","help":"Hulp","here":"hier","hide-by-default":"Default verborgen","hide-contributors-layers-explanation":"Als dit vakje is aangevinkt, kan een \\"eenvoudige\\" bijdrager de lagen van de andere bijdragers van het project niet zien. Projectmanagers kunnen nog steeds alle lagen bekijken.","hide-contributors-layers":"Verberg bijdragerlagen","hide-managers-layers-explanation":"Als dit vakje is aangevinkt, kan een \\"eenvoudige\\" bijdrager de lagen van de projectmanagers niet zien. Projectmanagers kunnen nog steeds alle lagen bekijken.","hide-managers-layers":"Lagen verbergen voor managers","hide-successful-upload":"Succesvolle uploads verbergen","hierarchical-drag-drop-term":"Termen kunnen hiërarchisch worden georganiseerd door middel van Drag & Drop","histogram-scale":"Schaal van histogrammen","hour":"Uur","hue":"Tint","huge":"Erg groot","id":"ID","image-channels":"Channels","image-consultations-info-message":"Elke keer dat een afbeelding in Cytomine wordt geopend, wordt een beeldconsultatie opgeslagen","image-consultations":"Afbeeldingen bekijken","image-depth":"Diepte","image-details":"Afbeeldingsdetails","image-filters":"Afbeeldingsfilters","image-height":"Hoogte","image-in-review-by-since":"Deze afbeelding wordt gevalideerd door sinds {date}","image-metadata":"Metagegevens van de afbeelding","image-not-reviewed":"Deze afbeelding is niet gevalideerd","image-size":"Afbeeldingsgrootte","image-time":"Duur","image-validated-by-on":"Deze afbeelding is gevalideerd door {user} op {date}","image-width":"Breedte","image":"Afbeelding","images_downloadable_by_contributor-explanation":"Met deze optie kunnen bijdragers de afbeeldingen van dit project downloaden","images_downloadable_by_contributor":"Afbeeldingen die kunnen worden gedownload door bijdragers","images-in-projects":"Afbeeldingen binnen projecten","images":"Afbeeldingen","important-notes":"Belangrijke opmerkingen","in-project":"in {projectnaam}","in-queue":"In de wachtrij","in-review":"Review in proces ","in-this-image":"op deze afbeelding","in-this-slice":"in dit slice","indeterminate":"Onbekend","info-keyword-stop-preview-description":"Voeg het trefwoord {keyword} in waar u de voorbeeldtekst wilt laten eindigen.","information":"Informatie","inspect-button":"Inspecteren","insufficient-permission":"U heeft geen toestemming om deze pagina te bekijken","intensities-manipulation":"Aanpassing van intensiteiten","invalid-password":"Fout wachtwoord","invalid-token":"Ongeldige token","job-id":"Analyse-ID","key":"Sleutel","killed":"Stop","language":"Taal","large":"Groot","last-activity":"Laatste Activiteit","last-connection":"laatste verbinding","last-connections":"Laatste verbindingen","last-consultation":"Laatst gezien","last-day":"Laatste dag","last-image":"Laatste afbeelding","last-month":"Vorige maand","last-opened-image":"Laatst bekeken afbeelding","last-project-connection":"Laatste verbinding met het project","last-release":"Laatste versie","last-week":"Vorige week","last-year":"Afgelopen jaar","lastname":"Naam","launch-new-analysis":"Lancering van een nieuwe analyse","launched-by":"Gelanceerd door","launcher":"Schepper","layer":"Laag","layers-opacity":"Dekking van de lagen","ldap":"LDAP","legend":"Legende","length":"Lengte","line":"Lijn","linear":"Lineair","link-group":"Groep {nummer}","link-images":"afbeeldingsynchronisatie","link-mode":"Mode","link-other-images-to-this-group":"Synchroniseer deze groep met andere afbeeldingen...","link-to-project-upload-info":"U hebt de mogelijkheid om de afbeeldingen handmatig aan projecten te koppelen wanneer het uploaden is voltooid.","link-view-with":"Synchroniseer deze afbeelding met...","link-with-project":"Met een project koppelen","link-x-y-resolution":"De resolutie langs de X- en Y-as koppelen","list":"Lijst","listdomain":"Lijst met cytominedomeinen","live":"Live","log-being-collected":"Het uitvoeringslogboek wordt verzameld","logarithmic":"Logaritmisch","login":"Log in","logout":"Afmelden","magnification":"Vergroting","managed-projects":"Begeleide projecten","manager-icon-label":"U bent projectleider","manager":"Manager","managers":"Beheerders","mandatory":"Verplicht","manual-annotations-info-message":"Annotaties gemaakt door de user","manual-annotations-vs-contributor":"Manuele annotaties VS. bijdrager","manual-annotations-vs-term":"Manuele annotaties VS. term","manual":"Manueel","max-size-upload-info":"De maximale grootte per bestand is 100 GB","medium":"Medium","members-activity":"Leden activiteit","members":"Leden","merged-channels":"Samengevoegde kanalen","min-max":"Min/Max","mm-per-pixel":"mm/pixel","mm-per-slice":"mm/vlak","mm":"mm","modify":"Bewerken","most-active-project":"Meest actieve project","move":"Verplaatsen","multiple-terms":"Meerdere termen","multiple-tracks":"Meerdere tracks","my-role":"Mijn rol","name":"Naam","nb-jobs":"Aantal executies","nb-success-jobs":"Aantal succesvolle executies","new-algorithm":"Nieuw algoritme","new-name":"Nieuwe naam","new-ontology":"Nieuwe ontologie","new-project":"Nieuw project","nm-per-pixel":"nm/pixel","nm-per-slice":"nm/kaart","no-account-yet":"Nog geen account? {registerLink}","no-algorithm":"Geen algoritme om weer te geven","no-analysis-run":"Geen analyse gestart","no-annotation-comments":"Geen opmerkingen voor deze annotatie","no-annotation":"Geen annotatie","no-attached-file":"Geen file bijgevoegd","no-default-property":"Geen defaulteigenschap","no-description":"Geen beschrijving","no-file":"Geen file  ","no-image-consultation":"Geen online afbeeldingconsult","no-image-filter":"Geen filters om weer te geven","no-image-recently-opened":"Geen recent bekeken afbeeldingen","no-image":"Geen afbeelding om weer te geven","no-info":"Geen informatie","no-key-selected":"Geen sleutel gekozen","no-log-to-display":"Geen logboek beschikbaar","no-member-fitting-criteria":"Geen enkel lid voldoet aan de zoekcriteria","no-ontology":"Geen ontologie","no-outline":"Geen outline","no-preview-available":"Geen preview beschikbaar","no-profile":"Geen profiel","no-project-connection":"Geen projectverbinding","no-project":"Geen projecten om weer te geven","no-properties":"Geen eigenschappen","no-property-matching-search-string":"Er komen geen eigenschappen overeen met de gezochte tekst","no-recent-image":"Geen recent bekeken afbeeldingen","no-recent-project":"Geen recent bekeken projecten","no-record":"Geen toegang","no-result-file":"Geen resultatenfile","no-result":"Geen resultaat","no-selected-layers":"Geen laag geselecteerd","no-software":"Geen algoritme","no-tag-fitting-criteria":"Geen tags die voldoen aan de zoekcriteria","no-tag":"Geen tag ","no-term-to-add":"Geen term om toe te voegen","no-term":"Geen term","no-track-to-add":"Geen track toe te voegen","no-track":"Geen track ","no-tracking":"Geen tracking","no-trusted-source-fitting-criteria":"Geen trusted source die aan de zoekcriteria voldoet","no-trusted-source":"Geen trusted source","no-uploaded-file":"Geen file","no-user-fitting-criteria":"Er voldoen geen users aan de zoekcriteria","no":"Neen","none":"Geen","not-available":"Niet beschikbaar.","not-found-error":"De gevraagde bron kan niet worden geladen","not-found":"niet gevonden","not-launch":"Nog niet begonnen","not-used-in-any-project":"In geen enkel project gebruikt","nothing-more-to-load":"Alles is geladen","notif-deprecated-software":"Deze software is verouderd","notif-error-add-image":"Een fout verhinderde het toevoegen van de afbeelding {imageName} aan project {projectName}","notif-error-add-project-members":"Door een fout konden de geselecteerde gebruikers niet aan het project worden toegevoegd","notif-error-add-tag-domain-associations":"Een fout verhinderde het koppelen van de geselecteerde tags","notif-error-add-tags":"Een fout verhinderde het maken van de geselecteerde tags","notif-error-add-term":"Er is een fout opgetreden bij het koppelen van de term","notif-error-add-track":"De track mag niet toegevoegd worden","notif-error-add-viewer-image":"Door een fout kon de afbeelding niet worden toegevoegd","notif-error-algortihm-deletion":"Fout bij het verwijderen van het algoritme","notif-error-already-broadcasting-this-image":"U zendt dit afbeelding al uit op en andere view","notif-error-analysis-data-deletion":"Door een fout konden de dataanalyse niet worden verwijderd","notif-error-analysis-deletion":"Door een fout kon de analyse niet worden verwijderd","notif-error-analysis-kill":"Door een fout kon de analyse niet worden gestopt","notif-error-analysis-launch":"Door een fout kon de analyse niet worden gestart","notif-error-analysis-parameters-options":"Een fout verhinderde het ophalen van beschikbare opties voor de parameter {paramName}","notif-error-annotation-correction":"Door een fout kon de annotatie niet worden gecorrigeerd","notif-error-annotation-creation":"Een fout verhinderde het maken van de annotatie","notif-error-annotation-deletion":"Door een fout kon de annotatie niet worden verwijderd","notif-error-annotation-fill":"Door een fout kon de annotatie niet worden ingevuld","notif-error-annotation-paste":"De annotatie kan niet worden geplakt omdat deze te breed is voor deze afbeelding","notif-error-annotation-rejection":"Door een fout kon de annotatie niet worden afgewezen","notif-error-annotation-repeat":"Annotatie kan niet worden herhaald","notif-error-annotation-update":"Door een fout kon de annotatie niet worden bewerkt","notif-error-annotation-validation":"Door een fout kon de annotatie niet worden gevalideerd","notif-error-attached-file-creation":"Een fout verhinderde het uploaden van het bijgevoegde file","notif-error-attached-file-deletion":"Een fout verhinderde het verwijderen van het bijgevoegde file {filename}","notif-error-cancel-review":"Een fout verhinderde het ongedaan maken van de afbeeldingsreview","notif-error-change-role":"Een fout verhinderde het wijzigen van de rol van de user {username}","notif-error-change-status-algorithm-project":"Een fout verhinderde het wijzigen van de status van de algoritme {softwareName}","notif-error-change-status-image-filter-project":"Een fout verhinderde het wijzigen van de status van filter {filterName}","notif-error-custom-ui-change":"Een fout verhinderde het bijwerken van keuzes voor het aanpassen van de interface","notif-error-default-layer-add":"Een fout verhinderde het toevoegen van de laag aan de defaultlagen","notif-error-default-layer-delete":"Een fout verhinderde het verwijderen van de defaultlaag","notif-error-default-layer-update":"Door een fout kon de defaultlaag niet worden bijgewerkt","notif-error-default-property-update":"Door een fout kon de eigenschap door uitsluiting niet worden gewijzigd","notif-error-delete-uploaded-file":"Een fout verhinderde het verwijderen van het bestand","notif-error-delete-used-uploaded-file":"Deze afbeelding wordt gebruikt in projecten ({projects}) onder de volgende namen: {names}","notif-error-failed-to-connect-as-user":"Een fout verhinderde de verbinding","notif-error-failed-to-switch-back-as-real-user":"Door een fout kon je niet opnieuw inloggen met je echte account","notif-error-fetch-annotation-comments":"Fout bij het ophalen van opmerkingen","notif-error-fetch-annotations-viewer":"Fout bij het laden van annotaties","notif-error-fetch-next-image":"Een fout verhinderde het laden van de volgende afbeelding","notif-error-fetch-previous-image":"Een fout verhinderde het laden van de vorige afbeelding","notif-error-first-image":"Dit is de eerste afbeelding van het project","notif-error-forgot-password":"Door een fout konden we je geen e-mail sturen","notif-error-forgot-username":"Door een fout konden we u geen e-mail sturen","notif-error-general-config-update":"Door een fout kon de configuratie niet worden bijgewerkt","notif-error-image-calibration":"Een fout verhinderde het kalibreren van de afbeelding {imageName}","notif-error-image-deletion":"Een fout verhinderde het verwijderen van de afbeelding {imageName}","notif-error-image-rename":"Een fout verhinderde het hernoemen van de afbeelding {imageName}","notif-error-invalid-key-prefix":"De sleutel mag niet beginnen met {prefix}: dit voorvoegsel is door Cytomine gereserveerd voor intern gebruik.","notif-error-keys-not-regenerated":"Een fout verhinderde het opnieuw genereren van API-sleutels","notif-error-last-image":"Dit is de laatste afbeelding van het project","notif-error-loading-annotation-layers":"Fout bij het laden van de lijst met annotatielagen","notif-error-logout":"Fout tijdens uitloggen","notif-error-magnification-update":"Een fout verhinderde het updaten van de vergroting vande afbeelding {imageName}","notif-error-new-comment":"Een fout verhinderde het maken van de opmerking","notif-error-not-enough-representative":" De user kan niet verwijderen worden uit contactpersonen. In een project is minimaal één contactpersoon vereist","notif-error-ontology-creation":"Een fout verhinderde het creëeren van de ontologie","notif-error-ontology-deletion":"Een fout verhinderde het verwijderen van de ontologie","notif-error-ontology-rename":"Een fout verhinderde het hernoemen van de ontologie {name}","notif-error-ontology-tree-update":"Een fout verhinderde het wijzigen van de ontologieboom","notif-error-password-not-saved":"Een fout verhinderde het opslaan van het paswoord","notif-error-project-already-exists":"Een fout verhinderde het aanmaken van het project: deze projectnaam is al in gebruik","notif-error-project-creation":"Door een fout kon het project niet worden aangemaakt","notif-error-project-deletion":"Een fout verhinderde de verwijdering van het project {projectName}","notif-error-project-ontology-change-job-terms":"Onmogelijk om de ontologie van dit project te veranderen: analyses hebben geassocieerde termen met annotaties.","notif-error-project-ontology-change-reviewed-terms":"De ontologie van dit project kan niet worden gewijzigd: termen zijn gekoppeld aan gevalideerde annotaties.","notif-error-project-ontology-change":"Een fout verhinderde het wijzigen van de ontologie van het project {projectName}","notif-error-project-rename":"Een fout verhinderde het hernoemen van het project {projectName}","notif-error-redo":"Een fout verhinderde het opnieuw uitvoeren van de laatste actie","notif-error-register-username-exists":"Deze usersnaam is al in gebruik","notif-error-register":"Er is een fout opgetreden tijdens het registreren","notif-error-remove-project-members":"Door een fout konden geselecteerde leden niet uit het project worden verwijderd","notif-error-remove-prop":"Door een fout kon de eigenschap niet worden verwijderd","notif-error-remove-term":"Een fout verhinderde het verwijderen van de term","notif-error-remove-track":"Kan track mag niet verwijderen worden","notif-error-review-accept-all":"Door een fout konden alle annotaties niet worden gevalideerd","notif-error-review-reject-all":"Door een fout konden alle annotaties niet worden geweigerd","notif-error-save-image-consultation":"Een fout verhindert het opslaan van de afbeeldingconsultatie","notif-error-save-prop":"Door een fout kon de eigenschap niet worden gemaakt","notif-error-save-user-position":"Een fout verhindert het opslaan van uw positie in de afbeelding","notif-error-source-creation":"Door een fout kon de trusted source niet worden gemaakt","notif-error-source-delete":"Door een fout kon de trusted source {username}/{dockerUsername} niet worden verwijderd","notif-error-source-refresh":"Fout tijdens het updaten van de trusted source","notif-error-source-update":"Een fout verhinderde de wijziging van de trusted source","notif-error-start-review":"Door een fout kon de afbeeldingsreview niet worden gestart","notif-error-tag-creation":"Door een fout kon de tag niet worden gemaakt","notif-error-tag-delete":"Een fout verhinderde het verwijderen van de tag {tagName}","notif-error-tag-update":"Door een fout kon de tag niet worden gewijzigd","notif-error-target-annotation":"Het is niet mogelijk om de annotatie weer te geven","notif-error-term-creation":"Door een fout kon de term niet gecreëerd worden","notif-error-term-deletion":"De term kan niet worden verwijderd. Zorg ervoor dat er geen annotatie aan deze term is gekoppeld.","notif-error-term-update":"Een fout a verhindert de wijziging van de term","notif-error-track-creation":"Fout tijdens het maken van een track","notif-error-track-deletion":"Fout bij verwijderen van de track","notif-error-track-update":"Fout bij het wijzigen van de track","notif-error-tracked-user-position":"Fout bij het ophalen van de positie van de gevolgde user","notif-error-undo":"Een fout verhinderde het ongedaan maken van de laatste actie","notif-error-unvalidate-review":"Een fout verhinderde het ongedaan maken van de afbeeldingsreview","notif-error-update-description":"Een fout verhinderde het opslaan van de beschrijving","notif-error-user-creation":"Een fout verhinderde het aanmaken van de user","notif-error-user-details-not-saved":"Door een fout kon het profiel niet worden bijgewerkt","notif-error-user-lock":"Een fout verhinderde het uitsluiten van de user","notif-error-user-unlock":"Door een fout kon de user niet worden ontgrendeld","notif-error-user-update":"Een fout verhinderde de wijziging van de user","notif-error-validate-review":"Een fout verhinderde de review van de afbeelding","notif-error-welcome-message-update":"Door een fout kon het welkomstbericht niet worden bijgewerkt","notif-success-add-image":"De afbeelding {imageName} is toegevoegd aan het project {projectName}","notif-success-add-project-members":"De geselecteerde gebruikers zijn toegevoegd aan het project","notif-success-add-tag-domain-association":"De geselecteerde tags zijn gekoppeld","notif-success-algorithm-deletion":"Het algoritme is verwijderd","notif-success-analysis-data-deletion":"De data analyse zijn succesvol verwijderd ","notif-success-analysis-deletion":"De analyse is succesvol verwijderd","notif-success-analysis-kill":"De analyse is succesvol gestopt","notif-success-analysis-launch":"De analyse is succesvol gestart","notif-success-annot-URL-copied":"Annotatie-URL is naar het klembord gekopieerd","notif-success-annotation-copy":"De annotatie is gekopieerd","notif-success-annotation-repeat":"De annotatie is herhaald","notif-success-attached-file-creation":"Het bijgevoegde file is succesvol geüpload.","notif-success-attached-file-deletion":"Het bijgevoegde file{filename} is succesvol verwijderd","notif-success-default-property-update":"De eigenschap door uitsluiting is succesvol bijgewerkt","notif-success-forgot-password":"Er is een e-mail naar uw e-mailadres verzonden om uw wachtwoord opnieuw in te stellen","notif-success-forgot-username":"Er is een e-mail met uw usersnaam naar uw e-mailadres verzonden","notif-success-image-calibration":"Afbeeldingsresolutie {imageName} is updated","notif-success-image-deletion":"Afbeelding {imageName} is verwijderd","notif-success-image-rename":"De naam van de afbeelding {imageName} is succesvol gewijzigd","notif-success-key-copied":"Sleutel gekopieerd naar klembord","notif-success-keys-regenerated":"API-sleutels zijn bijgewerkt","notif-success-login":"Welkom bij Cytomine","notif-success-magnification-update":"Vergroting van de afbeelding {imageName} succesvol bijgewerkt","notif-success-new-comment":"Uw commentaar is per e-mail verzonden","notif-success-ontology-creation":"De ontologie is gecreëerd","notif-success-ontology-deletion":"Ontologie {name} succesvol verwijderd","notif-success-ontology-rename":"De naam van de ontologie {naam} is succesvol gewijzigd","notif-success-password-saved":"paswoord succesvol bijgewerkt","notif-success-project-creation":"Het project is succesvol aangemaakt","notif-success-project-deletion":"Het project {projectName} is verwijderd","notif-success-project-ontology-change":"De ontologie van het project {projectName} is succesvol aangepast","notif-success-project-rename":"Het project {projectName} is succesvol hernoemd","notif-success-remove-project-members":"De geselecteerde leden zijn met succes uit het project verwijderd","notif-success-source-creation":"De trusted source is gemaakt","notif-success-source-delete":"Trusted source {username}/{dockerUsername} succesvol verwijderd","notif-success-source-refresh":"Update van de trusted source is aangevraagd","notif-success-source-update":"De trusted source is gewijzigd","notif-success-tag-creation":"De tag is succesvol aangemaakt","notif-success-tag-delete":"De tag {tagName} is succesvol verwijderd","notif-success-tag-update":"De tag is succesvol gewijzigd","notif-success-term-creation":"De term is gecreëerd","notif-success-term-update":"De term is succesvol geüpdatet.","notif-success-track-creation":"De track is gemaakt","notif-success-track-update":"De track is aangepast","notif-success-user-creation":"De user is succesvol aangemaakt","notif-success-user-details-saved":"Profiel succesvol updated","notif-success-user-update":"User succesvol gewijzigd","notif-success-welcome-message-update":"Het welkomstbericht is bijgewerkt","notif-unexpected-error":"Er is een onverwachte fout opgetreden","notif-warn-ontology-tree-order-not-persisted":"De volgorde van de kinderen in de stamboom wordt niet opgeslagen in de database","number-analysis-annotations":"Aantal analyseannotaties","number-annotation-creations":"Aantal aangemaakte annotaties","number-annotations-chart-info-message":"Deze grafiek toont het aantal annotaties dat tijdens de geselecteerde periode is gemaakt","number-annotations-info-message":"Het aantal annotaties dat u heeft gemaakt","number-annotations":"Aantal annotaties","number-connections":"# verbindingen","number-consultations":"Aantal consulten","number-images-info-message":"Het aantal beschikbare afbeeldingen in de projecten waarvan u lid bent","number-jobs":"jobs","number-per-category":"Aantal per categorie","number-per-page":"Aantal per pagina","number-projects-info-message":"Het aantal projecten waar u lid van bent","number-reviewed-annotations-info-message":"Het aantal annotaties dat u heeft gevalideerd","number-reviewed-annotations":"Aantal gevalideerde annotaties","number-success":"Succesvolle jobs","number-user-annotations":"Aantal handmatige annotaties","number-viewed-images":"Aantal bekeken afbeeldingen","number":"Nummer","offline":"Offline users","ongoing":"Bezig","online-contributors":"Online bijdragers","online-managers":"Online Managers","online-users":"Online users","online":"Online","only-last-release":"Alleen de laatste versies","only-UI-runnable":"Alleen uitvoerbare algoritmen","ontologies":"Ontologieën","ontology":"Ontologie","opacity":"ondoorzichtigheid","open-admin-session":"Een adminsessie openen","open-in-viewer":"Openen in de viewer","operating-system":"Operating systeem","optional-parameters":"Optionele parameters","orange":"Oranje","original-no-filter":"Geen filter","originalFilename":"Oorspronkelijke bestandsnaam","other-information":"Andere informaties","outline-color":"Outline kleur","overview":"In zicht","page-not-found":"Pagina niet gevonden","parameters":"Parameters","password-confirm":"Nieuw paswoord (bevestiging)","password-current":"Huidig paswoord","password-expired-info-message":"Uw wachtwoord is verlopen. Kies een nieuwe","password-new":"Nieuw paswoord","password":"Paswoord","paste-repeat-info":"Herhaal dit bij volgende {input}-slices.","paste-repeat":"Herhalen","paste":"Plakken","per-image":"Per afbeelding","per-term":"Per termijn","per-track":"Per track","per-user":"Per user","perimeter":"Omtrek","period":"Periode","pixel-intensity":"Intensiteit","pixels":"pixel","point":"Punt","polygon":"Veelhoek","possible-conflict":"Potentieel conflict","prefilled-parameters":"Vooraf ingevulde parameters","prefix":"Voorvoegsel","preview-size":"Preview size","preview":"Preview  ","previewed":"Previewed","private-key":"Prive sleutel","profile":"Profiel","progress":"Progress","project-connections-info-message":"Elke keer dat de user een project in Cytomine opent, wordt een projectverbinding opgeslagen","project-connections":"Projectverbindingen","project-contributor":"Projectmedewerker","project-manager":"Projectleider","project-representative":"Projectcontactpersoon","project-side-bar":"Project zijbalk","project":"Project","projects":"Projecten","properties":"Eigenschappen","public-key":"Publieke sleutel","pulling-command":"Herstel-command","purple":"Paars","ql-align":"Tekstuitlijning","ql-background-color":"Achtergrond kleur","ql-blockquote":"Citaat","ql-bold":"Vetgedrukt","ql-bullet-list":"Lijst met opsommingstekens","ql-clean-format":"Formatting verwijderen","ql-code-block":"Code","ql-font-color":"Tekst kleur","ql-font":"Lettertype","ql-header-1":"Titel 1","ql-header-2":"Titel 1","ql-header-3":"Titel 3","ql-header-4":"Titel 4","ql-image":"Een afbeelding toevoegen","ql-indent-left":"Links inspringen","ql-indent-right":"Rechts inspringen","ql-italic":"Cursief","ql-link":"Een link toevoegen","ql-ordered-list":"Georende lijst","ql-paragraph":"Paragraaf","ql-special-character":"Speciale karakters","ql-subscript":"index","ql-superscript":"Superscript tekst","ql-underline":"Onderstrepen","ql-video":"Een filmpje toevoegen","read-only-mode-explanation":"Bijdragers kunnen geen annotaties toevoegen, bewerken of verwijderen (zelfs niet op hun eigen lagen).","read-only":"Alleen lezen","recently-opened":"Recent bekeken","rectangle":"Rechthoek","red":"Rood","redo":"Opnieuw doen","regenerate-api-keys":"Regenereren","register":"Inschrijving","registration-date":"Registratie datum","reject-annotation":"Annotatie afwijzen","relative-link-mode":"Relatief","relaunch":"Herstarten","remark-long-operation":"Opmerking: deze bewerking kan enige tijd duren","remember-me":"Onthouden","remove-members-confirmation-message":"- | Bent u zeker dat u {username} uit het project wilt verwijderen? | Bent u zeker dat u de geselecteerde {count} leden uit het project wilt verwijderen?","remove-members":"Leden verwijderen","remove-yourself-from-manager-confirmation-message":"Bent u zeker dat u uwzelf wilt verwijderen uit de projectleiders? Deze actie is onomkeerbaar","remove-yourself-from-manager":"Intrekking van beheerrechten","rename-image":"Afbeelding hernoemen","rename-ontology":"Ontologie hernoemen","rename-project":"Project hernoemen","rename":"Hernoemen","representative-icon-label":"U bent projectcontactpersoon","representative":"Contactpersoon","representatives":"Contactpersonen","rescale":"Formaat wijzigen","resolution":"X/Y-resolutie","restricted-mode-explanation":"Bijdragers kunnen alleen annotaties toevoegen, bewerken en verwijderen uit hun eigen lagen.","restricted":"Beperkt","results":"Resultaten","review-explanation":"U kunt de annotaties valideren door ze één voor één te selecteren of ze allemaal tegelijk te verwerken met onderstaande knoppen","review-layer":"Review laag","review-list-visible-layers":"De volgende lagen worden weergegeven: {visibleLayers}.","review":"Review","reviewed-annotation-status-not-validated":"Niet gevalideerd","reviewed-annotation-status-validated":"Gevalideerd","reviewed-annotation-status":"Review Status","reviewed-annotations-info-message":"Annotaties gevalideerd tijdens het reviewproces","reviewed-annotations":"Gevalideerde annotaties","reviewed-by":"Reviewed door","reviewed-on":"Reviewed op","reviewed":"Reviewed","reviewers":"Reviewers","role":"Rol","rotate":"Schommelen","run-number":"#","running":"Bezig","sample-preview-of":"Afbeeldingsvoorbeeld {filename}","sample-preview":"Afbeeldingsvoorbeeld","saturation":"Verzadiging","screenshot":"Screenshot van de huidige afbeelding","search-or-create-tag":"Zoek naar een tag (of maak een nieuwe aan door de naam in te voeren gevolgd door de Enter-toets)...","search-placeholder":"Zoeken","search-user":"Zoek een gebruiker...","seconds":"tweede | seconden","see-environment-on":"Zie de omgeving op","see-source-code-on":"Bekijk de broncode op","select-all":"Selecteer alles","select-date":"Selecteer een datum","select-image-to-add":"Selecteer een afbeelding om toe te voegen","select-layer-placeholder":"Selecteer een laag","select-layer":"Selecteer een laag","select-ontology":"Kies ontologie","select-options":"Selecteer opties","select":"Selecteer","send-to-all-project-members":"Stuur naar alle projectleden","send-to-some-members":"Alleen naar bepaalde projectleden verzenden","set-magnification":"De vergroting veranderen","shortcut-general-close-modal":"Een venster sluiten","shortcut-general-shortcuts-modal":"Deze lijst met sneltoetsen tonen","shortcut-general":"Algemeen","shortcut-text-editor-bold":"De tekst vet maken","shortcut-text-editor-italic":"De tekst cursief maken","shortcut-text-editor-underline":"Tekst onderstrepen","shortcut-text-editor":"Teksteditor","shortcut-viewer-nav-drag-rotate":"De afbeelding draaien","shortcut-viewer-nav-drag-zoom":"Zoom in op een area","shortcut-viewer-nav-first-c":"Ga naar het eerste channel","shortcut-viewer-nav-first-slice":"Ga naar de eerste plan","shortcut-viewer-nav-first-t":"Ga naar het eerste frame","shortcut-viewer-nav-first-z":"Ga naar eerste slice","shortcut-viewer-nav-last-c":"Ga naar het laatste channel","shortcut-viewer-nav-last-slice":"Ga naar het laatste plan","shortcut-viewer-nav-last-t":"Ga naar het laatste frame","shortcut-viewer-nav-last-z":"Ga naar de laatste slice","shortcut-viewer-nav-move-down":"Naar beneden verplaatsen","shortcut-viewer-nav-move-left":"Naar links gaan","shortcut-viewer-nav-move-right":"Naar rechts gaan","shortcut-viewer-nav-move-up":"Omhoog gaan","shortcut-viewer-nav-next-c":"Ga naar het volgende channel","shortcut-viewer-nav-next-image":"Ga naar volgende afbeelding","shortcut-viewer-nav-next-slice":"Ga naar het volgende plan","shortcut-viewer-nav-next-t":"Ga naar het volgende frame","shortcut-viewer-nav-next-z":"Ga naar het volgende slice","shortcut-viewer-nav-previous-c":"Ga naar het vorige channel","shortcut-viewer-nav-previous-image":"Ga naar vorige afbeelding","shortcut-viewer-nav-previous-slice":"Ga naar het vorige plan","shortcut-viewer-nav-previous-t":"Ga naar het vorige frame","shortcut-viewer-nav-previous-z":"Ga naar het vorige slice","shortcut-viewer-nav-zoom-in":"Inzoomen","shortcut-viewer-nav-zoom-out":"Uitzoomen","shortcut-viewer-nav":"Viewer: Navigatie","shortcut-viewer-toggle-add-image":"Afbeeldingsselector tonen/verbergen","shortcut-viewer-toggle-all-annotations":"Annotatiepaneel in alle views tonen/verbergen","shortcut-viewer-toggle-all-broadcast":"Uitzending en opvolgingen paneel in alle views tonen/verbergen ","shortcut-viewer-toggle-all-current":"Geselecteerde annotatiedetails in alle views tonen/verbergen","shortcut-viewer-toggle-all-filters":"Toon/verberg afbeeldingskleurpaneel in alle views","shortcut-viewer-toggle-all-information":"Infopaneel weergeven/verbergen in alle views","shortcut-viewer-toggle-all-layers":"Lagenpaneel tonen/verbergen in alle views","shortcut-viewer-toggle-all-link":"Toon/verberg Frame Sync-paneel in alle views","shortcut-viewer-toggle-all-ontology":"Toon/verberg termenpaneel in alle  views","shortcut-viewer-toggle-all-overview":"Voorbeeld tonen/verbergen in alle views","shortcut-viewer-toggle-all-properties":"Toon/verberg eigenschappenvenster in alle views","shortcut-viewer-toggle-all-review-layer":"Validatielaag in review mode in alle views tonen/verbergen","shortcut-viewer-toggle-all-review":"Validatiepaneel in alle views tonen/verbergen","shortcut-viewer-toggle-all-selected-layers":"Toon/verberg geselecteerde annotatielagen in alle views","shortcut-viewer-toggle-all-zoom":"Zoompaneel weergeven/verbergen in alle views","shortcut-viewer-toggle-annotations":"Annotatiepaneel tonen/verbergen","shortcut-viewer-toggle-broadcast":"Uitzending en opvolgingspaneel tonen/verbergen","shortcut-viewer-toggle-current":"Geselecteerde annotatiedetails tonen/verbergen","shortcut-viewer-toggle-filters":"Het inkleuringspaneel voor afbeeldingen tonen/verbergen","shortcut-viewer-toggle-information":"Informatiepaneel tonen/verbergen","shortcut-viewer-toggle-layers":"Lagen layerspaneel tonen/verbergen","shortcut-viewer-toggle-link":"Shortcut viewer tonen/verbergen","shortcut-viewer-toggle-ontology":"Termenpaneel tonen/verbergen","shortcut-viewer-toggle-overview":"Voorbeeld tonen/verbergen","shortcut-viewer-toggle-properties":"Eigenschappenvenster tonen/verbergen","shortcut-viewer-toggle-review-layer":"Validatielaag in review mode tonen/verbergen","shortcut-viewer-toggle-review":"Validatiepaneel tonen/verbergen","shortcut-viewer-toggle-selected-layers":"Toon/verberg geselecteerde annotatielagen","shortcut-viewer-toggle-zoom":"Zoompaneel tonen/verbergen","shortcut-viewer-toggle":"Viewer: weergeven","shortcut-viewer-tool-circle":"Teken een cirkel","shortcut-viewer-tool-copy":"Annotatie kopiëren","shortcut-viewer-tool-correct-add":"Annotatie verbeteren door er een polygoon uit de vrije hand aan toe te voegen","shortcut-viewer-tool-correct-remove":"Annotatie verbeteren door er een polygoon uit de vrije hand van af te trekken","shortcut-viewer-tool-delete":"Delete geselecteerde annotatie","shortcut-viewer-tool-fill":"Annotatie invullen","shortcut-viewer-tool-freehand-line":"Teken een lijn uit de vrije hand","shortcut-viewer-tool-freehand-polygon":"Teken een veelhoek uit de vrije hand","shortcut-viewer-tool-line":"Teken een lijn","shortcut-viewer-tool-modify-delete-vertex":"Een hoekpunt met het bewerkingsgereedschap verwijderen","shortcut-viewer-tool-modify":"Annotatie bewerken","shortcut-viewer-tool-move":"Annotatie verplaatsen","shortcut-viewer-tool-paste":"Annotatie plakken","shortcut-viewer-tool-point":"Teken een punt","shortcut-viewer-tool-polygon":"Teken een veelhoek","shortcut-viewer-tool-rectangle":"Teken een rechthoek","shortcut-viewer-tool-redo":"Een actie op annotaties opnieuw uitdoen","shortcut-viewer-tool-rescale":"Annotatieformaat wijzigen","shortcut-viewer-tool-review-accept":"Valideer geselecteerde annotatie in reviewmodus","shortcut-viewer-tool-review-reject":"Weiger geselecteerde annotatie in reviewmodus","shortcut-viewer-tool-review-toggle":"Toon/verberg validatielaag in reviewmodus","shortcut-viewer-tool-rotate":"Annotatie roteren","shortcut-viewer-tool-select":"Selecteer een annotatie","shortcut-viewer-tool-undo":"Een actie op annotaties annuleren","shortcut-viewer-tool":"Viewer: Tools","shortcut":"Toetsenbord sneltoets","shortcuts":"Snelkoppelingen","size":"Maat","slice":"Slice","slide-preview-not-available":"Bladvoorbeeld niet beschikbaar","slide-preview-of":"Slide-voorbeeld van {filename}","slide-preview":"Slide preview","small":"Small","software-parameters":"Algoritme parameters","source-code-info":"Cytomine is open source-software. Het wordt gedistribueerd onder de Apache2- en LGPL 2.1-licenties. De broncode is beschikbaar op onze {githubLink}.","source-code":"Source code","source-provider-name":"usersnaam van de broncodeprovider","source-provider":"Broncode leverancier","source":"Bron","sponsors":"Sponsoren","start-upload":"uploaden beginnen","statistics":"Statistieken","status-comment":"Opmerking","status":"Status","step":"Stap","storage":"storage","string":"Reeks tekens","success":"Geslaagd","successful-registration":"Uw account is succesvol aangemaakt. Controleer uw mailbox om deze te activeren.","super-admin":"Super admin","switch-back-to-user":"Terug naar {usersnaam}","system":"Systeem","tags":"Tags","term":"Term","terms-new-annotation":"Term(en) om te associëren met nieuwe annotaties","terms":"termen","the-term":"de term","time-period":"Periode","to-convert":"Te converteren","to-deploy":"Te implementeren","to":"Tot","too-much-categories-to-display":"Er zijn te veel categorieën om weer te geven ({toDisplay}). Alleen {weergegeven} eerste worden weergegeven.","total":"Totaal","tracks-new-annotation":"Track(en) om te associëren met nieuwe annotaties","tracks":"Tracks","trusted-source":"Trusted source","trusted-sources":"Trusted sources","type":"Annotatie type","ui-runnable":"Uitvoerbaar","um-per-pixel":"µm/pixel","um-per-slice":"µm/vlak","um":"µm","uncategorized":"Uncategorized","uncompressed":"Uitgepakt","undo-redo":"Undo/Redo","undo":"Annuleren","unexpected-error-info-message":"Er is een onverwachte fout opgetreden","unknown":"Onbekend","unpacked":"Uuitgepakt","unpacking":"Decompressie bezig","update-source":"Een trusted source bewerken","update-tag":"Een tag bewerken","update-term":"Een term bewerken","update-track":"Wijzig een  track","update-user":"Wijzig een user","updated":"Updated","upload-error":"upload fout","upload":"Uploaden","uploaded-images":"Geüploade afbeeldingen","uploaded":"Geüpload","use-existing-ontology":"Gebruik een bestaande ontologie","used-in-project-no-access":"Wordt gebruikt in projecten waartoe u geen toegang heeft","used-storage-space":"Opslagruimte gebruikt","user-annotations":"Handmatige annotaties","user":"Users","userjob-id":"Analyse user-ID","username":"Usersnaam ","users":"Users","validate-annotation":"Annotatie valideren","validations":{"messages":{"_default":"Ongeldig veld","decimal":"Moet een nummer zijn","email":"Moet een geldig e-mail adres zijn","is":"Onjuiste bevestiging","min":"Moet minimaal {1} ??tekens bevatten","positive":"Moet positief zijn","required":"Verplicht veld"}},"value-key":"Key waarde","value":"Waarde","vendor":"Scanner merk","version":"Versie","view-all-projects":"Alle projecten bekijken","view-linked-with":"Deze afbeelding is gesynchroniseerd met:","view":"Afbeeldingen bekijken","viewer-group":"Groep afbeeldingen ({nbImages} afbeeldingen)","viewer-panels":"Afbeeldingsviewer","viewer-view":"Afbeelding {nummer}","vms-mrxs-upload-info":"VMS- en MRXS-files moeten worden gecomprimeerd in een ZIP (de ZIP moet zowel het VMS/MRXS/VSI-file als de bijbehorende files bevatten).","wait":"In de wacht","warning-cannot-draw-multiple-slices":"Kan niet op meerdere kanalen tegelijk tekenen","warning-change-applies-in-project-only":"Als u deze waarde wijzigt, wordt de wijziging alleen toegepast in dit project (deze wordt niet doorgegeven aan andere projecten die deze afbeelding bevatten)","website":"Website","week":"Week","welcome-message":"Welkomstbericht","white":"Wit","width":"Breedte","workspace":"Werkruimte","x-resolution":"X-resolutie","y-resolution":"Y-resolutie","x-y-resolution":"X/Y-resolutie","yellow":"Geel","yes":"Ja","you-are-reviewing-image-since":"Deze afbeelding wordt gevalideerd sinds {date}","you-have-validated-image-on":"U hebt deze afbeelding gevalideerd op {date}","z-resolution":"Z-resolutie","zip-upload-info":"Het is mogelijk om een ??ZIP met meerdere afbeeldingen te uploaden (met uitzondering van VMS- en MRXS-afbeeldingen)."}')},"6e59":function(e,t,n){"use strict";n("59ec")},"6eb3":function(e,t,n){},"6ed3":function(e,t,n){"use strict";n("5156")},"6f02":function(e,t,n){"use strict";n("1975")},"6f40":function(e,t,n){},"6fca":function(e,t,n){},"6fcb":function(e,t,n){"use strict";n("d264")},7020:function(e,t,n){},7061:function(e,t,n){"use strict";n("a265")},7106:function(e,t,n){},7205:function(e,t,n){e.exports=n.p+"img/logo-uliege.1f181756.png"},7265:function(e,t,n){"use strict";n("c447")},"72d0":function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tags-wrapper"},[t("b-loading",{attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[t("b-field",{attrs:{grouped:"","group-multiline":""}},[e.error?t("em",[e._v(e._s(e.$t("error-fetch-tags")))]):e.associatedTags.length>0?e._l(e.associatedTags,(function(n,a){return t("div",{key:n.id,staticClass:"control"},[t("b-taglist",{attrs:{attached:""}},[t("b-tag",{attrs:{type:"is-info"}},[e._v(" "+e._s(n.tagName.toUpperCase())+" "),e.currentUser.isDeveloper?t("span",[e._v(" ("+e._s(e.$t("id"))+": "+e._s(n.tag)+")")]):e._e()]),e.canEdit?t("b-tag",[t("button",{staticClass:"delete is-small",attrs:{title:e.$t("button-delete")},on:{click:function(t){return e.removeTag(n,a)}}})]):e._e()],1)],1)})):0===e.associatedTags.length?t("em",[e._v(e._s(e.$t("no-tag")))]):e._e(),e.canEdit?t("button",{staticClass:"button is-small add-tag",on:{click:function(t){return e.displayModal()}}},[e._v(" "+e._s(e.$t("button-add"))+" ")]):e._e()],2)]],2)},r=[],i=n("c7eb"),o=n("3835"),s=n("1da1"),c=(n("99af"),n("14d9"),n("13d5"),n("4e82"),n("a434"),n("e9f5"),n("9485"),n("d3b7"),n("3ca3"),n("ddb0"),n("1246")),l=function(){var e=this,t=e._self._c;return t("cytomine-modal-card",{attrs:{title:e.$t("associate-tags"),active:""},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",on:{click:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",on:{click:e.addAssociations}},[e._v(" "+e._s(e.$t("button-add"))+" ")])]},proxy:!0}])},[t("b-loading",{staticClass:"small",attrs:{"is-full-page":!1,active:e.loading}}),e.loading?e._e():[t("b-field",[t("domain-tag-input",{attrs:{domains:e.notAssociatedTags,placeholder:"search-or-create-tag",allowNew:""},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)]],2)},u=[],d=(n("4de4"),n("caad"),n("d81d"),n("910d"),n("ab43"),n("2532"),n("e8eb")),p=n("b286"),m={name:"add-tag-modal",props:{associatedTags:Array},components:{CytomineModalCard:p["a"],DomainTagInput:d["a"]},data:function(){return{loading:!0,tags:[],selectedTags:[]}},computed:{notAssociatedTags:function(){var e=this;return this.tags.filter((function(t){return!e.associatedTags.map((function(e){return e.tag})).includes(t.id)}))}},methods:{addAssociations:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("addObjects",e.selectedTags),e.$parent.close();case 2:case"end":return t.stop()}}),t)})))()},fetchTags:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["TagCollection"].fetchAll();case 2:e.tags=t.sent.array;case 3:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.fetchTags(),e.loading=!1;case 2:case"end":return t.stop()}}),t)})))()}},f=m,h=(n("6a53"),n("2877")),g=Object(h["a"])(f,l,u,!1,null,"36d2ab80",null),v=g.exports,b=n("8b18"),y={name:"cytomine-tags",props:{object:{type:Object},canEdit:{type:Boolean,default:!0}},data:function(){return{loading:!0,error:!1,addTagModal:!1,associatedTags:[]}},computed:{currentUser:Object(b["a"])("currentUser/user")},methods:{displayModal:function(){this.$buefy.modal.open({parent:this,component:v,props:{associatedTags:this.associatedTags},hasModalCard:!0,events:{addObjects:this.addAssociations}})},sortAssociatedTags:function(){this.associatedTags.sort((function(e,t){return e.tagName.localeCompare(t.tagName)}))},addAssociations:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function n(){var a,r,s,l,u,d,p,m,f;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==e.length){n.next=3;break}return t.$notify({type:"error",text:t.$t("notif-error-add-tag-domain-associations")}),n.abrupt("return");case 3:for(a=e.reduce((function(e,t){return e[t instanceof c["Tag"]?0:1].push(t),e}),[[],[]]),r=Object(o["a"])(a,2),s=r[0],l=r[1],n.prev=4,u=[],d=0;d<l.length;d++)u.push(new c["Tag"]({name:l[d]},t.object).save());return n.next=9,Promise.all(u).then((function(e){return e}));case 9:l=n.sent,e=s.concat(l),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](4),t.$notify({type:"error",text:t.$t("notif-error-add-tags")});case 16:for(n.prev=16,p=[],m=0;m<e.length;m++)p.push(new c["TagDomainAssociation"]({tag:e[m].id},t.object).save());return n.next=21,Promise.all(p).then((function(e){return e}));case 21:f=n.sent,t.associatedTags=t.associatedTags.concat(f),t.sortAssociatedTags(),t.$notify({type:"success",text:t.$t("notif-success-add-tag-domain-association")}),n.next=30;break;case 27:n.prev=27,n.t1=n["catch"](16),t.$notify({type:"error",text:t.$t("notif-error-add-tag-domain-associations")});case 30:case"end":return n.stop()}}),n,null,[[4,13],[16,27]])})))()},removeTag:function(e,t){var n=this;return Object(s["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c["TagDomainAssociation"].delete(e.id);case 3:n.associatedTags.splice(t,1),n.$emit("update"),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),n.$notify({type:"error",text:n.$t("notif-error-remove-tag")});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}},created:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new c["TagDomainAssociationCollection"]({object:e.object}).fetchAll();case 3:e.associatedTags=t.sent.array,e.sortAssociatedTags(),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=!0;case 10:e.loading=!1;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},w=y,j=(n("12a2"),n("8920"),Object(h["a"])(w,a,r,!1,null,"36bde01e",null));t["a"]=j.exports},"73a6":function(e,t,n){},7625:function(e,t,n){"use strict";n("0ac7")},"775b":function(e,t,n){},"78ff":function(e,t,n){"use strict";n("d48b")},"79b9":function(e,t,n){"use strict";n("7e18")},"7b11":function(e,t,n){"use strict";n("3af8")},"7c8b":function(e,t,n){},"7cbb":function(e,t,n){},"7e18":function(e,t,n){},"7e78":function(e,t,n){},"7ea1":function(e,t,n){"use strict";n("8e25")},"7efe":function(e,t,n){},"7f4f":function(e,t,n){"use strict";n("f658")},8229:function(e,t,n){},"840e":function(e,t,n){},"841e":function(e,t,n){},8461:function(e,t,n){},8479:function(e,t,n){},"84fb":function(e,t,n){},"867d":function(e,t,n){},"86af":function(e,t,n){},"86cf":function(e,t,n){"use strict";n("a653")},"882e":function(e,t,n){"use strict";n("03b1")},"88d6":function(e,t,n){},8920:function(e,t,n){"use strict";n("573d")},8982:function(e,t,n){"use strict";n("dee5")},"8a4d":function(e,t,n){},"8a55":function(e,t,n){},"8b17":function(e,t,n){},"8b18":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return u}));var a=n("5530"),r=(n("d9e2"),n("99af"),n("a15b"),n("fb6a"),n("2ef0")),i=n.n(r);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=p(e),{get:function(){return f(this.$store,m(e,this,t))}}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=p(e),Object(a["a"])(Object(a["a"])({},o(e,t)),{},{set:d((function(n){this.$store.commit(h(m(e,this,t)),n)}),t)})}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=p(e),{get:function(){return f(this.$store,m(e,this,n)).filters[t]},set:function(a){var r=m(e,this,n);this.$store.commit(r.join("/")+"/setFilter",{filterName:t,propValue:a})}}}function l(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e=p(e),{get:function(){var r=f(this.$store,m(e,this,a)).filters[t];return r||[0,this[n]]},set:d((function(r){var i=m(e,this,a),o=0!==r[0]||r[1]!==this[n]?r:null;this.$store.commit(i.join("/")+"/setFilter",{filterName:t,propValue:o})}),a)}}function u(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e=p(e),{get:function(){var r=f(this.$store,m(e,this,a)).filters[t];return r||this[n].slice()},set:d((function(r){var i=m(e,this,a),o=r.length===this[n].length?null:r;this.$store.commit(i.join("/")+"/setFilter",{filterName:t,propValue:o})}),a)}}function d(e,t){return t.debounce?i.a.debounce(e,t.debounce):e}function p(e){if(!e)return[];if(Array.isArray(e))return e;if("string"===typeof e)return e.split("/");throw new Error("Path must be a string or an array")}function m(e,t,n){return n.rootModuleProp&&(e=p(t[n.rootModuleProp]).concat(e)),e}function f(e,t){for(var n=e.state,a=0;a<t.length;a++)n=n[t[a]];return n}function h(e){var t=e[e.length-1],n=e.slice(0,e.length-1);return n.join("/")+"/set"+t.charAt(0).toUpperCase()+t.slice(1)}},"8db6":function(e,t,n){},"8e25":function(e,t,n){},"8e6b":function(e,t,n){"use strict";n("5a91")},"8e9a":function(e,t,n){"use strict";n("8479")},"8eda":function(e,t,n){"use strict";n("8b17")},"8f17":function(e,t,n){},9117:function(e,t,n){},"91c9":function(e,t,n){"use strict";function a(e,t){return null==e||null==t?e:-1===e.indexOf("?")?e+"?Authorization=Bearer "+t:e+"&Authorization="+encodeURI("Bearer "+t)}n.d(t,"a",(function(){return a}))},"92c4":function(e,t,n){},"92ff":function(e,t,n){},9407:function(e,t,n){},"949d":function(e,t,n){"use strict";n("b618")},"95e0":function(e,t,n){"use strict";n("a373")},"96e5":function(e,t,n){"use strict";n("0126")},9801:function(e,t,n){},9839:function(e,t,n){},"994d":function(e,t,n){"use strict";n("7e78")},9966:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"attached-files-wrapper"},[e.loading?e._e():[e.error?t("em",[e._v(e._s(e.$t("error-attached-files")))]):e.attachedFiles.length>0?e._l(e.attachedFiles,(function(n,a){return t("span",{key:n.id,staticClass:"file-item"},[t("a",{on:{click:function(t){return e.downloadAttachedFile(e.host,n)}}},[e._v(e._s(n.filename))]),e.canEdit?t("button",{staticClass:"delete is-small",on:{click:function(t){return e.confirmDeletion(n,a)}}}):e._e(),a<e.attachedFiles.length-1?[e._v(",")]:e._e()],2)})):t("em",[e._v(e._s(e.$t("no-attached-file"))+" ")]),e.canEdit?t("button",{staticClass:"button is-small",on:{click:function(t){return e.displayModal()}}},[e._v(e._s(e.$t("button-add")))]):e._e()]],2)},r=[],i=n("c7eb"),o=n("1da1"),s=(n("14d9"),n("a434"),n("1246")),c=(n("b0c0"),function(){var e=this,t=e._self._c;return t("cytomine-modal-card",{attrs:{title:e.$t("add-attached-file")},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",on:{click:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",attrs:{disabled:!e.selectedFile||e.errors.any()},on:{click:function(t){return e.save()}}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[t("b-field",[t("b-upload",{attrs:{type:"is-link","drag-drop":""},model:{value:e.selectedFile,callback:function(t){e.selectedFile=t},expression:"selectedFile"}},[t("section",{staticClass:"section"},[t("div",{staticClass:"content has-text-centered"},[e.selectedFile?[t("p",{staticClass:"filename is-size-4"},[t("i",{staticClass:"fas fa-file"}),e._v(" "+e._s(e.selectedFile.name))]),t("p",{staticClass:"has-text-grey is-size-6"},[e._v(e._s(e.$t("click-or-drop-new-file")))])]:[t("p",[t("i",{staticClass:"fas fa-upload fa-3x"})]),t("p",[e._v(e._s(e.$t("choose-file-or-drop")))])]],2)])])],1),t("b-field",{attrs:{label:e.$t("name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{disabled:!e.selectedFile,name:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1)}),l=[],u=n("b286"),d={name:"attached-file-modal",props:{object:Object},components:{CytomineModalCard:u["a"]},$_veeValidate:{validator:"new"},data:function(){return{selectedFile:null,name:""}},watch:{selectedFile:function(e){e&&(this.name=e.name)}},methods:{save:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n,a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll("password");case 2:if(n=t.sent,e.selectedFile&&n){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,new s["AttachedFile"]({file:e.selectedFile,filename:e.name},e.object).save();case 8:a=t.sent,e.$emit("addAttachedFile",a),e.$notify({type:"success",text:e.$t("notif-success-attached-file-creation")}),e.$parent.close(),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](5),e.$notify({type:"error",text:e.$t("notif-error-attached-file-creation")});case 17:case"end":return t.stop()}}),t,null,[[5,14]])})))()}}},p=d,m=(n("994d"),n("2877")),f=Object(m["a"])(p,c,l,!1,null,"64b34ee5",null),h=f.exports,g=n("91c9"),v=n("8b18"),b={name:"attached-files",props:{object:{type:Object},canEdit:{type:Boolean,default:!0}},data:function(){return{loading:!0,error:!1,attachedFiles:[]}},computed:{shortTermToken:Object(v["a"])("currentUser/shortTermToken"),host:function(){return s["Cytomine"].instance.host}},methods:{appendShortTermToken:g["a"],displayModal:function(){this.$buefy.modal.open({parent:this,component:h,props:{object:this.object},hasModalCard:!0,events:{addAttachedFile:this.addAttachedFile}})},downloadAttachedFile:function(e,t){window.location.assign(Object(g["a"])(e+t.url,this.shortTermToken))},addAttachedFile:function(e){this.attachedFiles.push(e)},confirmDeletion:function(e,t){var n=this;this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-attached-file",{filename:e.filename}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return n.deleteAttachedFile(e,t)}})},deleteAttachedFile:function(e,t){var n=this;return Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.delete();case 3:n.attachedFiles.splice(t,1),n.$notify({type:"success",text:n.$t("notif-success-attached-file-deletion",{filename:e.filename})}),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),n.$notify({type:"error",text:n.$t("notif-error-attached-file-deletion",{filename:e.filename})});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}},created:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["AttachedFileCollection"].fetchAll({object:e.object});case 3:e.attachedFiles=t.sent.array,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.error=!0;case 9:e.loading=!1;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},y=b,w=(n("d926"),Object(m["a"])(y,a,r,!1,null,"5a01c499",null));t["a"]=w.exports},"99f0":function(e,t,n){"use strict";n("353f")},"99fb":function(e,t,n){e.exports=n.p+"img/roche.092e0cab.gif"},"9ae5":function(e){e.exports=JSON.parse('{"about-cytomine":"About Cytomine","absolute-link-mode":"Absolute","access-denied":"Access denied","account":"Account","actions":"Actions","active-projects":"Active projects","activity-chart-info-message":"This chart presents the activity performed in the selected period","activity-charts":"Activity charts","activity-history":"Activity history","activity-logs":"Activity logs","activity-of-user":"Activity of {username}","activity":"Activity","add-attached-file":"Add an attached file","add-files":"Add files...","add-image":"Add image","add-images":"Add images","add-members-to-project":"Add members to project","add-new-comment":"Add new comment","add-term":"Add a term","add-track":"Add a track","admin-menu":"Admin","admin-warning":" I confirm that I want to make this user an admin.","admin":"Admin","advanced-search":"Advanced search","algorithm":"Algorithm","algorithms":"Algorithms","all-analyses":"All","all-annotations-uncategorized":"All annotations uncategorized","all-channels":"All channels","all-dates":"All","all-draw-tools":"All draw tools","all-images":"All","all-ontologies":"All","all-panels":"All panels","all-resolutions":"All","all-users-analyses":"All users/analyses","all":"All","allowed-formats-upload-info":"Supported image file formats:","already-in-project":"Already in project","analyses":"Analyses","analysis-annotations-info-message":"Annotations created by an automatic analysis (run of an algorithm)","analysis-annotations":"Analysis Annotations","analysis":"Analysis","and-count-others":"- | and one other | and {count} others","annotated-images-vs-contributor":"Annotated images VS. contributor","annotated-images-vs-contributors-chart-info-message":"This chart presents the number of images annotated by each project member. Only annotations created during the selected period are taken into account.","annotated-images-vs-term":"Annotated images VS. term","annotated-images-vs-terms-chart-info-message":"This chart presents for each term the number of images having at least one user annotation associated with this term. Only annotations created during the selected period are taken into account.","annotation-comments":"Annotation comments","annotation-creations":"Annotation creations","annotation-details-box":"Annotation details box","annotation-details":"Annotation details","annotation-layers":"Annotation layers","annotation-selections-info-message":"An annotation selection is recorded each time a user selects an annotation","annotation-selections":"Annotation selections","annotation-type":"Annotation type","annotation":"Annotation","annotations-list":"Annotation list","annotations-vs-contributors-chart-info-message":"This chart presents the number of annotation created by each project member during the selected period","annotations-vs-terms-chart-info-message":"This chart presents the number of manual annotation associated to each term. Only annotations created during the selected period are taken into account.","annotations":"Annotations","api-keys":"API keys","area":"Area","associate-tags":"Associate tags","associated-by":"associated by {username}","attached-files":"Attached files","back-to-login":"Back to login form","barchart-click-label-to-toggle-visibility":"Click on a label at the top of the chart to toggle the visibility of this data in the chart","barchart-hover-mouse-for-details":"Hover the mouse over a bar to display details related to this bar","black":"Black","blind-mode-explanation":"If blind mode is enabled, a contributor will not see image filename. The filename will not influence his work. Filename potentially contains the type of experiment.","blind-mode":"Blind mode","blinded-name-indication":"Blind","blue":"Blue","boolean":"Boolean","brightness":"Brightness","broadcast-my-position":"Broadcast my position and allow other users to follow me","broadcast":"Broadcast","browser":"Browser","button-accept-all":"Accept all","button-add-comment":"Add comment","button-add-image":"Add image","button-add-members":"Add members","button-add":"Add","button-added":"Added","button-adjust-image":"Adjust image","button-adjust-slice":"Adjust slice","button-adjust":"Adjust","button-best-fit-zoom":"Fit zoom to viewport","button-cancel-review":"Cancel my review","button-cancel":"Cancel","button-center-view-on-annot":"Center view on this annotation","button-change-ontology":"Change ontology","button-clear":"Clear","button-close":"Close","button-comments":"Comments","button-compute-profile":"Compute profile","button-confirm":"Confirm","button-continue-review-later":"Continue my review later","button-continue-review":"Continue review","button-copy-url":"Copy URL","button-copy":"Copy","button-delete":"Delete","button-details":"Details","button-download":"Download","button-edit":"Edit","button-export-as-csv":"Export as CSV","button-full-text":"See full text","button-get-username":"Get username","button-hide-filters":"Hide filters","button-hide":"Hide","button-kill":"Kill","button-launch-new-analysis":"Launch new analysis","button-less":"Less","button-load-more":"Load more","button-lock":"Lock","button-login":"Log in","button-manage-members":"Manage members","button-metadata":"Metadata","button-more-info":"More information","button-more":"More","button-new-tag":"New tag","button-new-trusted-source":"New trusted source","button-new-user":"New user","button-next-image":"Next image","button-open":"Open","button-previous-image":"Previous image","button-properties":"Properties","button-refresh":"Refresh","button-register":"Register","button-reject-all":"Reject all","button-remove-selected-members":"Remove selected members","button-remove":"Remove","button-rename":"Rename","button-reset-opacities":"Reset opacities","button-reset-password":"Reset password","button-reset-zoom":"Reset zoom","button-reset":"Reset","button-save":"Save","button-set-calibration":"Set calibration","button-set-magnification":"Set magnification","button-share":"Share","button-show-filters":"Show filters","button-show":"Show","button-start-review":"Start review","button-start":"Start","button-unlink":"Unlink","button-unlock":"Unlock","button-unvalidate-and-continue-review":"Unvalidate and continue my review","button-unvalidate-review":"Unvalidate my review","button-validate-review":"Validate my review","button-view-activity":"View activity","button-view-all":"View all","button-view-crop":"View crop","button-view-in-image":"View in image","button-view":"View","by-term":"By term","by-track":"By track","by":"By","calibrate-image":"Calibrate image","cancel-upload":"Cancel upload","cannot-delete-ontology-with-projects":"Cannot delete the ontology: it is used in projects","categorization":"Categorization","change-ontology-warning-message":"Changing the ontology will result in the deletion of all existing terms associations. This operation will not be recoverable with undo button!","change-ontology":"Change ontology","channel-abbr":"ch.","channel":"Channel","checking-integrity":"Checking integrity","choose-file-or-drop":"Click and choose a file or drop it here","circle":"Circle","classic-mode-explanation":"Contributors will be able to add, edit or delete project data, annotations, properties and descriptions on all layers.","classic":"Classic (fully collaborative)","click-or-drop-new-file":"Click or drop new file to replace current one","close-admin-session":"Close admin session","color":"Color","colors":"Colors","command-line-flag":"Command line flag","comment-will-be-sent-by-email":"The comment will be sent by email to the selected users","comment":"Comment","comments":"Comments","communication-error":"Communication error","companion-files":"Companion files","configuration":"Configuration","confirm-close-project-message":"Do you really want to close this project? The {viewers} it contains will be closed as well","confirm-close-project":"Close project","confirm-default-property-not-used-in-project":"\'{key}\' is currently not used as an annotation property key in this project.<br> Are you sure you want to use it as default property?","confirm-default-property":"Confirm default property","confirm-deletion-analysis-data":"Do you confirm you want to delete the following analysis data:","confirm-deletion-annotation":"Are you sure you want to delete this annotation?","confirm-deletion-attached-file":"Do you really want to delete attached file {filename}?","confirm-deletion-file":"Are you sure you want to delete this file?","confirm-deletion-ontology":"Are you sure you want to delete ontology {name}?","confirm-deletion-term":"Are you sure you want to delete term {name}?","confirm-deletion-track":"Are you sure you want to delete track {name}?","confirm-deletion":"Confirm deletion","confirm-ontology-change-delete-user-terms":"Some members of this project have associated terms to annotations ({count} associations). <br> Are you sure you want to delete those associations to change the ontology?","confirm-ontology-change":"Confirm ontology change","confirm-unlink-view-to-track":"This view is linked with another one on which you are following a user. This may cause conflicts and flickering behaviour. If you confirm, this view will be unlinked from any other to prevent such conflict.","confirm-untrack-to-link-view":"This view is currently synchronized with that of another user. This may cause conflicts and flickering behaviour. If you confirm, the tracking of this user will be cancelled.","connect-as-user":"Connect as {username}","connections-chart":"Connections chart","contact-info":"You can contact the Cytomine Team at {contactMail}","contact":"Contact","content-type":"Content type","contrast":"Contrast","contributor-icon-label":"You are a contributor of this project","contributor":"Contributor","contributors":"Contributors","converted":"Converted","converting":"Converting","copy-paste":"Copy/Paste","copy":"Copy","core-cannot-be-reached":"Error of communication with Cytomine core","count-active-users":"no active user | one active user | {count} active users","count-annotation-terms":"0 term associated to an annotation | 1 term associated to an annotation | {count} terms associated to annotations","count-annotations":"0 annotation | 1 annotation | {count} annotations","count-bands":"- | 1 band | {count} bands","count-files":"0 file | 1 file | {count} files","count-frames":"- | 1 frame | {count} frames","count-per-page":"{count} per page","count-reviewed-annotations":"0 reviewed annotation | 1 reviewed annotation | {count} reviewed annotations","count-slices":"- | 1 slice | {count} slices","count-viewers":"no viewer | viewer | {count} viewers","create-ontology-for-project":"Create ontology using project name","create-ontology":"Create ontology","create-project":"Create project","create-source":"Create trusted source","create-tag":"Create tag","create-term":"Create term","create-track":"Create track","create-user":"Create user","created-by":"Created by","created-on":"Created on","created":"Created","creation-date":"Creation date","creation-info":"Creation information","creator":"Creator","current-selection":"Current selection","currently-visible-annotations-for-track":"Currently visible annotations for track","currently-visible-annotations-with":"Currently visible annotations with","currently":"Currently","custom-ui":"Custom UI","cytomine-company":"Cytomine company","cytomine-sponsors-info":"Cytomine Community Edition is developed by the {cytomineCompanyLink} in collaboration with the University of Liège and was previously funded by research grants of the Wallonia.","cytomine-website-info":"You can find more information on the website of the Cytomine project located at {websiteLink}.","dashboard":"Dashboard","data-last-updated-on":"Data refreshed at {time}","data":"Data","date":"Date","day":"Day","default-annotation-layers":"Default annotation layers","default-property":"Default property","default-value":"Default value","delete-analysis-confirmation-message":"Do you really want to delete this analysis? <br> All data will be deleted! This operation will not be recoverable with undo button!","delete-analysis-data":"Delete analysis data","delete-analysis":"Delete analysis","delete-data":"Delete data","delete-image-confirmation-message":"Do you really want to delete image {imageName}? <br> All data will be deleted! This operation will not be recoverable with undo button!","delete-image":"Delete image","delete-project-confirmation-message":"Do you really want to delete project {projectName}? <br> All data will be deleted! This operation will not be recoverable with undo button!","delete-project":"Delete project","delete-source-confirmation-message":"Do you really want to delete trusted source {username}/{dockerUsername}?","delete-source":"Delete source","delete-tag-confirmation-message":"Do you really want to delete tag {tagName}? <br> All associations will be deleted!","delete-tag":"Delete tag","delete":"Delete","deleted-analysis-data":"Analysis data was deleted","deployed":"Deployed","deploying":"Deploying","deprecated":"Deprecated","description":"Description","detailed-image-consultations":"Detailed image consultations","detailed-image-information":"Detailed information of image {imageName}","detailed-project-connections":"Detailed project connections","detecting-format":"Detecting format","developer-mode":"Developer mode","digital-zoom-checkbox-label":"Enable digital zoom (interpolation)","digital-zoom":"Digital zoom","disabled":"Disabled","display-annot-details":"Display details of currently selected annotation","display":"Display","dockerhub":"DockerHub","documentation-info":"A complete documentation is available {docLink}.","documentation":"Documentation","domain":"Cytomine domain","dont-have-access-to-any-ontology":"You don\'t have access to any ontology","download-CSV":"Download CSV","download-excel":"Download Excel","download-PDF":"Download PDF","download-permission":"Download permission","download-results":"Download results","drag-drop-upload-info":"You can drag & drop files from your desktop on the \\"{labelButton}\\" button with Google Chrome, Mozilla Firefox and Apple Safari.","draw-tools":"Draw tools","draw":"Draw","duration":"Duration","editing-mode-explanation":"Editing mode will change authorisations of contributors. Project managers will still be able to see, add, edit or delete data for this project.","editing-mode":"Editing mode","email":"Email address","enabled":"Enabled","end-tracking-user-no-longer-broadcasting":"Stopped following {username} on image {imageName} because he/she no longer broadcasts his/her position","enter-comment":"Enter your comment","enter-description":"Enter description","enter-new-name-of-image":"Enter the new name to use for this image","enter-text":"Enter text","environment-provider-name":"Environment provider username","environment-provider":"Environment provider","error-attached-files":"Error fetching attached files","error-cannot-upload":"Unexpected error prevents upload","error-convert":"Conversion error","error-deployment":"Deployment error","error-extraction":"Extraction error","error-failed-to-fetch-image-consultations":"Error: failed to fetch image consultations","error-fetch-properties":"Error fetching properties","error-format":"Format error","error-integrity":"Corrupted file","error-load-annotations-filters":"Failed to load all annotation filters","error-loading-image-bad-project":"At least one image is not in the project from the link","error-loading-image":"An error occurred during image loading","error-unpacking":"Unpacking error","error":"Error","execute-command":"Execute command","execution-date":"Execution date","execution-duration":"Execution duration","execution-log":"Execution log","extracting-data":"Extracting data","failed-fetch-annots":"Failed to fetch annotations","failed-fetch-current-stats":"Failed to fetch current statistics","failed-fetch-profile":"Failed to fetch image profile","failed-fetch-recent-projects":"Failed to fetch recent projects","failed-fetch-total-counts":"Failed to fetch the total counts","failed":"Failed","fav":"Fav.","favorite":"Favorite","file-tree":"File tree","filename":"Filename","files":"Files","fill":"Fill","filter":"Filter","filters":"Filters","first-consultation":"First consultation","first-project-connection":"First project connection","firstname":"First name","follow-user":"Follow a user","followers":"Followers","forgot-credentials":"Forgot your {username} or your {password}?","forgot-password":"Forgot password","forgot-username":"Forgot username","format":"Format","frame-per-second":"f/s","frame-rate":"Frame rate","freehand-correct-add":"Correct annotation by adding a freehand area","freehand-correct-remove":"Correct annotation by removing a freehand area","freehand-line":"Freehand line","freehand-polygon":"Freehand polygon","from-file":"From","from":"From","general":"General","geometry-info":"Geometry information (area, length)","github-repository":"GitHub repository","github":"Github","global-size":"Global size","go-back":"Go back","green":"Green","guest":"Guest","height":"Height","help":"Help","here":"here","hide-by-default":"Hide layer by default","hide-contributors-layers-explanation":"If you check \\"Hide contributos layers\\", a \\"simple\\" contributor will not be able to see the layers of other contributors. Project managers will still be able to see all layers.","hide-contributors-layers":"Hide contributors layers","hide-managers-layers-explanation":"If you check \\"Hide managers layers\\", a \\"simple\\" contributor will not be able to see the layers of project managers. Project managers will still be able to see all layers.","hide-managers-layers":"Hide managers layers","hide-successful-upload":"Hide successful uploads","hierarchical-drag-drop-term":"Terms can be organized hierarchically using Drag & Drop","histogram-scale":"Histogram scale","hour":"Hour","hue":"Hue","huge":"Huge","id":"ID","image-channels":"Channels","image-consultations-info-message":"An image consultation is recorded each time a user opens an image in Cytomine","image-consultations":"Image consultations","image-depth":"Depth","image-details":"Image details","image-filters":"Image filters","image-height":"Height","image-in-review-by-since":"This image is reviewed by {user} since {date}","image-metadata":"Image metadata","image-not-reviewed":"This image has not been reviewed","image-size":"Image size","image-time":"Duration","image-validated-by-on":"This image has been validated by {user} on {date}","image-width":"Width","image":"Image","images_downloadable_by_contributor-explanation":"If this is enabled, contributors will be able to download the images of this project","images_downloadable_by_contributor":"Images downloadable by contributor","images-in-projects":"Images in projects","images":"Images","important-notes":"Important notes","in-project":"in {projectName}","in-queue":"In queue","in-review":"In review","in-this-image":"in this image","in-this-slice":"in this slice","indeterminate":"Indeterminate","info-keyword-stop-preview-description":"Add the keyword {keyword} where you want to delimit the preview text.","information":"Information","inspect-button":"Inspect","insufficient-permission":"You don\'t have the permission to view this page","intensities-manipulation":"Intensities adjustment","invalid-password":"Invalid password","invalid-token":"Invalid token","job-id":"Analysis ID","key":"Key","killed":"Killed","language":"Language","large":"Large","last-activity":"Last activity","last-connection":"Last connection","last-connections":"Last connections","last-consultation":"Last consultation","last-day":"Last day","last-image":"Last image","last-month":"Last month","last-opened-image":"Last opened image","last-project-connection":"Last project connection","last-release":"Last release","last-week":"Last week","last-year":"Last year","lastname":"Last name","launch-new-analysis":"Launch new analysis","launched-by":"Launched by","launcher":"Launcher","layer":"Layer","layers-opacity":"Layers opacity","ldap":"LDAP","legend":"Legend","length":"Length","line":"Line","linear":"Linear","link-group":"Group {number}","link-images":"Link images","link-mode":"Mode","link-other-images-to-this-group":"Link this group with additional images...","link-to-project-upload-info":"You are also able to link images with project manually after upload is done.","link-view-with":"Link this view with...","link-with-project":"Link with project","link-x-y-resolution":"Link resolution along X and Y axes","list":"List","listdomain":"List of Cytomine domains","live":"Live","log-being-collected":"Execution log is being collected","logarithmic":"Logarithmic","login":"Log in","logout":"Logout","magnification":"Magnification","managed-projects":"Managed projects","manager-icon-label":"You are a manager of this project","manager":"Manager","managers":"Managers","mandatory":"Mandatory","manual-annotations-info-message":"Annotations created by a user","manual-annotations-vs-contributor":"Manual annotations VS. contributor","manual-annotations-vs-term":"Manual annotations VS. term","manual":"Manual","max-size-upload-info":"The maximum file size (per file) for uploads is 100 GB","medium":"Medium","members-activity":"Members activity","members":"Members","merged-channels":"Merged channels","min-max":"Min/Max","mm-per-pixel":"mm/pixel","mm-per-slice":"mm/slice","mm":"mm","modify":"Modify","most-active-project":"Most active project","move":"Move","multiple-terms":"Multiple terms","multiple-tracks":"Multiple tracks","my-role":"My role","name":"Name","nb-jobs":"Number of jobs","nb-success-jobs":"Number of successful jobs","new-algorithm":"New algorithm","new-name":"New name","new-ontology":"New ontology","new-project":"New project","nm-per-pixel":"nm/pixel","nm-per-slice":"nm/slice","no-account-yet":"Don\'t have an account yet ? {registerLink}","no-algorithm":"No algorithm to display","no-analysis-run":"No analysis run","no-annotation-comments":"No comment for this annotation so far","no-annotation":"No annotation","no-attached-file":"No attached file","no-default-property":"No default property","no-description":"No description","no-file":"No file","no-image-consultation":"No image consultation","no-image-filter":"No image filter to display","no-image-recently-opened":"No image recently opened","no-image":"No image to display","no-info":"No information","no-key-selected":"No key selected","no-log-to-display":"No log to display","no-member-fitting-criteria":"No member fitting criteria","no-ontology":"No ontology","no-outline":"No outline","no-preview-available":"No preview available","no-profile":"No profile","no-project-connection":"No project connection","no-project":"No project to display","no-properties":"No property","no-property-matching-search-string":"No existing property matching {searchString}","no-recent-image":"No image recently opened","no-recent-project":"No project recently opened","no-record":"No record","no-result-file":"No result file","no-result":"No result","no-selected-layers":"No selected layers","no-software":"No algorithm","no-tag-fitting-criteria":"No tag fitting criteria","no-tag":"No tag","no-term-to-add":"No term to add","no-term":"No term","no-track-to-add":"No track to add","no-track":"No track","no-tracking":"No tracking","no-trusted-source-fitting-criteria":"No trusted source fitting criteria","no-trusted-source":"No trusted source","no-uploaded-file":"No uploaded file","no-user-fitting-criteria":"No user fitting search criteria","no":"No","none":"None","not-available":"Not available.","not-found-error":"The requested resource could not be loaded","not-found":"Not found","not-launch":"Not launched","not-used-in-any-project":"Not used in any project","nothing-more-to-load":"Nothing more to load","notif-deprecated-software":"This software is deprecated","notif-error-add-image":"Failed to add image {imageName} to project {projectName}","notif-error-add-project-members":"Failed to add the selected user to the project","notif-error-add-tag-domain-associations":"Failed to associate the selected tags","notif-error-add-tags":"Failed to create the tags","notif-error-add-term":"Failed to add the term","notif-error-add-track":"Failed to add the track","notif-error-add-viewer-image":"Failed to add the image","notif-error-algortihm-deletion":"Error during algorithm deletion","notif-error-already-broadcasting-this-image":"You are already broadcasting this image on another view","notif-error-analysis-data-deletion":"Failed to delete analysis data","notif-error-analysis-deletion":"Failed to delete the analysis","notif-error-analysis-kill":"Failed to kill analysis","notif-error-analysis-launch":"Failed to launch the analysis","notif-error-analysis-parameters-options":"Failed to retrieve the options for parameter {paramName}","notif-error-annotation-correction":"Error during annotation correction","notif-error-annotation-creation":"Error during annotation creation","notif-error-annotation-deletion":"Error during annotation deletion","notif-error-annotation-fill":"Error during annotation fill","notif-error-annotation-paste":"Failed to paste the annotation. It is too large for this image.","notif-error-annotation-rejection":"Failed to reject the annotation","notif-error-annotation-repeat":"Failed to repeat the annotation","notif-error-annotation-update":"Error during annotation update","notif-error-annotation-validation":"Failed to validate the annotation","notif-error-attached-file-creation":"Failed to attach the selected file","notif-error-attached-file-deletion":"Failed to delete attached file {filename}","notif-error-cancel-review":"Failed to cancel the review of the image","notif-error-change-role":"Failed to change the role of {username}","notif-error-change-status-algorithm-project":"Failed to change the status of algorithm {softwareName}","notif-error-change-status-image-filter-project":"Failed to change the status of filter {filterName}","notif-error-custom-ui-change":"Failed to change custom UI property","notif-error-default-layer-add":"Failed to add a default layer","notif-error-default-layer-delete":"Failed to delete default layer","notif-error-default-layer-update":"Error during update of default layer","notif-error-default-property-update":"Failed to update the default property","notif-error-delete-uploaded-file":"Failed to delete the uploaded file (unexpected error)","notif-error-delete-used-uploaded-file":"This image has instances in active projects ({projects}) under the following names: {names}","notif-error-failed-to-connect-as-user":"Failed to connect as the selected user","notif-error-failed-to-switch-back-as-real-user":"Failed to switch back to real account","notif-error-fetch-annotation-comments":"Failed to retrieve the comments of this annotation","notif-error-fetch-annotations-viewer":"An error occurred while fetching annotations","notif-error-fetch-next-image":"Failed to load next image","notif-error-fetch-previous-image":"Failed to load previous image","notif-error-first-image":"This is the first image of the project","notif-error-forgot-password":"Failed to send an email allowing to reset the password","notif-error-forgot-username":"Failed to send an email to the provided email address","notif-error-general-config-update":"Error during update of configuration","notif-error-image-calibration":"Failed to calibrate image {imageName}","notif-error-image-deletion":"Failed to delete image {imageName}","notif-error-image-rename":"Failed to rename image {imageName}","notif-error-invalid-key-prefix":"The property key cannot start by {prefix}: this prefix is reserved for internal use","notif-error-keys-not-regenerated":"Error during the regeneration of API keys","notif-error-last-image":"This is the last image of the project","notif-error-loading-annotation-layers":"Failed to fetch annotation layers","notif-error-logout":"Error during logout","notif-error-magnification-update":"Failed to update the magnification image {imageName}","notif-error-new-comment":"Failed to add a comment to the annotation","notif-error-not-enough-representative":" Failed to remove the representative role. At least one representative must be in the project","notif-error-ontology-creation":"Failed to create the ontology","notif-error-ontology-deletion":"Failed to delete the ontology","notif-error-ontology-rename":"Failed to rename ontology {name}","notif-error-ontology-tree-update":"Failed to update the ontology tree organization","notif-error-password-not-saved":"Error during update of password","notif-error-project-already-exists":"Failed to create the project: This project name is already used","notif-error-project-creation":"Failed to create the project","notif-error-project-deletion":"Failed to delete project {projectName}","notif-error-project-ontology-change-job-terms":"Cannot change the ontology of this project: some analyses associated terms to annotations. You must clean these associations prior to the ontology change.","notif-error-project-ontology-change-reviewed-terms":"Cannot change the ontology of this project: some terms are associated to reviewed annotations. You must remove these associations prior to the ontology change.","notif-error-project-ontology-change":"Failed to change the ontology of project {projectName}","notif-error-project-rename":"Failed to rename project {projectName}","notif-error-redo":"Failed to redo last action","notif-error-register-username-exists":"This username is already used","notif-error-register":"Error during registration","notif-error-remove-project-members":"Failed to remove the selected members from project","notif-error-remove-prop":"Failed to remove the property","notif-error-remove-term":"Failed to remove the term","notif-error-remove-track":"Failed to remove the track","notif-error-review-accept-all":"Failed to accept all annotations","notif-error-review-reject-all":"Failed to reject all annotations","notif-error-save-image-consultation":"Failed to save image consultation","notif-error-save-prop":"Failed to save the property","notif-error-save-user-position":"Failed to save your position in the image","notif-error-source-creation":"Failed to create the trusted source","notif-error-source-delete":"Failed to delete trusted source {username}/{dockerUsername}","notif-error-source-refresh":"Error during the refresh of the trusted source","notif-error-source-update":"Failed to update the trusted source","notif-error-start-review":"Failed to start reviewing the image","notif-error-tag-creation":"Failed to create the tag","notif-error-tag-delete":"Failed to delete tag {tagName}","notif-error-tag-update":"Failed to update tag","notif-error-target-annotation":"Failed to fetch the requested annotation","notif-error-term-creation":"Failed to create the term","notif-error-term-deletion":"Failed to delete the term. Ensure that no annotation is associated to this term.","notif-error-term-update":"Failed to update the term","notif-error-track-creation":"Failed to create the track","notif-error-track-deletion":"Failed to delete the track.","notif-error-track-update":"Failed to update the track","notif-error-tracked-user-position":"Failed to retrieve the position of the followed user","notif-error-undo":"Failed to undo last action","notif-error-unvalidate-review":"Failed to unvalidate the image review","notif-error-update-description":"Failed to update description","notif-error-user-creation":"Failed to create the user","notif-error-user-details-not-saved":"Error during update of user details","notif-error-user-lock":"Failed to lock the user","notif-error-user-unlock":"Failed to unlock the user","notif-error-user-update":"Failed to update the user","notif-error-validate-review":"Failed to validate the image","notif-error-welcome-message-update":"Failed to update the welcome message","notif-success-add-image":"Image {imageName} was successfully added to project {projectName}","notif-success-add-project-members":"The selected users were correctly added as project members","notif-success-add-tag-domain-association":"The selected tags were correctly associated","notif-success-algorithm-deletion":"Algorithm correctly deleted","notif-success-analysis-data-deletion":"Analysis data was successfully deleted","notif-success-analysis-deletion":"The analysis was successfully deleted","notif-success-analysis-kill":"Analysis was successfully killed","notif-success-analysis-launch":"Successfully launched the analysis","notif-success-annot-URL-copied":"Annotation URL copied to clipboard","notif-success-annotation-copy":"Annotation has been copied","notif-success-annotation-repeat":"Annotation has been repeated","notif-success-attached-file-creation":"File correctly attached","notif-success-attached-file-deletion":"Attached file {filename} correctly deleted","notif-success-default-property-update":"Default property successfully updated","notif-success-forgot-password":"A mail containing a connection link was sent to your email address","notif-success-forgot-username":"A mail containing your username was sent to your email address","notif-success-image-calibration":"Image {imageName} was correctly calibrated","notif-success-image-deletion":"Image {imageName} was successfully deleted","notif-success-image-rename":"Image {imageName} was successfully renamed","notif-success-key-copied":"Key copied to clipboard","notif-success-keys-regenerated":"API keys correctly updated","notif-success-login":"Welcome on Cytomine","notif-success-magnification-update":"Magnification of image {imageName} was correctly updated","notif-success-new-comment":"Your comment was successfully send by email","notif-success-ontology-creation":"The ontology was successfully created","notif-success-ontology-deletion":"Ontology {name} was successfully deleted","notif-success-ontology-rename":"Ontology {name} was successfully renamed","notif-success-password-saved":"Password correctly updated","notif-success-project-creation":"The project was successfully created","notif-success-project-deletion":"Project {projectName} was successfully deleted","notif-success-project-ontology-change":"Ontology of project {projectName} was successfully updated","notif-success-project-rename":"Project {projectName} was successfully renamed","notif-success-remove-project-members":"The selected members were correctly removed from project","notif-success-source-creation":"Trusted source successfully created","notif-success-source-delete":"Trusted source {username}/{dockerUsername} was successfully deleted","notif-success-source-refresh":"The trusted source refreshing has been asked","notif-success-source-update":"Trusted source successfully updated","notif-success-tag-creation":"The tag was successfully created","notif-success-tag-delete":"Tag {tagName} was successfully deleted","notif-success-tag-update":"Tag was successfully updated","notif-success-term-creation":"The term was successfully created","notif-success-term-update":"The term was successfully updated","notif-success-track-creation":"The track was successfully created","notif-success-track-update":"The track was successfully updated","notif-success-user-creation":"User successfully created","notif-success-user-details-saved":"User details correctly updated","notif-success-user-update":"User successfully updated","notif-success-welcome-message-update":"Welcome message successfully updated","notif-unexpected-error":"Unexpected error","notif-warn-ontology-tree-order-not-persisted":"The order of children in the ontology tree is not persisted in database","number-analysis-annotations":"Number of analysis annotations","number-annotation-creations":"Number of annotation creations","number-annotations-chart-info-message":"This chart presents the number of annotation creations during the selected period","number-annotations-info-message":"The number of annotations that you created","number-annotations":"Number of annotations","number-connections":"# connections","number-consultations":"Number of consultations","number-images-info-message":"The number of images available in the projects of which you are a member","number-jobs":"Jobs","number-per-category":"Number per category","number-per-page":"Number per page","number-projects-info-message":"The number of projects of which you are a member","number-reviewed-annotations-info-message":"The number of annotations that you validated during a review","number-reviewed-annotations":"Number of reviewed annotations","number-success":"Successful jobs","number-user-annotations":"Number of user annotations","number-viewed-images":"Number of viewed images","number":"Number","offline":"Offline users","ongoing":"Ongoing","online-contributors":"Online contributors","online-managers":"Online managers","online-users":"Online users","online":"Online","only-last-release":"Only last releases","only-UI-runnable":"Only runnable algorithms","ontologies":"Ontologies","ontology":"Ontology","opacity":"Opacity","open-admin-session":"Open admin session","open-in-viewer":"Open in viewer","operating-system":"Operating system","optional-parameters":"Optional parameters","orange":"Orange","original-no-filter":"Original (no filter)","originalFilename":"Original filename","other-information":"Other information","outline-color":"Outline color","overview":"Overview","page-not-found":"Page not found","parameters":"Parameters","password-confirm":"New password (confirm)","password-current":"Current password","password-expired-info-message":"Your password has expired. Please choose a new one.","password-new":"New password","password":"Password","paste-repeat-info":"Repeat on {input} next slices.","paste-repeat":"Repeat","paste":"Paste","per-image":"Per image","per-term":"Per term","per-track":"Per track","per-user":"Per user","perimeter":"Perimeter","period":"Period","pixel-intensity":"Intensity","pixels":"pixels","point":"Point","polygon":"Polygon","possible-conflict":"Possible conflict","prefilled-parameters":"Pre-filled parameters","prefix":"Prefix","preview-size":"Preview size","preview":"Preview","previewed":"Previewed","private-key":"Private key","profile":"Profile","progress":"Progress","project-connections-info-message":"A project connection is recorded each time a user opens a project in Cytomine","project-connections":"Project connections","project-contributor":"Project contributor","project-manager":"Project manager","project-representative":"Project representative","project-side-bar":"Project side bar","project":"Project","projects":"Projects","properties":"Properties","public-key":"Public key","pulling-command":"Pulling command","purple":"Purple","ql-align":"Text align","ql-background-color":"Background color","ql-blockquote":"Quote","ql-bold":"Bold","ql-bullet-list":"Bullet list","ql-clean-format":"Remove formatting","ql-code-block":"Code","ql-font-color":"Font color","ql-font":"Font","ql-header-1":"Header 1","ql-header-2":"Header 2","ql-header-3":"Header 3","ql-header-4":"Header 4","ql-image":"Add an image","ql-indent-left":"Indent left","ql-indent-right":"Indent right","ql-italic":"Italic","ql-link":"Add a link","ql-ordered-list":"Ordered list","ql-paragraph":"Paragraph","ql-special-character":"Special characters","ql-subscript":"Subscript","ql-superscript":"Superscript","ql-underline":"Underline","ql-video":"Add a video","read-only-mode-explanation":" Contributors will not be able to add, edit or delete project data, annotations, properties and descriptions even on their own layers.","read-only":"Read only","recently-opened":"Recently opened","rectangle":"Rectangle","red":"Red","redo":"Redo","regenerate-api-keys":"Regenerate","register":"Register","registration-date":"Registration date","reject-annotation":"Reject annotation","relative-link-mode":"Relative","relaunch":"Relaunch","remark-long-operation":"Remark: this operation may take some time","remember-me":"Remember me","remove-members-confirmation-message":"- | Do you really want to remove user {username} from project? | Do you really want to remove the {count} selected users from project?","remove-members":"Remove members","remove-yourself-from-manager-confirmation-message":"Are you sure you want to remove yourself from the project managers? You will not be able to undo this action","remove-yourself-from-manager":"Remove management rights","rename-image":"Rename the image","rename-ontology":"Rename ontology","rename-project":"Rename the project","rename":"Rename","representative-icon-label":"You are a representative of this project","representative":"Representative","representatives":"Representatives","rescale":"Rescale","resolution":"Resolution X/Y","restricted-mode-explanation":"Contributors will not be able to add, edit or delete project data except annotations, properties and descriptions on their own layers.","restricted":"Restricted","results":"Results","review-explanation":"You can review the visible annotations individually using the select tool or treat them all in batch with below buttons.","review-layer":"Review layer","review-list-visible-layers":"The following layers are currently displayed: {visibleLayers}.","review":"Review","reviewed-annotation-status-not-validated":"Not validated","reviewed-annotation-status-validated":"Validated","reviewed-annotation-status":"Review Status","reviewed-annotations-info-message":"Annotations validated during the review process","reviewed-annotations":"Reviewed Annotations","reviewed-by":"Reviewed by","reviewed-on":"Reviewed on","reviewed":"Reviewed","reviewers":"Reviewers","role":"Role","rotate":"Rotate","run-number":"Run number","running":"Running","sample-preview-of":"Sample preview of {filename}","sample-preview":"Sample preview","saturation":"Saturation","screenshot":"Screenshot current image view","search-or-create-tag":"Search tag (or create a new one by typing its name and pressing Enter)...","search-placeholder":"Search","search-user":"Search user...","seconds":"second | seconds","see-environment-on":"See environment on","see-source-code-on":"See source code on","select-all":"Select all","select-date":"Select a date","select-image-to-add":"Select an image to add","select-layer-placeholder":"Select a layer","select-layer":"Select a layer","select-ontology":"Select ontology","select-options":"Select options","select":"Select","send-to-all-project-members":"Send to all project members","send-to-some-members":"Send to some project members only","set-magnification":"Set magnification","shortcut-general-close-modal":"Close a modal","shortcut-general-shortcuts-modal":"Bring up this keyboard shortcut list","shortcut-general":"General","shortcut-text-editor-bold":"Format text in bold","shortcut-text-editor-italic":"Format text in italic","shortcut-text-editor-underline":"Format text underlined","shortcut-text-editor":"Text editor","shortcut-viewer-nav-drag-rotate":"Rotate image","shortcut-viewer-nav-drag-zoom":"Zoom in area","shortcut-viewer-nav-first-c":"Go to first channel","shortcut-viewer-nav-first-slice":"Go to first plane","shortcut-viewer-nav-first-t":"Go to first frame","shortcut-viewer-nav-first-z":"Go to first slice","shortcut-viewer-nav-last-c":"Go to last channel","shortcut-viewer-nav-last-slice":"Go to last plane","shortcut-viewer-nav-last-t":"Go to last frame","shortcut-viewer-nav-last-z":"Go to last slice","shortcut-viewer-nav-move-down":"Move down","shortcut-viewer-nav-move-left":"Move left","shortcut-viewer-nav-move-right":"Move right","shortcut-viewer-nav-move-up":"Move up","shortcut-viewer-nav-next-c":"Go to next channel","shortcut-viewer-nav-next-image":"Go to next image","shortcut-viewer-nav-next-slice":"Go to next plane","shortcut-viewer-nav-next-t":"Go to next frame","shortcut-viewer-nav-next-z":"Go to next slice","shortcut-viewer-nav-previous-c":"Go to previous channel","shortcut-viewer-nav-previous-image":"Go to previous image","shortcut-viewer-nav-previous-slice":"Go to previous plane","shortcut-viewer-nav-previous-t":"Go to previous frame","shortcut-viewer-nav-previous-z":"Go to previous slice","shortcut-viewer-nav-zoom-in":"Zoom in","shortcut-viewer-nav-zoom-out":"Zoom out","shortcut-viewer-nav":"Viewer: Navigation","shortcut-viewer-toggle-add-image":"Toggle image selector","shortcut-viewer-toggle-all-annotations":"Toggle annotations panel in all views","shortcut-viewer-toggle-all-broadcast":"Toggle broadcast panel in all views","shortcut-viewer-toggle-all-current":"Toggle currently selected annotation panel in all views","shortcut-viewer-toggle-all-filters":"Toggle image color panel in all views","shortcut-viewer-toggle-all-information":"Toggle information panel in all views","shortcut-viewer-toggle-all-layers":"Toggle layers panel in all views","shortcut-viewer-toggle-all-link":"Toggle image synchronization panel in all views","shortcut-viewer-toggle-all-ontology":"Toggle terms panel in all views","shortcut-viewer-toggle-all-overview":"Toggle overview in all views","shortcut-viewer-toggle-all-properties":"Toggle properties panel in all views","shortcut-viewer-toggle-all-review-layer":"Toggle review layer in review mode in all views","shortcut-viewer-toggle-all-review":"Toggle review panel in all views","shortcut-viewer-toggle-all-selected-layers":"Toggle visibility of selected layers in all views","shortcut-viewer-toggle-all-zoom":"Toggle zoom panel in all views","shortcut-viewer-toggle-annotations":"Toggle annotations panel","shortcut-viewer-toggle-broadcast":"Toggle broadcast panel","shortcut-viewer-toggle-current":"Toggle currently selected annotation panel","shortcut-viewer-toggle-filters":"Toggle image color panel","shortcut-viewer-toggle-information":"Toggle information panel","shortcut-viewer-toggle-layers":"Toggle layers panel","shortcut-viewer-toggle-link":"Toggle image synchronization panel","shortcut-viewer-toggle-ontology":"Toggle terms panel","shortcut-viewer-toggle-overview":"Toggle overview","shortcut-viewer-toggle-properties":"Toggle properties panel","shortcut-viewer-toggle-review-layer":"Toggle review layer in review mode","shortcut-viewer-toggle-review":"Toggle review panel","shortcut-viewer-toggle-selected-layers":"Toggle visibility of selected layers","shortcut-viewer-toggle-zoom":"Toggle zoom panel","shortcut-viewer-toggle":"Viewer: Display","shortcut-viewer-tool-circle":"Draw a circle","shortcut-viewer-tool-copy":"Copy annotation","shortcut-viewer-tool-correct-add":"Correct annotation by adding a freehand area","shortcut-viewer-tool-correct-remove":"Correct annotation by removing a freehand area","shortcut-viewer-tool-delete":"Delete selected annotation","shortcut-viewer-tool-fill":"Fill annotation","shortcut-viewer-tool-freehand-line":"Draw a freehand line","shortcut-viewer-tool-freehand-polygon":"Draw a freehand polygon","shortcut-viewer-tool-line":"Draw a line","shortcut-viewer-tool-modify-delete-vertex":"Delete a vertex with the modify tool","shortcut-viewer-tool-modify":"Modify annotation","shortcut-viewer-tool-move":"Move annotation","shortcut-viewer-tool-paste":"Paste annotation","shortcut-viewer-tool-point":"Draw a point","shortcut-viewer-tool-polygon":"Draw a polygon","shortcut-viewer-tool-rectangle":"Draw a rectangle","shortcut-viewer-tool-redo":"Redo annotation action","shortcut-viewer-tool-rescale":"Rescale annotation","shortcut-viewer-tool-review-accept":"Accept selected annotation in review mode","shortcut-viewer-tool-review-reject":"Reject selected annotation in review mode","shortcut-viewer-tool-review-toggle":"Toggle review layer in review mode","shortcut-viewer-tool-rotate":"Rotate annotation","shortcut-viewer-tool-select":"Select annotation","shortcut-viewer-tool-undo":"Undo annotation action","shortcut-viewer-tool":"Viewer: Tools","shortcut":"Keyboard shortcut","shortcuts":"Shortcuts","size":"Size","slice":"Slice","slide-preview-not-available":"No slide preview","slide-preview-of":"Slide preview of {filename}","slide-preview":"Slide preview","small":"Small","software-parameters":"Algorithm parameters","source-code-info":"Cytomine is an open-source software. The licenses are Apache2 and LGPL 2.1. The source code is available on our {githubLink}.","source-code":"Source code","source-provider-name":"Source code provider username","source-provider":"Source code provider","source":"Source","sponsors":"Sponsors","start-upload":"Start upload","statistics":"Statistics","status-comment":"Status comment","status":"Status","step":"Step","storage":"Storage","string":"String","success":"Success","successful-registration":"Your account was successfully created. Check your inbox to enable it.","super-admin":"Super admin","switch-back-to-user":"Switch back to {username}","system":"System","tags":"Tags","term":"Term","terms-new-annotation":"Term(s) to associate to new annotations","terms":"Terms","the-term":"term","time-period":"Time period","to-convert":"To convert","to-deploy":"To deploy","to":"To","too-much-categories-to-display":"There are too much categories to display ({toDisplay}). Only {displayed} first ones are shown.","total":"Total","tracks-new-annotation":"Track(s) to associate to new annotations","tracks":"Tracks","trusted-source":"Trusted source","trusted-sources":"Trusted sources","type":"Type","ui-runnable":"Runnable","um-per-pixel":"µm/pixel","um-per-slice":"µm/slice","um":"µm","uncategorized":"Uncategorized","uncompressed":"Uncompressed","undo-redo":"Undo/Redo","undo":"Undo","unexpected-error-info-message":"An unexpected error occurred","unknown":"Unknown","unpacked":"Unpacked","unpacking":"Unpacking","update-source":"Update trusted source","update-tag":"Update tag","update-term":"Update term","update-track":"Update track","update-user":"Update user","updated":"Updated","upload-error":"Upload error","upload":"Upload","uploaded-images":"Images uploaded","uploaded":"Uploaded","use-existing-ontology":"Use existing ontology","used-in-project-no-access":"Used in projects that you are not allowed to see","used-storage-space":"Used storage space","user-annotations":"Manual Annotations","user":"User","userjob-id":"Analysis user ID","username":"Username","users":"Users","validate-annotation":"Validate annotation","validations":{"messages":{"_default":"Invalid field","decimal":"Must be a number","email":"Must be a valid email address","is":"Invalid confirmation","min":"Must have at least {1} characters","positive":"Must be positive","required":"This field is required"}},"value-key":"Value key","value":"Value","vendor":"Vendor","version":"Version","view-all-projects":"View all projects","view-linked-with":"This view is linked with","view":"View","viewer-group":"Viewer group ({nbImages} images)","viewer-panels":"Viewer panels","viewer-view":"View {number}","vms-mrxs-upload-info":"VMS and MRXS must be zipped (the VMS/MRXS/VSI file and their nested files). One ZIP per image.","wait":"Wait","warning-cannot-draw-multiple-slices":"Cannot draw on multiple channels simultaneously","warning-change-applies-in-project-only":"If you change this value, the modification will only be performed in this project (it will not be propagated to other projects containing the image)","website":"Website","week":"Week","welcome-message":"Welcome message","white":"White","width":"Width","workspace":"Workspace","x-resolution":"X resolution","y-resolution":"Y resolution","x-y-resolution":"X/Y resolution","yellow":"Yellow","yes":"Yes","you-are-reviewing-image-since":"You are reviewing this image since {date}","you-have-validated-image-on":"You have validated this image on {date}","z-resolution":"Z resolution","zip-upload-info":"A ZIP file containing multiple image is allowed (except for VMS and MRXS)"}')},"9b19":function(e,t,n){e.exports=n.p+"img/logo.8bfe6faf.svg"},"9b22":function(e,t,n){"use strict";n("cd09")},"9b5b":function(e,t,n){},"9c70":function(e,t,n){"use strict";n("7cbb")},"9d5f":function(e,t,n){"use strict";n("8461")},"9dd3":function(e,t,n){"use strict";n("8229")},"9f06":function(e,t,n){"use strict";n("92c4")},"9f17":function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return e.image?t("span",[e.image.blindedName?[t("span",{staticClass:"blind-indication"},[e._v("["+e._s(this.$t("blinded-name-indication"))+"]")]),e._v(" "+e._s(e.image.blindedName)+" "),e.image.instanceFilename&&e.showBothNames?[t("br"),t("span",{staticClass:"true-name"},[e._v(" "+e._s(e.image.instanceFilename)+" ")])]:e._e()]:[e._v(e._s(e.image.instanceFilename))]],2):e._e()},r=[],i={name:"image-name",props:{image:Object,showBothNames:{type:Boolean,default:!1}}},o=i,s=(n("c391"),n("2877")),c=Object(s["a"])(o,a,r,!1,null,"6643e86b",null);t["a"]=c.exports},"9f7e":function(e,t,n){},a265:function(e,t,n){},a373:function(e,t,n){},a38b:function(e,t,n){"use strict";n("b6df")},a486:function(e,t,n){"use strict";n("8a55")},a547:function(e,t,n){"use strict";n("4553")},a653:function(e,t,n){},a6532:function(e,t,n){"use strict";n("28cf")},a6f7:function(e,t,n){},a702:function(e,t,n){"use strict";n("f381")},a716:function(e,t,n){},aaa1:function(e,t,n){"use strict";n("c80f")},aac7:function(e,t,n){"use strict";n("d30c")},ab00:function(e,t,n){"use strict";n("7106")},ad1c:function(e,t,n){"use strict";n("7c8b")},b249:function(e,t,n){"use strict";n("471b")},b286:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-card"},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v(e._s(e.title))]),e._t("controls")],2),t("section",{staticClass:"modal-card-body"},[e._t("default")],2),e.footer?t("footer",{staticClass:"modal-card-foot"},[e._t("footer",(function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}},[e._v(" "+e._s(e.$t("button-close"))+" ")])]}))],2):e._e()])},r=[],i={name:"cytomine-modal-card",props:{title:String,footer:{type:Boolean,default:!0}}},o=i,s=n("2877"),c=Object(s["a"])(o,a,r,!1,null,null,null);t["a"]=c.exports},b2db:function(e,t,n){"use strict";n("2e5d")},b2fd:function(e,t,n){"use strict";n("303d")},b303:function(e,t,n){},b3fc:function(e,t,n){"use strict";n("582e")},b45c:function(e,t,n){},b460:function(e,t,n){"use strict";n("fc1c")},b495:function(e,t,n){"use strict";n("2026")},b5e2:function(e,t,n){"use strict";n("0b9b")},b618:function(e,t,n){},b6df:function(e,t,n){},b83e:function(e,t,n){e.exports=n.p+"img/3dh.bb638da6.png"},b88c:function(e,t,n){"use strict";n("c4fb")},b910:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("a15b"),n("4d63"),n("c607"),n("ac1f"),n("2c3e"),n("25f0");var a=n("2ef0"),r=n.n(a);function i(e){var t=r.a.escapeRegExp(e);return new RegExp("("+t.split("\\*").join(".*")+")","i")}},b93a:function(e,t,n){"use strict";n("fc66")},ba77:function(e,t,n){},bad9:function(e,t,n){"use strict";n("9f7e")},bbc5:function(e,t,n){"use strict";n("2a88")},bc67:function(e,t,n){"use strict";n("9407")},bca5:function(e,t,n){},bd5e:function(e,t,n){"use strict";n("14cd")},be2b:function(e,t,n){"use strict";n("84fb")},bed4:function(e){e.exports=JSON.parse('{"about-cytomine":"Sobre Cytomine","absolute-link-mode":"","access-denied":"Acceso denegado","account":"Cuenta","actions":"Acciones","active-projects":"Proyectos activos","activity-chart-info-message":"Este gráfico presenta la actividad en el período seleccionado","activity-charts":"Gráficos de actividad","activity-history":"Historial de actividad","activity-logs":"Registros de actividad","activity-of-user":"Actividad de {username}","activity":"Actividad","add-attached-file":"Adjuntar archivo","add-files":"Agregar archivos...","add-image":"Añadir imagen","add-images":"Añadir imágenes","add-members-to-project":"Agregar miembros al proyecto","add-new-comment":"Añadir nuevo comentario","add-term":"Agregar un término","add-track":"","admin-menu":"Administración","admin-warning":" Confirmo que quiero hacer de este usuario un administrador.","admin":"Admin","advanced-search":"Búsqueda avanzada","algorithm":"Algoritmo","algorithms":"Algoritmos","all-analyses":"Todas","all-annotations-uncategorized":"Todas las anotaciones sin categorizar","all-channels":"","all-dates":"Todas","all-draw-tools":"Todas las herramientas de dibujo","all-images":"Todas","all-ontologies":"Todas","all-panels":"Todos los paneles","all-resolutions":"Todas","all-users-analyses":"Todos los usuarios/análisis","all":"Todos","allowed-formats-upload-info":"Formatos de imagen compatibles:","already-in-project":"Ya en proyecto","analyses":"Análisis","analysis-annotations-info-message":"Anotaciones creadas por un análisis automático (ejecución de un algoritmo)","analysis-annotations":"Anotaciones de análisis","analysis":"Análisis","and-count-others":"- | y otro | y {cuenta} otros","annotated-images-vs-contributor":"Imágenes anotadas por colaborador","annotated-images-vs-contributors-chart-info-message":"Este gráfico presenta el número de imágenes anotadas por cada miembro del proyecto. Solo se tienen en cuenta las anotaciones creadas durante el período seleccionado.","annotated-images-vs-term":"Imágenes anotadas por término","annotated-images-vs-terms-chart-info-message":"Este cuadro presenta el número de imágenes que tienen al menos una anotación de usuario asociada con cada término. Solo se tienen en cuenta las anotaciones creadas durante el período seleccionado.","annotation-comments":"Comentarios de anotaciones","annotation-creations":"Anotaciones creadas","annotation-details-box":"Cuadro de detalles de anotación","annotation-details":"Detalles de anotación","annotation-layers":"Capas de anotación","annotation-selections-info-message":"Se registra una selección de anotaciones cada vez que un usuario selecciona una anotación","annotation-selections":"Selecciones de anotaciones","annotation-type":"Tipo de anotación","annotation":"Anotación","annotations-list":"Lista de anotaciones","annotations-vs-contributors-chart-info-message":"Este gráfico representa el número de anotaciones creadas por cada miembro del proyecto durante el período seleccionado","annotations-vs-terms-chart-info-message":"Este cuadro presenta el número de anotaciones manuales asociadas a cada término. Solo se tienen en cuenta las anotaciones creadas durante el período seleccionado.","annotations":"Anotaciones","api-keys":"Claves API","area":"Zona","associate-tags":"Etiquetas asociadas","associated-by":"asociado por {username}","attached-files":"Archivos adjuntos","back-to-login":"Volver al formulario de inicio de sesión","barchart-click-label-to-toggle-visibility":"Haga clic en una etiqueta en la parte superior del gráfico para mostrar/ocultar estos datos","barchart-hover-mouse-for-details":"Pase el ratón sobre una barra para mostrar los detalles relacionados con esta barra","black":"Negro","blind-mode-explanation":"Si el modo ciego está habilitado, los colaboradores no verán el nombre de archivo de la imagen. El nombre de archivo puede contener información (como el tipo de experimento) que podría influir en el trabajo de los colaboradores.","blind-mode":"Modo ciego","blinded-name-indication":"Oculto","blue":"Azul","boolean":"Booleano","brightness":"Brillo","broadcast-my-position":"Transmita mi posición y permita que otros usuarios me sigan","broadcast":"Transmitir","browser":"Navegador","button-accept-all":"Aceptar todo","button-add-comment":"Añadir comentario","button-add-image":"Añadir imagen","button-add-members":"Añadir miembros","button-add":"Añadir","button-added":"Añadida","button-adjust-image":"","button-adjust-slice":"","button-adjust":"","button-best-fit-zoom":"","button-cancel-review":"Cancelar mi reseña","button-cancel":"Cancelar","button-center-view-on-annot":"Cnetrar vista en anotación","button-change-ontology":"Cambiar ontología","button-clear":"Reiniciar","button-close":"Cerrar","button-comments":"Comentarios","button-compute-profile":"","button-confirm":"Confirmar","button-continue-review-later":"Continuar mi revisión más tarde","button-continue-review":"Continuar reseña","button-copy-url":"Copiar URL","button-copy":"Copiar","button-delete":"Eliminar","button-details":"Detalles","button-download":"Descargar","button-edit":"Editar","button-export-as-csv":"Exportar como CSV","button-full-text":"Ver texto completo","button-get-username":"Recuperar nombre de usuario","button-hide-filters":"Ocultar filtros","button-hide":"Ocultar","button-kill":"Abortar","button-launch-new-analysis":"Lanzar nuevo análisis","button-less":"Menos","button-load-more":"Cargar más","button-lock":"Bloquear","button-login":"Iniciar sesión","button-manage-members":"Administrar miembros","button-metadata":"Metadatos","button-more-info":"Más información","button-more":"Más","button-new-tag":"Nueva etiqueta","button-new-trusted-source":"Nueva fuente de confianza","button-new-user":"Nuevo usuario","button-next-image":"Imagen siguiente","button-open":"Abierto","button-previous-image":"Imagen anterior","button-properties":"Propiedades","button-refresh":"Actualizar","button-register":"Registrarse","button-reject-all":"Rechazar todo","button-remove-selected-members":"Eliminar miembros seleccionados","button-remove":"Eliminar","button-rename":"Renombrar","button-reset-opacities":"Restablecer niveles de opacidad","button-reset-password":"Restablecer la contraseña","button-reset-zoom":"","button-reset":"Reiniciar","button-save":"Guardar","button-set-calibration":"Establecer calibración","button-set-magnification":"Establecer nivel de aumento","button-share":"Compartir","button-show-filters":"Mostrar filtros","button-show":"Mostrar","button-start-review":"Iniciar revisión","button-start":"Comenzar","button-unlink":"Desconectar","button-unlock":"Desbloquear","button-unvalidate-and-continue-review":"Anular y continuar mi reseña","button-unvalidate-review":"Anular mi reseña","button-validate-review":"Validar mi reseña","button-view-activity":"Ver actividad","button-view-all":"Ver todo","button-view-crop":"Ver recorte","button-view-in-image":"Ver en imagen","button-view":"Ver","by-term":"Por término","by-track":"","by":"Por","calibrate-image":"Calibrar imagen","cancel-upload":"Cancelar carga","cannot-delete-ontology-with-projects":"No se puede eliminar la ontología: se usa en proyectos","categorization":"Categorización","change-ontology-warning-message":"Cambiar la ontología dará como resultado la eliminación de todas las asociaciones de términos existentes. ¡Esta operación no se puede deshacer!","change-ontology":"Cambiar ontología","channel-abbr":"","channel":"","checking-integrity":"","choose-file-or-drop":"Haga clic y elija un archivo o suéltelo aquí","circle":"Círculo","classic-mode-explanation":"Los colaboradores podrán agregar, editar o eliminar datos del proyecto, anotaciones, propiedades y descripciones en todas las capas.","classic":"Clásico (totalmente colaborativo)","click-or-drop-new-file":"Haga clic o suelte el archivo nuevo para reemplazar el actual","close-admin-session":"Cerrar sesión de administrador","color":"Color","colors":"Colores","command-line-flag":"Flag de línea de comando","comment-will-be-sent-by-email":"El comentario se enviará por correo electrónico a los usuarios seleccionados.","comment":"Comentario","comments":"Comentarios","communication-error":"Error de comunicación","companion-files":"","configuration":"Configuración","confirm-close-project-message":"¿Está seguro de cerrar este proyecto? Los {viewers} que contiene también se cerrarán","confirm-close-project":"Cerrar proyecto","confirm-default-property-not-used-in-project":"&#39;{clave}&#39; no se utiliza actualmente como una clave de propiedad de anotación en este proyecto. <br> ¿Seguro que quiere usarla como propiedad predeterminada?","confirm-default-property":"Confirme la propiedad predeterminada","confirm-deletion-analysis-data":"¿Confirma que desea eliminar los siguientes datos de análisis:","confirm-deletion-annotation":"¿Estás seguro de que deseas eliminar esta anotación?","confirm-deletion-attached-file":"¿Realmente desea eliminar el archivo adjunto {filename}?","confirm-deletion-file":"¿Está seguro de que desea eliminar este archivo?","confirm-deletion-ontology":"¿Está seguro de que desea eliminar la ontología {name}?","confirm-deletion-term":"¿Seguro que quiere eliminar el término {name}?","confirm-deletion-track":"","confirm-deletion":"Confirmar la eliminación","confirm-ontology-change-delete-user-terms":"Algunos miembros de este proyecto tienen términos asociados a anotaciones ({count} asociaciones). <br> ¿Está seguro de que desea eliminar esas asociaciones para cambiar la ontología?","confirm-ontology-change":"Confirmar cambio de ontología","confirm-unlink-view-to-track":"Esta vista está vinculada con otra en la que está siguiendo a un usuario. Esto puede causar conflictos y parpadeos. Si confirma, esta vista se desvinculará de cualquier otra para evitar conflictos.","confirm-untrack-to-link-view":"Esta vista está actualmente sincronizada con la de otro usuario. Esto puede causar conflictos y parpadeos. Si confirma, se cancelará el seguimiento de este usuario.","connect-as-user":"Conectar como {username}","connections-chart":"Gráfico de conexiones","contact-info":"Puede ponerse en contacto con el equipo de Cytomine en {contactMail}","contact":"Contacto","content-type":"Tipo de contenido","contrast":"Contraste","contributor-icon-label":"Usted es un colaborador de este proyecto.","contributor":"Colaborador","contributors":"Colaboradores","converted":"Convertido","converting":"","copy-paste":"","copy":"","core-cannot-be-reached":"Error de comunicación con el núcleo de Cytomine","count-active-users":"sin usuario activo | un usuario activo | {count} usuarios activos","count-annotation-terms":"0 término asociado a una anotación | 1 término asociado a una anotación | {count} términos asociados a anotaciones","count-annotations":"0 anotación | 1 anotación | {count} anotaciones","count-bands":"","count-files":"0 archivo | 1 archivo | {count} archivos","count-frames":"","count-per-page":"{count} por página","count-reviewed-annotations":"0 anotación revisada | 1 anotación revisada | {count} anotaciones revisadas","count-slices":"","count-viewers":"sin visores | visor | {count} visores","create-ontology-for-project":"Crear ontología usando el nombre del proyecto","create-ontology":"Crear ontología","create-project":"Crear proyecto","create-source":"Crear fuente de confianza","create-tag":"Crear etiqueta","create-term":"Crear término","create-track":"","create-user":"Crear usuario","created-by":"Creado por","created-on":"Creado el","created":"Creado","creation-date":"Fecha de creación","creation-info":"Información sobre la creación","creator":"Creador","current-selection":"Selección actual","currently-visible-annotations-for-track":"","currently-visible-annotations-with":"","currently":"Actualmente","custom-ui":"Personalizada interfaz","cytomine-company":"Compañía de Cytomine","cytomine-sponsors-info":"Cytomine Community Edition es desarrollado por {cytomineCompanyLink} en colaboración con la Universidad de Lieja y anteriormente fue financiado mediante becas de investigación de Valonia.","cytomine-website-info":"Puede encontrar más información en el sitio web del proyecto Cytomine ubicado en {websiteLink}.","dashboard":"Panel principal","data-last-updated-on":"Datos actualizados a las {time}","data":"Datos","date":"Fecha","day":"Día","default-annotation-layers":"Capas de anotación predeterminadas","default-property":"Propiedad por defecto","default-value":"Valor por defecto","delete-analysis-confirmation-message":"¿Realmente quiere eliminar este análisis? <br> ¡Todos los datos serán eliminados! ¡Esta operación no se puede deshacer!","delete-analysis-data":"Eliminar datos de análisis","delete-analysis":"Eliminar análisis","delete-data":"Borrar datos","delete-image-confirmation-message":"¿Realmente quieres eliminar la imagen {imageName}? <br> ¡Todos los datos serán eliminados! ¡Esta operación no se puede deshacer!","delete-image":"Eliminar Imagen","delete-project-confirmation-message":"¿Realmente desea eliminar el proyecto {projectName}? <br> ¡Todos los datos serán eliminados! ¡Esta operación no se puede deshacer!","delete-project":"Eliminar proyecto","delete-source-confirmation-message":"","delete-source":"","delete-tag-confirmation-message":"¿Realmente desea eliminar la etiqueta {tagName}? <br> ¡Todas las asociaciones serán eliminadas!","delete-tag":"Eliminar etiqueta","delete":"Eliminar","deleted-analysis-data":"Los datos de análisis fueron eliminados","deployed":"Desplegado","deploying":"","deprecated":"Obsoleto","description":"Descripción","detailed-image-consultations":"Consultas detalladas de imagen","detailed-image-information":"Información detallada de la imagen {imageName}","detailed-project-connections":"Conexiones detalladas del proyecto","detecting-format":"","developer-mode":"","digital-zoom-checkbox-label":"Habilitar zoom digital (interpolación)","digital-zoom":"Zoom digital","disabled":"Dehabilitado","display-annot-details":"Mostrar detalles de la anotación seleccionada","display":"Monitor","dockerhub":"DockerHub","documentation-info":"La documentación completa está disponible {docLink}.","documentation":"Documentación","domain":"Dominio de Cytomine","dont-have-access-to-any-ontology":"No tiene acceso a ninguna ontología.","download-CSV":"Descargar CSV","download-excel":"Descargar Excel","download-PDF":"Descargar PDF","download-permission":"Permiso de descarga","download-results":"Descargar resultados","drag-drop-upload-info":"Puede arrastrar y soltar archivos desde su escritorio en el botón &quot;{labelButton}&quot; con Google Chrome, Mozilla Firefox y Apple Safari.","draw-tools":"Herramientas de dibujo","draw":"Herramientas de anotación","duration":"Duración","editing-mode-explanation":"El modo de edición cambiará las autorizaciones de los colaboradores. Los administradores de proyecto aún podrán ver, agregar, editar o eliminar datos para este proyecto.","editing-mode":"Modo de edición","email":"Correo electrónico","enabled":"Habilitado","end-tracking-user-no-longer-broadcasting":"El usuario {username} a interrumpido la transmisión de su posición en la imagen {imageName}","enter-comment":"Introduzca su comentario","enter-description":"Introduzca la descripción","enter-new-name-of-image":"Ingrese el nuevo nombre de imagen","enter-text":"Introduzca texto","environment-provider-name":"Nombre de usuario del proveedor del entorno","environment-provider":"Proveedor del entorno","error-attached-files":"Error al recuperar archivos adjuntos","error-cannot-upload":"Un error inesperado impide la carga","error-convert":"Error de conversión","error-deployment":"Error de despliegue","error-extraction":"","error-failed-to-fetch-image-consultations":"Error: no se pudo recuperar las consultas de imagen","error-fetch-properties":"Error al recuperar propiedades","error-format":"Error de formato","error-integrity":"","error-load-annotations-filters":"Error al cargar todos los filtros de anotación","error-loading-image-bad-project":"","error-loading-image":"Se produjo un error durante la carga de la imagen","error-unpacking":"","error":"Error","execute-command":"Ejecutar comando","execution-date":"Fecha de ejecución","execution-duration":"Duración de la ejecución","execution-log":"Registro de ejecución","extracting-data":"","failed-fetch-annots":"Error al recuperar anotaciones","failed-fetch-current-stats":"Error al recuperar las estadísticas actuales","failed-fetch-profile":"","failed-fetch-recent-projects":"Error al buscar proyectos recientes","failed-fetch-total-counts":"No se pudo obtener el recuento total","failed":"Fallido","fav":"Fav.","favorite":"Favorito","file-tree":"Árbol de archivos","filename":"Nombre del archivo","files":"Archivos","fill":"Rellenar","filter":"Filtrar","filters":"Filtros","first-consultation":"Primera consulta","first-project-connection":"Primera conexión al proyecto","firstname":"Nombre","follow-user":"Seguir a un usuario","followers":"","forgot-credentials":"¿Olvidó su {username} o su {password}?","forgot-password":"Olvidó su contraseña","forgot-username":"Olvidó su nombre de usuario","format":"Formato","frame-per-second":"","frame-rate":"","freehand-correct-add":"Correjir la anotación agregando un área a mano alzada","freehand-correct-remove":"Correjir la anotación eliminando un área a mano alzada","freehand-line":"Mano alzada","freehand-polygon":"Polígono a mano alzada","from-file":"Archivo padre","from":"Desde","general":"General","geometry-info":"Información de geometría (área, longitud)","github-repository":"Repositorio de GitHub","github":"Github","global-size":"Tamaño global","go-back":"Página anterior","green":"Verde","guest":"Invitado","height":"Altura","help":"Ayuda","here":"aquí","hide-by-default":"Ocultar capa por defecto","hide-contributors-layers-explanation":"Si marca &quot;Ocultar capas de colaboradores&quot;, un colaborador &quot;simple&quot; no podrá ver las capas de otros colaboradores. Los administradores del proyecto aún podrán ver todas las capas.","hide-contributors-layers":"Ocultar capas de colaboradores","hide-managers-layers-explanation":"Si marca &quot;Ocultar capas de administradores&quot;, un colaborador &quot;simple&quot; no podrá ver las capas de los administradores de proyectos. Los administradores de proyecto aún podrán ver todas las capas.","hide-managers-layers":"Ocultar capas de administradores","hide-successful-upload":"Ocultar cargas exitosas","hierarchical-drag-drop-term":"","histogram-scale":"","hour":"Hora","hue":"Tono","huge":"Enorme","id":"","image-channels":"","image-consultations-info-message":"Se registra una consulta de imagen cada vez que un usuario abre una imagen en Cytomine","image-consultations":"Consultas de imagen","image-depth":"","image-details":"Detalles de la imagen","image-filters":"Filtros de imagen","image-height":"","image-in-review-by-since":"{User} revisa esta imagen desde {date}","image-metadata":"Metadatos de imagen","image-not-reviewed":"Esta imagen no ha sido revisada","image-size":"Tamaño de imagen","image-time":"","image-validated-by-on":"Esta imagen ha sido validada por {usuario} el {fecha}","image-width":"","image":"Imagen","images_downloadable_by_contributor-explanation":"Si esta opción está habilitada, los colaboradores podrán descargar las imágenes de este proyecto.","images_downloadable_by_contributor":"Imágenes descargables por los colaboradores","images-in-projects":"","images":"Imágenes","important-notes":"Notas importantes","in-project":"en {projectName}","in-queue":"En cola","in-review":"En revisión","in-this-image":"","in-this-slice":"","indeterminate":"Indeterminado","info-keyword-stop-preview-description":"Agregue la palabra clave {keyword} donde desea delimitar el texto de vista previa.","information":"Información","inspect-button":"","insufficient-permission":"No tiene permiso para ver esta página","intensities-manipulation":"","invalid-password":"Contraseña inválida","invalid-token":"Token no válido","job-id":"","key":"Llave","killed":"Abortado","language":"Idioma","large":"Grande","last-activity":"Última actividad","last-connection":"Última conexión","last-connections":"Últimas conexiones","last-consultation":"Última consulta","last-day":"Último día","last-image":"Última imagen","last-month":"Último mes","last-opened-image":"Última imagen abierta","last-project-connection":"Última conexión al proyecto","last-release":"Ultimo lanzamiento","last-week":"Última pasada","last-year":"Último año","lastname":"Apellido","launch-new-analysis":"Lanzar nuevo análisis","launched-by":"Lanzado por","launcher":"Lanzador","layer":"Capa","layers-opacity":"Opacidad de las capas","ldap":"LDAP","legend":"Leyenda","length":"Longitud","line":"Línea","linear":"","link-group":"Grupo {number}","link-images":"Enlace de imágenes","link-mode":"","link-other-images-to-this-group":"Vincula este grupo con imágenes adicionales ...","link-to-project-upload-info":"También puede vincular imágenes con el proyecto manualmente después de cargarlas.","link-view-with":"Vincula esta vista con ...","link-with-project":"Enlazar con proyecto","link-x-y-resolution":"","list":"Lista","listdomain":"Lista de dominios de Cytomine","live":"En Vivo","log-being-collected":"Se está recopilando el registro de ejecución.","logarithmic":"","login":"Iniciar sesión","logout":"Cerrar sesión","magnification":"Aumento","managed-projects":"Proyectos administrados","manager-icon-label":"Usted es asministrador de este proyecto","manager":"Administrador","managers":"administradores","mandatory":"Obligatorio","manual-annotations-info-message":"Anotaciones creadas por un usuario.","manual-annotations-vs-contributor":"Anotaciones manuales por colaborador","manual-annotations-vs-term":"Anotaciones manuales por término","manual":"Manual","max-size-upload-info":"","medium":"Mediana","members-activity":"Actividad de miembros","members":"Miembros","merged-channels":"","min-max":"","mm-per-pixel":"mm/píxel","mm-per-slice":"","mm":"mm","modify":"Modificar","most-active-project":"Proyecto más activo","move":"Mover","multiple-terms":"Múltiples términos","multiple-tracks":"","my-role":"Mi rol","name":"Nombre","nb-jobs":"Número de trabajos","nb-success-jobs":"Número de trabajos exitosos","new-algorithm":"Nuevo algoritmo","new-name":"Nuevo nombre","new-ontology":"Nueva ontología","new-project":"Nuevo proyecto","nm-per-pixel":"nm/píxel","nm-per-slice":"","no-account-yet":"¿Aún no tiene una cuenta? {registerLink}","no-algorithm":"No hay algoritmo que mostrar","no-analysis-run":"Sin análisis","no-annotation-comments":"No hay comentarios para esta anotación hasta ahora","no-annotation":"Sin anotaciones","no-attached-file":"Ningún archivo adjunto","no-default-property":"Sin propiedad predeterminada","no-description":"Sin descripción","no-file":"Ningún archivo","no-image-consultation":"Ninguna consulta de imagen","no-image-filter":"No hay filtro de imagen que mostrar","no-image-recently-opened":"Ninguna imagen abierta recientemente","no-image":"No hay imágenes que mostrar","no-info":"Sin información","no-key-selected":"Ninguna clave seleccionada","no-log-to-display":"No hay registro para mostrar","no-member-fitting-criteria":"No hay criterios de ajuste para miembros","no-ontology":"Sin ontología","no-outline":"Sin contorno","no-preview-available":"No hay vista previa disponible","no-profile":"","no-project-connection":"Ninguna conexión del proyecto","no-project":"No hay proyectos que mostrar","no-properties":"Ninguna propiedad","no-property-matching-search-string":"Ninguna propiedad existente coincide con {searchString}","no-recent-image":"No hay imagen abierta recientemente","no-recent-project":"Ningún proyecto abierto recientemente","no-record":"Sin registros","no-result-file":"Sin archivo de resultados","no-result":"Sin resultados","no-selected-layers":"No hay capas seleccionadas","no-software":"Sin algoritmo","no-tag-fitting-criteria":"No hay criterios de ajuste de etiquetas","no-tag":"Sin etiqueta","no-term-to-add":"No hay término que agregar","no-term":"Sin término","no-track-to-add":"","no-track":"Sin pista","no-tracking":"Sin seguimiento","no-trusted-source-fitting-criteria":"No hay criterios de ajuste de fuentes de confianza","no-trusted-source":"Ninguna fuente de confianza","no-uploaded-file":"Ningún archivo cargado","no-user-fitting-criteria":"Ningún criterio de búsqueda adecuado para el usuario","no":"No","none":"Ninguna","not-available":"","not-found-error":"El recurso solicitado no se pudo cargar","not-found":"No encontrado","not-launch":"No lanzado","not-used-in-any-project":"No se utiliza en ningún proyecto.","nothing-more-to-load":"Nada más que cargar","notif-deprecated-software":"","notif-error-add-image":"Error al agregar la imagen {imageName} al proyecto {projectName}","notif-error-add-project-members":"Error al agregar el usuario seleccionado al proyecto","notif-error-add-tag-domain-associations":"Error al asociar las etiquetas seleccionadas","notif-error-add-tags":"Error al crear las etiquetas","notif-error-add-term":"No se pudo agregar el término","notif-error-add-track":"","notif-error-add-viewer-image":"Error al agregar la imagen","notif-error-algortihm-deletion":"Error durante la eliminación del algoritmo","notif-error-already-broadcasting-this-image":"Ya estáa transmitiendo esta imagen en otra vista","notif-error-analysis-data-deletion":"Error al eliminar datos de análisis","notif-error-analysis-deletion":"Error al eliminar el análisis","notif-error-analysis-kill":"Error al abortar el análisis","notif-error-analysis-launch":"Error al iniciar el análisis","notif-error-analysis-parameters-options":"Error al recuperar las opciones para el parámetro {paramName}","notif-error-annotation-correction":"Error durante la corrección de anotaciones","notif-error-annotation-creation":"Error durante la creación de anotaciones","notif-error-annotation-deletion":"Error durante la eliminación de anotaciones","notif-error-annotation-fill":"Error durante el relleno de anotación","notif-error-annotation-paste":"","notif-error-annotation-rejection":"Error al rechazar la anotación","notif-error-annotation-repeat":"","notif-error-annotation-update":"Error durante la actualización de la anotación","notif-error-annotation-validation":"Error al validar la anotación","notif-error-attached-file-creation":"Error al adjuntar el archivo seleccionado","notif-error-attached-file-deletion":"Error al eliminar el archivo adjunto {filename}","notif-error-cancel-review":"No se pudo cancelar la revisión de la imagen.","notif-error-change-role":"No se pudo cambiar el rol de {username}","notif-error-change-status-algorithm-project":"Error al cambiar el estado del algoritmo {softwareName}","notif-error-change-status-image-filter-project":"Error al cambiar el estado del filtro {filterName}","notif-error-custom-ui-change":"Error al cambiar la propiedad de interfaz personalizada","notif-error-default-layer-add":"Error al agregar una capa predeterminada","notif-error-default-layer-delete":"Error al eliminar la capa predeterminada","notif-error-default-layer-update":"Error durante la actualización de la capa predeterminada","notif-error-default-property-update":"Error al actualizar la propiedad predeterminada","notif-error-delete-uploaded-file":"Error al eliminar el archivo cargado (error inesperado)","notif-error-delete-used-uploaded-file":"Esta imagen tiene instancias en proyectos activos ({proyectos}) con los siguientes nombres: {names}","notif-error-failed-to-connect-as-user":"No se pudo conectar como el usuario seleccionado","notif-error-failed-to-switch-back-as-real-user":"Error al volver a la cuenta real","notif-error-fetch-annotation-comments":"Error al recuperar los comentarios de esta anotación","notif-error-fetch-annotations-viewer":"Se produjo un error al recuperar anotaciones","notif-error-fetch-next-image":"Error al cargar la siguiente imagen","notif-error-fetch-previous-image":"Error al cargar la imagen anterior","notif-error-first-image":"Esta es la primera imagen del proyecto.","notif-error-forgot-password":"Error al enviar el enlace de restablecimiento de contraseña a la dirección de correo electrónico proporcionada","notif-error-forgot-username":"Error de envío a la dirección de correo electrónico proporcionada","notif-error-general-config-update":"Error durante la actualización de la configuración","notif-error-image-calibration":"Error al calibrar la imagen {imageName}","notif-error-image-deletion":"Error al eliminar la imagen {imageName}","notif-error-image-rename":"Error al cambiar el nombre de la imagen {imageName}","notif-error-invalid-key-prefix":"La clave de propiedad no puede comenzar por {prefijo}: este prefijo está reservado para uso interno","notif-error-keys-not-regenerated":"Error durante la regeneración de claves API","notif-error-last-image":"Esta es la última imagen del proyecto.","notif-error-loading-annotation-layers":"Error al recuperar capas de anotación","notif-error-logout":"Error al cerrar sesión","notif-error-magnification-update":"Error al actualizar el nivel de aumento de la imagen {imageName}","notif-error-new-comment":"Error al añadir un comentario a la anotación","notif-error-not-enough-representative":"","notif-error-ontology-creation":"Error al crear la ontología","notif-error-ontology-deletion":"Error al eliminar la ontología","notif-error-ontology-rename":"Error al cambiar el nombre de ontología {name}","notif-error-ontology-tree-update":"Error al actualizar la jerarquía de términos en la ontología","notif-error-password-not-saved":"A ocurrido un error durante la actualización de contraseña","notif-error-project-already-exists":"","notif-error-project-creation":"","notif-error-project-deletion":"Error al eliminar el proyecto {projectName}","notif-error-project-ontology-change-job-terms":"No se puede cambiar la ontología de este proyecto: algunos análisis asocian términos a anotaciones. Debe limpiar estas asociaciones antes del cambio de ontología.","notif-error-project-ontology-change-reviewed-terms":"No se puede cambiar la ontología de este proyecto: algunos términos están asociados a anotaciones revisadas. Debe eliminar estas asociaciones antes del cambio de ontología.","notif-error-project-ontology-change":"Error al cambiar la ontología del proyecto {projectName}","notif-error-project-rename":"Error al cambiar el nombre del proyecto {projectName}","notif-error-redo":"Error al rehacer la última acción","notif-error-register-username-exists":"El nombre de usuario ya esta siendo usado","notif-error-register":"Error durante el registro","notif-error-remove-project-members":"Error al eliminar los miembros seleccionados del proyecto","notif-error-remove-prop":"Error al eliminar la propiedad","notif-error-remove-term":"Error al eliminar el término","notif-error-remove-track":"","notif-error-review-accept-all":"Error al aceptar todas las anotaciones","notif-error-review-reject-all":"Error al rechazar todas las anotaciones","notif-error-save-image-consultation":"Error al guardar la consulta de imagen","notif-error-save-prop":"Error al guardar la propiedad","notif-error-save-user-position":"Error al guardar tu posición en la imagen","notif-error-source-creation":"Error al crear la fuente de confianza","notif-error-source-delete":"","notif-error-source-refresh":"Error durante la actualización de la fuente de confianza","notif-error-source-update":"Error al actualizar la fuente de confianza","notif-error-start-review":"Error al comenzar a revisar la imagen","notif-error-tag-creation":"Error al crear la etiqueta","notif-error-tag-delete":"Error al eliminar la etiqueta {tagName}","notif-error-tag-update":"Error al actualizar la etiqueta","notif-error-target-annotation":"Error al recuperar la anotación solicitada","notif-error-term-creation":"Error al crear el término","notif-error-term-deletion":"No se pudo eliminar el término. Asegúrese de que ninguna anotación esté asociada a este término.","notif-error-term-update":"Error al actualizar el término","notif-error-track-creation":"","notif-error-track-deletion":"","notif-error-track-update":"","notif-error-tracked-user-position":"Error al recuperar la posición del usuario seguido","notif-error-undo":"No se pudo deshacer la última acción","notif-error-unvalidate-review":"No se pudo invalidar la revisión de la imagen","notif-error-update-description":"Error al actualizar la descripción","notif-error-user-creation":"Error al crear el usuario","notif-error-user-details-not-saved":"A ocurrido un error durante la actualización de los detalles del usuario","notif-error-user-lock":"Error al bloquear el usuario","notif-error-user-unlock":"Error al desbloquear el usuario","notif-error-user-update":"Error al actualizar al usuario","notif-error-validate-review":"Error al validar la imagen","notif-error-welcome-message-update":"Error al actualizar el mensaje de bienvenida","notif-success-add-image":"La imagen {imageName} se agregó correctamente al proyecto {projectName}","notif-success-add-project-members":"Los usuarios seleccionados se agregaron correctamente al proyecto","notif-success-add-tag-domain-association":"Las etiquetas seleccionadas se asociaron correctamente","notif-success-algorithm-deletion":"Algoritmo eliminado correctamente","notif-success-analysis-data-deletion":"Los datos de análisis se eliminaron con éxito","notif-success-analysis-deletion":"El análisis fue eliminado con éxito","notif-success-analysis-kill":"El análisis fue abortado con éxito","notif-success-analysis-launch":"Análisis iniciado con éxito","notif-success-annot-URL-copied":"URL de anotación copiada al portapapeles","notif-success-annotation-copy":"","notif-success-annotation-repeat":"","notif-success-attached-file-creation":"Archivo adjuntado correctamente","notif-success-attached-file-deletion":"El archivo adjunto {filename} se ha eliminado correctamente","notif-success-default-property-update":"Propiedad predeterminada actualizada correctamente","notif-success-forgot-password":"Se le ha enviado un enlace de conexión a su dirección de correo electrónico.","notif-success-forgot-username":"Se le ha enviado su nombre de usuario a su dirección de correo electrónico.","notif-success-image-calibration":"La imagen {imageName} se calibró correctamente","notif-success-image-deletion":"La imagen {imageName} se eliminó correctamente","notif-success-image-rename":"La imagen {imageName} se renombró correctamente","notif-success-key-copied":"Clave copiada al portapapeles","notif-success-keys-regenerated":"Claves API actualizadas correctamente","notif-success-login":"Bienvenido a Cytomine","notif-success-magnification-update":"El nivel de aumento de la imagen {imageName} se actualizó correctamente","notif-success-new-comment":"Su comentario fue enviado con éxito por correo electrónico.","notif-success-ontology-creation":"La ontología se creó con éxito.","notif-success-ontology-deletion":"La ontología {name} se eliminó correctamente","notif-success-ontology-rename":"Ontology {name} fue renombrado exitosamente","notif-success-password-saved":"La contraseña se ha actualizado correctamente","notif-success-project-creation":"El proyecto fue creado exitosamente","notif-success-project-deletion":"El proyecto {projectName} se ha eliminado correctamente","notif-success-project-ontology-change":"La ontología del proyecto {projectName} se actualizó correctamente","notif-success-project-rename":"El proyecto {projectName} se renombró correctamente","notif-success-remove-project-members":"Los miembros seleccionados fueron eliminados correctamente del proyecto","notif-success-source-creation":"Fuente de confianza creada con éxito","notif-success-source-delete":"","notif-success-source-refresh":"Se solicitó la actualización de la fuente de confianza","notif-success-source-update":"Fuente de confianza actualizada con éxito","notif-success-tag-creation":"La etiqueta se creó correctamente.","notif-success-tag-delete":"La etiqueta {tagName} se eliminó correctamente","notif-success-tag-update":"La etiqueta se actualizó correctamente","notif-success-term-creation":"El término se creó con éxito.","notif-success-term-update":"El término se actualizó correctamente.","notif-success-track-creation":"","notif-success-track-update":"","notif-success-user-creation":"Usuario creado con éxito","notif-success-user-details-saved":"Los detalles del usuario se han actualizado correctamente","notif-success-user-update":"Usuario actualizado con éxito","notif-success-welcome-message-update":"Mensaje de bienvenida actualizado con éxito","notif-unexpected-error":"Se ha producido un error inesperado","notif-warn-ontology-tree-order-not-persisted":"La jerarquía de términos dentro de la ontología no se mantiene en la base de datos.","number-analysis-annotations":"Número de anotaciones de análisis","number-annotation-creations":"Número de anotaciones creadas","number-annotations-chart-info-message":"Este gráfico presenta el número de anotaciones creadas durante el período seleccionado.","number-annotations-info-message":"El número de anotaciones creadas por el usuario","number-annotations":"Número de anotaciones","number-connections":"# conexiones","number-consultations":"Número de consultas","number-images-info-message":"El número de imágenes disponibles en los proyectos de los que es miembro","number-jobs":"Trabajos","number-per-category":"Número por categoría","number-per-page":"Número por pagina","number-projects-info-message":"El número de proyectos de los que es miembro","number-reviewed-annotations-info-message":"El número de anotaciones que validadas por el usuario durante una revisión","number-reviewed-annotations":"Número de anotaciones revisadas","number-success":"Trabajos exitosos","number-user-annotations":"Número de anotaciones de usuario","number-viewed-images":"Cantidad de imágenes vistas","number":"Número","offline":"Usuarios sin conexión","ongoing":"En marcha","online-contributors":"Colaboradores en línea","online-managers":"Administradores en línea","online-users":"Usuarios en línea","online":"En línea","only-last-release":"Solo últimas versiones","only-UI-runnable":"Solo algoritmos ejecutables","ontologies":"Ontologías","ontology":"Ontología","opacity":"Opacidad","open-admin-session":"Abrir sesión de administrador","open-in-viewer":"Abrir en visor","operating-system":"Sistema operativo","optional-parameters":"Parámetros opcionales","orange":"Naranja","original-no-filter":"Original (sin filtro)","originalFilename":"Nombre de archivo original","other-information":"Otra información","outline-color":"Color de contorno","overview":"Visión general","page-not-found":"Página no encontrada","parameters":"Parámetros","password-confirm":"Nueva contraseña (confirmar)","password-current":"Contraseña actual","password-expired-info-message":"Su contraseña ha expirado. Por favor, elija una nueva.","password-new":"Nueva contraseña","password":"Contraseña","paste-repeat-info":"","paste-repeat":"","paste":"","per-image":"Por imagen","per-term":"Por trimestre","per-track":"Por pista","per-user":"Por usuario","perimeter":"Perímetro","period":"Período","pixel-intensity":"","pixels":"píxeles","point":"Punto","polygon":"Polígono","possible-conflict":"Posible conflicto","prefilled-parameters":"Parámetros por defecto","prefix":"Prefijo","preview-size":"Tamaño de vista previa","preview":"Vista previa","previewed":"Vista previa","private-key":"Clave privada","profile":"Perfil","progress":"Progreso","project-connections-info-message":"Se registra una conexión al proyecto cada vez que un usuario abre un proyecto en Cytomine","project-connections":"Conexiones del proyecto","project-contributor":"Colaborador del proyecto","project-manager":"Administrador del proyecto","project-representative":"Persona de contacto del proyecto","project-side-bar":"Barra lateral del proyecto","project":"Proyecto","projects":"Proyectos","properties":"Propiedades","public-key":"Clave pública","pulling-command":"Comando de recuperación","purple":"Violeta","ql-align":"Alineamiento de texto","ql-background-color":"Color de fondo","ql-blockquote":"Citar","ql-bold":"Negrita","ql-bullet-list":"Lista de viñetas","ql-clean-format":"Eliminar formato","ql-code-block":"Código","ql-font-color":"Color de fuente","ql-font":"Fuente","ql-header-1":"Encabezado 1","ql-header-2":"Encabezado 2","ql-header-3":"Encabezado 3","ql-header-4":"Encabezado 4","ql-image":"Agregar una imagen","ql-indent-left":"Sangría izquierda","ql-indent-right":"Sangría derecha","ql-italic":"Itálica","ql-link":"Agregar un enlace","ql-ordered-list":"Lista ordenada","ql-paragraph":"Párrafo","ql-special-character":"Caracteres especiales","ql-subscript":"Subíndice","ql-superscript":"Superíndice","ql-underline":"Subrayar","ql-video":"Agregar un video","read-only-mode-explanation":"Los colaboradores no podrán agregar, editar o eliminar datos, anotaciones, propiedades y descripciones del proyecto, incluso en sus propias capas.","read-only":"Solo lectura","recently-opened":"Abiertas recientemente","rectangle":"Rectángulo","red":"Rojo","redo":"Rehacer","regenerate-api-keys":"Regenerar","register":"Registrarse","registration-date":"Fecha de registro","reject-annotation":"Rechazar anotación","relative-link-mode":"","relaunch":"","remark-long-operation":"Observación: esta operación puede llevar algún tiempo","remember-me":"Recuérdame","remove-members-confirmation-message":"- | ¿Realmente desea eliminar el usuario {username} del proyecto? | ¿Realmente desea eliminar los {count} usuarios seleccionados del proyecto?","remove-members":"Eliminar miembros","remove-yourself-from-manager-confirmation-message":"¿Está seguro de que desea dejar de ser administrador del proyecto? No podrá deshacer esta acción","remove-yourself-from-manager":"Eliminar derechos de administración","rename-image":"Renombrar la imagen","rename-ontology":"Renombrar ontología","rename-project":"Renombrar proyecto","rename":"Renombrar","representative-icon-label":"Usted es una persona de contacto de este proyecto.","representative":"Persona de contacto","representatives":"Personas de contacto","rescale":"","resolution":"Resolución X/Y","restricted-mode-explanation":"Los colaboradores no podrán agregar, editar o eliminar datos del proyecto, excepto anotaciones, propiedades y descripciones en sus propias capas.","restricted":"Restringido","results":"Resultados","review-explanation":"Puede revisar las anotaciones visibles individualmente utilizando la herramienta de selección o tratarlas todas en lote con los botones a continuación.","review-layer":"Capa de revisión","review-list-visible-layers":"Las siguientes capas se muestran actualmente: {visibleLayers}.","review":"Revisión","reviewed-annotation-status-not-validated":"No validado","reviewed-annotation-status-validated":"Validado","reviewed-annotation-status":"Estado de revisión","reviewed-annotations-info-message":"Anotaciones validadas durante el proceso de revisión.","reviewed-annotations":"Anotaciones revisadas","reviewed-by":"Revisado por","reviewed-on":"Revisado el","reviewed":"Revisados","reviewers":"Revisores","role":"Papel","rotate":"Girar","run-number":"Número de ejecución","running":"En ejecución","sample-preview-of":"Vista previa de muestra de {filename}","sample-preview":"Vista previa de muestra","saturation":"Saturación","screenshot":"","search-or-create-tag":"Busque la etiqueta (o cree una nueva escribiendo su nombre y presionando Enter) ...","search-placeholder":"Buscar","search-user":"Buscar usuario...","seconds":"","see-environment-on":"Ver entorno en","see-source-code-on":"Ver código fuente en","select-all":"Seleccionar todo","select-date":"Seleccione una fecha","select-image-to-add":"Seleccione una imagen para agregar","select-layer-placeholder":"Seleccione una capa","select-layer":"Selecciona una capa","select-ontology":"Seleccione ontología","select-options":"Seleccione opciones","select":"Seleccione","send-to-all-project-members":"Enviar a todos los miembros del proyecto","send-to-some-members":"Enviar solo a algunos miembros del proyecto","set-magnification":"Establecer nivel de aumento","shortcut-general-close-modal":"Cerrar una ventana de diálogo","shortcut-general-shortcuts-modal":"","shortcut-general":"General","shortcut-text-editor-bold":"Negrita","shortcut-text-editor-italic":"Cursiva","shortcut-text-editor-underline":"Subrayado","shortcut-text-editor":"Editor de texto","shortcut-viewer-nav-drag-rotate":"Girar imagen","shortcut-viewer-nav-drag-zoom":"Acercar a la región","shortcut-viewer-nav-first-c":"Ir al primer canal","shortcut-viewer-nav-first-slice":"Ir al primer corte","shortcut-viewer-nav-first-t":"Ir al primer cuadro","shortcut-viewer-nav-first-z":"Ir al primer plano","shortcut-viewer-nav-last-c":"Ir al último canal","shortcut-viewer-nav-last-slice":"Ir al último corte","shortcut-viewer-nav-last-t":"Ir al último cuadro","shortcut-viewer-nav-last-z":"Ir al último plano","shortcut-viewer-nav-move-down":"Desplazar hacia abajo","shortcut-viewer-nav-move-left":"Desplazar hacia la izquierda","shortcut-viewer-nav-move-right":"Desplazar a la derecha","shortcut-viewer-nav-move-up":"Desplazar hacia arriba","shortcut-viewer-nav-next-c":"Ir al siguiente canal","shortcut-viewer-nav-next-image":"Ir a la siguiente imagen","shortcut-viewer-nav-next-slice":"Ir al siguiente corte","shortcut-viewer-nav-next-t":"Ir al siguiente cuadro","shortcut-viewer-nav-next-z":"Ir al siguiente plano","shortcut-viewer-nav-previous-c":"Ir al canal anterior","shortcut-viewer-nav-previous-image":"Ir a la imagen anterior","shortcut-viewer-nav-previous-slice":"Ir al corte anterior","shortcut-viewer-nav-previous-t":"Ir al cuadro anterior","shortcut-viewer-nav-previous-z":"Ir al plano anterior","shortcut-viewer-nav-zoom-in":"Aumentar escala","shortcut-viewer-nav-zoom-out":"Disminuir escala","shortcut-viewer-nav":"Visor: Navegación","shortcut-viewer-toggle-add-image":"Alternar selector de imagen","shortcut-viewer-toggle-all-annotations":"","shortcut-viewer-toggle-all-broadcast":"","shortcut-viewer-toggle-all-current":"","shortcut-viewer-toggle-all-filters":"","shortcut-viewer-toggle-all-information":"","shortcut-viewer-toggle-all-layers":"","shortcut-viewer-toggle-all-link":"","shortcut-viewer-toggle-all-ontology":"","shortcut-viewer-toggle-all-overview":"","shortcut-viewer-toggle-all-properties":"","shortcut-viewer-toggle-all-review-layer":"","shortcut-viewer-toggle-all-review":"","shortcut-viewer-toggle-all-selected-layers":"","shortcut-viewer-toggle-all-zoom":"","shortcut-viewer-toggle-annotations":"Alternar panel de anotaciones","shortcut-viewer-toggle-broadcast":"Alternar panel de transmisión","shortcut-viewer-toggle-current":"Alternar el panel de anotaciones seleccionado actualmente","shortcut-viewer-toggle-filters":"Alternar panel de color de imagen","shortcut-viewer-toggle-information":"Alternar panel de información","shortcut-viewer-toggle-layers":"Alternar panel de capas","shortcut-viewer-toggle-link":"Alternar panel de sincronización de imagen","shortcut-viewer-toggle-ontology":"Alternar panel de términos","shortcut-viewer-toggle-overview":"Alternar vista previa","shortcut-viewer-toggle-properties":"Alternar panel de propiedades","shortcut-viewer-toggle-review-layer":"","shortcut-viewer-toggle-review":"Alternar panel de revisión","shortcut-viewer-toggle-selected-layers":"","shortcut-viewer-toggle-zoom":"Alternar panel de zoom","shortcut-viewer-toggle":"Visor: Pantalla","shortcut-viewer-tool-circle":"Dibujar un circulo","shortcut-viewer-tool-copy":"","shortcut-viewer-tool-correct-add":"Correjir anotación agregando un área a mano alzada","shortcut-viewer-tool-correct-remove":"Correjir anotación eliminando un área a mano alzada","shortcut-viewer-tool-delete":"Eliminar la anotación seleccionada","shortcut-viewer-tool-fill":"Rellenar anotación","shortcut-viewer-tool-freehand-line":"Dibujar una línea a mano alzada","shortcut-viewer-tool-freehand-polygon":"Dibujar un polígono a mano alzada","shortcut-viewer-tool-line":"Dibujar una línea","shortcut-viewer-tool-modify-delete-vertex":"Eliminar un vértice con la herramienta de modificación","shortcut-viewer-tool-modify":"Modificar anotación","shortcut-viewer-tool-move":"Mover anotación","shortcut-viewer-tool-paste":"","shortcut-viewer-tool-point":"Dibujar un punto","shortcut-viewer-tool-polygon":"Dibujar un polígono","shortcut-viewer-tool-rectangle":"Dibujar un rectángulo","shortcut-viewer-tool-redo":"Rehacer acción de anotación","shortcut-viewer-tool-rescale":"","shortcut-viewer-tool-review-accept":"Aceptar anotaciones seleccionadas en modo revisión","shortcut-viewer-tool-review-reject":"Rechazar la anotación seleccionada en modo revisión","shortcut-viewer-tool-review-toggle":"Alternar capa de revisión en modo revisión","shortcut-viewer-tool-rotate":"Rotar anotación","shortcut-viewer-tool-select":"Seleccionar anotación","shortcut-viewer-tool-undo":"Deshacer acción de anotación","shortcut-viewer-tool":"Visor: Herramientas","shortcut":"Atajo de teclado","shortcuts":"Atajos","size":"Tamaño","slice":"","slide-preview-not-available":"Sin vista previa de cristal","slide-preview-of":"Vista previa de cristal de {filename}","slide-preview":"Vista previa de cristal","small":"Pequeña","software-parameters":"Parámetros del algoritmo","source-code-info":"Cytomine es un software de código abierto distribuido bajo las licencias Apache2 y LGPL 2.1. El código fuente está disponible en nuestro {githubLink}.","source-code":"Código fuente","source-provider-name":"Nombre de usuario del proveedor de código fuente","source-provider":"Proveedor de código fuente","source":"Origen","sponsors":"Patrocinadores","start-upload":"Iniciar la carga","statistics":"Estadísticas","status-comment":"Comentario","status":"Estado","step":"","storage":"Almacenamiento","string":"Cadena de caracteres","success":"Finalizado con éxito","successful-registration":"Su cuenta fue creada exitosamente. Revise su bandeja de entrada para activarla.","super-admin":"Super administrador","switch-back-to-user":"Volver a {username}","system":"Sistema","tags":"Etiquetas","term":"Término","terms-new-annotation":"Término(s) a asociar con nuevas anotaciones","terms":"Términos","the-term":"","time-period":"Periodo de tiempo","to-convert":"A convertir","to-deploy":"Desplegar","to":"Hasta","too-much-categories-to-display":"","total":"Total","tracks-new-annotation":"","tracks":"Pistas","trusted-source":"Fuente de confianza","trusted-sources":"Fuentes de confianza","type":"Tipo","ui-runnable":"Ejecutable","um-per-pixel":"µm/píxel","um-per-slice":"","um":"µm","uncategorized":"Sin categoría","uncompressed":"Sin comprimir","undo-redo":"Deshacer/Rehacer","undo":"Deshacer","unexpected-error-info-message":"Se ha producido un error inesperado","unknown":"Desconocido","unpacked":"","unpacking":"","update-source":"Actualizar fuente de confianza","update-tag":"Actualizar etiqueta","update-term":"Término de actualización","update-track":"","update-user":"Actualizar usuario","updated":"Actualizado","upload-error":"Error al cargar","upload":"Subir","uploaded-images":"","uploaded":"Subido","use-existing-ontology":"Usar ontología existente","used-in-project-no-access":"Usado en proyectos que no puedes ver","used-storage-space":"Espacio de almacenamiento utilizado","user-annotations":"Anotaciones manuales","user":"Usuario","userjob-id":"","username":"Nombre de usuario","users":"Usuarios","validate-annotation":"Validar anotación","validations":{"messages":{"_default":"Campo inválido","decimal":"Tiene que ser un número","email":"Debe ser una dirección de correo electrónico válida","is":"Confirmacion inválida","min":"Debe tener al menos {1} caracteres","positive":"Debe ser positivo","required":"Este campo es obligatorio"}},"value-key":"Clave de valor","value":"Valor","vendor":"Vendedor","version":"Versión","view-all-projects":"Ver todos los proyectos","view-linked-with":"Esta vista está vinculada con","view":"Ver","viewer-group":"Grupo de espectadores ({nbImages} imágenes)","viewer-panels":"Paneles del visor","viewer-view":"Ver {number}","vms-mrxs-upload-info":"Las imágenes en formato VMS y MRXS deben estar comprimidas en único ZIP que contenga tanto el archivo VMS/MRXS/VSI como sus archivos anidados.","wait":"Espere","warning-cannot-draw-multiple-slices":"","warning-change-applies-in-project-only":"Si cambia este valor, la modificación solo se realizará en este proyecto (no se propagará a otros proyectos que contengan la imagen)","website":"Sitio web","week":"Semana","welcome-message":"Mensaje de bienvenida","white":"Blanco","width":"Anchura","workspace":"Espacio de trabajo","x-resolution":"","y-resolution":"","x-y-resolution":"","yellow":"Amarillo","yes":"Sí","you-are-reviewing-image-since":"Estás revisando esta imagen desde {date}","you-have-validated-image-on":"Usted ha validado esta imagen el {fecha}","z-resolution":"","zip-upload-info":"Se permite que un archivo ZIP contanga múltiples imágenes (excepto para VMS y MRXS)"}')},bf11:function(e,t,n){},bfd1:function(e,t,n){"use strict";n("6d36")},bfeb:function(e,t,n){"use strict";n("1238")},c286:function(e,t,n){"use strict";n("a6f7")},c2c5:function(e,t,n){},c391:function(e,t,n){"use strict";n("cb33")},c447:function(e,t,n){},c4fb:function(e,t,n){},c51a:function(e,t,n){"use strict";n("9839")},c6f8:function(e,t,n){},c80a:function(e,t,n){"use strict";n("e6ed")},c80f:function(e,t,n){},c8a2:function(e,t,n){"use strict";n("ebe5")},c9d9:function(e,t,n){"use strict";t["a"]={CYTOMINE_CORE_HOST:"https://localhost-core",CYTOMINE_UPLOAD_HOST:"https://localhost-upload",STOP_PREVIEW_KEYWORD:"STOP_PREVIEW",DIGITAL_ZOOM_INCREMENT:4,ALGORITHMS_ENABLED:!1,PRELOADED_SLICES:50,MAX_MERGEABLE_CHANNELS:36,VIEWER_ANNOTATIONS_REFRESH_INTERVAL:1e4,MEMBERS_ACTIVITY_REFRESH_INTERVAL:3e4,PING_INTERVAL:2e4,JOB_DETAILS_REFRESH_INTERVAL:2e3,JOB_LOGS_REFRESH_INTERVAL:5e3,TASK_REFRESH_INTERVAL:2e3,STORAGE_REFRESH_INTERVAL:1e4,ONGOING_UPLOAD_REFRESH_INTERVAL:500,SAVE_POSITION_IN_IMAGE_INTERVAL:5e3,BROADCASTING_USERS_REFRESH_INTERVAL:1e4,TRACKING_REFRESH_INTERVAL:500,ANNOTATION_STROKE_COLOR:[0,0,0,1],ANNOTATION_STROKE_SELECT_COLOR:[0,153,255,1],MAX_IMAGES_FOR_FILTER:5e4,IDLE_DURATION:120,CONFIG_KEY_WELCOME:"WELCOME",PREFIX_HIDDEN_PROPERTY_KEY:"@",METADATA_PREFIXES:"",DEFAULT_PROPERTY_KEY:"@DEFAULT_PROPERTY",DEFAULT_IMAGE_CONTROLS_STEP:2,CATEGORY_ITEMS_PER_BATCH:10,ANNOTATIONS_MAX_ITEMS_PER_CATEGORY:10,WS_POSITION_KEEP_ALIVE_INTERVAL:1e4}},cb33:function(e,t,n){},cb9e:function(e,t,n){},cc03:function(e,t,n){},cd09:function(e,t,n){},cefb:function(e,t,n){},cf17:function(e,t,n){"use strict";n("6f40")},cf82:function(e,t,n){},d017:function(e,t,n){"use strict";n("3c20")},d1bf:function(e,t,n){"use strict";n("272b")},d1fa:function(e,t,n){"use strict";n("c6f8")},d216:function(e,t,n){},d264:function(e,t,n){},d30c:function(e,t,n){},d3f2:function(e,t,n){"use strict";n("e9f5"),n("db9b"),n("d3b7");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"track-tree",class:{selector:e.allowSelection,draggable:e.allowDrag,editable:e.allowEdition}},[t("sl-vue-tree",{ref:"tree",attrs:{allowMultiselect:!1},on:{select:e.select,drop:e.drop},scopedSlots:e._u([{key:"toggle",fn:function(n){var a=n.node;return[!a.data.hidden&&!a.isLeaf&&a.children.length>0?[t("i",{class:["tree-toggle","fas",a.isExpanded?"fa-angle-down":"fa-angle-right"]})]:e._e(),t("div",{staticClass:"sl-vue-tree-gap"})]}},{key:"title",fn:function(n){var a=n.node;return[a.data.hidden?t("div"):t("div",{staticClass:"tree-selector"},[e.allowSelection?t("i",{staticClass:"tree-checkbox",class:e.classNames(a)}):e._e(),t("cytomine-track",{attrs:{track:a.data}})],1)]}},{key:"sidebar",fn:function(n){var a=n.node;return[a.data.hidden?e._e():e._t("custom-sidebar",(function(){return[e.allowEdition?t("div",{staticClass:"buttons"},[t("button",{staticClass:"button is-small",on:{click:function(t){return e.startTrackUpdate(a)}}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-edit"})])]),t("button",{staticClass:"button is-small",on:{click:function(t){return e.confirmTrackDeletion(a)}}},[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"far fa-trash-alt"})])])]):e._e()]}),{track:a.data})]}}],null,!0),model:{value:e.treeNodes,callback:function(t){e.treeNodes=t},expression:"treeNodes"}}),e.noResult?e._t("no-result",(function(){return[t("em",{staticClass:"has-text-grey no-result"},[e._v(e._s(e.$t("no-result")))])]})):e._e(),e.allowEdition||e.allowNew?t("div",{staticClass:"add-track-container"},[t("button",{staticClass:"button is-small",on:{click:function(t){return e.startTrackCreation()}}},[e._v(e._s(e.$t("add-track")))])]):e._e()],2)},r=[],i=n("c7eb"),o=n("1da1"),s=n("5530"),c=(n("99af"),n("4de4"),n("caad"),n("d81d"),n("14d9"),n("fb6a"),n("a434"),n("b0c0"),n("d866"),n("910d"),n("7d54"),n("ab43"),n("a732"),n("2532"),n("159b"),n("c536")),l=n.n(c),u=n("435d"),d=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.save()}}},[t("cytomine-modal-card",{staticClass:"track-modal",attrs:{title:e.$t(e.track?"update-track":"create-track")},scopedSlots:e._u([{key:"footer",fn:function(){return[t("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")]),t("button",{staticClass:"button is-link",attrs:{disabled:e.errors.any()}},[e._v(" "+e._s(e.$t("button-save"))+" ")])]},proxy:!0}])},[t("b-field",{attrs:{label:e.$t("name"),type:{"is-danger":e.errors.has("name")},message:e.errors.first("name")}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("sketch-picker",{attrs:{presetColors:e.presetColors},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1)],1)},p=[],m=(n("25f0"),n("1246")),f=n("c345"),h=n("b286"),g={name:"track-modal",props:{track:Object,image:Object},components:{"sketch-picker":f["Sketch"],CytomineModalCard:h["a"]},$_veeValidate:{validator:"new"},data:function(){return{name:"",color:null}},computed:{presetColors:function(){return["#F44E3B","#FB9E00","#FCDC00","#68BC00","#16A5A5","#009CE0","#7B10D8","#F06292","#000","#777","#FFF"]}},methods:{randomColor:function(){return"#"+(Math.random().toString(16)+"0000000").slice(2,8)},save:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:e.track?e.update():e.create();case 6:case"end":return t.stop()}}),t)})))()},create:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new m["Track"]({name:e.name,color:e.color.hex,image:e.image.id}).save();case 3:n=t.sent,e.$notify({type:"success",text:e.$t("notif-success-track-creation")}),e.$emit("newTrack",n),e.$parent.close(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$notify({type:"error",text:e.$t("notif-error-track-creation")});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},update:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new m["Track"](e.track),n.color=e.color.hex,n.name=e.name,t.prev=3,t.next=6,n.save();case 6:e.$notify({type:"success",text:e.$t("notif-success-track-update")}),e.$emit("updateTrack",n),e.$parent.close(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),e.$notify({type:"error",text:e.$t("notif-error-track-update")});case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))()}},created:function(){this.name=this.track?this.track.name:"",this.color={hex:this.track?this.track.color:this.randomColor()}}},v=g,b=(n("5e80"),n("2877")),y=Object(b["a"])(v,d,p,!1,null,null,null),w=y.exports,j={name:"track-tree",model:{prop:"selectedNodes",event:"setSelectedNodes"},props:{tracks:{type:Array},additionalNodes:{type:Array,default:function(){return[]}},startWithAdditionalNodes:{type:Boolean,default:!1},searchString:{type:String,default:""},selectedNodes:{type:Array,default:function(){return[]}},allowSelection:{type:Boolean,default:!0},multipleSelection:{type:Boolean,default:!0},allowDrag:{type:Boolean,default:!1},allowEdition:{type:Boolean,default:!1},allowNew:{type:Boolean,default:!1},image:{type:Object,default:null}},components:{SlVueTree:l.a,CytomineTrack:u["a"]},data:function(){return{treeNodes:[],internalSelectedNodes:[],editedNode:null}},computed:{lowCaseSearchString:function(){return this.searchString.toLowerCase()},noResult:function(){return this.treeNodes.every((function(e){return e.data.hidden}))}},watch:{tracks:function(){this.makeTree()},additionalNodes:function(){this.makeTree()},selectedNodes:function(){this.internalSelectedNodes=this.selectedNodes.slice(),this.refreshNodeSelection()},lowCaseSearchString:function(){this.filter()}},methods:{makeTree:function(){if(this.tracks){var e=this.createSubTree(this.tracks.slice()),t=this.createSubTree(this.additionalNodes.slice());this.treeNodes=this.startWithAdditionalNodes?t.concat(e):e.concat(t),this.filter()}else this.treeNodes=[]},createSubTree:function(e){var t=this;return e.map((function(e){return t.createNode(e)}))},createNode:function(e){return{title:e.name,isLeaf:!1,isDraggable:this.allowDrag,isExpanded:!0,isSelected:this.internalSelectedNodes.includes(e.id),data:{id:e.id,name:e.name,color:e.color,parent:e.parent,image:e.image,hidden:!1},children:e.children&&e.children.length>0?this.createSubTree(e.children):[]}},filter:function(){var e=this.lowCaseSearchString;this.applyToAllNodes((function(t){var n=t.title.toLowerCase().indexOf(e)>=0;if(t.children){var a=t.children.some((function(e){return!e.data.hidden}));t.isExpanded=a,n=n||a}t.data.hidden=!n}))},classNames:function(e){return this.multipleSelection?e.isSelected?["fas","fa-check-square"]:["far","fa-square"]:e.isSelected?["fas","fa-dot-circle"]:["far","fa-circle"]},select:function(e,t){var n=this;this.allowSelection&&(this.clickOnTreeSelector(t.target)&&(e.forEach((function(e){if(n.multipleSelection){var t=n.internalSelectedNodes.indexOf(e.data.id);t>=0?(n.internalSelectedNodes.splice(t,1),n.$emit("unselect",e.data.id)):(n.internalSelectedNodes.push(e.data.id),n.$emit("select",e.data.id))}else n.internalSelectedNodes=[e.data.id],n.$emit("select",e.data.id)})),this.$emit("setSelectedNodes",this.internalSelectedNodes)),this.refreshNodeSelection())},refreshNodeSelection:function(){var e=this;this.allowSelection&&this.applyToAllNodes((function(t){t.isSelected=e.internalSelectedNodes.some((function(e){return e===t.data.id}))}))},clickOnTreeSelector:function(e){return!!e.classList.contains("tree-selector")||!!e.parentElement&&this.clickOnTreeSelector(e.parentElement)},applyToAllNodes:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.treeNodes;n.forEach((function(n){n.children&&t.applyToAllNodes(e,n.children),e(n)}))},startTrackCreation:function(){this.editedNode=null,this.openModal()},createTrack:function(e){this.treeNodes.push(this.createNode(e)),this.$emit("newTrack",e)},startTrackUpdate:function(e){this.editedNode=e,this.openModal()},updateTrack:function(e){this.$refs.tree.updateNode(this.editedNode.path,{data:Object(s["a"])({},e)}),this.$emit("updatedTrack",e)},openModal:function(){this.$buefy.modal.open({parent:this,component:w,props:{track:this.editedNode?this.editedNode.data:null,image:this.image},events:{newTrack:this.createTrack,updateTrack:this.updateTrack},hasModalCard:!0})},drop:function(e,t){var n=this;e.forEach(function(){var e=Object(o["a"])(Object(i["a"])().mark((function e(a){var r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="inside"===t.placement?t.node.data.id:t.node.data.parent,a.data.parent===r){e.next=13;break}return e.prev=2,e.next=5,new m["Track"](a.data).changeParent(r);case 5:n.applyToAllNodes((function(e){e.data.id===a.data.id&&(e.data.parent=r)})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),n.$notify({type:"error",text:n.$t("notif-error-track-tree-update")});case 11:e.next=14;break;case 13:n.$notify({type:"warn",text:n.$t("notif-warn-track-tree-order-not-persisted")});case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}())},confirmTrackDeletion:function(e){var t=this;this.$buefy.dialog.confirm({title:this.$t("confirm-deletion"),message:this.$t("confirm-deletion-track",{name:e.data.name}),type:"is-danger",confirmText:this.$t("button-confirm"),cancelText:this.$t("button-cancel"),onConfirm:function(){return t.deleteTrack(e)}})},deleteTrack:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m["Track"].delete(e.data.id);case 3:t.$refs.tree.remove([e.path]),t.$emit("deletedTrack",e.data.id),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),t.$notify({type:"error",text:t.$t("notif-error-track-deletion")});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},created:function(){this.internalSelectedNodes=this.selectedNodes.slice(),this.makeTree()}},k=j,_=(n("d6eb"),n("681e"),Object(b["a"])(k,a,r,!1,null,"0a743348",null));t["a"]=_.exports},d424:function(e,t,n){"use strict";n("5386")},d48b:function(e,t,n){},d6eb:function(e,t,n){"use strict";n("c2c5")},d926:function(e,t,n){"use strict";n("500c")},daa9:function(e,t,n){},db76:function(e,t,n){},dbf4:function(e,t,n){"use strict";n("88d6")},de23:function(e,t,n){"use strict";n("7efe")},de9f:function(e,t,n){},dee5:function(e,t,n){},df26:function(e,t,n){"use strict";n("e03c")},e03c:function(e,t,n){},e415:function(e,t,n){"use strict";n("de9f")},e6d1:function(e,t,n){"use strict";n("775b")},e6ed:function(e,t,n){},e8eb:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("b-taginput",{attrs:{value:e.value,data:e.filteredDomains,autocomplete:"","open-on-focus":!0,"append-to-body":!0,field:e.displayedProperty,placeholder:e.$t(e.placeholder),"allow-new":e.allowNew,"allow-duplicates":!1},on:{input:function(t){return e.$emit("input",t)},typing:function(t){return e.searchString=t},add:function(t){e.searchString=""}}})},r=[],i=(n("4de4"),n("caad"),n("d81d"),n("e9f5"),n("910d"),n("ab43"),n("d3b7"),n("ac1f"),n("00b4"),n("2532"),n("b910")),o={name:"domain-tag-input",props:{value:Array,domains:Array,identifier:{type:String,default:"id"},displayedProperty:{type:String,default:"name"},searchedProperty:{type:String,default:"name"},allowNew:{type:Boolean,default:!1},placeholder:{type:String,default:"search-placeholder"}},data:function(){return{searchString:""}},computed:{filteredDomains:function(){var e=this,t=this.value.map((function(t){return t[e.identifier]})),n=this.domains.filter((function(n){return!t.includes(n[e.identifier])}));if(""===this.searchString)return n;var a=Object(i["a"])(this.searchString);return n.filter((function(t){return a.test(t[e.searchedProperty])}))}}},s=o,c=(n("3300"),n("2877")),l=Object(c["a"])(s,a,r,!1,null,"45831b03",null);t["a"]=l.exports},e8ff:function(e,t,n){"use strict";n("44c2")},e9cd:function(e,t,n){},ebe5:function(e,t,n){},ec25:function(e,t,n){"use strict";n("5786")},ec95:function(e,t,n){},ed42:function(e,t,n){"use strict";n("b0c0");var a=function(){var e=this,t=e._self._c;return e.channel?t("span",[t("i",{staticClass:"fa fa-circle color-preview",style:{color:e.color}}),e._v(" "+e._s(e.name)+" ")]):e._e()},r=[],i=(n("99af"),{name:"ChannelName",props:{channel:Object},computed:{channelIndex:function(){return this.channel.channel||this.channel.index},color:function(){return this.channel.color||this.channel.channelColor||"#C0C0C0"},name:function(){return this.channel.name?this.channel.name:this.channel.channelName?this.channel.channelName:"".concat(this.$t("channel-abbr")," ").concat(this.channelIndex)}}}),o=i,s=(n("aac7"),n("2877")),c=Object(s["a"])(o,a,r,!1,null,"2d881ed8",null);t["a"]=c.exports},ee3e:function(e,t,n){},eeaa:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("99af"),n("a9e3");var a=n("c1df"),r=n.n(a);function i(e){if(!e)return"";if(e.algo){var t=r()(Number(e.created)).format("L LTS");return"".concat(e.softwareName," - ").concat(t)}return"".concat(e.firstname," ").concat(e.lastname," (").concat(e.username,")")}},f07d:function(e,t,n){e.exports=n.p+"img/logo-wallonie.45258121.png"},f1d1:function(e,t,n){"use strict";n("73a6")},f24c:function(e,t,n){"use strict";n("7020")},f320:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cytomine-quill-editor"},[t("div",{attrs:{id:"tooltip-container"}}),e._v(" "),t("quill-editor",{ref:"quillEditor",attrs:{value:e.value,options:e.editorOptions},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"toolbar",fn:function(){return[t("div",{attrs:{id:"toolbar"}},[t("span",{staticClass:"ql-formats"},[t("select",{staticClass:"ql-header"},[t("option",{attrs:{selected:""}},[e._v(" "+e._s(e.$t("ql-paragraph"))+" ")]),t("option",{attrs:{value:"1"}},[e._v(" "+e._s(e.$t("ql-header-1"))+" ")]),t("option",{attrs:{value:"2"}},[e._v(" "+e._s(e.$t("ql-header-2"))+" ")]),t("option",{attrs:{value:"3"}},[e._v(" "+e._s(e.$t("ql-header-3"))+" ")]),t("option",{attrs:{value:"4"}},[e._v(" "+e._s(e.$t("ql-header-4"))+" ")])])]),t("span",{staticClass:"ql-formats",attrs:{title:e.$t("ql-font")}},[t("select",{staticClass:"ql-font"},[t("option",{attrs:{selected:""}}),t("option",{attrs:{value:"serif"}}),t("option",{attrs:{value:"monospace"}})])]),t("span",{staticClass:"ql-formats"},[t("button",{staticClass:"ql-bold",attrs:{title:e.$t("ql-bold")}}),t("button",{staticClass:"ql-italic",attrs:{title:e.$t("ql-italic")}}),t("button",{staticClass:"ql-underline",attrs:{title:e.$t("ql-underline")}})]),t("span",{staticClass:"ql-formats"},[t("button",{staticClass:"ql-script",attrs:{value:"sub",title:e.$t("ql-subscript")}}),t("button",{staticClass:"ql-script",attrs:{value:"super",title:e.$t("ql-superscript")}})]),t("span",{staticClass:"ql-formats"},[t("span",{attrs:{title:e.$t("ql-font-color")}},[t("select",{staticClass:"ql-color"})]),t("span",{attrs:{title:e.$t("ql-background-color")}},[t("select",{staticClass:"ql-background"})])]),t("span",{staticClass:"ql-formats",attrs:{title:e.$t("ql-align")}},[t("select",{staticClass:"ql-align"},[t("option",{attrs:{selected:""}}),t("option",{attrs:{value:"center"}}),t("option",{attrs:{value:"right"}})])]),t("span",{staticClass:"ql-formats"},[t("button",{staticClass:"ql-indent",attrs:{value:"-1",title:e.$t("ql-indent-left")}}),t("button",{staticClass:"ql-indent",attrs:{value:"+1",title:e.$t("ql-indent-right")}})]),t("span",{staticClass:"ql-formats"},[t("button",{staticClass:"ql-list",attrs:{value:"ordered",title:e.$t("ql-ordered-list")}}),t("button",{staticClass:"ql-list",attrs:{value:"bullet",title:e.$t("ql-bullet-list")}})]),t("span",{staticClass:"ql-formats"},[t("button",{staticClass:"ql-blockquote",attrs:{title:e.$t("ql-blockquote")}}),t("button",{staticClass:"ql-code-block",attrs:{title:e.$t("ql-code-block")}})]),t("span",{staticClass:"ql-formats"},[t("button",{staticClass:"ql-clean",attrs:{title:e.$t("ql-clean-format")}})]),t("span",{staticClass:"ql-formats"},[t("button",{staticClass:"ql-link",attrs:{title:e.$t("ql-link")}}),t("button",{staticClass:"ql-image",attrs:{title:e.$t("ql-image")}}),t("button",{staticClass:"ql-video",attrs:{title:e.$t("ql-video")}})]),t("span",{staticClass:"ql-formats"},[t("span",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.expandedSpecialChars=!1},expression:"() => expandedSpecialChars = false"}],class:["ql-picker",e.expandedSpecialChars?"ql-expanded":"","ql-special-characters"],attrs:{title:e.$t("ql-special-character")},on:{click:function(t){e.expandedSpecialChars=!e.expandedSpecialChars}}},[t("span",{staticClass:"ql-picker-label",attrs:{tabindex:"0",role:"button"}},[t("svg",{attrs:{viewBox:"0 0 18 18"}},[t("polygon",{staticClass:"ql-stroke",attrs:{points:"7 11 9 13 11 11 7 11"}}),t("polygon",{staticClass:"ql-stroke",attrs:{points:"7 7 9 5 11 7 7 7"}})])]),t("span",{staticClass:"ql-picker-options"},e._l(e.specialCharacters,(function(n){return t("button",{key:n,staticClass:"special-char",on:{click:function(t){return e.insertSpecialCharacter(n)}}},[e._v(" "+e._s(n)+" ")])})),0)])])])]},proxy:!0}])})],1)},r=[],i=n("953d"),o={name:"cytomine-quill-editor",components:{quillEditor:i["quillEditor"]},props:{value:String,placeholder:String},data:function(){return{editorOptions:{bounds:"#tooltip-container",placeholder:this.placeholder||this.$t("enter-text"),modules:{toolbar:"#toolbar"}},expandedSpecialChars:!1,specialCharacters:["$","€","£","¢","¥","¤","‰","©","®","™","§","¶","Æ","æ","Œ","œ","±","×","÷","⇒","⇔","∏","∑","≃","≤","≥"]}},computed:{quill:function(){return this.$refs.quillEditor.quill}},methods:{insertSpecialCharacter:function(e){var t=this.quill.getSelection(!0);t.length>0&&this.quill.deleteText(t.index,t.length,"user"),this.quill.insertText(t.index,e,"user"),this.quill.setSelection(t.index+1)}}},s=o,c=(n("cf17"),n("2877")),l=Object(c["a"])(s,a,r,!1,null,null,null);t["a"]=l.exports},f381:function(e,t,n){},f407:function(e,t,n){"use strict";n("41fb")},f46c:function(e,t,n){"use strict";n("5e53")},f4db:function(e,t,n){"use strict";n("cefb")},f658:function(e,t,n){},f679:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"properties-wrapper"},[[t("b-field",{attrs:{grouped:"","group-multiline":""}},[e.error?t("em",[e._v(e._s(e.$t("error-fetch-properties")))]):e.properties.length>0?e._l(e.notEditedProperties,(function(n,a){return t("div",{key:n.id,staticClass:"control"},[t("b-taglist",{attrs:{attached:""}},[t("b-tag",{attrs:{type:"is-dark"}},[e._v(e._s(n.key))]),t("b-tag",[e._v(" "+e._s(n.value)+" "),e.canEdit?[t("button",{staticClass:"edit is-small",attrs:{title:e.$t("button-edit")},on:{click:function(t){return e.startPropEdition(n)}}},[t("i",{staticClass:"fas fa-pencil-alt"})]),t("button",{staticClass:"delete is-small",attrs:{title:e.$t("button-delete")},on:{click:function(t){return e.removeProp(a)}}})]:e._e()],2)],1)],1)})):t("em",[e._v(e._s(e.$t("no-properties")))]),e.canEdit?t("button",{key:"showForm",staticClass:"button is-small add-prop",on:{click:function(t){return e.addNewProp()}}},[e._v(" "+e._s(e.$t("button-add"))+" ")]):e._e()],2),e._l(e.editedProperties,(function(n,a){return t("form",{key:n.id,staticClass:"new-prop-form",on:{submit:function(t){return t.preventDefault(),e.saveProp(a)}}},[t("b-input",{attrs:{size:"is-small",placeholder:e.$t("key")},model:{value:n.key,callback:function(t){e.$set(n,"key",t)},expression:"prop.key"}}),t("b-input",{attrs:{size:"is-small",placeholder:e.$t("value")},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"prop.value"}}),t("button",{staticClass:"button is-small"},[e._v(" "+e._s(n.id?e.$t("button-save"):e.$t("button-add"))+" ")]),t("button",{staticClass:"button is-small",attrs:{type:"button"},on:{click:function(t){return e.cancelPropEdition(a)}}},[e._v(" "+e._s(e.$t("button-cancel"))+" ")])],1)}))]],2)},r=[],i=n("c7eb"),o=n("1da1"),s=(n("4de4"),n("caad"),n("d81d"),n("14d9"),n("a434"),n("e9f5"),n("910d"),n("ab43"),n("d3b7"),n("2532"),n("2ca0"),n("1246")),c=n("c9d9"),l={name:"cytomine-properties",props:{object:{type:Object},canEdit:{type:Boolean,default:!0},properties:{type:Array},error:{type:Boolean,default:!1}},data:function(){return{editedProperties:[],newPropKey:"",newPropValue:"",showNewPropForm:!1}},computed:{notEditedProperties:function(){var e=this.editedProperties.map((function(e){return e.id}));return this.properties.filter((function(t){return!e.includes(t.id)}))}},methods:{addNewProp:function(){var e=new s["Property"]({object:this.object});this.editedProperties.push(e)},removeProp:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){var a;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.properties[e],n.prev=1,n.next=4,s["Property"].delete(a.id,t.object);case 4:t.$emit("deleted",a),t.$emit("updateProperties"),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),t.$notify({type:"error",text:t.$t("notif-error-remove-prop")});case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},startPropEdition:function(e){e.oldKey=e.key,e.oldValue=e.value,this.editedProperties.splice(0,0,e)},saveProp:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){var a,r;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.editedProperties[e],!a.key.startsWith(c["a"].PREFIX_HIDDEN_PROPERTY_KEY)){n.next=4;break}return t.$notify({type:"error",text:t.$t("notif-error-invalid-key-prefix",{prefix:c["a"].PREFIX_HIDDEN_PROPERTY_KEY})}),n.abrupt("return");case 4:return r=a.isNew(),n.prev=5,n.next=8,a.save();case 8:t.editedProperties.splice(e,1),r&&t.$emit("added",a),t.$emit("updateProperties"),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](5),t.$notify({type:"error",text:t.$t("notif-error-save-prop")});case 16:case"end":return n.stop()}}),n,null,[[5,13]])})))()},cancelPropEdition:function(e){var t=this.editedProperties[e];t.key=t.oldKey,t.value=t.oldValue,this.editedProperties.splice(e,1)}}},u=l,d=(n("513a"),n("6f02"),n("2877")),p=Object(d["a"])(u,a,r,!1,null,"fa6ad84e",null);t["a"]=p.exports},fb4f:function(e,t,n){},fbb3:function(e,t,n){"use strict";n("8a4d")},fbbf:function(e,t,n){},fc1c:function(e,t,n){},fc66:function(e,t,n){},feba:function(e,t,n){"use strict";n("8db6")}});
//# sourceMappingURL=app.566433df.js.map